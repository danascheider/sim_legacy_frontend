(this.webpackJsonpskyrim_inventory_management_frontend=this.webpackJsonpskyrim_inventory_management_frontend||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports={root:"inventoryItem_root__2rIjL",collapsed:"inventoryItem_collapsed__XbkQy",toggle:"inventoryItem_toggle__18vD5",fa:"inventoryItem_fa__1_KTH",destroyIcon:"inventoryItem_destroyIcon__GsUog",header:"inventoryItem_header__z2edC",headerEditable:"inventoryItem_headerEditable__17oYm",editIcons:"inventoryItem_editIcons__1xnCg",quantity:"inventoryItem_quantity__VRNip",quantityContent:"inventoryItem_quantityContent__2ejhe",icon:"inventoryItem_icon__1h5rU",description:"inventoryItem_description__sdaMV",collapsible:"inventoryItem_collapsible__3QKAb",label:"inventoryItem_label__3m-0w",value:"inventoryItem_value__WXoRh",button:"inventoryItem_button__cpxUR"}},function(e,t,n){e.exports={root:"shoppingListItem_root__3NPoi",collapsed:"shoppingListItem_collapsed__3iHS2",toggle:"shoppingListItem_toggle__26aMd",fa:"shoppingListItem_fa__2P4jA",destroyIcon:"shoppingListItem_destroyIcon__2IBmH",header:"shoppingListItem_header__1qqqT",headerEditable:"shoppingListItem_headerEditable__2K0Ir",editIcons:"shoppingListItem_editIcons__2RoL7",quantity:"shoppingListItem_quantity__1ebyP",quantityContent:"shoppingListItem_quantityContent__24Ts-",icon:"shoppingListItem_icon__1pEqd",description:"shoppingListItem_description__mnU6z",collapsible:"shoppingListItem_collapsible__xa2wr",label:"shoppingListItem_label__2Bc9T",value:"shoppingListItem_value__9dWAL",button:"shoppingListItem_button__2k4QA"}},,,function(e,t,n){e.exports={root:"inventoryItemCreateForm_root__3XFXa",collapsed:"inventoryItemCreateForm_collapsed__3NlkQ",triggerContainer:"inventoryItemCreateForm_triggerContainer__1QFE5",triggerButton:"inventoryItemCreateForm_triggerButton__2wHoK",form:"inventoryItemCreateForm_form__3s3Gz",fieldset:"inventoryItemCreateForm_fieldset__2zhbI",input:"inventoryItemCreateForm_input__21WsN",label:"inventoryItemCreateForm_label__k0UwV",submit:"inventoryItemCreateForm_submit__1GfbP"}},function(e,t,n){e.exports={root:"shoppingListItemCreateForm_root__3B7YP",collapsed:"shoppingListItemCreateForm_collapsed__3j8GF",triggerContainer:"shoppingListItemCreateForm_triggerContainer__3IkQf",triggerButton:"shoppingListItemCreateForm_triggerButton__2HK_d",form:"shoppingListItemCreateForm_form__OXRXv",fieldset:"shoppingListItemCreateForm_fieldset__1ovw9",input:"shoppingListItemCreateForm_input__2Jire",label:"shoppingListItemCreateForm_label__qlamy",submit:"shoppingListItemCreateForm_submit__22fVU"}},,,,,,function(e,t,n){e.exports={root:"dashboardHeader_root__3lzne",bar:"dashboardHeader_bar__1XEWl",headerContainer:"dashboardHeader_headerContainer__1ZVqS",header:"dashboardHeader_header__cB1mg",headerLinkLarge:"dashboardHeader_headerLinkLarge__ED8Xx",headerLinkSmall:"dashboardHeader_headerLinkSmall__3TlC1",profile:"dashboardHeader_profile__A3WxH",profileText:"dashboardHeader_profileText__1HPKf",textTop:"dashboardHeader_textTop__2UNgU",textBottom:"dashboardHeader_textBottom__1vLtl",avatar:"dashboardHeader_avatar__2BhRu",logoutDropdown:"dashboardHeader_logoutDropdown__37Dm5",hidden:"dashboardHeader_hidden__Fkjhq",bp:"dashboardHeader_bp__2hS3f"}},,,function(e,t,n){e.exports={root:"inventoryList_root__Vi_Ik",trigger:"inventoryList_trigger__3UD-J",form:"inventoryList_form__28w0J",icon:"inventoryList_icon__2TyFK",title:"inventoryList_title__31UtA",editIcons:"inventoryList_editIcons__1FgOO",fa:"inventoryList_fa__Ubi17",collapsible:"inventoryList_collapsible__2w_LK",emptyList:"inventoryList_emptyList__H9eyu"}},function(e,t,n){e.exports={root:"shoppingList_root__2O9FT",trigger:"shoppingList_trigger__WV4fR",form:"shoppingList_form__1GdfA",icon:"shoppingList_icon__3FP5H",editIcons:"shoppingList_editIcons__gL8DA",title:"shoppingList_title__3Gulc",fa:"shoppingList_fa__hRtKq",collapsible:"shoppingList_collapsible__2Zuq5",emptyList:"shoppingList_emptyList__289Te"}},,,function(e,t,n){e.exports={root:"gameCreateForm_root__1CiVs",slideToggleTrigger:"gameCreateForm_slideToggleTrigger__47o12",form:"gameCreateForm_form__2naYf",fieldset:"gameCreateForm_fieldset__iwI0Y",fieldsetDisabled:"gameCreateForm_fieldsetDisabled__255jN",input:"gameCreateForm_input__3HuYv",button:"gameCreateForm_button__1ePIs",buttonDisabled:"gameCreateForm_buttonDisabled__1bleU"}},function(e,t,n){e.exports={root:"game_root__Wpup7",header:"game_header__2XbBS",name:"game_name__GOPSp",editIcons:"game_editIcons__1kxuu",icon:"game_icon__WCvOa",description:"game_description__KgWbf"}},function(e,t,n){e.exports={root:"gamesDropdown_root__1EUlO",header:"gamesDropdown_header__1Qiyc",input:"gamesDropdown_input__z9Zui",trigger:"gamesDropdown_trigger__3A35t",hidden:"gamesDropdown_hidden__7-IH5",dropdown:"gamesDropdown_dropdown__1kXtE"}},,function(e,t,n){e.exports={root:"dashboardLayout_root__2dfR_",title:"dashboardLayout_title__1yGVn",hr:"dashboardLayout_hr__29GgW",container:"dashboardLayout_container__3AwFx",headerContainer:"dashboardLayout_headerContainer__15_gZ",titleContainer:"dashboardLayout_titleContainer__3J8Iz"}},function(e,t,n){e.exports={root:"inventoryListCreateForm_root__YS9ZM",button:"inventoryListCreateForm_button__1Gumt",fieldset:"inventoryListCreateForm_fieldset__3fWUO",fieldsetDisabled:"inventoryListCreateForm_fieldsetDisabled__2bNHj",input:"inventoryListCreateForm_input__QLJRI",buttonDisabled:"inventoryListCreateForm_buttonDisabled__2Obwi"}},function(e,t,n){e.exports={root:"shoppingListCreateForm_root__iSFdV",button:"shoppingListCreateForm_button__2so-6",fieldset:"shoppingListCreateForm_fieldset__1BLSp",fieldsetDisabled:"shoppingListCreateForm_fieldsetDisabled__2V4n7",input:"shoppingListCreateForm_input__3hAzq",buttonDisabled:"shoppingListCreateForm_buttonDisabled__1USkv"}},,function(e,t,n){e.exports={root:"flashMessage_root__2sPxp",hidden:"flashMessage_hidden__cxPrx",content:"flashMessage_content__3iY0s",header:"flashMessage_header__Vx_Jr",messageList:"flashMessage_messageList__3V9SA",msg:"flashMessage_msg__3Wquk"}},function(e,t,n){e.exports={root:"modalForm_root__1vkew",fieldset:"modalForm_fieldset__3Y2iw",input:"modalForm_input__2W8sl",submit:"modalForm_submit__2K3FT",label:"modalForm_label__1q219"}},function(e,t,n){e.exports={noLists:"inventoryPageContent_noLists__1QGJ6",link:"inventoryPageContent_link__1PCIJ",inventoryList:"inventoryPageContent_inventoryList__uCqhc",loading:"inventoryPageContent_loading__10Uba",error:"inventoryPageContent_error__1saJh"}},function(e,t,n){e.exports={noLists:"shoppingListsPageContent_noLists__1yLrC",link:"shoppingListsPageContent_link__1seef",shoppingList:"shoppingListsPageContent_shoppingList__3X_TT",loading:"shoppingListsPageContent_loading__1Rj5P",error:"shoppingListsPageContent_error__3KtOr"}},,,,function(e,t,n){e.exports={root:"homePage_root__15tty",container:"homePage_container__3kQJo",header:"homePage_header__3EV45",login:"homePage_login__3ala0"}},function(e,t,n){e.exports={root:"loginPage_root__2Vf7z",errorMessage:"loginPage_errorMessage__8uTVC",container:"loginPage_container__2xdLK",button:"loginPage_button__1pDsX"}},,function(e,t,n){e.exports={root:"modal_root__QSEqe",content:"modal_content__1tQ-X",title:"modal_title__1efUU",subtitle:"modal_subtitle__4395I"}},function(e,t,n){e.exports={root:"gamesPage_root__oSBqG",noGames:"gamesPage_noGames__1CUVF",games:"gamesPage_games__2Q2dQ",loading:"gamesPage_loading__1Q0HG"}},function(e,t,n){e.exports={root:"listEditForm_root__-eP94",input:"listEditForm_input__1fVQ3",submit:"listEditForm_submit__167Mr",fa:"listEditForm_fa__4K6Td"}},function(e,t,n){e.exports={root:"notFoundPage_root__131Oh",container:"notFoundPage_container__38cw2",header:"notFoundPage_header__BhS9L",link:"notFoundPage_link__2cDdM"}},,,function(e,t,n){e.exports={button:"logoutDropdown_button__3hRUK",body:"logoutDropdown_body__NiLPw",googleLogout:"logoutDropdown_googleLogout__J9YSG"}},,,,,,function(e,t,n){e.exports={root:"navigationMosaic_root__2CDUx",card:"navigationMosaic_card__3hEln"}},function(e,t,n){e.exports={root:"dashboardPage_root__oVxx1",loading:"dashboardPage_loading__2vZsl"}},function(e,t,n){e.exports={root:"loadingError_root__1A6gy",text:"loadingError_text__3auLV"}},,,,,,,function(e,t,n){e.exports={root:"gamesDropdownOption_root__1Itlx"}},,function(e,t,n){e.exports={root:"navigationCard_root__1-FD3"}},,,function(e,t,n){e.exports={createForm:"inventoryPage_createForm__1YVpo"}},function(e,t,n){e.exports={createForm:"shoppingListsPage_createForm__35weW"}},,,,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(60),s=n.n(a),i=(n(79),n(15)),c=n(39),l=n(11),u=n(4),d=n(3),h=n(90),f="https://sim-api.danascheider.com",m="_sim_google_session";function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"401 Unauthorized";this.message=e,this.code=401,this.name="AuthorizationError",this.stack=(new Error).stack}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"404 Not Found";this.message=e,this.code=404,this.name="NotFoundError",this.stack=(new Error).stack}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"405 Method Not Allowed";this.message=e,this.code=405,this.name="MethodNotAllowedError",this.stack=(new Error).stack}b.prototype=new Error,p.prototype=new Error,g.prototype=new Error;var j,v={"Content-Type":"application/json"},O=function(e){return{Authorization:"Bearer ".concat(e)}},y=function(e){return Object(u.a)(Object(u.a)({},O(e)),v)},_=function(e,t,n){var r="".concat(f,"/games/").concat(t,"/shopping_lists"),o=JSON.stringify({shopping_list:n});return fetch(r,{method:"POST",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))},x=function(e,t,n){var r="".concat(f,"/shopping_lists/").concat(t),o=JSON.stringify({id:t,shopping_list:n});return fetch(r,{method:"PATCH",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p("Shopping list not found. Try refreshing the page to resolve this issue.");return e.json().then((function(t){return{status:e.status,json:t}}))}))},w=function(e,t){var n="".concat(f,"/shopping_lists/").concat(t);return fetch(n,{method:"DELETE",headers:O(e)}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p("Shopping list not found. Try refreshing the page to resolve this issue.");if(405===e.status)throw new g("Aggregate lists are managed automatically and cannot be deleted manually.");return 204===e.status?{status:e.status,json:null}:e.json().then((function(t){return{status:e.status,json:t}}))}))},C=function(e,t,n){var r="".concat(f,"/shopping_lists/").concat(t,"/shopping_list_items");return fetch(r,{method:"POST",headers:y(e),body:JSON.stringify({shopping_list_item:n})}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p("You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.");return e.json().then((function(t){return{status:e.status,json:t}}))}))},S=function(e,t){var n="".concat(f,"/shopping_list_items/").concat(t);return fetch(n,{method:"DELETE",headers:O(e)}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p("You tried to delete a list item that doesn't exist. Try refreshing to fix this issue.");if(405===e.status)throw new g;return 204===e.status?{status:e.status,json:null}:e.json().then((function(t){return{status:e.status,json:t}}))}))},N=function(e,t,n){var r="".concat(f,"/games/").concat(t,"/inventory_lists"),o=JSON.stringify({inventory_list:n});return fetch(r,{method:"POST",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))},L=function(e,t,n){var r="".concat(f,"/inventory_lists/").concat(t),o=JSON.stringify({inventory_list:n});return fetch(r,{method:"PATCH",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))},E=function(e,t){var n="".concat(f,"/inventory_lists/").concat(t);return fetch(n,{method:"DELETE",headers:O(e)}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return 204===e.status?{status:e.status,json:null}:e.json().then((function(t){return{status:e.status,json:t}}))}))},k=function(e,t,n){var r="".concat(f,"/inventory_lists/").concat(t,"/inventory_items"),o=JSON.stringify({inventory_item:n});return fetch(r,{method:"POST",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))},I=function(e,t,n){var r="".concat(f,"/inventory_items/").concat(t),o=JSON.stringify({inventory_item:n});return fetch(r,{method:"PATCH",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))},D=function(e,t){var n="".concat(f,"/inventory_items/").concat(t);return fetch(n,{method:"DELETE",headers:O(e)}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return 204===e.status?{status:e.status,json:null}:e.json().then((function(t){return{status:e.status,json:t}}))}))},F=function(e){console.error("Error signing out: ",e.message)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;if(window.gapi&&window.gapi.auth2){var n=window.gapi.auth2.getAuthInstance();null!==n?n.then((function(){return n.disconnect()})).then(e,t):e()}e()},U=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).STORYBOOK||!1,R=!!Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).STORYBOOK,P={home:"/",login:"/login",dashboard:{main:"/dashboard",games:"/dashboard/games",shoppingLists:"/dashboard/shopping_lists",inventory:"/dashboard/inventory"}},A=[P.dashboard.main,P.dashboard.games,P.dashboard.shoppingLists,P.dashboard.inventory],W=[P.dashboard.shoppingLists,P.dashboard.inventory],V=P,M=n(0),q="done",Y=Object(r.createContext)(),G=function(e){var t=e.children,n=e.overrideValue,o=void 0===n?{}:n,a=Object(l.h)().pathname,s=Object(h.a)([m]),i=Object(d.a)(s,3),c=i[0],p=i[1],g=i[2],j=Object(r.useState)({type:"info",message:""}),v=Object(d.a)(j,2),y=v[0],_=v[1],x=Object(r.useState)(!1),w=Object(d.a)(x,2),C=w[0],S=w[1],N=Object(r.useState)({}),L=Object(d.a)(N,2),E=L[0],k=L[1],I=Object(r.useState)(!1),D=Object(d.a)(I,2),F=D[0],R=D[1],P=Object(r.useState)(o.profileData),W=Object(d.a)(P,2),G=W[0],z=W[1],H=Object(r.useState)(o.shouldRedirectTo),B=Object(d.a)(H,2),K=B[0],J=B[1],Q=Object(r.useState)(o.profileLoadState||"loading"),X=Object(d.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useRef)(!0),te=Object(r.useCallback)((function(){return g(m)}),[g]),ne=Object(r.useCallback)((function(e){ee.current&&J(e),ee.current=!1}),[]),re=Object(r.useCallback)((function(){return A.indexOf(a)>-1}),[a]),oe=Object(r.useCallback)((function(){return!o.profileData&&c[m]&&re()}),[o.profileData,c,re]),ae=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V.login,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;T((function(){te(),t&&t(),re()&&ne(e)}))}),[te,re,ne]),se=Object(u.a)({token:c[m],profileData:G,removeSessionCookie:te,setSessionCookie:function(e){return p(m,e)},profileLoadState:Z,setShouldRedirectTo:ne,logOutAndRedirect:ae,flashVisible:C,flashAttributes:y,setFlashVisible:S,setFlashAttributes:_,setModalVisible:R,setModalAttributes:k,modalVisible:F,modalAttributes:E},o);return Object(r.useEffect)((function(){re()&&!c[m]&&ee.current&&ae()}),[re,c,ae]),Object(r.useEffect)((function(){oe()?function(e){var t="".concat(f,"/users/current");return fetch(t,{headers:O(e)}).then((function(e){if(401===e.status)throw new b;return e.json().then((function(t){return{status:e.status,json:t}}))}))}(c[m]).then((function(e){var t=e.status,n=e.json;if(ee.current){if(200!==t)throw new Error("Internal Server Error: ",n.errors[0]);z(n),o.profileLoadState||$(q)}})).catch((function(e){ae()})):U&&!o.profileLoadState&&$(q)}),[re,ae,o.profileLoadState,oe,c]),Object(r.useEffect)((function(){return function(){return ee.current=!1}}),[]),Object(M.jsx)(Y.Provider,{value:se,children:K?Object(M.jsx)(l.a,{to:K}):t})},z=n(7),H="loading",B="done",K="error",J=Object(r.createContext)(),Q=function(e){var t=e.colorScheme,n=e.children;return Object(M.jsx)(J.Provider,{value:t,children:n})},X=function(){return new URLSearchParams(Object(l.h)().search)},Z=Object(r.createContext)(),$=function(e){var t=e.children,n=e.overrideValue,o=void 0===n?{}:n,a=X(),s=oe(),i=s.token,c=s.logOutAndRedirect,l=s.setFlashAttributes,h=s.setFlashVisible,m=se().games,j=Object(r.useMemo)((function(){return m&&m.length?parseInt(a.get("game_id")||m[0].id):null}),[m,a]),v=Object(r.useState)(o.shoppingLists||[]),N=Object(d.a)(v,2),L=N[0],E=N[1],k=Object(r.useState)(H),I=Object(d.a)(k,2),D=I[0],F=I[1],T=Object(r.useRef)(!1);o.shoppingLists&&(delete o.shoppingLists,T.current=!0);var U=Object(r.useRef)(!0),R=function(e,t){var n=e.list_items.find((function(e){return e.description.toLowerCase()===t.description.toLowerCase()})),r=Object(z.a)(e.list_items);if(n){var o=e.list_items.indexOf(n);r.splice(o,1,t)}else r.unshift(t);return e.list_items=r,Object(u.a)({},e)},P=function(e){return L.find((function(t){return!!t.list_items.find((function(t){return t.id===e}))}))},A=function(e,t){var n=Object(u.a)({},e),r=Object(z.a)(e.list_items),o=e.list_items.find((function(e){return e.id===t})),a=e.list_items.indexOf(o);return r.splice(a,1),n.list_items=r,n},W=Object(r.useCallback)((function(){i&&!T.current?function(e,t){var n="".concat(f,"/games/").concat(t,"/shopping_lists");return fetch(n,{headers:O(e)}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))}(i,j).then((function(e){var t=e.status,n=e.json;if(200!==t){var r=n.errors?"Error ".concat(t," while fetching shopping lists: ").concat(n.errors):"Unknown error ".concat(t," while fetching shopping lists");throw new Error(r)}U.current&&(E(n),!o.shoppingListLoadingState&&F(B))})).catch((function(e){401===e.code?c(V.login,(function(){return U.current=!1})):404===e.code&&U.current?(l({type:"error",message:"We couldn't find the game you're looking for."}),h(!0),!o.shoppingListLoadingState&&F(K)):U.current&&!o.shoppingListLoadingState&&F(K)})):U.current&&!o.shoppingListLoadingState&&F(B)}),[i,o.shoppingListLoadingState,l,h,j,c]),q=Object(u.a)({shoppingLists:L,shoppingListLoadingState:D,performShoppingListUpdate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.onSuccess,o=n.onNotFound,a=n.onUnprocessableEntity,s=n.onUnauthorized,u=n.onInternalServerError;x(i,e,{title:t}).then((function(t){var n=t.status,o=t.json;if(U.current)if(200===n){var s=L.map((function(t){return t.id===e?o:t}));E(s),r&&r()}else{if(422!==n)throw new Error(o.errors?"Error ".concat(n," when updating shopping list: ").concat(o.errors):"Unknown error ".concat(n," when updating shopping list"));l({type:"error",message:o.errors,header:"".concat(o.errors.length," error(s) prevented your changes from being saved:")}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){U.current=!1,s&&s()})):404===e.code?(l({type:"error",message:"Oops! The shopping list you wanted to update could not be found. Try refreshing the page to fix this issue."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to update your shopping list. Unfortunately, we don't know more than that yet. We're working on it!"}),u&&u())}))},performShoppingListCreate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onSuccess,r=t.onUnauthorized,o=t.onNotFound,a=t.onUnprocessableEntity,s=t.onInternalServerError;_(i,j,{title:e}).then((function(e){var t=e.status,r=e.json;if(201===t){if(Array.isArray(r)&&2===r.length)E(r);else if(r&&"object"===typeof r){var o=Object(z.a)(L);o.splice(1,0,r),E(o)}l({type:"success",message:"Success! Your shopping list was created."}),n&&n()}else{if(422!==t)throw new Error(r.errors?"Error ".concat(t," while creating shopping list: ").concat(r.errors):"Unknown error ".concat(t," while creating shopping list"));l({type:"error",message:r.errors,header:"".concat(r.errors.length," error(s) prevented your shopping list from being created:")}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){U.current=!1,r&&r()})):404===e.code?(l({type:"error",message:"The game you wanted to create a shopping list for could not be found. Try refreshing the page to fix this issue."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!"}),s&&s())}))},performShoppingListDestroy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onSuccess,r=t.onUnauthorized,o=t.onNotFound,a=t.onInternalServerError;w(i,e).then((function(t){var r=t.status,o=t.json;if(U.current)if(204===r)E([]),l({type:"success",message:'Since it was the last list for this game, the "All Items" list has been deleted as well.',header:"Your shopping list has been deleted."}),n&&n();else{if(200!==r){var a=o.errors?"Error ".concat(r," when deleting shopping list: ").concat(o.errors):"Unknown error ".concat(r," when deleting shopping list ").concat(e);throw new Error(a)}var s=L.filter((function(t){return t.id!==e})).map((function(e){return!0===e.aggregate?o:e}));E(s),l({type:"success",message:"Your shopping list has been deleted."}),n&&n()}})).catch((function(e){401===e.code?c(V.login,(function(){U.current=!1,r&&r()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!"}),a&&a())}))},performShoppingListItemCreate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.onSuccess,o=n.onNotFound,a=n.onUnprocessableEntity,s=n.onUnauthorized,u=n.onInternalServerError;C(i,e,t).then((function(e){var t=e.status,n=e.json;if(U.current)if(200===t||201===t){for(var o=Object(z.a)(L),s=function(e){var t=L.find((function(t){return t.id===n[e].list_id})),r=L.indexOf(t),a=R(t,n[e]);o[r]=a},i=0;i<n.length;i++)s(i);E(o),l(201===t?{type:"success",message:"Success! Your shopping list item has been created."}:{type:"success",message:"Success! Your new shopping list item has been combined with another item with the same description."}),r&&r()}else{if(422!==t){var c=n.errors?"Error ".concat(t," when creating shopping list item: ").concat(n.errors):"Unknown error ".concat(t," when creating shopping list item");throw new Error(c)}l({type:"error",message:n.errors,header:"".concat(n.errors.length," error(s) prevented your shopping list item from being created:")}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){U.current=!1,s&&s()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!"}),u&&u())}))},performShoppingListItemUpdate:function(e,t,n){var r=n.onSuccess,o=n.onNotFound,a=n.onUnprocessableEntity,s=n.onUnauthorized,u=n.onInternalServerError;(function(e,t,n){var r="".concat(f,"/shopping_list_items/").concat(t);return fetch(r,{method:"PATCH",headers:y(e),body:JSON.stringify({shopping_list_item:n})}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p("You tried to update a list item that doesn't exist. Try refreshing to fix this issue.");if(405===e.status)throw new g("Items on aggregate shopping lists cannot be updated through the API");return e.json().then((function(t){return{status:e.status,json:t}}))}))})(i,e,t).then((function(t){var n=t.status,o=t.json;if(U.current)if(200===n){for(var s=Object(z.a)(L),i=function(e){var t=L.find((function(t){return t.id===o[e].list_id})),n=R(t,o[e]),r=L.indexOf(t);s[r]=n},c=0;c<o.length;c++)i(c);E(s),l({type:"success",message:"Success! Your shopping list item was updated."}),r&&r()}else{if(422!==n){var u=o.errors?"Error ".concat(n," updating item ").concat(e,": ").concat(o.errors):"Unknown error ".concat(n," updating item ").concat(e);throw new Error(u)}l({type:"error",message:o.errors,header:"".concat(o.errors.length," error(s) prevented your shopping list item from being updated:")}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){U.current=!1,s&&s()})):404===e.code&&U.current?(l({type:"error",message:"Oops! We couldn't find the shopping list item you wanted to update. Sorry! Try refreshing the page to solve this problem."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to update your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!"}),u&&u())}))},performShoppingListItemDestroy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onSuccess,r=t.onNotFound,o=t.onUnauthorized,a=t.onInternalServerError;S(i,e).then((function(t){var r=t.status,o=t.json;if(200!==r&&204!==r){var a=o.errors?"Error ".concat(r," when deleting shopping list item ").concat(e,": ").concat(o.errors):"Unknown error ".concat(r," when deleting shopping list item ").concat(e);throw new Error(a)}var s,i=P(e),c=L.indexOf(i),l=Object(z.a)(L);if(200===r)s=R(L[0],o);else{var u=i.list_items.find((function(t){return t.id===e})),d=L[0].list_items.find((function(e){return e.description.toLowerCase()===u.description.toLowerCase()}));s=A(L[0],d.id)}var h=A(i,e);l[0]=s,l.splice(c,1,h),E(l),n&&n()})).catch((function(e){401===e.code?c(V.login,(function(){U.current=!1,o&&o()})):404===e.code&&U.current?(l({type:"error",message:"Oops! We couldn't find the shopping list item you wanted to delete. Sorry! Try refreshing the page to solve this problem."}),r&&r()):(U.current&&l({type:"error",message:"Something unexpected happened while trying to delete your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!"}),a&&a())}))}},o);return Object(r.useEffect)((function(){j&&U.current&&W()}),[W,j]),Object(r.useEffect)((function(){return function(){return U.current=!1}}),[]),Object(M.jsx)(Z.Provider,{value:q,children:t})},ee=Object(r.createContext)(),te=function(e){var t=e.children,n=e.overrideValue,o=void 0===n?{}:n,a=X(),s=oe(),i=s.token,c=s.logOutAndRedirect,l=s.setFlashAttributes,h=s.setFlashVisible,m=se().games,g=Object(r.useMemo)((function(){return m&&m.length?parseInt(a.get("game_id")||m[0].id):null}),[m,a]),j=Object(r.useState)(o.inventoryLists||[]),v=Object(d.a)(j,2),y=v[0],_=v[1],x=Object(r.useState)(H),w=Object(d.a)(x,2),C=w[0],S=w[1],F=Object(r.useRef)(!1);o.inventoryLists&&(delete o.inventoryLists,F.current=!0);var T=Object(r.useRef)(!0),U=function(e,t){var n=e.list_items.find((function(e){return e.description.toLowerCase()===t.description.toLowerCase()})),r=Object(z.a)(e.list_items);if(n){var o=e.list_items.indexOf(n);r.splice(o,1,t)}else r.unshift(t);return e.list_items=r,Object(u.a)({},e)},R=Object(r.useCallback)((function(e){return y.find((function(t){return!!t.list_items.find((function(t){return t.id===e}))}))}),[y]),P=function(e,t){var n=Object(u.a)({},e),r=Object(z.a)(e.list_items),o=e.list_items.find((function(e){return e.id===t})),a=e.list_items.indexOf(o);return r.splice(a,1),n.list_items=r,n},A=Object(r.useCallback)((function(){i&&!F.current&&function(e,t){var n="".concat(f,"/games/").concat(t,"/inventory_lists");return fetch(n,{headers:O(e)}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))}(i,g).then((function(e){var t=e.status,n=e.json;if(T.current){if(200!==t){var r=n.errors?"Error ".concat(t," while fetching inventory lists: ").concat(n.errors):"Unknown error ".concat(t," while fetching inventory lists");throw new Error(r)}_(n),!o.inventoryListLoadingState&&S(B)}})).catch((function(e){401===e.code?c(V.login,(function(){return T.current=!1})):404===e.code&&T.current?(l({type:"error",message:"We couldn't find the game you're looking for."}),h(!0),!o.inventoryListLoadingState&&S(K)):T.current&&!o.inventoryListLoadingState&&S(K)}))}),[i,c,l,h,o.inventoryListLoadingState,g]),W=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onSuccess,r=t.onNotFound,o=t.onUnprocessableEntity,a=t.onUnauthorized,s=t.onInternalServerError;N(i,g,{title:e}).then((function(e){var t=e.status,r=e.json;if(201===t){if(Array.isArray(r)&&2===r.length)_(r);else if(r&&"object"===typeof r){var a=Object(z.a)(y);a.splice(1,0,r),_(a)}l({type:"success",message:"Success! Your inventory list was created."}),n&&n()}else{if(422!==t)throw new Error(r.errors?"Error ".concat(t," while creating inventory list: ").concat(r.errors):"Unknown error ".concat(t," while creating inventory list"));l({type:"error",message:r.errors,header:"".concat(r.errors.length," error(s) prevented your inventory list from being created:")}),o&&o()}})).catch((function(e){401===e.code?c(V.login,(function(){T.current=!1,a&&a()})):404===e.code?(l({type:"error",message:"The game you wanted to create an inventory list for could not be found. Try refreshing the page to fix this issue."}),r&&r()):(l({type:"error",message:"Something unexpected happened while trying to create your inventory list. Unfortunately, we don't know more than that yet. We're working on it!"}),s&&s())}))}),[i,g,l,y,c]),q=Object(r.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.onSuccess,o=n.onNotFound,a=n.onUnprocessableEntity,s=n.onUnauthorized,u=n.onInternalServerError;L(i,e,{title:t}).then((function(t){var n=t.status,o=t.json;if(T.current)if(200===n){var s=y.map((function(t){return t.id===e?o:t}));_(s),r&&r()}else{if(422!==n)throw new Error(o.errors?"Error ".concat(n," when updating inventory list: ").concat(o.errors):"Unknown error ".concat(n," when updating inventory list"));l({type:"error",message:o.errors,header:"".concat(o.errors.length," error(s) prevented your changes from beings saved:")}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){T.current=!1,s&&s()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the inventory list you wanted to update. Try refreshing the page to fix this issue."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to update your inventory list. Unfortunately, we don't know more than that yet. We're working on it!"}),u&&u())}))}),[i,y,c,l]),Y=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onSuccess,r=t.onNotFound,o=t.onInternalServerError,a=t.onUnauthorized;E(i,e).then((function(t){var r=t.status,o=t.json;if(T.current)if(204===r)_([]),l({type:"success",header:"Success! Your inventory list has been deleted.",message:'Since it was your last list for this game, the "All Items" list has been deleted as well.'}),n&&n();else{if(200!==r){var a=o.errors?"Error ".concat(r," when deleting inventory list ").concat(e,": ").concat(o.errors):"Unknown error ".concat(r," when deleting inventory list ").concat(e);throw new Error(a)}var s=y.filter((function(t){return t.id!==e})).map((function(e){return!0===e.aggregate?o:e}));_(s),l({type:"success",message:"Your inventory list has been deleted."}),n&&n()}})).catch((function(e){401===e.code?c(V.login,(function(){T.current=!1,a&&a()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the inventory list you wanted to delete. Sorry! Try refreshing the page to solve this issue."}),r&&r()):(l({type:"error",message:"Something unexpected happened while trying to delete your inventory list. Unfortunately, we don't know more than that yet. We're working on it!"}),o&&o())}))}),[i,y,c,l]),G=Object(r.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.onSuccess,o=n.onNotFound,a=n.onUnprocessableEntity,s=n.onUnauthorized,u=n.onInternalServerError;k(i,e,t).then((function(t){var n=t.status,o=t.json;if(T.current)if(200===n||201===n){for(var s=Object(z.a)(y),i=function(e){var t=y.find((function(t){return t.id===o[e].list_id})),n=y.indexOf(t),r=U(t,o[e]);s[n]=r},c=0;c<o.length;c++)i(c);_(s),l(201===n?{type:"success",message:"Success! Your inventory item has been created."}:{type:"success",message:"Success! Your new inventory item has been combined with another item with the same description."}),r&&r()}else{if(422!==n){var u=o.errors&&o.errors.length?"Error ".concat(n," creating item for inventory list ").concat(e,": ").concat(o.errors):"Unknown error ".concat(n," creating list item for inventory list ").concat(e);throw new Error(u)}l({type:"error",header:"".concat(o.errors.length," error(s) prevented your inventory item from being created:"),message:o.errors}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){T.current=!1,s&&s()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the inventory list you wanted to add an item to. Sorry! Try refreshing the page to solve this issue."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to create your inventory item. Unfortunately, we don't know more than that yet. We're working on it!"}),u&&u())}))}),[i,y,c,l]),J=Object(r.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.onSuccess,o=n.onNotFound,a=n.onUnprocessableEntity,s=n.onInternalServerError,u=n.onUnauthorized;I(i,e,t).then((function(t){var n=t.status,o=t.json;if(T.current)if(200===n){for(var s=Object(z.a)(y),i=function(e){var t=y.find((function(t){return t.id===o[e].list_id})),n=U(t,o[e]),r=y.indexOf(t);s[r]=n},c=0;c<o.length;c++)i(c);_(s),l({type:"success",message:"Success! Your inventory item was updated."}),r&&r()}else{if(422!==n){var u=o&&o.errors&&o.errors.length?"Error ".concat(n," updating inventory item ").concat(e,": ").concat(o.errors):"Unknown error ".concat(n," when updating inventory item ").concat(e);throw new Error(u)}l({type:"error",header:"".concat(o.errors.length," error(s) prevented your inventory item from being updated:"),message:o.errors}),a&&a()}})).catch((function(e){401===e.code?c(V.login,(function(){T.current=!1,u&&u()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the inventory item you wanted to update. Try refreshing the page to fix this issue."}),o&&o()):(l({type:"error",message:"Something unexpected happened while trying to update your inventory item. Unfortunately, we don't know more than that yet. We're working on it!"}),s&&s())}))}),[i,y,l,c]),Q=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onSuccess,r=t.onNotFound,o=t.onInternalServerError,a=t.onUnauthorized;D(i,e).then((function(t){var r=t.status,o=t.json;if(200!==r&&204!==r){var a=o&&o.errors&&o.errors.length?"Error ".concat(r," updating inventory item ").concat(e,": ").concat(o.errors):"Error ".concat(r," updating inventory item ").concat(e);throw new Error(a)}var s,i=R(e),c=y.indexOf(i),l=Object(z.a)(y);if(200===r)s=U(y[0],o);else{var u=i.list_items.find((function(t){return t.id===e})),d=y[0].list_items.find((function(e){return e.description.toLowerCase()===u.description.toLowerCase()}));s=P(y[0],d.id)}var h=P(i,e);l[0]=s,l.splice(c,1,h),_(l),n&&n()})).catch((function(e){401===e.code?c(V.login,(function(){T.current=!1,a&&a()})):404===e.code?(l({type:"error",message:"Oops! We couldn't find the inventory item you wanted to delete. Try refreshing the page to fix this issue."}),r&&r()):(l({type:"error",message:"Something unexpected happened while trying to delete your inventory item. Unfortunately, we don't know more than that yet. We're working on it!"}),o&&o())}))}),[i,y,R,c,l]),Z=Object(u.a)({inventoryLists:y,inventoryListLoadingState:C,performInventoryListCreate:W,performInventoryListUpdate:q,performInventoryListDestroy:Y,performInventoryItemCreate:G,performInventoryItemUpdate:J,performInventoryItemDestroy:Q},o);return Object(r.useEffect)((function(){g&&T.current&&A()}),[A,g]),Object(r.useEffect)((function(){return function(){return T.current=!1}}),[]),Object(M.jsx)(ee.Provider,{value:Z,children:t})},ne=function(e,t){var n=Object(r.useContext)(e);if(!n)throw new Error(t);return n},re=function(){return ne(J,"useColorScheme must be used within a ColorProvider")},oe=function(){return ne(Y,"useAppContext must be used within a AppProvider")},ae=function(){return ne(Z,"useShoppingListsContext must be used within a ShoppingListsProvider")},se=function(){return ne(ce,"useGamesContext must be used within a GamesProvider")},ie=function(){return ne(ee,"useInventoryListsContext must be used within an InventoryListsProvider")},ce=Object(r.createContext)(),le=function(e){var t=e.children,n=e.overrideValue,o=void 0===n?{}:n,a=oe(),s=a.token,i=a.logOutAndRedirect,c=a.setFlashAttributes,l=Object(r.useState)(o.games||[]),h=Object(d.a)(l,2),m=h[0],g=h[1],j=Object(r.useState)(o.gameLoadingState||H),v=Object(d.a)(j,2),_=v[0],x=v[1],w=Object(r.useRef)(!0),C=Object(r.useRef)(!1);o.games&&(delete o.games,C.current=!0);var S=Object(r.useCallback)((function(){s&&!C.current&&function(e){var t="".concat(f,"/games");return fetch(t,{headers:O(e)}).then((function(e){if(401===e.status)throw new b;return e.json().then((function(t){return{status:e.status,json:t}}))}))}(s).then((function(e){var t=e.status,n=e.json;if(200!==t){var r=n.errors?"Error ".concat(t," when fetching games: ").concat(n.errors):"No game data returned from SIM";throw new Error(r)}w.current&&(g(n),!o.gameLoadingState&&x(B))})).catch((function(e){401===e.code?i(V.login,(function(){return w.current=!1})):w.current&&x(K)}))}),[s,o.gameLoadingState,i]),N=Object(r.useCallback)((function(e,t){var n=t.onSuccess,r=t.onUnprocessableEntity,o=t.onUnauthorized,a=t.onInternalServerError;(function(e,t){var n="".concat(f,"/games"),r=JSON.stringify({game:t});return fetch(n,{method:"POST",headers:y(e),body:r}).then((function(e){if(401===e.status)throw new b;return e.json().then((function(t){return{status:e.status,json:t}}))}))})(s,e).then((function(e){var t=e.status,o=e.json;if(201===t){if(w.current){var a=Object(z.a)(m);a.unshift(o),g(a)}c({type:"success",message:"Success! Your game has been created."}),n&&n()}else{if(422!==t)throw new Error(o.errors?"Error ".concat(t," when creating game: ").concat(o.errors):"Unknown error ".concat(t," when creating game"));c({type:"error",header:"".concat(o.errors.length," error(s) prevented your game from being created:"),message:o.errors}),r&&r()}})).catch((function(e){401===e.code?i(V.login,(function(){w.current=!1,o&&o()})):(w.current&&c({type:"error",message:"Something unexpected happened while creating your game. Unfortunately, we don't know more than that yet. We're working on it!"}),a&&a())}))}),[s,m,c,i]),L=Object(r.useCallback)((function(e,t,n){var r=n.onSuccess,o=n.onUnprocessableEntity,a=n.onNotFound,l=n.onInternalServerError,u=n.onUnauthorized;(function(e,t,n){var r="".concat(f,"/games/").concat(t),o=JSON.stringify({game:n});return fetch(r,{method:"PATCH",headers:y(e),body:o}).then((function(e){if(401===e.status)throw new b;if(404===e.status)throw new p;return e.json().then((function(t){return{status:e.status,json:t}}))}))})(s,e,t).then((function(t){var n=t.status,a=t.json;if(200===n){if(w.current){var s=m.map((function(t){return parseInt(t.id)===parseInt(e)?a:t}));g(s),c({type:"success",message:"Success! Your game has been updated."})}r&&r()}else{if(422!==n)throw new Error(a.errors?"Error ".concat(n," while updating game: ").concat(a.errors):"Error ".concat(n," while updating game"));w.current&&c({type:"error",message:a.errors,header:"".concat(a.errors.length," error(s) prevented your game from being updated:")}),o&&o()}})).catch((function(e){401===e.code?i(V.login,(function(){w.current=!1,u&&u()})):404===e.code?(c({type:"error",message:"Oops! We couldn't find the game you wanted to update. Sorry! Try refreshing the page to solve this problem."}),a&&a()):(c({type:"error",message:"Something unexpected happened while trying to update your game. Unfortunately, we don't know more than that yet. We're working on it!"}),l&&l())}))}),[s,m,c,i]),E=Object(r.useCallback)((function(e,t){var n=t.onSuccess,r=t.onUnauthorized,o=t.onInternalServerError;(function(e,t){var n="".concat(f,"/games/").concat(t);return fetch(n,{method:"DELETE",headers:O(e)}).then((function(e){if(401===e.status)throw new b;return e}))})(s,e).then((function(t){if(204!==t.status&&404!==t.status||!w.current)throw new Error("Error ".concat(t.status," while destroying game ").concat(e));var r=m.find((function(t){return parseInt(t.id)===parseInt(e)})),o=m.indexOf(r),a=Object(z.a)(m);a.splice(o,1),g(a),c({type:"success",message:"Your game has been deleted."}),n&&n()})).catch((function(e){401===e.code?i(V.login,(function(){w.current=!1,r&&r()})):(w.current&&c({type:"error",message:"Something unexpected happened while trying to delete your game. Unfortunately, we don't know more than that yet. We're working on it!"}),o&&o())}))}),[s,m,i,c]),k=Object(u.a)({games:m,gameLoadingState:_,performGameCreate:N,performGameUpdate:L,performGameDestroy:E},o);return Object(r.useEffect)((function(){w.current&&S()}),[S]),Object(r.useEffect)((function(){return function(){return w.current=!1}}),[]),Object(M.jsx)(ce.Provider,{value:k,children:t})},ue=n(41),de=n.n(ue),he=function(){var e=oe(),t=e.token,n=e.setShouldRedirectTo,o=e.removeSessionCookie,a=Object(r.useRef)(!0),s=Object(r.useCallback)((function(){t&&!R&&function(e){var t="".concat(f,"/auth/verify_token");return fetch(t,{headers:O(e)}).then((function(e){if(401===e.status)throw new b;return e}))}(t).then((function(e){return 500===e.status?e.json():null})).then((function(e){if(e)throw new Error("Internal Server Error: ",e.errors[0]);n(V.dashboard.main),a.current=!1})).catch((function(e){T((function(){return o()}))}))}),[t,o,n]);return Object(r.useEffect)((function(){return s(),function(){return a.current=!1}}),[t,s]),Object(M.jsx)("div",{className:de.a.root,children:Object(M.jsxs)("div",{className:de.a.container,children:[Object(M.jsx)("h1",{className:de.a.header,children:"Skyrim Inventory Management"}),Object(M.jsx)(i.b,{className:de.a.login,to:V.login,children:"Log in with Google"})]})})},fe=n(64),me=n.n(fe),be=n(42),pe=n.n(be),ge=function(){var e=oe(),t=e.token,n=e.setSessionCookie,o=e.removeSessionCookie,a=e.setShouldRedirectTo,s=Object(r.useState)(null),i=Object(d.a)(s,2),c=i[0],l=i[1],u=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){return u.current=!1}})),Object(M.jsxs)("div",{className:pe.a.root,children:[c?Object(M.jsx)("p",{className:pe.a.errorMessage,children:c}):null,Object(M.jsx)("div",{className:pe.a.container,children:Object(M.jsx)(me.a,{className:pe.a.button,clientId:"891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com",buttonText:"Log In With Google",onSuccess:function(e){var t=e.tokenId;t&&(n(t),a(V.dashboard.main),u.current=!1)},onFailure:function(e){t&&o(),l("Something went wrong! Please try logging in again.")},redirectUri:"".concat("https://sim.danascheider.com").concat(V.dashboard.main)})})]})},je={schemeColorDarkest:"#ffbf00",schemeColorDark:"#ffcb32",schemeColorLight:"#ffd866",schemeColorLightest:"#fff2cc",hoverColorDark:"#e5ab00",hoverColorLight:"#ffc519",hoverColorLightest:"#ffebb2",textColorPrimary:"#4c3900",textColorSecondary:"#4c3900",textColorTertiary:"#7f5700",borderColor:"#cc9800"},ve={schemeColorDarkest:"#e83f6f",schemeColorDark:"#ec658b",schemeColorLight:"#f18ba8",schemeColorLightest:"#fad8e2",hoverColorDark:"#d03863",hoverColorLight:"#ea527d",hoverColorLightest:"#f5b2c5",textColorPrimary:"#fff",textColorSecondary:"#fff",textColorTertiary:"#451221",borderColor:"#b93258"},Oe={schemeColorDarkest:"#2274a5",schemeColorDark:"#4e8fb7",schemeColorLight:"#7aabc9",schemeColorLightest:"#d2e3ed",hoverColorDark:"#1e6894",hoverColorLight:"#3881ae",hoverColorLightest:"#bcd5e4",textColorPrimary:"#fff",textColorSecondary:"#fff",textColorTertiary:"#0d2e42",borderColor:"#1b5c84"},ye={schemeColorDarkest:"#00a323",schemeColorDark:"#32b54e",schemeColorLight:"#66c77b",schemeColorLightest:"#ccecd3",hoverColorDark:"#00921f",hoverColorLight:"#19ac38",hoverColorLightest:"#b2e3bd",textColorPrimary:"#fff",textColorSecondary:"#fff",textColorTertiary:"#00410e",borderColor:"#00821c"},_e={schemeColorDarkest:"#20e2e9",schemeColorDark:"#62eaef",schemeColorLight:"#8ff0f4",schemeColorLightest:"#d2f9fa",hoverColorDark:"#11cbd1",hoverColorLight:"#4ce7ed",hoverColorLightest:"#bcf6f8",textColorPrimary:"#094345",textColorSecondary:"#094345",textColorTertiary:"#094345",borderColor:"#19b4ba"},xe=[je,ve,Oe,ye,_e],we=n.p+"static/media/googleIcon.9432a66b.svg",Ce=n(50),Se=n.n(Ce),Ne=function(e){var t=e.className,n=e.logOutFunction,o=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){return o.current=!1}})),Object(M.jsx)("div",{className:t,children:Object(M.jsx)("button",{className:Se.a.button,onClick:function(e){e.preventDefault(),n((function(){o.current=!1}))},children:Object(M.jsx)("div",{className:Se.a.body,children:Object(M.jsxs)("div",{className:Se.a.googleLogout,children:[Object(M.jsx)("img",{src:we,alt:"Google logo"}),"Log Out With Google"]})})})})},Le=n.p+"static/media/anonymousAvatar.36d1acc1.jpg",Ee=n(19),ke=n.n(Ee),Ie=function(){var e=oe(),t=e.profileData,n=e.logOutAndRedirect,o=Object(r.useState)(!1),a=Object(d.a)(o,2),s=a[0],c=a[1],l=Object(r.useRef)(!0),u=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c(!1),n(V.home,(function(){e&&e(),l.current=!1}))}),[n]);return Object(r.useEffect)((function(){return function(){return l.current=!1}}),[]),Object(M.jsx)("div",{className:ke.a.root,children:Object(M.jsxs)("div",{className:ke.a.bar,children:[Object(M.jsx)("span",{className:ke.a.headerContainer,children:Object(M.jsxs)("h1",{className:ke.a.header,children:[Object(M.jsxs)(i.b,{className:ke.a.headerLinkLarge,to:V.dashboard.main,children:["Skyrim Inventory",Object(M.jsx)("br",{className:ke.a.bp})," Management"]}),Object(M.jsx)(i.b,{className:ke.a.headerLinkSmall,to:V.dashboard.main,children:"S. I. M."})]})}),t?Object(M.jsxs)("button",{className:ke.a.profile,onClick:function(){return c(!s)},children:[Object(M.jsxs)("div",{className:ke.a.profileText,children:[Object(M.jsx)("p",{className:ke.a.textTop,children:t.name}),Object(M.jsx)("p",{className:ke.a.textBottom,children:t.email})]}),Object(M.jsx)("img",{className:ke.a.avatar,src:t.image_url||Le,alt:"User avatar",referrerPolicy:"no-referrer"})]}):null,Object(M.jsx)(Ne,{className:s?ke.a.logoutDropdown:ke.a.hidden,logOutFunction:u})]})})},De=n(6),Fe=n(5),Te=n.n(Fe),Ue=n(10),Re=n(17),Pe=n(65),Ae=n.n(Pe),We=function(e){var t=e.name,n=e.className,r=e.onClick,o=e.onKeyDown,a=e.ariaSelected;return Object(M.jsx)("li",{className:Te()(Ae.a.root,n),onClick:r,onKeyDown:o,role:"option",tabIndex:0,"aria-selected":a,children:t.length>24?"".concat(t.substring(0,23),"..."):t})},Ve=n(28),Me=n.n(Ve),qe=function(){var e=Object(l.g)(),t=X(),n=oe().setFlashVisible,o=se(),a=o.games,s=o.gameLoadingState,i=o.performGameCreate,c=Object(r.useState)(null),u=Object(d.a)(c,2),h=u[0],f=u[1],m=Object(r.useState)(!1),b=Object(d.a)(m,2),p=b[0],g=b[1],j=Object(r.useState)(""),v=Object(d.a)(j,2),O=v[0],y=v[1],_=Object(r.useRef)(null),x=function(){return g(!0)},w=Object(r.useCallback)((function(){return g(!1)}),[g]),C={"--button-background-color":Oe.schemeColorDarkest,"--button-hover-color":Oe.hoverColorDark,"--button-text-color":Oe.textColorPrimary,"--button-border-color":Oe.borderColor},S=Object(r.useCallback)((function(t){f(t),y(t.name);var n=new URLSearchParams("game_id=".concat(t.id));e.push({search:n.toString()}),w()}),[e,w]),N=function(e){return!(h&&!a.length)&&(h?h.id===e:e===a[0].id)};return Object(r.useEffect)((function(){var e=parseInt(t.get("game_id"));if(a.length&&e){if(h&&h.id===e)return;var n=e?a.find((function(t){return t.id===e})):a[0];S(n||a[0])}else a.length&&!h&&S(a[0])}),[S,h,a,t]),Object(r.useEffect)((function(){var t=function(t){if(_.current!==t.relatedTarget&&!_.current.contains(t.relatedTarget)){w();var n=a.find((function(e){return e.name.toLowerCase()===O.toLowerCase()}));if(n){f(n),y(n.name);var r=new URLSearchParams("game_id=".concat(n.id));e.push({search:r.toString()})}else h&&y(h.name)}};return document.addEventListener("focusout",t),function(){document.removeEventListener("focusout",t)}}),[a,f,h,y,O,e,w]),Object(M.jsxs)("div",{ref:_,className:Me.a.root,style:C,"data-testid":"games-dropdown",children:[Object(M.jsxs)("div",{className:Me.a.header,role:"combobox","aria-haspopup":"listbox","aria-owns":"gamesListbox","aria-controls":"gamesListbox","aria-expanded":p,children:[Object(M.jsx)("input",{className:Te()(Me.a.input,"focusable"),type:"text",disabled:"done"!==s,value:O,onChange:function(e){return y(e.currentTarget.value)},placeholder:"No games available","aria-autocomplete":"list","aria-multiline":!1,"aria-controls":"gamesListbox",onFocus:x,onClick:x,onKeyDown:function(t){if("Enter"===t.key){var r=a.find((function(e){return e.name.toLowerCase()===t.target.value.toLowerCase()}));if(r)S(r);else i({name:O},{onSuccess:function(){e.push({search:""}),f(null),t.target.blur()},onUnprocessableEntity:function(){n(!0),t.target.blur()},onInternalServerError:function(){n(!0),t.target.blur()}})}else if("ArrowUp"===t.key){t.preventDefault();var o=document.getElementsByClassName("focusable");o[o.length-1].focus()}else"ArrowDown"===t.key?(t.preventDefault(),document.getElementsByClassName("focusable")[1].focus()):"Escape"===t.key&&w()}}),Object(M.jsx)("button",{className:Me.a.trigger,onClick:function(){return g(!p)},onKeyDown:function(e){"ArrowDown"===e.key&&(e.preventDefault(),document.getElementsByClassName("focusable")[1].focus())},disabled:"done"!==s,"data-testid":"games-dropdown-trigger",children:Object(M.jsx)(Ue.a,{className:Me.a.fa,icon:Re.a})})]}),Object(M.jsx)("ul",{id:"gamesListbox",className:Te()(Me.a.dropdown,Object(De.a)({},Me.a.hidden,!p||!a.length)),role:"listbox",children:a.map((function(e,t){var n=e.id,r=e.name;return Object(M.jsx)(We,{className:"focusable",onClick:function(){return S({id:n,name:r})},onKeyDown:function(e){if("Enter"===e.key||" "===e.key)S({id:n,name:r});else if("ArrowUp"===e.key){e.preventDefault();var t=Object(z.a)(document.getElementsByClassName("focusable")),o=t.indexOf(e.target);t[o-1].focus()}else if("ArrowDown"===e.key){e.preventDefault();var a=Object(z.a)(document.getElementsByClassName("focusable")),s=a.indexOf(e.target);a[s<a.length-1?s+1:0].focus()}},ariaSelected:N(n),name:r},"".concat(r.toLowerCase().replace(" ","_"),"-").concat(n))}))})]})},Ye=n(30),Ge=n.n(Ye),ze=function(e){var t=e.title,n=e.includeGameSelect,r=void 0!==n&&n,o=e.children;return Object(M.jsxs)("div",{className:Ge.a.root,children:[Object(M.jsxs)("div",{className:Ge.a.container,children:[t?Object(M.jsxs)("div",{className:Ge.a.headerContainer,children:[Object(M.jsxs)("div",{className:Ge.a.titleContainer,children:[Object(M.jsx)("h2",{className:Ge.a.title,children:t}),r&&Object(M.jsx)(qe,{})]}),Object(M.jsx)("hr",{className:Ge.a.hr})]}):null,o]}),Object(M.jsx)(Ie,{})]})},He=n(66),Be=n.n(He),Ke=function(e){var t=e.className,n=e.type,r=void 0===n?"bubbles":n,o=e.color,a=e.height,s=e.width;return Object(M.jsx)(Be.a,{className:t,type:r,color:o,height:a,width:s})},Je=n(67),Qe=n.n(Je),Xe=function(e){var t=e.href,n=e.children,r=re(),o={"--background-color":r.schemeColorDarkest,"--hover-color":r.hoverColorDark,"--text-color":r.textColorPrimary};return Object(M.jsx)(i.b,{className:Qe.a.root,to:t,style:o,children:n})},Ze=n(56),$e=n.n(Ze),et=function(e){var t=e.cardArray;return Object(M.jsx)("div",{className:$e.a.root,children:t.map((function(e){var t=e.colorScheme,n=e.href,r=e.children,o=e.key;return Object(M.jsx)("div",{className:$e.a.card,children:Object(M.jsx)(Q,{colorScheme:t,children:Object(M.jsx)(Xe,{href:n,children:r})})},o)}))})},tt=n(57),nt=n.n(tt),rt=[{colorScheme:je,href:V.dashboard.games,children:"Your Games",key:"your-games"},{colorScheme:ve,href:V.dashboard.shoppingLists,children:"Your Shopping Lists",key:"your-shopping-lists"},{colorScheme:Oe,href:V.dashboard.inventory,children:"Your Inventory",key:"your-inventory"},{colorScheme:ye,href:"#",children:"Nav Link 4",key:"nav-link-4"},{colorScheme:_e,href:"#",children:"Nav Link 5",key:"nav-link-5"}],ot=function(){var e=oe(),t=e.token,n=e.profileLoadState,o=e.setShouldRedirectTo,a=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return t||R||(o(V.login),a.current=!1),function(){return a.current=!1}}),[t,o]),Object(M.jsx)(ze,{children:"done"===n?Object(M.jsx)("div",{className:nt.a.root,children:Object(M.jsx)(et,{cardArray:rt})}):Object(M.jsx)(Ke,{className:nt.a.loading,type:"bubbles",color:je.schemeColorDarkest,height:"15%",width:"15%"})})},at=n(34),st=n.n(at),it=(j={},Object(De.a)(j,"success","#329932"),Object(De.a)(j,"info","#4e6d8e"),Object(De.a)(j,"error","#cc0000"),Object(De.a)(j,"warning","#b0a723"),j),ct=function(){var e=oe(),t=e.flashVisible,n=e.setFlashVisible,o=e.flashAttributes,a=o.type,s=o.header,i=o.message,c={"--text-color":it[a]};return Object(r.useEffect)((function(){t&&setTimeout((function(){n(!1)}),4e3)}),[t,n]),Object(M.jsxs)("div",{className:Te()(st.a.root,Object(De.a)({},st.a.hidden,!t)),style:c,children:[s&&Object(M.jsx)("p",{className:st.a.header,children:s}),"string"===typeof i?i:Object(M.jsx)("ul",{className:st.a.messageList,children:i.map((function(e,t){return Object(M.jsx)("li",{className:st.a.msg,children:e},"message-".concat(t))}))})]})},lt=n(16),ut=n(24),dt=n(49),ht=n(44),ft=n.n(ht),mt=function(e){var t=e.children,n=e.title,o=e.subtitle,a=oe().setModalVisible,s=Object(r.useRef)(null),i=Object(r.useRef)(!0),c=Object(r.useCallback)((function(e){return s.current&&(s.current===e||s.current.contains(e))}),[]),l=Object(r.useCallback)((function(e){("click"===e.type&&!c(e.target)||"keydown"===e.type&&"Escape"===e.key)&&(a(!1),i.current=!1)}),[c,a]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",l),function(){return window.removeEventListener("keydown",l)}}),[l]),Object(r.useEffect)((function(){return document.getElementsByTagName("body")[0].classList.add("modal-open"),function(){document.getElementsByTagName("body")[0].classList.remove("modal-open"),i.current=!1}}),[]),Object(M.jsx)("div",{role:"dialog",className:ft.a.root,onClick:l,children:Object(M.jsxs)("div",{ref:s,className:ft.a.content,children:[Object(M.jsx)("h3",{className:ft.a.title,children:n}),o&&Object(M.jsx)("p",{className:ft.a.subtitle,children:o}),t]})})},bt=["title","subtitle"],pt=function(e){return function(t){var n=t.title,r=t.subtitle,o=void 0===r?null:r,a=Object(dt.a)(t,bt);return Object(M.jsx)(mt,{title:n,subtitle:o,children:Object(M.jsx)(e,Object(u.a)({},a))})}},gt=n(35),jt=n.n(gt),vt=["tag","label","name"],Ot=function(e){var t=e.modelName,n=e.buttonLabel,o=e.onSubmit,a=e.fields,s=e.buttonColor,i=void 0===s?null:s,c=Object(r.useRef)(!0),l=Object(r.useRef)(null),d=Object(r.useRef)(null),h=Object(r.useRef)(i||xe[Math.floor(Math.random()*xe.length)]),f={"--button-background-color":h.current.schemeColorDarkest,"--button-text-color":h.current.textColorPrimary,"--button-hover-color":h.current.hoverColorDark,"--button-border-color":h.current.borderColor};return Object(r.useEffect)((function(){return d.current&&d.current.focus(),function(){return c.current=!1}}),[]),Object(M.jsxs)("form",{ref:l,className:jt.a.root,style:f,onSubmit:o,"data-testid":"".concat(t,"-form"),children:[a.map((function(e,n){var r=e.tag,o=e.label,a=e.name,s=Object(dt.a)(e,vt);return 0===n&&(s.ref=d),Object(M.jsxs)("fieldset",{className:jt.a.fieldset,children:[Object(M.jsx)("label",{className:jt.a.label,htmlFor:a,children:o}),Object(M.jsx)(r,Object(u.a)({className:jt.a.input,name:a},s))]},"".concat(t,"-").concat(a))})),Object(M.jsx)("button",{className:jt.a.submit,type:"submit",children:n})]})},yt=[{name:"name",tag:"input",label:"Name",type:"text",placeholder:"Name",inputMode:"text",pattern:"^\\s*[A-Za-z0-9 \\-',]*\\s*$",title:"Name can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes"},{name:"description",tag:"input",label:"Description",type:"text",placeholder:"Description",inputMode:"text"}],_t=function(e){var t=e.type,n=e.currentAttributes,o=void 0===n?{}:n,a=oe(),s=a.setFlashVisible,i=a.setModalVisible,c=se(),d=c.performGameCreate,h=c.performGameUpdate,f=Object(l.g)(),m=Object(r.useRef)(!0),b=yt.map((function(e){return o[e.name]?Object(u.a)({defaultValue:o[e.name]},e):e}));return Object(r.useEffect)((function(){return function(){return m.current=!1}}),[]),Object(M.jsx)(Ot,{modelName:"game",buttonLabel:"create"===t?"Create Game":"Update Game",onSubmit:function(e){e.preventDefault(),s(!1);var n=function(){s(!0),i(!1),m.current=!1},r={onUnprocessableEntity:n,onInternalServerError:n,onNotFound:n,onUnauthorized:function(){return m.current=!1}},a={name:e.target.elements.name.value,description:e.target.elements.description.value};for(var c in a)a[c]===o[c]&&delete a[c];if("create"===t){r.onSuccess=function(){W.indexOf(f.location.pathname)>-1?n():(i(!1),m.current=!1)},d(a,r)}else r.onSuccess=n,h(o.id,a,r)},fields:b})},xt=n(27),wt=n.n(xt),Ct=function(e){var t=e.gameId,n=e.name,o=e.description,a=Object(r.useState)(0),s=Object(d.a)(a,2),i=s[0],c=s[1],l=oe(),u=l.setFlashAttributes,h=l.setFlashVisible,f=l.setModalVisible,m=l.setModalAttributes,b=se().performGameDestroy,p=Object(r.useRef)(!0),g=Object(r.useRef)(null),j=Object(r.useRef)(null),v=Object(r.useRef)(null);return Object(r.useEffect)((function(){return function(){return p.current=!1}}),[]),Object(M.jsxs)("div",{className:wt.a.root,children:[Object(M.jsxs)("div",{className:wt.a.header,onClick:function(e){var t,n;e&&(t=g,n=e.target,t.current&&(t.current===n||t.current.contains(n)))||c(Date.now)},children:[Object(M.jsxs)("span",{ref:g,className:wt.a.editIcons,children:[Object(M.jsx)("button",{ref:v,className:wt.a.icon,onClick:function(e){h(!1);window.confirm("Are you sure you want to delete this game? This cannot be undone. You will lose all data associated with the game you delete.")?b(t,{onSuccess:function(){h(!0),p.current=!1},onInternalServerError:function(){return p.current&&h(!0)}}):(u({type:"info",message:"Your game was not deleted."}),h(!0))},"data-testid":"game-destroy-icon",children:Object(M.jsx)(Ue.a,{className:wt.a.fa,icon:Re.c})}),Object(M.jsx)("button",{ref:j,className:wt.a.icon,onClick:function(){h(!1);var e={id:t,name:n,description:o},r=pt(_t);m({Tag:r,props:{title:"Edit Game",type:"edit",currentAttributes:e}}),f(!0)},"data-testid":"game-edit-icon",children:Object(M.jsx)(Ue.a,{className:wt.a.fa,icon:ut.b})})]}),Object(M.jsx)("h3",{className:wt.a.name,children:n})]}),Object(M.jsx)(lt.a,{toggleEvent:i,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsx)("div",{className:wt.a.collapsible,ref:t,children:Object(M.jsx)("p",{className:wt.a.description,children:o||"This game has no description."})})}})]})},St=n(26),Nt=n.n(St),Lt=function(e){var t=e.disabled,n=oe().setFlashVisible,o=se().performGameCreate,a=Object(r.useState)(0),s=Object(d.a)(a,2),i=s[0],c=s[1],l=Object(r.useRef)(null),u=Object(r.useRef)(null),h=Object(r.useRef)(!0),f={"--button-color":Oe.schemeColorDark,"--button-text-color":Oe.textColorPrimary,"--button-border-color":Oe.borderColor,"--button-hover-color":Oe.hoverColorLight},m=function(){return h.current&&c(Date.now)},b=function(e){e.preventDefault(),n(!1);var t={name:e.target.elements.name.value,description:e.target.elements.description.value},r=function(){n(!0),l.current&&l.current.reset(),m()};o(t,{onSuccess:r,onUnprocessableEntity:function(){return n(!0)},onInternalServerError:r,onUnauthorized:function(){return h.current=!1}})};return Object(r.useEffect)((function(){return function(){return h.current=!1}}),[]),Object(M.jsxs)("div",{className:Nt.a.root,style:f,children:[Object(M.jsx)("h3",{className:Nt.a.slideToggleTrigger,onClick:m,children:"Create Game..."}),Object(M.jsx)(lt.a,{toggleEvent:i,onExpanded:function(){return u.current.focus()},collapsed:!0,children:function(e){var n=e.setCollapsibleElement;return Object(M.jsx)("div",{ref:n,children:Object(M.jsxs)("form",{ref:l,className:Nt.a.form,"data-testid":"game-create-form",onSubmit:b,children:[Object(M.jsx)("fieldset",{className:Te()(Nt.a.fieldset,Object(De.a)({},Nt.a.fieldsetDisabled,t)),disabled:t,children:Object(M.jsx)("input",{ref:u,className:Nt.a.input,type:"text",name:"name",placeholder:"Name","aria-label":"Name",pattern:"^\\s*[A-Za-z0-9 \\-',]*\\s*$",title:"Name can contain only alphanumeric characters, spaces, commas, hyphens, and apostrophes"})}),Object(M.jsx)("fieldset",{className:Te()(Nt.a.fieldset,Object(De.a)({},Nt.a.fieldsetDisabled,t)),disabled:t,children:Object(M.jsx)("input",{className:Nt.a.input,type:"text",name:"description",placeholder:"Description","aria-label":"Description"})}),Object(M.jsx)("button",{className:Te()(Nt.a.button,Object(De.a)({},Nt.a.buttonDisabled,t)),type:"submit",disabled:t,children:"Create"})]})})}})]})},Et=n(58),kt=n.n(Et),It=function(e){var t=e.modelName;return Object(M.jsx)("div",{className:kt.a.root,children:Object(M.jsxs)("p",{className:kt.a.text,children:["There was an error loading your ",t,". It may have been on our end. We're sorry!"]})})},Dt=n(45),Ft=n.n(Dt),Tt=function(){var e=oe(),t=e.modalVisible,n=e.modalAttributes,r=se(),o=r.games,a=r.gameLoadingState;return Object(M.jsxs)(ze,{title:"Your Games",children:[t&&Object(M.jsx)(n.Tag,Object(u.a)({},n.props)),Object(M.jsxs)("div",{className:Ft.a.root,children:[Object(M.jsx)(ct,{}),o&&0===o.length&&a===B&&Object(M.jsx)("p",{className:Ft.a.noGames,children:"You have no games."}),a===B&&Object(M.jsx)(Lt,{disabled:a===H||a===K}),o&&o.length>0&&a===B&&Object(M.jsx)("div",{className:Ft.a.games,children:o.map((function(e){var t=e.id,n=e.name,r=e.description;return Object(M.jsx)(Ct,{gameId:t,name:n,description:r},n)}))}),a===H&&Object(M.jsx)(Ke,{type:"bubbles",className:Ft.a.loading,color:je.schemeColorDarkest,height:"15%",width:"15%"}),a===K&&Object(M.jsx)(It,{modelName:"games"})]})]})},Ut=n(31),Rt=n.n(Ut),Pt=function(e){var t=e.disabled,n=oe().setFlashVisible,o=ie().performInventoryListCreate,a=Object(r.useState)(""),s=Object(d.a)(a,2),i=s[0],c=s[1],l={"--button-color":Oe.schemeColorDark,"--button-text-color":Oe.textColorPrimary,"--button-border-color":Oe.borderColor,"--button-hover-color":Oe.hoverColorLight};return Object(M.jsx)("div",{className:Rt.a.root,style:l,children:Object(M.jsx)("form",{"data-testid":"inventory-list-create-form",onSubmit:function(e){e.preventDefault(),n(!1);var t=e.target.elements.title.value,r=function(){c(""),n(!0)};o(t,{onSuccess:r,onNotFound:r,onUnprocessableEntity:function(){return n(!0)},onInternalServerError:r})},children:Object(M.jsxs)("fieldset",{className:Te()(Rt.a.fieldset,Object(De.a)({},Rt.a.fieldsetDisabled,t)),disabled:t,children:[Object(M.jsx)("input",{className:Rt.a.input,type:"text",name:"title",placeholder:"Title","aria-label":"Title",value:i,onChange:function(e){var t=e.currentTarget.value;c(t)},pattern:"^\\s*[A-Za-z0-9 \\-',]*\\s*$",title:"Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes"}),Object(M.jsx)("button",{className:Te()(Rt.a.button,Object(De.a)({},Rt.a.buttonDisabled,t)),type:"submit",children:"Create"})]})})})},At=["a","an","the","and","but","for","at","by","from","with","to","in","of","into","onto","on","without","within"],Wt=function(e){if(!e)return"";var t=e.toLowerCase().split(" ");return t.map((function(e,n){return At.indexOf(e)>-1&&-1===[1,t.length].indexOf(n)?e:function(e){var t=e[0].toUpperCase();return"".concat(t).concat(e.slice(1))}(e)})).join(" ")},Vt=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],a=Object(r.useRef)(null),s=Object(r.useRef)(null),i=function(e){return s.current&&s.current.contains(e)},c=function(e){"Escape"===e.key&&o(!1)},l=function(e){var t;t=e.target,a.current&&a.current.contains(t)||i(e.target)?i(e.target)&&o(!n):o(!1)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",c,!0),document.addEventListener("click",l,!0),function(){document.removeEventListener("keydown",c,!0),document.removeEventListener("click",l,!0)}})),{componentRef:a,triggerRef:s,isComponentVisible:n,setIsComponentVisible:o}},Mt=n(72),qt=function(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),o=n[0],a=n[1];return Object(r.useLayoutEffect)((function(){a(e.current.getBoundingClientRect())}),[e]),Object(Mt.a)(e,(function(e){return a(e.contentRect)})),o},Yt=n(46),Gt=n.n(Yt),zt=function(e){var t=e.formRef,n=e.maxTotalWidth,o=e.className,a=e.title,s=e.onSubmit,i=function(e){var t=document.createElement("canvas").getContext("2d");t.font="21px Quattrocento Sans";var r=b||n,o=1.1*t.measureText(e).width;return Math.min(o,r)},c=Object(r.useState)(a),l=Object(d.a)(c,2),u=l[0],h=l[1],f=Object(r.useState)(null),m=Object(d.a)(f,2),b=m[0],p=m[1],g=Object(r.useState)("".concat(i(a),"px")),j=Object(d.a)(g,2),v=j[0],O=j[1],y=Object(r.useRef)(!0),_=Object(r.useRef)(null),x=Object(r.useRef)(null),w=re(),C={"--scheme-color":w.schemeColorDarkest,"--text-color":w.textColorPrimary,"--border-color":w.borderColor,"--icon-hover-color":w.schemeColorLightest};return Object(r.useEffect)((function(){return _.current.focus(),function(){return y.current=!1}}),[]),Object(r.useEffect)((function(){if(y.current)return x.current?void p(n-x.current.offsetWidth):p(n)}),[n]),Object(M.jsxs)("form",{className:Te()(o,Gt.a.root),style:C,ref:t,onSubmit:s,children:[Object(M.jsx)("input",{className:Gt.a.input,onClick:function(e){return e.stopPropagation()},onChange:function(e){if(y.current){var t=e.currentTarget.value;h(t),O("".concat(i(t),"px"))}},type:"text",name:"title","aria-label":"Title",ref:_,style:{width:v},value:u,pattern:"^\\s*[A-Za-z0-9 \\-',]*\\s*$",title:"Title can only contain alphanumeric characters, spaces, hyphens, commas, and apostrophes"}),Object(M.jsx)("button",{className:Gt.a.submit,ref:x,name:"submit",type:"submit",children:Object(M.jsx)(Ue.a,{className:Gt.a.fa,icon:ut.a})})]})},Ht=[{name:"quantity",tag:"input",label:"Quantity",type:"number",placeholder:"Quantity",inputMode:"numeric",min:1,required:!0},{name:"unitWeight",tag:"input",label:"Unit Weight",type:"number",step:.1,min:0,placeholder:"Unit Weight",inputMode:"decimal"},{name:"notes",tag:"textarea",label:"Notes",type:"textarea",placeholder:"This item has no notes",inputMode:"text"}],Bt=function(e){var t=e.buttonColor,n=e.currentAttributes,o=oe(),a=o.setFlashVisible,s=o.setModalVisible,i=ie().performInventoryItemUpdate,c=Object(r.useRef)(!0),l=Ht.map((function(e){return Object(u.a)({defaultValue:n[e.name]},e)}));return Object(r.useEffect)((function(){return function(){return c.current=!1}}),[]),Object(M.jsx)(Ot,{modelName:"inventory-item",buttonLabel:"Update Item",buttonColor:t,onSubmit:function(e){e.preventDefault();var t=function(){a(!0),s(!1),c.current=!1},r={onSuccess:t,onNotFound:t,onUnprocessableEntity:t,onInternalServerError:t,onUnauthorized:function(){return c.current=!1}},o=e.target.elements.quantity.value,l=e.target.elements.notes.value,u=e.target.elements.unitWeight.value;u=void 0===u||null===u||""===u?null:Number(u),i(n.id,{quantity:o,unit_weight:u,notes:l},r)},fields:l})},Kt=n(8),Jt=n.n(Kt),Qt=function(e){if(void 0===e||null===e||""===e)return"-";var t=Number(e);return t%1===0?t.toFixed(0):t.toFixed(1)},Xt=function(e){var t=e.itemId,n=e.listTitle,o=e.canEdit,a=e.description,s=e.quantity,i=e.unitWeight,c=e.notes,l=Object(r.useState)(0),u=Object(d.a)(l,2),h=u[0],f=u[1],m=Object(r.useState)(!0),b=Object(d.a)(m,2),p=b[0],g=b[1],j=Object(r.useState)(s),v=Object(d.a)(j,2),O=v[0],y=v[1],_=oe(),x=_.setFlashVisible,w=_.setFlashAttributes,C=_.setModalVisible,S=_.setModalAttributes,N=ie(),L=N.performInventoryItemUpdate,E=N.performInventoryItemDestroy,k=Object(r.useRef)(!0),I=Object(r.useRef)(null),D=Object(r.useRef)(null),F=Object(r.useRef)(null),T=Object(r.useRef)(null),U=re(),R=U.schemeColorDarkest,P=U.schemeColorDark,A=U.hoverColorDark,W=U.hoverColorLight,V=U.textColorPrimary,q=U.textColorSecondary,Y=U.borderColor,G=U.schemeColorLightest,z=U.textColorTertiary,H=function(e,t){return e.current&&(e.current===t||e.current.contains(t))},B=function(e){return!(H(F,t=e)||H(T,t)||H(I,t)||H(D,t));var t},K=function(e,t){k.current&&(w({type:e,message:t}),x(!0))},J={"--scheme-color":P,"--title-text-color":q,"--border-color":Y,"--body-background-color":G,"--body-text-color":z,"--hover-color":W};return Object(r.useEffect)((function(){k.current&&y(s)}),[s]),Object(r.useEffect)((function(){return function(){return k.current=!1}}),[]),Object(M.jsxs)("div",{className:Te()(Jt.a.root,Object(De.a)({},Jt.a.collapsed,p)),style:J,children:[Object(M.jsxs)("div",{className:Jt.a.toggle,onClick:function(e){B(e.target)&&(f(Date.now),g(!p))},children:[Object(M.jsxs)("span",{className:Te()(Jt.a.header,Object(De.a)({},Jt.a.headerEditable,o)),children:[o&&Object(M.jsxs)("span",{className:Jt.a.editIcons,children:[Object(M.jsx)("button",{className:Jt.a.icon,ref:D,onClick:function(){window.confirm("Destroy inventory item? Your All Items list will be updated to reflect the change. This cannot be undone.")?E(t,{onSuccess:function(){return k.current=!1},onUnauthorized:function(){return k.current=!1},onNotFound:function(){return x(!0)},onInternalServerError:function(){return x(!0)}}):K("info","Your item was not deleted.")},"data-testid":"destroy-item",children:Object(M.jsx)(Ue.a,{className:Te()(Jt.a.fa,Jt.a.destroyIcon),icon:Re.c})}),Object(M.jsx)("button",{className:Jt.a.icon,ref:I,onClick:function(){if(k.current){x(!1);var e=pt(Bt);S({Tag:e,props:{title:a,subtitle:'On list "'.concat(n,'"'),buttonColor:{schemeColorDarkest:R,hoverColorDark:A,borderColor:Y,textColorPrimary:V},currentAttributes:{id:t,description:a,quantity:s,unitWeight:i,notes:c}}}),C(!0)}},"data-testid":"edit-item",children:Object(M.jsx)(Ue.a,{className:Jt.a.fa,icon:ut.b})})]}),Object(M.jsx)("h3",{className:Jt.a.description,children:a})]}),Object(M.jsxs)("span",{className:Jt.a.quantity,children:[o&&Object(M.jsx)("button",{className:Jt.a.icon,ref:F,onClick:function(){var e=O,n=O+1;k.current&&y(n),L(t,{quantity:n},{onNotFound:function(){y(e),x(!0)},onInternalServerError:function(){y(e),x(!0)}})},"data-testid":"incrementer",children:Object(M.jsx)(Ue.a,{className:Jt.a.fa,icon:Re.b})}),Object(M.jsx)("div",{className:Jt.a.quantityContent,children:O}),o&&Object(M.jsx)("button",{className:Jt.a.icon,ref:T,onClick:function(){var e=O,n=O-1;if(n>0){var r={onNotFound:function(){y(e),x(!0)},onInternalServerError:function(){y(e),x(!0)}};y(n),L(t,{quantity:n},r)}else if(0===n){if(window.confirm("Item quantity must be greater than zero. Delete the item instead?"))E(t,{onSuccess:function(){return k.current=!1},onNotFound:function(){return x(!0)},onInternalServerError:function(){return x(!0)}});else K("info","Your item was not deleted.")}},"data-testid":"decrementer",children:Object(M.jsx)(Ue.a,{className:Jt.a.fa,icon:Re.a})})]})]}),Object(M.jsx)(lt.a,{toggleEvent:h,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsxs)("div",{className:Jt.a.collapsible,ref:t,children:[Object(M.jsx)("h4",{className:Jt.a.label,children:"Unit Weight:"}),Object(M.jsx)("p",{className:Jt.a.value,children:Qt(i)}),Object(M.jsx)("h4",{className:Jt.a.label,children:"Notes:"}),Object(M.jsx)("p",{className:Jt.a.value,children:c||"No details available"})]})}})]})},Zt=n(12),$t=n.n(Zt),en=function(e){var t=e.listId,n=Object(r.useState)(0),o=Object(d.a)(n,2),a=o[0],s=o[1],i=Object(r.useState)(!0),c=Object(d.a)(i,2),l=c[0],u=c[1],h=oe().setFlashVisible,f=ie().performInventoryItemCreate,m=re(),b=m.schemeColorDark,p=m.hoverColorLight,g=m.schemeColorLightest,j=m.borderColor,v=m.textColorSecondary,O=m.textColorTertiary,y=Object(r.useRef)(null),_={"--base-color":b,"--hover-color":p,"--body-color":g,"--border-color":j,"--text-color-main":v,"--text-color-secondary":O},x=function(){s(Date.now),u(!l)},w=function(e){e.preventDefault(),h(!1);var n=e.target.elements.unitWeight.value;n=void 0===n||null===n||""===n?null:Number(n);var r=e.target.elements.description.value,o=parseInt(e.target.elements.quantity.value),a=e.target.elements.notes.value,s=function(){y.current.reset(),x(),h(!0)};f(t,{description:r,quantity:o,unit_weight:n,notes:a},{onSuccess:s,onNotFound:s,onUnprocessableEntity:function(){return h(!0)},onInternalServerError:s})};return Object(M.jsxs)("div",{className:Te()($t.a.root,Object(De.a)({},$t.a.collapsed,l)),style:_,children:[Object(M.jsx)("div",{className:$t.a.triggerContainer,children:Object(M.jsx)("button",{className:$t.a.triggerButton,onClick:x,children:"Add item to list..."})}),Object(M.jsx)(lt.a,{toggleEvent:a,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsx)("div",{className:$t.a.collapsible,ref:t,children:Object(M.jsxs)("form",{className:$t.a.form,ref:y,onSubmit:w,children:[Object(M.jsxs)("fieldset",{className:$t.a.fieldset,children:[Object(M.jsx)("label",{className:$t.a.label,children:"Description"}),Object(M.jsx)("input",{className:$t.a.input,type:"text",name:"description",placeholder:"Description",required:!0})]}),Object(M.jsxs)("fieldset",{className:$t.a.fieldset,children:[Object(M.jsx)("label",{className:$t.a.label,children:"Quantity"}),Object(M.jsx)("input",{className:$t.a.input,type:"number",inputMode:"numeric",min:1,name:"quantity",defaultValue:1,required:!0})]}),Object(M.jsxs)("fieldset",{className:$t.a.fieldset,children:[Object(M.jsx)("label",{className:$t.a.label,children:"Unit Weight"}),Object(M.jsx)("input",{className:$t.a.input,type:"number",inputMode:"numeric",min:0,step:.1,name:"unitWeight",placeholder:"Unit Weight"})]}),Object(M.jsxs)("fieldset",{className:$t.a.fieldset,children:[Object(M.jsx)("label",{className:$t.a.label,children:"Notes"}),Object(M.jsx)("input",{className:$t.a.input,type:"text",name:"notes",placeholder:"Notes"})]}),Object(M.jsx)("button",{className:$t.a.submit,type:"submit",children:"Add to List"})]})})}})]})},tn=n(22),nn=n.n(tn),rn=function(e){var t=e.canEdit,n=void 0===t||t,o=e.listId,a=e.title,s='Are you sure you want to delete the list "'.concat(a,'"? You will also lose any list items on the list. This action cannot be undone.'),i=oe(),c=i.setFlashAttributes,l=i.setFlashVisible,u=ie(),h=u.inventoryLists,f=u.performInventoryListUpdate,m=u.performInventoryListDestroy,b=Object(r.useState)(0),p=Object(d.a)(b,2),g=p[0],j=p[1],v=Object(r.useState)(a),O=Object(d.a)(v,2),y=O[0],_=O[1],x=Object(r.useState)(null),w=Object(d.a)(x,2),C=w[0],S=w[1],N=Object(r.useState)([]),L=Object(d.a)(N,2),E=L[0],k=L[1],I=Object(r.useRef)(!0),D=Object(r.useRef)(null),F=Object(r.useRef)(null),T=Object(r.useRef)(null),U=qt(D),R=Vt(),P=R.componentRef,A=R.triggerRef,W=R.isComponentVisible,V=R.setIsComponentVisible,q=function(e){return function(e){return D.current&&(D.current===e||D.current.contains(e))}(e)&&!function(e){return A.current&&(A.current===e||A.current.contains(e))}(e)&&!function(e){return P.current&&(P.current===e||P.current.contains(e))}(e)&&!function(e){return F.current&&(F.current===e||F.current.contains(e))}(e)},Y=re(),G={"--scheme-color":Y.schemeColorDarkest,"--border-color":Y.borderColor,"--text-color-primary":Y.textColorPrimary,"--text-color-secondary":Y.textColorSecondary,"--hover-color":Y.hoverColorDark,"--scheme-color-lighter":Y.schemeColorDark,"--scheme-color-lightest":Y.schemeColorLightest};return Object(r.useEffect)((function(){if(h&&I.current){var e=h.find((function(e){return e.id===o})).list_items;k(Object(z.a)(e))}}),[h,o]),Object(r.useEffect)((function(){U&&T.current&&I.current&&S(U.width-T.current.offsetWidth-16)}),[U]),Object(r.useEffect)((function(){return function(){return I.current=!1}}),[]),Object(M.jsxs)("div",{className:nn.a.root,style:G,children:[Object(M.jsx)("div",{className:nn.a.titleContainer,children:Object(M.jsxs)("div",{className:nn.a.trigger,ref:D,onClick:function(e){q(e.target)&&j(Date.now)},children:[n&&Object(M.jsxs)("span",{className:nn.a.editIcons,ref:T,children:[Object(M.jsx)("button",{className:nn.a.icon,ref:F,onClick:function(e){var t=window.confirm(s);if(l(!1),t){var n=l(!0);m(o,{onSuccess:function(){l(!0),I.current=!1},onNotFound:n,onInternalServerError:n})}else c({type:"info",message:"Your list was not deleted."}),l(!0)},"data-testid":"delete-inventory-list",children:Object(M.jsx)(Ue.a,{className:nn.a.fa,icon:Re.c})}),Object(M.jsx)("button",{className:nn.a.icon,ref:A,"data-testid":"edit-inventory-list",children:Object(M.jsx)(Ue.a,{className:nn.a.fa,icon:ut.b})})]}),n&&W?Object(M.jsx)(zt,{formRef:P,maxTotalWidth:C,className:nn.a.form,title:a,onSubmit:function(e){e.preventDefault(),l(!1);var t,n=e.target.elements.title.value;(!n||(t=n)&&t.match(/^\s*[a-z0-9 ]*\s*$/i)&&t.match(/^\s*[a-z0-9 ]*\s*$/i)[0]===t&&"all items"!==t.toLowerCase())&&_(Wt(n));var r=function(){I.current&&(_(a),l(!0),V(!1))};f(o,n,{onSuccess:function(){return I.current&&V(!1)},onNotFound:r,onUnprocessableEntity:r,onInternalServerError:r})}}):Object(M.jsx)("h3",{className:nn.a.title,children:y})]})}),Object(M.jsx)(lt.a,{toggleEvent:g,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsxs)("div",{className:nn.a.collapsible,ref:t,children:[!n&&0===E.length&&Object(M.jsx)("div",{className:nn.a.emptyList,children:"This game has no inventory items."}),n&&Object(M.jsx)(en,{listId:o}),E&&E.length>0&&E.map((function(e){var t=e.id,r=e.description,o=e.quantity,s=e.notes,i=e.unit_weight,c="".concat(a.toLowerCase().replace(" ","-"),"-").concat(t);return Object(M.jsx)(Xt,{itemId:t,listTitle:a,description:r,quantity:parseInt(o),notes:s,unitWeight:i,canEdit:n},c)}))]})}})]})},on=n(36),an=n.n(on),sn=function(){var e=oe(),t=e.setModalAttributes,n=e.setModalVisible,r=se(),o=r.games,a=r.gameLoadingState,s=ie(),i=s.inventoryLists,c=s.inventoryListLoadingState,l=i&&c===B&&i.length>0,u=i&&c===B&&0===i.length;if(a!==B||o.length){if(l)return Object(M.jsx)(M.Fragment,{children:i.map((function(e,t){var n=e.id,r=e.title,o=e.aggregate,a=xe[t<xe.length?t:t%xe.length],s=r.toLowerCase().replace(" ","-");return Object(M.jsx)(Q,{colorScheme:a,children:Object(M.jsx)("div",{className:an.a.inventoryList,children:Object(M.jsx)(rn,{canEdit:!o,listId:n,title:r})})},s)}))});if(u)return Object(M.jsx)("p",{className:an.a.noLists,children:"This game has no inventory lists."});if(c===H)return Object(M.jsx)(Ke,{className:an.a.loading,color:je.schemeColorDarkest,height:"15%",width:"15%"});if(a===K||c===K){var d=a===K?"games":"inventory lists";return Object(M.jsx)(It,{modelName:d})}return null}return Object(M.jsxs)("p",{className:an.a.noLists,children:["You need a game to use the inventory lists feature. ",Object(M.jsx)("button",{className:an.a.link,onClick:function(e){e.preventDefault(),t({Tag:pt(_t),props:{title:"Create Game",type:"create"}}),n(!0)},children:"Create a game"})," to get started."]})},cn=n(70),ln=n.n(cn),un=function(){var e=oe(),t=e.modalVisible,n=e.modalAttributes,r=ie().inventoryListLoadingState,o=r===H||r===K;return Object(M.jsxs)(ze,{title:"Your Inventory",includeGameSelect:!0,children:[t&&Object(M.jsx)(n.Tag,Object(u.a)({},n.props)),Object(M.jsx)(ct,{}),Object(M.jsx)("div",{className:ln.a.createForm,children:Object(M.jsx)(Pt,{disabled:o})}),Object(M.jsx)(sn,{})]})},dn=n(32),hn=n.n(dn),fn=function(e){var t=e.disabled,n=oe().setFlashVisible,o=ae().performShoppingListCreate,a=Object(r.useState)(""),s=Object(d.a)(a,2),i=s[0],c=s[1],l={"--button-color":Oe.schemeColorDark,"--button-text-color":Oe.textColorPrimary,"--button-border-color":Oe.borderColor,"--button-hover-color":Oe.hoverColorLight};return Object(M.jsx)("div",{className:hn.a.root,style:l,children:Object(M.jsx)("form",{"data-testid":"shopping-list-create-form",onSubmit:function(e){e.preventDefault(),n(!1);var t=e.target.elements.title.value,r=function(){c(""),n(!0)};o(t,{onSuccess:r,onNotFound:r,onUnprocessableEntity:function(){return n(!0)},onInternalServerError:r})},children:Object(M.jsxs)("fieldset",{className:Te()(hn.a.fieldset,Object(De.a)({},hn.a.fieldsetDisabled,t)),disabled:t,children:[Object(M.jsx)("input",{className:hn.a.input,type:"text",name:"title",placeholder:"Title","aria-label":"Title",value:i,onChange:function(e){var t=e.currentTarget.value;c(t)},pattern:"^\\s*[A-Za-z0-9 \\-',]*\\s*$",title:"Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes"}),Object(M.jsx)("button",{className:Te()(hn.a.button,Object(De.a)({},hn.a.buttonDisabled,t)),type:"submit",children:"Create"})]})})})},mn=[{name:"quantity",tag:"input",label:"Quantity",type:"number",placeholder:"Quantity",inputMode:"numeric",min:1,required:!0},{name:"unitWeight",tag:"input",label:"Unit Weight",type:"number",placeholder:"Unit Weight",inputMode:"decimal",min:0,step:.1},{name:"notes",tag:"textarea",label:"Notes",type:"textarea",placeholder:"This item has no notes",inputMode:"text"}],bn=function(e){var t=e.buttonColor,n=e.currentAttributes,o=oe(),a=o.setFlashVisible,s=o.setModalVisible,i=ae().performShoppingListItemUpdate,c=Object(r.useRef)(!0),l=mn.map((function(e){return Object(u.a)({defaultValue:n[e.name]},e)}));return Object(r.useEffect)((function(){return function(){return c.current=!1}}),[]),Object(M.jsx)(Ot,{modelName:"shopping-list-item",buttonLabel:"Update Item",buttonColor:t,onSubmit:function(e){e.preventDefault();var t=function(){a(!0),s(!1),c.current=!1},r={onSuccess:t,onNotFound:t,onUnprocessableEntity:t,onInternalServerError:t,onUnauthorized:function(){return c.current=!1}},o=e.target.elements.quantity.value,l=e.target.elements.notes.value,u=e.target.elements.unitWeight.value;u=void 0===u||null===u||""===u?null:Number(u),i(n.id,{quantity:o,unit_weight:u,notes:l},r)},fields:l})},pn=n(9),gn=n.n(pn),jn=function(e){if(void 0===e||null===e||""===e)return"-";var t=Number(e);return t%1===0?t.toFixed(0):t.toFixed(1)},vn=function(e){var t=e.itemId,n=e.listTitle,o=e.canEdit,a=e.description,s=e.quantity,i=e.unitWeight,c=e.notes,l=Object(r.useState)(0),u=Object(d.a)(l,2),h=u[0],f=u[1],m=Object(r.useState)(!0),b=Object(d.a)(m,2),p=b[0],g=b[1],j=Object(r.useState)(s),v=Object(d.a)(j,2),O=v[0],y=v[1],_=oe(),x=_.setFlashAttributes,w=_.setFlashVisible,C=_.setModalVisible,S=_.setModalAttributes,N=re(),L=N.schemeColorDarkest,E=N.textColorPrimary,k=N.hoverColorDark,I=N.schemeColorDark,D=N.hoverColorLight,F=N.textColorSecondary,T=N.borderColor,U=N.schemeColorLightest,R=N.textColorTertiary,P=ae(),A=P.performShoppingListItemUpdate,W=P.performShoppingListItemDestroy,V=Object(r.useRef)(!0),q=Object(r.useRef)(null),Y=Object(r.useRef)(null),G=Object(r.useRef)(null),z=Object(r.useRef)(null),H=function(e,t){return e.current&&(e.current===t||e.current.contains(t))},B=function(e){return function(e){return H(q,e)}(e)||function(e){return H(Y,e)}(e)||function(e){return H(G,e)}(e)||function(e){return H(z,e)}(e)},K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;V.current&&(x({type:e,message:t,header:n}),w(!0))},J={"--main-color":I,"--title-text-color":F,"--border-color":T,"--body-background-color":U,"--body-text-color":R,"--hover-color":D};return Object(r.useEffect)((function(){V.current&&y(s)}),[s]),Object(r.useEffect)((function(){return function(){return V.current=!1}}),[]),Object(M.jsxs)("div",{className:Te()(gn.a.root,Object(De.a)({},gn.a.collapsed,p)),style:J,children:[Object(M.jsxs)("div",{className:gn.a.toggle,onClick:function(e){B(e.target)||(f(Date.now),g(!p))},children:[Object(M.jsxs)("span",{className:Te()(gn.a.header,Object(De.a)({},gn.a.headerEditable,o)),children:[o&&Object(M.jsxs)("span",{className:gn.a.editIcons,children:[Object(M.jsx)("button",{className:gn.a.icon,ref:Y,onClick:function(){window.confirm("Destroy shopping list item? Your aggregate list will be updated to reflect the change. This action cannot be undone.")?W(t,{onSuccess:function(){return V.current=!1},onUnauthorized:function(){return V.current=!1},onNotFound:function(){return w(!0)},onInternalServerError:function(){return w(!0)}}):K("info","Your item was not deleted.")},"data-testid":"destroy-item",children:Object(M.jsx)(Ue.a,{className:Te()(gn.a.fa,gn.a.destroyIcon),icon:Re.c})}),Object(M.jsx)("button",{className:gn.a.icon,ref:q,onClick:function(){if(V.current){w(!1);var e=pt(bn);S({Tag:e,props:{title:a,subtitle:'On list "'.concat(n,'"'),buttonColor:{schemeColorDarkest:L,hoverColorDark:k,borderColor:T,textColorPrimary:E},currentAttributes:{id:t,description:a,quantity:s,unitWeight:i,notes:c}}}),C(!0)}},"data-testid":"edit-item",children:Object(M.jsx)(Ue.a,{className:gn.a.fa,icon:ut.b})})]}),Object(M.jsx)("h3",{className:gn.a.description,children:a})]}),Object(M.jsxs)("span",{className:gn.a.quantity,children:[o&&Object(M.jsx)("button",{className:gn.a.icon,ref:G,onClick:function(){var e=O,n=O+1;V.current&&y(n),A(t,{quantity:n},{onNotFound:function(){y(e),w(!0)},onInternalServerError:function(){y(e),w(!0)}})},"data-testid":"incrementer",children:Object(M.jsx)(Ue.a,{className:gn.a.fa,icon:Re.b})}),Object(M.jsx)("div",{className:gn.a.quantityContent,children:O}),o&&Object(M.jsx)("button",{className:gn.a.icon,ref:z,onClick:function(){var e=O,n=O-1;if(n>0){V.current&&y(n);var r={onNotFound:function(){y(e),w(!0)},onInternalServerError:function(){y(e),w(!0)}};y(n),A(t,{quantity:n},r)}else if(0===n){if(window.confirm("Item quantity must be greater than zero. Delete the item instead?"))W(t,{success:function(){return V.current=!1},onNotFound:function(){return V.current&&w(!0)},onInternalServerError:function(){return V.current&&w(!0)}});else K("info","Your item was not deleted.")}},"data-testid":"decrementer",children:Object(M.jsx)(Ue.a,{className:gn.a.fa,icon:Re.a})})]})]}),Object(M.jsx)(lt.a,{toggleEvent:h,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsxs)("div",{className:gn.a.collapsible,ref:t,children:[Object(M.jsx)("h4",{className:gn.a.label,children:"Unit Weight:"}),Object(M.jsx)("p",{className:gn.a.value,children:jn(i)}),Object(M.jsx)("h4",{className:gn.a.label,children:"Notes:"}),Object(M.jsx)("p",{className:gn.a.value,children:c||"No details available"})]})}})]})},On=n(13),yn=n.n(On),_n=function(e){var t=e.listId,n=Object(r.useState)(0),o=Object(d.a)(n,2),a=o[0],s=o[1],i=Object(r.useState)(!0),c=Object(d.a)(i,2),l=c[0],u=c[1],h=oe().setFlashVisible,f=ae().performShoppingListItemCreate,m=re(),b=m.schemeColorDark,p=m.hoverColorLight,g=m.schemeColorLightest,j=m.borderColor,v=m.textColorSecondary,O=m.textColorTertiary,y=Object(r.useRef)(null),_={"--base-color":b,"--hover-color":p,"--body-color":g,"--border-color":j,"--text-color-main":v,"--text-color-secondary":O},x=function(){s(Date.now),u(!l)},w=function(e){e.preventDefault(),h(!1);var n=e.target.elements.unitWeight.value;n=void 0===n||null===n||""===n?null:Number(n);var r=e.target.elements.description.value,o=parseInt(e.target.elements.quantity.value),a=e.target.elements.notes.value,s=function(){y.current.reset(),x(),h(!0)};f(t,{description:r,quantity:o,unit_weight:n,notes:a},{onSuccess:s,onNotFound:s,onUnprocessableEntity:function(){return h(!0)},onInternalServerError:s})};return Object(M.jsxs)("div",{className:Te()(yn.a.root,Object(De.a)({},yn.a.collapsed,l)),style:_,children:[Object(M.jsx)("div",{className:yn.a.triggerContainer,children:Object(M.jsx)("button",{className:yn.a.triggerButton,onClick:x,children:"Add item to list..."})}),Object(M.jsx)(lt.a,{toggleEvent:a,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsx)("div",{className:yn.a.collapsible,ref:t,children:Object(M.jsxs)("form",{className:yn.a.form,ref:y,onSubmit:w,children:[Object(M.jsxs)("fieldset",{className:yn.a.fieldset,children:[Object(M.jsx)("label",{className:yn.a.label,children:"Description"}),Object(M.jsx)("input",{className:yn.a.input,type:"text",name:"description",placeholder:"Description",required:!0})]}),Object(M.jsxs)("fieldset",{className:yn.a.fieldset,children:[Object(M.jsx)("label",{className:yn.a.label,children:"Quantity"}),Object(M.jsx)("input",{className:yn.a.input,type:"number",inputMode:"numeric",min:1,name:"quantity",defaultValue:1,required:!0})]}),Object(M.jsxs)("fieldset",{className:yn.a.fieldset,children:[Object(M.jsx)("label",{className:yn.a.label,children:"Unit Weight"}),Object(M.jsx)("input",{className:yn.a.input,type:"number",inputMode:"numeric",name:"unitWeight",min:0,step:.1,placeholder:"Unit Weight"})]}),Object(M.jsxs)("fieldset",{className:yn.a.fieldset,children:[Object(M.jsx)("label",{className:yn.a.label,children:"Notes"}),Object(M.jsx)("input",{className:yn.a.input,type:"text",name:"notes",placeholder:"Notes"})]}),Object(M.jsx)("button",{className:yn.a.submit,type:"submit",children:"Add to List"})]})})}})]})},xn=n(23),wn=n.n(xn),Cn=function(e){var t=e.canEdit,n=void 0===t||t,o=e.listId,a=e.title,s='Are you sure you want to delete the list "'.concat(a,'"? You will also lose any list items on the list. This action cannot be undone.'),i=Object(r.useState)(0),c=Object(d.a)(i,2),l=c[0],u=c[1],h=Object(r.useState)(a),f=Object(d.a)(h,2),m=f[0],b=f[1],p=Object(r.useState)(null),g=Object(d.a)(p,2),j=g[0],v=g[1],O=Object(r.useState)([]),y=Object(d.a)(O,2),_=y[0],x=y[1],w=Object(r.useRef)(!0),C=Object(r.useRef)(null),S=Object(r.useRef)(null),N=Object(r.useRef)(null),L=qt(C),E=Vt(),k=E.componentRef,I=E.triggerRef,D=E.isComponentVisible,F=E.setIsComponentVisible,T=oe(),U=T.setFlashAttributes,R=T.setFlashVisible,P=ae(),A=P.shoppingLists,W=P.performShoppingListUpdate,V=P.performShoppingListDestroy,q=function(e){return function(e){return C.current&&(C.current===e||C.current.contains(e))}(e)&&!function(e){return I.current&&(I.current===e||I.current.contains(e))}(e)&&!function(e){return k.current&&(k.current===e||k.current.contains(e))}(e)&&!function(e){return S.current&&(S.current===e||S.current.contains(e))}(e)},Y=re(),G={"--scheme-color":Y.schemeColorDarkest,"--border-color":Y.borderColor,"--text-color-primary":Y.textColorPrimary,"--text-color-secondary":Y.textColorSecondary,"--hover-color":Y.hoverColorDark,"--scheme-color-lighter":Y.schemeColorDark,"--scheme-color-lightest":Y.schemeColorLightest,"--max-title-width":"".concat(j-32,"px")};return Object(r.useEffect)((function(){if(A&&w.current){var e=A.find((function(e){return e.id===o})).list_items;x(Object(z.a)(e))}}),[A,o]),Object(r.useEffect)((function(){L&&N.current&&w.current&&v(L.width-N.current.offsetWidth-16)}),[L]),Object(r.useEffect)((function(){return function(){return w.current=!1}}),[]),Object(M.jsxs)("div",{className:wn.a.root,style:G,children:[Object(M.jsx)("div",{className:wn.a.titleContainer,children:Object(M.jsxs)("div",{className:wn.a.trigger,ref:C,onClick:function(e){q(e.target)&&u(Date.now)},children:[n&&Object(M.jsxs)("span",{className:wn.a.editIcons,ref:N,children:[Object(M.jsx)("button",{className:wn.a.icon,ref:S,onClick:function(e){var t=window.confirm(s);if(R(!1),t){var n=function(){return R(!0)};V(o,{onSuccess:function(){R(!0),w.current=!1},onNotFound:n,onInternalServerError:n})}else w.current&&(U({type:"info",message:"Your list was not deleted."}),R(!0))},"data-testid":"delete-shopping-list",children:Object(M.jsx)(Ue.a,{className:wn.a.fa,icon:Re.c})}),Object(M.jsx)("button",{className:wn.a.icon,ref:I,"data-testid":"edit-shopping-list",children:Object(M.jsx)(Ue.a,{className:wn.a.fa,icon:ut.b})})]}),n&&D?Object(M.jsx)(zt,{formRef:k,maxTotalWidth:j,className:wn.a.form,title:a,onSubmit:function(e){e.preventDefault(),R(!1);var t,n=e.nativeEvent.target.children[0].defaultValue;(!n||(t=n)&&t.match(/^\s*[a-z0-9 ]*\s*$/i)&&t.match(/^\s*[a-z0-9 ]*\s*$/i)[0]===t&&"all items"!==t.toLowerCase())&&b(Wt(n));var r=function(){b(a),R(!0)};W(o,n,{onNotFound:r,onUnprocessableEntity:r,onInternalServerError:r}),F(!1)}}):Object(M.jsx)("h3",{className:wn.a.title,children:m})]})}),Object(M.jsx)(lt.a,{toggleEvent:l,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(M.jsxs)("div",{className:wn.a.collapsible,ref:t,children:[!n&&0===_.length&&Object(M.jsx)("div",{className:wn.a.emptyList,children:"This game has no shopping list items."}),n&&Object(M.jsx)(_n,{listId:o}),_&&_.length>0&&_.map((function(e){var t=e.id,r=e.description,o=e.quantity,s=e.notes,i=e.unit_weight,c="".concat(a.toLowerCase().replace(" ","-"),"-").concat(t);return Object(M.jsx)(vn,{itemId:t,listTitle:a,canEdit:n,description:r,quantity:o,notes:s,unitWeight:i},c)}))]})}})]})},Sn=n(37),Nn=n.n(Sn),Ln=function(){var e=oe(),t=e.setModalAttributes,n=e.setModalVisible,r=se(),o=r.games,a=r.gameLoadingState,s=ae(),i=s.shoppingLists,c=s.shoppingListLoadingState,l=i&&c===B&&i.length>0,u=i&&c===B&&0===i.length;if(a!==B||o.length){if(l)return Object(M.jsx)(M.Fragment,{children:i.map((function(e,t){var n=e.id,r=e.title,o=e.aggregate,a=xe[t<xe.length?t:t%xe.length],s=r.toLowerCase().replace(" ","-");return Object(M.jsx)(Q,{colorScheme:a,children:Object(M.jsx)("div",{className:Nn.a.shoppingList,children:Object(M.jsx)(Cn,{canEdit:!o,listId:n,title:r})})},s)}))});if(u)return Object(M.jsx)("p",{className:Nn.a.noLists,children:"This game has no shopping lists."});if(c===H)return Object(M.jsx)(Ke,{className:Nn.a.loading,color:je.schemeColorDarkest,height:"15%",width:"15%"});if(a===K||c===K){var d=a===K?"games":"shopping lists";return Object(M.jsx)(It,{modelName:d})}return null}return Object(M.jsxs)("p",{className:Nn.a.noLists,children:["You need a game to use the shopping lists feature. ",Object(M.jsx)("button",{className:Nn.a.link,onClick:function(e){e.preventDefault(),t({Tag:pt(_t),props:{title:"Create Game",type:"create"}}),n(!0)},children:"Create a game"})," to get started."]})},En=n(71),kn=n.n(En),In=function(){var e=oe(),t=e.modalVisible,n=e.modalAttributes,o=ae().shoppingListLoadingState,a=o===H||o===K,s=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){return s.current=!1}}),[]),Object(M.jsxs)(ze,{title:"Your Shopping Lists",includeGameSelect:!0,children:[t&&Object(M.jsx)(n.Tag,Object(u.a)({},n.props)),Object(M.jsx)(ct,{}),Object(M.jsx)("div",{className:kn.a.createForm,children:Object(M.jsx)(fn,{disabled:a})}),Object(M.jsx)(Ln,{})," "]})},Dn=n(47),Fn=n.n(Dn),Tn=function(){var e=oe().token;return Object(M.jsx)("div",{className:Fn.a.root,children:Object(M.jsxs)("div",{className:Fn.a.container,children:[Object(M.jsx)("h1",{className:Fn.a.header,children:"SIM: Page Not Found"}),Object(M.jsx)(i.b,{className:Fn.a.link,to:e?V.dashboard.main:V.home,children:"Go Back"})]})})},Un="Skyrim Inventory Management |",Rn=[{pageId:"home",title:"".concat(Un," Home"),description:"Manage your inventory across multiple properties in Skyrim",jsx:Object(M.jsx)(he,{}),path:V.home},{pageId:"login",title:"".concat(Un," Login"),description:"Log into Skyrim Inventory Management using your Google account",jsx:Object(M.jsx)(ge,{}),path:V.login},{pageId:"dashboard",title:"".concat(Un," Dashboard"),description:"Skyrim Inventory Management User Dashboard",jsx:Object(M.jsx)(ot,{}),path:V.dashboard.main},{pageId:"games",title:"".concat(Un," Your Games"),description:"Manage Skyrim Games",jsx:Object(M.jsx)(le,{children:Object(M.jsx)(Tt,{})}),path:V.dashboard.games},{pageId:"shoppingLists",title:"".concat(Un," Manage Shopping Lists"),description:"Manage Skyrim Shopping Lists",jsx:Object(M.jsx)(le,{children:Object(M.jsx)($,{children:Object(M.jsx)(In,{})})}),path:V.dashboard.shoppingLists},{pageId:"inventory",title:"".concat(Un," Manage Inventory"),description:"Manage Skyrim Inventory",jsx:Object(M.jsx)(le,{children:Object(M.jsx)(te,{children:Object(M.jsx)(un,{})})})}],Pn=function(){return Object(M.jsxs)(l.d,{children:[Rn.map((function(e){var t=e.pageId,n=e.title,r=e.description,o=e.jsx,a=e.path;return Object(M.jsxs)(l.b,{exact:!0,path:a,children:[Object(M.jsxs)(c.a,{children:[Object(M.jsx)("html",{lang:"en"}),Object(M.jsx)("title",{children:n}),Object(M.jsx)("meta",{name:"description",content:r})]}),Object(M.jsx)(G,{children:o})]},t)})),Object(M.jsxs)(l.b,{children:[Object(M.jsxs)(c.a,{children:[Object(M.jsx)("html",{lang:"en"}),Object(M.jsx)("title",{children:"Skyrim Inventory Management | Page Not Found"}),Object(M.jsx)("meta",{name:"description",content:"Skyrim Inventory Management could not find the page you were looking for"})]}),Object(M.jsx)(G,{children:Object(M.jsx)(Tn,{})})]},"notFound")]})},An=function(){return Object(M.jsx)(i.a,{basename:"",children:Object(M.jsx)(c.b,{children:Object(M.jsx)(Pn,{})})})};s.a.render(Object(M.jsx)(o.a.StrictMode,{children:Object(M.jsx)(An,{})}),document.getElementById("root"))}],[[88,1,2]]]);
//# sourceMappingURL=main.d7a22a18.chunk.js.map