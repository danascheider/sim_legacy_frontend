{"version":3,"sources":["components/shoppingListItem/shoppingListItem.module.css","components/shoppingListItemCreateForm/shoppingListItemCreateForm.module.css","components/dashboardHeader/dashboardHeader.module.css","components/shoppingList/shoppingList.module.css","components/shoppingListItemEditForm/shoppingListItemEditForm.module.css","components/shoppingListCreateForm/shoppingListCreateForm.module.css","layouts/dashboardLayout.module.css","components/flashMessage/flashMessage.module.css","components/shoppingListEditForm/shoppingListEditForm.module.css","pages/homePage/homePage.module.css","pages/loginPage/loginPage.module.css","pages/notFoundPage/notFoundPage.module.css","components/logoutDropdown/logoutDropdown.module.css","pages/shoppingListPage/shoppingListPage.module.css","components/navigationMosaic/navigationMosaic.module.css","pages/dashboardPage/dashboardPage.module.css","components/shoppingListPageContent/shoppingListPageContent.module.css","components/navigationCard/navigationCard.module.css","utils/config.js","utils/customErrors.js","utils/simApi.js","utils/logOutWithGoogle.js","utils/isTestEnv.js","routing/paths.js","contexts/appContext.js","utils/colorSchemes.js","contexts/colorContext.js","contexts/shoppingListContext.js","hooks/contexts.js","components/logoutDropdown/googleIcon.svg","components/logoutDropdown/logoutDropdown.js","components/dashboardHeader/anonymousAvatar.jpg","components/dashboardHeader/dashboardHeader.js","layouts/dashboardLayout.js","components/loading/loading.js","components/navigationCard/navigationCard.js","components/navigationMosaic/navigationMosaic.js","pages/dashboardPage/dashboardPage.js","components/flashMessage/flashMessage.js","components/shoppingListCreateForm/shoppingListCreateForm.js","hooks/useComponentVisible.js","hooks/useSize.js","components/shoppingListEditForm/shoppingListEditForm.js","components/shoppingListItem/shoppingListItem.js","components/shoppingListItemCreateForm/shoppingListItemCreateForm.js","components/shoppingList/shoppingList.js","components/shoppingListPageContent/shoppingListPageContent.js","components/shoppingListItemEditForm/shoppingListItemEditForm.js","pages/shoppingListPage/shoppingListPage.js","pages/homePage/homePage.js","pages/loginPage/loginPage.js","pages/notFoundPage/notFoundPage.js","routing/pageRoutes.js","App.js","index.js"],"names":["module","exports","backendBaseUri","sessionCookieName","AuthorizationError","message","this","code","name","stack","Error","NotFoundError","MethodNotAllowedError","prototype","contentTypeHeader","authHeader","token","combinedHeaders","createShoppingList","attrs","uri","body","JSON","stringify","shopping_list","fetch","method","headers","then","resp","status","updateShoppingList","listId","id","destroyShoppingList","createShoppingListItem","shopping_list_item","updateShoppingListItem","itemId","destroyShoppingListItem","defaultErrorCallback","err","console","error","logOutWithGoogle","success","window","gapi","auth2","GoogleAuth","getAuthInstance","disconnect","isTestEnv","process","STORYBOOK","isStorybook","allPaths","paths","home","login","dashboard","main","shoppingLists","DONE","AppContext","createContext","AppProvider","children","overrideValue","pathname","useLocation","useCookies","cookies","setCookie","removeCookie","useState","flashProps","setFlashProps","flashVisible","setFlashVisible","profileData","setProfileData","shouldRedirectTo","redirectPath","setRedirectPath","profileLoadState","setProfileLoadState","mountedRef","useRef","removeSessionCookie","useCallback","setShouldRedirectTo","path","current","displayFlash","type","header","scrollTo","hideFlash","onAuthenticatedPage","indexOf","shouldFetchProfileData","logOutAndRedirect","callback","value","setSessionCookie","useEffect","fetchUserProfile","response","json","data","errors","catch","Provider","to","YELLOW","schemeColorDarkest","schemeColorDark","schemeColorLight","schemeColorLightest","hoverColorDark","hoverColorLight","hoverColorLightest","textColorPrimary","textColorSecondary","textColorTertiary","borderColor","PINK","BLUE","GREEN","AQUA","colorSchemes","ColorContext","ColorProvider","colorScheme","ShoppingListContext","ShoppingListProvider","setShoppingLists","listItemEditFormProps","setListItemEditFormProps","listItemEditFormVisible","setListItemEditFormVisible","shoppingListLoadingState","setShoppingListLoadingState","useAppContext","shoppingListsOverridden","addOrUpdateListItem","list","item","originalItem","list_items","find","listItem","description","toLowerCase","newListItems","originalItemPosition","splice","unshift","listFromListItemId","removeItemFromList","newList","index","fetchLists","fetchShoppingLists","undefined","performShoppingListUpdate","newTitle","title","newShoppingLists","map","filter","msg","match","length","performShoppingListCreate","Array","isArray","performShoppingListDestroy","aggregate","performShoppingListItemCreate","allowedAttributes","aggregateListItem","regularListItem","newLists","aggregateList","regularList","regularListPosition","newAggregateList","newRegularList","split","performShoppingListItemUpdate","showFlashOnSuccess","list_id","performShoppingListItemDestroy","regularListToRemoveItemFrom","regularListIndex","deletedItem","useCustomContext","cxt","context","useContext","useColorScheme","useShoppingListContext","LogoutDropdown","className","logOutFunction","styles","button","onClick","e","preventDefault","googleLogout","src","icon","alt","DashboardHeader","dropdownVisible","setDropdownVisible","root","bar","headerContainer","headerLinkLarge","bp","headerLinkSmall","profile","profileText","textTop","textBottom","email","avatar","image_url","anonymousAvatar","referrerPolicy","logoutDropdown","hidden","DashboardLayout","container","titleContainer","hr","Loading","color","height","width","NavigationCard","href","styleVars","style","NavigationMosaic","cardArray","key","card","cards","DashboardPage","loading","INFO","colors","border","text","FlashMessage","colorVars","messageList","ShoppingListCreateForm","disabled","inputValue","setInputValue","form","onSubmit","target","elements","classNames","fieldset","fieldsetDisabled","input","placeholder","onChange","newValue","currentTarget","buttonDisabled","useComponentVisible","isComponentVisible","setIsComponentVisible","componentRef","triggerRef","triggerRefContains","element","contains","handleHideDiv","handleClickOutside","document","addEventListener","removeEventListener","useSize","size","setSize","useLayoutEffect","getBoundingClientRect","useResizeObserver","entry","contentRect","ShoppingListEditForm","formRef","maxTotalWidth","getInputTextWidth","createElement","getContext","font","max","maxTextWidth","textWidth","measureText","Math","min","setMaxTextWidth","inputWidth","setInputWidth","inputRef","buttonRef","focus","offsetWidth","classnames","ref","stopPropagation","submit","fa","faCheckSquare","ShoppingListItem","listTitle","canEdit","quantity","notes","toggleEvent","setToggleEvent","currentQuantity","setCurrentQuantity","headerRef","iconsRef","editRef","deleteRef","incRef","decRef","refContains","el","iconContains","editRefContains","deleteRefContains","incRefContains","decRefContains","toggle","Date","now","headerEditable","editIcons","confirm","destroyIcon","faTimes","buttonColor","currentAttributes","faEdit","oldQuantity","newQuantity","faAngleUp","quantityContent","faAngleDown","collapsed","setCollapsibleElement","collapsible","ShoppingListItemCreateForm","toggleForm","Number","reset","triggerContainer","triggerButton","label","htmlFor","inputMode","defaultValue","ShoppingList","currentTitle","setCurrentTitle","maxEditFormWidth","setMaxEditFormWidth","listItems","setListItems","slideTriggerRef","deleteTriggerRef","originalTitle","shouldToggleListItems","slideTriggerRefContains","componentRefContains","deleteTriggerRefContains","items","obj","trigger","confirmed","str","nativeEvent","emptyList","itemKey","replace","ShoppingListPageContent","listKey","shoppingList","ShoppingListItemEditForm","elementRef","getElementsByTagName","classList","add","remove","subheader","quantityLabel","notesLabel","ShoppingListPage","shouldDisableForm","hideForm","overlay","flash","createForm","HomePage","verifyLogin","authorize","LoginPage","loginErrorMessage","setLoginErrorMessage","errorMessage","clientId","buttonText","onSuccess","tokenId","onFailure","redirectUri","NotFoundPage","link","siteTitle","pages","pageId","jsx","PageRoutes","exact","lang","content","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9281d787.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItem_root__3NPoi\",\"toggle\":\"shoppingListItem_toggle__26aMd\",\"fa\":\"shoppingListItem_fa__2P4jA\",\"destroyIcon\":\"shoppingListItem_destroyIcon__2IBmH\",\"header\":\"shoppingListItem_header__1qqqT\",\"headerEditable\":\"shoppingListItem_headerEditable__2K0Ir\",\"editIcons\":\"shoppingListItem_editIcons__2RoL7\",\"quantity\":\"shoppingListItem_quantity__1ebyP\",\"quantityContent\":\"shoppingListItem_quantityContent__24Ts-\",\"icon\":\"shoppingListItem_icon__1pEqd\",\"description\":\"shoppingListItem_description__mnU6z\",\"collapsible\":\"shoppingListItem_collapsible__xa2wr\",\"notes\":\"shoppingListItem_notes__8g2fK\",\"button\":\"shoppingListItem_button__2k4QA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItemCreateForm_root__3B7YP\",\"triggerContainer\":\"shoppingListItemCreateForm_triggerContainer__3IkQf\",\"triggerButton\":\"shoppingListItemCreateForm_triggerButton__2HK_d\",\"form\":\"shoppingListItemCreateForm_form__OXRXv\",\"fieldset\":\"shoppingListItemCreateForm_fieldset__1ovw9\",\"input\":\"shoppingListItemCreateForm_input__2Jire\",\"label\":\"shoppingListItemCreateForm_label__qlamy\",\"submit\":\"shoppingListItemCreateForm_submit__22fVU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardHeader_root__3lzne\",\"bar\":\"dashboardHeader_bar__1XEWl\",\"headerContainer\":\"dashboardHeader_headerContainer__1ZVqS\",\"header\":\"dashboardHeader_header__cB1mg\",\"headerLinkLarge\":\"dashboardHeader_headerLinkLarge__ED8Xx\",\"headerLinkSmall\":\"dashboardHeader_headerLinkSmall__3TlC1\",\"profile\":\"dashboardHeader_profile__A3WxH\",\"profileText\":\"dashboardHeader_profileText__1HPKf\",\"textTop\":\"dashboardHeader_textTop__2UNgU\",\"textBottom\":\"dashboardHeader_textBottom__1vLtl\",\"avatar\":\"dashboardHeader_avatar__2BhRu\",\"logoutDropdown\":\"dashboardHeader_logoutDropdown__37Dm5\",\"hidden\":\"dashboardHeader_hidden__Fkjhq\",\"bp\":\"dashboardHeader_bp__2hS3f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingList_root__2O9FT\",\"trigger\":\"shoppingList_trigger__WV4fR\",\"form\":\"shoppingList_form__1GdfA\",\"icon\":\"shoppingList_icon__3FP5H\",\"editIcons\":\"shoppingList_editIcons__gL8DA\",\"title\":\"shoppingList_title__3Gulc\",\"fa\":\"shoppingList_fa__hRtKq\",\"collapsible\":\"shoppingList_collapsible__2Zuq5\",\"emptyList\":\"shoppingList_emptyList__289Te\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItemEditForm_root__2zUjt\",\"header\":\"shoppingListItemEditForm_header__2txvT\",\"subheader\":\"shoppingListItemEditForm_subheader__3yBzn\",\"fieldset\":\"shoppingListItemEditForm_fieldset__2xXd9\",\"quantityLabel\":\"shoppingListItemEditForm_quantityLabel__2qX0H\",\"notesLabel\":\"shoppingListItemEditForm_notesLabel__3K7ws\",\"input\":\"shoppingListItemEditForm_input__1GgIg\",\"submit\":\"shoppingListItemEditForm_submit__18nHy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListCreateForm_root__iSFdV\",\"button\":\"shoppingListCreateForm_button__2so-6\",\"fieldset\":\"shoppingListCreateForm_fieldset__1BLSp\",\"fieldsetDisabled\":\"shoppingListCreateForm_fieldsetDisabled__2V4n7\",\"input\":\"shoppingListCreateForm_input__3hAzq\",\"buttonDisabled\":\"shoppingListCreateForm_buttonDisabled__1USkv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardLayout_root__2dfR_\",\"title\":\"dashboardLayout_title__1yGVn\",\"hr\":\"dashboardLayout_hr__29GgW\",\"container\":\"dashboardLayout_container__3AwFx\",\"titleContainer\":\"dashboardLayout_titleContainer__3J8Iz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"flashMessage_root__2sPxp\",\"content\":\"flashMessage_content__3iY0s\",\"header\":\"flashMessage_header__Vx_Jr\",\"messageList\":\"flashMessage_messageList__3V9SA\",\"msg\":\"flashMessage_msg__3Wquk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListEditForm_root__rs5qL\",\"input\":\"shoppingListEditForm_input__2FbCX\",\"submit\":\"shoppingListEditForm_submit__1FqNJ\",\"fa\":\"shoppingListEditForm_fa__Bb-dM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"homePage_root__15tty\",\"container\":\"homePage_container__3kQJo\",\"header\":\"homePage_header__3EV45\",\"login\":\"homePage_login__3ala0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loginPage_root__2Vf7z\",\"errorMessage\":\"loginPage_errorMessage__8uTVC\",\"container\":\"loginPage_container__2xdLK\",\"button\":\"loginPage_button__1pDsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"notFoundPage_root__131Oh\",\"container\":\"notFoundPage_container__38cw2\",\"header\":\"notFoundPage_header__BhS9L\",\"link\":\"notFoundPage_link__2cDdM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"logoutDropdown_button__3hRUK\",\"body\":\"logoutDropdown_body__NiLPw\",\"googleLogout\":\"logoutDropdown_googleLogout__J9YSG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"shoppingListPage_overlay__37z_g\",\"createForm\":\"shoppingListPage_createForm__c7_90\",\"flash\":\"shoppingListPage_flash__1mBKN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationMosaic_root__2CDUx\",\"card\":\"navigationMosaic_card__3hEln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardPage_root__oVxx1\",\"loading\":\"dashboardPage_loading__2vZsl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noLists\":\"shoppingListPageContent_noLists__3xnMI\",\"shoppingList\":\"shoppingListPageContent_shoppingList__S3gTj\",\"loading\":\"shoppingListPageContent_loading__2EI8i\",\"error\":\"shoppingListPageContent_error__1dyyw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationCard_root__1-FD3\"};","export const googleClientId = process.env.NODE_ENV === 'production' ?\n  '891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com' :\n  '891031345873-ir73kc1ru0ncv564iesac94kjaap5nf4.apps.googleusercontent.com'\n\nexport const backendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim-api.danascheider.com' : 'http://localhost:3000'\n\nexport const frontendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim.danascheider.com' : 'http://localhost:3001'\n\nexport const sessionCookieName = '_sim_google_session'\n","export function AuthorizationError(message = '401 Unauthorized') {\n  this.message = message\n  this.code = 401\n  this.name = 'AuthorizationError'\n  this.stack = (new Error()).stack\n}\n\nAuthorizationError.prototype = new Error()\n\nexport function NotFoundError(message = '404 Not Found') {\n  this.message = message\n  this.code = 404\n  this.name = 'NotFoundError'\n  this.stack = (new Error()).stack\n}\n\nNotFoundError.prototype = new Error()\n\nexport function MethodNotAllowedError(message = '405 Method Not Allowed') {\n  this.message = message\n  this.code = 405\n  this.name = 'MethodNotAllowedError'\n  this.stack = (new Error()).stack\n}\n\nMethodNotAllowedError.prototype = new Error()\n","/*\n *\n * This module is an abstraction layer for the SIM API that handles making requests\n * to the API. These functions handle three things: (1) formulating the requests based\n * on which function it is and the args being passed in (including assembling both\n * headers and request body) and (2) throwing an AuthorizationError if the request fails.\n * The AuthorizationError has name 'AuthorizationError', code 401, and either the\n * message passed to the constructor or, by default, '401 Unauthorized'.\n * \n * For more information on the SIM API, its endpoints, the requests it expects, or its\n * responses, please visit the backend API docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { backendBaseUri } from './config'\nimport {\n  AuthorizationError,\n  MethodNotAllowedError,\n  NotFoundError\n} from './customErrors'\n\nconst contentTypeHeader = { 'Content-Type': 'application/json' }\nconst authHeader = token => ({ 'Authorization': `Bearer ${token}`})\nconst combinedHeaders = token => ({ ...authHeader(token), ...contentTypeHeader })\n\n/*\n *\n * Google OAuth Token Verification Endpoint\n * \n */\n\nexport const authorize = token => {\n  const uri = `${backendBaseUri}/auth/verify_token`\n\n  return(\n    fetch(uri, {  headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n/*\n *\n * User Profile Endpoint\n * \n */\n\nexport const fetchUserProfile = token => {\n  const uri = `${backendBaseUri}/users/current`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n/*\n *\n * Shopping List Endpoints (Scoped to Authenticated User)\n *\n */\n\n// GET /shopping_lists\nexport const fetchShoppingLists = token => {\n  const uri = `${backendBaseUri}/shopping_lists`\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n// POST /shopping_lists\nexport const createShoppingList = (token, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists`\n  const body = JSON.stringify({ shopping_list: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp\n  })\n}\n\n// PATCH /shopping_lists/:id\nexport const updateShoppingList = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  const body = JSON.stringify({\n    id: listId,\n    shopping_list: attrs\n  })\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: body\n    })\n    .then(resp => {\n      // It might return a 422 error too, but in that case we'll need the response\n      // JSON to handle the error\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      if (resp.status === 405) throw new MethodNotAllowedError('Aggregate lists are managed automatically and cannot be updated manually.')\n      return resp\n    })\n  )\n}\n\n// DELETE /shopping_lists/:id\nexport const destroyShoppingList = (token, listId) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token),\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      if (resp.status === 405) throw new MethodNotAllowedError('Aggregate lists are managed automatically and cannot be deleted manually.')\n      return resp\n    })\n  )\n}\n\n/*\n *\n * Shopping List Item Endpoints\n *\n */\n\n// POST /shopping_lists/:shopping_list_id/shopping_list_items\nexport const createShoppingListItem = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}/shopping_list_items`\n\n  return(\n    fetch(uri, {\n      method: 'POST',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.\")\n      return resp\n    })\n  )\n}\n\n// PATCH /shopping_list_items/:id\nexport const updateShoppingListItem = (token, itemId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to update a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError()\n      return resp\n    })\n  )\n}\n\n// DELETE /shopping_list_items/:id\nexport const destroyShoppingListItem = (token, itemId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token)\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to delete a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError()\n      return resp\n    })\n  )\n}\n","const defaultErrorCallback = err => {\n  console.error('Error signing out: ', err.message)\n}\n\nconst logOutWithGoogle = (success = () => {}, error = defaultErrorCallback) => {\n  if (window.gapi && window.gapi.auth2) {\n    const GoogleAuth = window.gapi.auth2.getAuthInstance()\n\n    if (GoogleAuth !== null) {\n      GoogleAuth\n        .then(() => GoogleAuth.disconnect())\n        .then(success, error)\n    } else {\n      success() // Google thinks they aren't logged in anyway\n    }\n  }\n\n  success()\n}\n\nexport default logOutWithGoogle\n","export const isTestEnv = process.env.STORYBOOK || process.env.NODE_ENV === 'test'\n\nexport const isJest = process.env.NODE_ENV === 'test'\n\nexport const isStorybook = !!process.env.STORYBOOK\n","const paths = {\n  home: '/',\n  login: '/login',\n  dashboard: {\n    main: '/dashboard',\n    shoppingLists: '/dashboard/shopping_lists'\n  }\n}\n\nexport const allPaths = [\n  '/',\n  '/login',\n  '/dashboard',\n  '/dashboard/shopping_lists'\n]\n\nexport default paths\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { createContext, useEffect, useState, useRef, useCallback } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { Redirect, useLocation } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { sessionCookieName } from '../utils/config'\nimport { fetchUserProfile } from '../utils/simApi'\nimport logOutWithGoogle from '../utils/logOutWithGoogle'\nimport { isTestEnv } from '../utils/isTestEnv'\nimport paths, { allPaths } from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\n\nconst AppContext = createContext()\n\n// overrideValue allows us to set the context value in Storybook.\n// I hate having the testing apparatus baked into the app code but\n// none of the solutions I found worked and I don't understand\n// Storybook decorators and whatnot enough to figure out how to\n// set the value for the context in the story,\nconst AppProvider = ({ children, overrideValue = {} }) => {\n  const { pathname } = useLocation()\n  const [cookies, setCookie, removeCookie] = useCookies([sessionCookieName])\n  const [flashProps, setFlashProps] = useState({})\n  const [flashVisible, setFlashVisible] = useState(false)\n  const [profileData, setProfileData] = useState(overrideValue.profileData)\n  const [redirectPath, setRedirectPath] = useState(overrideValue.shouldRedirectTo)\n  const [profileLoadState, setProfileLoadState] = useState(overrideValue.profileLoadState || LOADING)\n\n  const mountedRef = useRef(true)\n\n  const removeSessionCookie = useCallback(() => removeCookie(sessionCookieName), [removeCookie])\n  const setSessionCookie = token => setCookie(sessionCookieName, token)\n\n  const setShouldRedirectTo = useCallback(path => {\n    setRedirectPath(path)\n    mountedRef.current = false\n  }, [])\n\n  const displayFlash = useCallback((type, message, header = null) => {\n    setFlashProps({ type, message, header })\n    setFlashVisible(true)\n    window.scrollTo(0, 0)\n  }, [])\n\n  const hideFlash = useCallback(() => { setFlashVisible(false) }, [])\n\n  const onAuthenticatedPage = useCallback(() => {\n    return pathname !== paths.login && pathname !== paths.home && allPaths.indexOf(pathname) !== -1\n  }, [pathname])\n\n  const shouldFetchProfileData = useCallback(() => {\n    return !overrideValue.profileData && cookies[sessionCookieName] && onAuthenticatedPage()\n  }, [overrideValue.profileData, cookies, onAuthenticatedPage])\n\n  const logOutAndRedirect = useCallback((path = paths.login, callback = null) => {\n    logOutWithGoogle(() => {\n      cookies[sessionCookieName] && removeSessionCookie()\n      callback && callback()\n      onAuthenticatedPage() && setShouldRedirectTo(path)\n    })\n  }, [cookies, removeSessionCookie, onAuthenticatedPage, setShouldRedirectTo])\n\n  const value = {\n    token: cookies[sessionCookieName],\n    profileData,\n    removeSessionCookie,\n    setSessionCookie,\n    profileLoadState,\n    setShouldRedirectTo,\n    logOutAndRedirect,\n    flashVisible,\n    flashProps,\n    displayFlash,\n    hideFlash,\n    ...overrideValue // enables you to only change certain values\n  }\n\n  const fetchProfileData = () => {\n    if (shouldFetchProfileData()) {\n      fetchUserProfile(cookies[sessionCookieName])\n        .then(response => response.json())\n        .then(data => {\n          if (data.errors) {\n            throw new Error('Internal Server Error: ', data.errors[0])\n          } else if (mountedRef.current === true) {\n            setProfileData(data)\n            if (!overrideValue.profileLoadState) setProfileLoadState(DONE)\n          }\n        })\n        .catch(error => {\n          if (process.env.NODE_ENV === 'development') console.error('Error returned while fetching profile data: ', error.message)\n\n          // I feel like this might not be the right behaviour if the error was a 500,\n          // but I also can't think of a case where an error like this would occur and\n          // not be a 401, given the user profile will be created during the authorization\n          // step if it doesn't exist already.\n          logOutAndRedirect()\n        })\n    } else if (isTestEnv && !overrideValue.profileLoadState) {\n      setProfileLoadState(DONE)\n    }\n  }\n\n  useEffect(() => {\n    if (onAuthenticatedPage() && !cookies[sessionCookieName] && mountedRef.current) logOutAndRedirect()\n  }, [onAuthenticatedPage, cookies, logOutAndRedirect])\n\n  useEffect(fetchProfileData, [\n                                onAuthenticatedPage,\n                                logOutAndRedirect,\n                                overrideValue.profileLoadState,\n                                shouldFetchProfileData,\n                                cookies\n                              ])\n\n  useEffect(() => (() => mountedRef.current = false))\n\n  return(\n    <AppContext.Provider value={value}>\n      {redirectPath ? <Redirect to={redirectPath} /> : children}\n    </AppContext.Provider>\n  )\n}\n\nAppProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    token: PropTypes.string,\n    profileData: PropTypes.shape({\n      id: PropTypes.number,\n      uid: PropTypes.string,\n      email: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      image_url: PropTypes.string\n    }),\n    setSessionCookie: PropTypes.func,\n    removeSessionCookie: PropTypes.func,\n    setProfileData: PropTypes.func,\n    flashVisible: PropTypes.bool,\n    flashProps: PropTypes.shape({\n      type: PropTypes.oneOf(['error', 'info', 'success']).isRequired,\n      message: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n      header: PropTypes.string\n    }),\n    displayFlash: PropTypes.func,\n    hideFlash: PropTypes.func,\n    logOutAndRedirect: PropTypes.func\n  })\n}\n\nexport { AppContext, AppProvider }\n","export const YELLOW = {\n  schemeColorDarkest: '#ffbf00',\n  schemeColorDark: '#ffcb32',\n  schemeColorLight: '#ffd866',\n  schemeColorLightest: '#fff2cc',\n  hoverColorDark: '#e5ab00',\n  hoverColorLight: '#ffc519',\n  hoverColorLightest: '#ffebb2',\n  textColorPrimary: '#4c3900',\n  textColorSecondary: '#4c3900',\n  textColorTertiary: '#7f5700',\n  borderColor: '#cc9800',\n}\n\nexport const PINK = {\n  schemeColorDarkest: '#e83f6f',\n  schemeColorDark: '#ec658b',\n  schemeColorLight: '#f18ba8',\n  schemeColorLightest: '#fad8e2',\n  hoverColorDark: '#d03863',\n  hoverColorLight: '#ea527d',\n  hoverColorLightest: '#f5b2c5',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#451221',\n  borderColor: '#b93258',\n}\n\nexport const BLUE = {\n  schemeColorDarkest: '#2274a5',\n  schemeColorDark: '#4e8fb7',\n  schemeColorLight: '#7aabc9',\n  schemeColorLightest: '#d2e3ed',\n  hoverColorDark: '#1e6894',\n  hoverColorLight: '#3881ae',\n  hoverColorLightest: '#bcd5e4',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#0d2e42',\n  borderColor: '#1b5c84'\n}\n\nexport const GREEN = {\n  schemeColorDarkest: '#00a323',\n  schemeColorDark: '#32b54e',\n  schemeColorLight: '#66c77b',\n  schemeColorLightest: '#ccecd3',\n  hoverColorDark: '#00921f',\n  hoverColorLight: '#19ac38',\n  hoverColorLightest: '#b2e3bd',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#00410e',\n  borderColor: '#00821c'\n}\n\nexport const AQUA = {\n  schemeColorDarkest: '#20e2e9',\n  schemeColorDark: '#62eaef',\n  schemeColorLight: '#8ff0f4',\n  schemeColorLightest: '#d2f9fa',\n  hoverColorDark: '#11cbd1',\n  hoverColorLight: '#4ce7ed',\n  hoverColorLightest: '#bcf6f8',\n  textColorPrimary: '#094345',\n  textColorSecondary: '#094345',\n  textColorTertiary: '#094345',\n  borderColor: '#19b4ba'\n}\n\nconst colorSchemes = [\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n]\n\nexport default colorSchemes\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { createContext } from 'react'\nimport PropTypes from 'prop-types'\n\n\nconst ColorContext = createContext()\n\nconst ColorProvider = ({ colorScheme, children }) => {\n  return(\n    <ColorContext.Provider value={colorScheme}>\n      {children}\n    </ColorContext.Provider>\n  )\n}\n\nColorProvider.propTypes = {\n  colorScheme: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    schemeColorDark: PropTypes.string.isRequired,\n    schemeColorLight: PropTypes.string.isRequired,\n    schemeColorLightest: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    hoverColorLight: PropTypes.string.isRequired,\n    hoverColorLightest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    textColorSecondary: PropTypes.string,\n    textColorTertiary: PropTypes.string,\n    borderColor: PropTypes.string\n  }).isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport { ColorProvider, ColorContext }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport { createContext, useState, useEffect, useRef, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  createShoppingList,\n  fetchShoppingLists,\n  updateShoppingList,\n  destroyShoppingList,\n  createShoppingListItem,\n  updateShoppingListItem,\n  destroyShoppingListItem\n} from '../utils/simApi'\nimport { useAppContext } from '../hooks/contexts'\nimport paths from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\nconst ERROR = 'error'\n\nconst ShoppingListContext = createContext()\n\nconst ShoppingListProvider = ({ children, overrideValue = {} }) => {\n  const [shoppingLists, setShoppingLists] = useState(overrideValue.shoppingLists || [])\n  const [listItemEditFormProps, setListItemEditFormProps] = useState({})\n  const [listItemEditFormVisible, setListItemEditFormVisible] = useState(false)\n  const [shoppingListLoadingState, setShoppingListLoadingState] = useState(LOADING)\n  const {\n    token,\n    logOutAndRedirect,\n    displayFlash\n  } = useAppContext()\n\n  const shoppingListsOverridden = useRef(false)\n  \n  if (overrideValue.shoppingLists) {\n    // Use this as the initial value only so that the shopping\n    // lists can be updated when we interact in Storybook\n    delete overrideValue.shoppingLists\n    shoppingListsOverridden.current = true\n  }\n\n  const mountedRef = useRef(true)\n\n  const addOrUpdateListItem = (list, item) => {\n    const originalItem = list.list_items.find(listItem => listItem.description.toLowerCase() === item.description.toLowerCase())\n    const newListItems = [...list.list_items]\n\n    if (originalItem) {\n      const originalItemPosition = list.list_items.indexOf(originalItem)\n      newListItems.splice(originalItemPosition, 1, item)\n    } else {\n      newListItems.unshift(item)\n    }\n\n    list.list_items = newListItems\n\n    return { ...list }\n  }\n\n  const listFromListItemId = itemId => shoppingLists.find(list => !!list.list_items.find(item => item.id === itemId))\n\n  const removeItemFromList = (list, itemId) => {\n    const newList = { ...list }\n    const newListItems = [...list.list_items]\n\n    const item = list.list_items.find(item => item.id === itemId)\n    const index = list.list_items.indexOf(item)\n\n    newListItems.splice(index, 1)\n    newList.list_items = newListItems\n    \n    return newList\n  }\n  \n  const fetchLists = useCallback(() => {\n    if (token && !shoppingListsOverridden.current) {\n      fetchShoppingLists(token)\n        .then(resp => resp.json())\n        .then(data => {\n          if(data && !data.errors) {\n            setShoppingLists(data)\n            overrideValue.shoppingListLoadingState === undefined && setShoppingListLoadingState(DONE)\n          } else {\n            const message = data && data.errors ? 'Internal ServerError: ' + data.errors[0] : 'No shopping list data returned from the SIM API'\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching shopping lists: ', err)\n\n            !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n            displayFlash('error', \"There was an error loading your lists. It may have been on our end. We're sorry!\")\n          }\n        })\n    } else {\n      overrideValue.shoppingListLoadingState === undefined && setShoppingListLoadingState(DONE)\n    }\n  }, [token, overrideValue.shoppingListLoadingState, displayFlash, logOutAndRedirect])\n\n  const performShoppingListUpdate = (listId, newTitle, success = null, error = null) => {\n    updateShoppingList(token, listId, { title: newTitle })\n      .then(resp => {\n        switch(resp.status) {\n          case 200:\n          case 422:\n          case 500:\n            return resp.json()\n          default:\n            throw Error('Something unexpected went wrong while updating your list.')\n        }\n      })\n      .then(data => {\n        if (data && !data.errors) {\n          const newShoppingLists = shoppingLists.map(list => { if (list.id === listId) { return data } else { return list } })\n          setShoppingLists(newShoppingLists)\n          overrideValue.shoppingListLoadingState === undefined && setShoppingListLoadingState(DONE)\n          success && success()\n        } else if (data && data.errors) {\n          // Since only the title can be updated, any validation errors should start with 'Title'.\n          // If all the validation errors start with 'Title', assume it's a validation error. If\n          // not, assume it's a 500 error.\n          if (data.errors.filter(msg => msg.match(/^Title/)).length === data.errors.length) {\n            displayFlash('error', data.errors, `${data.errors.length} error(s) prevented your changes from being saved:`)\n          } else {\n            // 500 errors only return a single error message so data.errors[0] is all of them\n            throw new Error('Internal Server Error: ' + data.errors[0])\n          }\n\n          overrideValue.shoppingListLoadingState === undefined && setShoppingListLoadingState(DONE) // still just done bc no error thrown\n          error && error()\n        } else {\n          displayFlash('error', 'We couldn\\'t update your list and we\\'re not sure what went wrong. We\\'re sorry! Please refresh the page and try again.')\n\n          overrideValue.setShoppingListLoadingState === undefined && setShoppingListLoadingState(DONE) // still just done because no error thrown\n          error && error()\n        }\n      })\n      .catch(err => {\n        if (process.env.NODE_ENV === 'development') console.error(`Error updating shopping list ${listId}: `, err)\n\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => mountedRef.current = false)\n        } else if (err.code === 404) {\n          displayFlash('error', \"Oops! We couldn't find the shopping list you wanted to update. Try refreshing the page to fix this problem.\")\n\n          overrideValue.shoppingListLoadingState === undefined && setShoppingListLoadingState(DONE)\n          \n          error && error()\n        } else {\n          displayFlash('error', \"Something unexpected happened while trying to update your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\")\n\n          overrideValue.shoppingListLoadingState === undefined && setShoppingListLoadingState(DONE)\n\n          error && error()\n        }\n      }) \n  }\n\n  const performShoppingListCreate = (title, success = null, error = null) => {\n    createShoppingList(token, { title })\n      .then(resp => resp.json())\n      .then(data => {\n        if (Array.isArray(data) && data.length === 2) {\n          // It is an array of shopping lists. It includes the shopping list that was\n          // created and an aggregate list that was created automatically. This case only\n          // arises if there were no existing shopping lists, so in this case, we want\n          // to set the shopping lists array to the lists returned.\n          setShoppingLists(data)\n\n          displayFlash('success', 'Success! Your list was created, along with your new aggregate shopping list.')\n\n          success && success()\n        } else if (data && typeof data === 'object' && !data.errors) {\n          // It is an array of shopping lists but it only contains one. This case means\n          // that there was already an aggregate list and only the list the user manually\n          // created was created. The new list should be added to the existing shoppingLists\n          // array in the second position (after the aggregate list but before any of the others).\n          const newShoppingLists = shoppingLists\n          newShoppingLists.splice(1, 0, data)\n          setShoppingLists(newShoppingLists)\n\n          displayFlash('success', 'Success! Your list was created.')\n\n          success && success()\n        } else if (data && typeof data === 'object' && data.errors ) {\n          // Since we're only setting the title here, all validation errors should start with 'Title'.\n          // If all errors start with 'Title', assume it's a validation error. Otherwise, assume it's a\n          // 500. This will mess up if the 500 error message starts with 'Title', but I see that scenario\n          // as unlikely.\n          if (data.errors.filter(msg => msg.match(/^Title/)).length === data.errors.length) {\n            displayFlash('error', data.errors, `${data.errors.length} error(s) prevented your shopping list from being created:`)\n            success && success()\n          } else {\n            // 500 responses return only one error message so this is all of them.\n            throw new Error('Internal Server Error: ' + data.errors[0])\n          }\n        } else {\n          // Something unexpected happened and we don't know what\n          throw new Error('There was an unexpected error creating your new list. Unfortunately, we don\\'t know more than that yet. We\\'re sorry!')\n        }\n      })\n      .catch(err => {\n        if (process.env.NODE_ENV === 'development') console.error('Error creating shopping list: ', err)\n\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => mountedRef.current = false)\n        } else {\n          displayFlash('error', \"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\")\n\n          error && error()\n        }\n      })\n  }\n\n  const performShoppingListDestroy = (listId, success = null, error = null) => {\n    destroyShoppingList(token, listId)\n      .then(resp => {\n        // Error responses, including 404 and 405 responses, result\n        // in a NotFoundError or MethodNotAllowedError to be thrown\n        // (respectively).\n        if (resp.status === 204) {\n          return null\n        } else {\n          return resp.json()\n        }\n      })\n      .then(data => {\n        if (!data) {\n          // This means that the list was the user's last shopping list and both\n          // it and the aggregate list have been destroyed.\n          setShoppingLists([])\n          \n          displayFlash(\n            'success',\n            'Since it was your last list, your aggregate list has been deleted as well',\n            'Your shopping list has been deleted'\n          )\n\n          success && success()\n        } else if (data && data.errors) {\n          throw new Error('Internal Server Error: ' + data.errors[0])\n        } else {\n          // This means that the aggregate list has been updated and returned,\n          // to adjust for any items that were deleted with the other list.\n          const newShoppingLists = shoppingLists.map(list => (list.aggregate === true ? data : list))\n                                                .filter(list => list && list.id !== listId)\n\n          setShoppingLists(newShoppingLists)\n\n          displayFlash('success', 'Your shopping list has been deleted.')\n\n          success && success()\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => mountedRef.current = false)\n        } else if (err.code === 404) {\n          displayFlash('error', \"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem.\")\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error deleting shopping list: ', err.message)\n\n          displayFlash('error', \"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\")\n        }\n        \n        error && error()\n      })\n  }\n\n  const performShoppingListItemCreate = (listId, attrs, success = null, error = null) => {\n    const allowedAttributes = ['Description', 'Quantity', 'Notes']\n\n    createShoppingListItem(token, listId, attrs)\n      .then(resp => resp.json())\n      .then(data => {\n        if (Array.isArray(data)) {\n          const [aggregateListItem, regularListItem] = data\n\n          // Have to create an actual new object or the state change won't cause useEffect\n          // hooks to run.\n          const newLists = [...shoppingLists]\n          const aggregateList = shoppingLists[0]\n          const regularList = shoppingLists.find(list => list.id === listId)\n          const regularListPosition = shoppingLists.indexOf(regularList)\n\n          const newAggregateList = addOrUpdateListItem(aggregateList, aggregateListItem)\n          const newRegularList = addOrUpdateListItem(regularList, regularListItem)\n\n          newLists[0] = newAggregateList\n          newLists[regularListPosition] = newRegularList\n\n          setShoppingLists(newLists)\n\n          success && success()\n        } else if (data && typeof data === 'object' && data.errors) {\n          // If all the errors returned start with one of the allowed attributes, it's a safe bet that\n          // this is a validation error. Otherwise, assume it is a 500.\n          if (data.errors.filter(msg => allowedAttributes.indexOf(msg.split(' ')[0]) !== -1).length === data.errors.length) {\n            displayFlash('error', data.errors, `${data.errors.length} error(s) prevented your shopping list item from being created:`)\n            error && error()\n          } else {\n            throw new Error('Internal Server Error: ' + data.errors[0])\n          }\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => mountedRef.current = false)\n        } else if (err.code === 404) {\n          displayFlash('error', \"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem.\")\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error when creating shopping list item: ', err.message)\n\n          displayFlash('error', \"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\")\n        }\n\n        error && error()\n      })\n  }\n\n  const performShoppingListItemUpdate = (itemId, attrs, showFlashOnSuccess = false, success = null, error = null) => {\n    const allowedAttributes = ['Quantity', 'Notes']\n\n    updateShoppingListItem(token, itemId, attrs)\n      .then(resp => resp.json())\n      .then(data => {\n        if (Array.isArray(data)) {\n          const [aggregateListItem, regularListItem] = data\n\n          let newShoppingLists = [...shoppingLists]\n\n          const regularList = shoppingLists.find(list => list.id === regularListItem.list_id)\n          const regularListPosition = shoppingLists.indexOf(regularList)\n\n          const newAggregateList = addOrUpdateListItem(shoppingLists[0], aggregateListItem)\n          const newRegularList = addOrUpdateListItem(regularList, regularListItem)\n          \n          newShoppingLists[0] = newAggregateList\n          newShoppingLists[regularListPosition] = newRegularList\n\n          setShoppingLists(newShoppingLists)\n\n          setListItemEditFormVisible(false)\n          showFlashOnSuccess && displayFlash('success', 'Success! Your shopping list item was updated.')\n\n          success && success()\n        } else if (data && typeof data === 'object' && data.errors) {\n          // If all the errors returned start with one of the allowed attributes, then it's safe to say it's\n          // a validation error. If not, assume it's a 500.\n          if (data.errors.filter(msg => allowedAttributes.indexOf(msg.split(' ')[0]) !== -1).length === data.errors.length) {\n            setListItemEditFormVisible(false)\n            displayFlash('error', data.errors, `${data.errors.length} error(s) prevented your shopping list item from being updated:`)\n            error && error()\n          } else {\n            setListItemEditFormVisible(false)\n            throw new Error('Internal Server Error: ' + data.errors[0])\n          }\n        } else {\n          throw new Error(`Something unexpected went wrong: could not update shopping list item id=${itemId}`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => mountedRef.current = false)\n        } else if (err.code === 404) {\n          displayFlash('error', \"Oops! We couldn't find the shopping list item you wanted to update. Sorry! Try refreshing the page to solve this problem.\")\n        } else if (err.code === 405) {\n          displayFlash('error', 'Cannot manually edit item on an aggregate list')\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Unexpected error editing list item ${itemId}: `, err)\n\n          displayFlash('error', \"Something unexpected happened while trying to update your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\")\n        }\n\n        error && error()\n      })\n  }\n\n  const performShoppingListItemDestroy = (itemId, success = null, error = null) => {\n    destroyShoppingListItem(token, itemId)\n      .then(resp => {\n        if (resp.status === 204) return null\n\n        return resp.json()\n      })\n      .then(data => {\n        const regularListToRemoveItemFrom = listFromListItemId(itemId)\n        const regularListIndex = shoppingLists.indexOf(regularListToRemoveItemFrom)\n        const newLists = [...shoppingLists]\n        let newAggregateList\n\n        if (data && typeof data === 'object' && !data.errors) {\n          // It is the aggregate list item that was updated\n          newAggregateList = addOrUpdateListItem(shoppingLists[0], data)\n        } else if (data && typeof data === 'object' && data.errors) {\n          throw new Error('Internal Server Error: ' + data.errors[0])\n        } else {\n          const deletedItem = regularListToRemoveItemFrom.list_items.find(item => item.id === itemId)\n\n          // It's a bit of a pain in the ass to figure out which item to remove from the aggregate list in\n          // the case where it's been deleted. Might be something to think about for API development.\n          const aggregateListItem = shoppingLists[0].list_items.find(item => item.description.toLowerCase() === deletedItem.description.toLowerCase())\n\n          newAggregateList = removeItemFromList(shoppingLists[0], aggregateListItem.id)\n        }\n\n        const newRegularList = removeItemFromList(regularListToRemoveItemFrom, itemId)\n\n        newLists[0] = newAggregateList\n        newLists.splice(regularListIndex, 1, newRegularList)\n\n        setShoppingLists(newLists)\n          \n        success && success()\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => mountedRef.current = false)\n        } else if (err.code === 404) {\n          displayFlash('error', \"Oops! We couldn't find the shopping list item you wanted to delete. Sorry! Try refreshing the page to solve this problem.\")\n        } else if (err.code === 405) {\n          displayFlash('error', 'Cannot manually remove an item from an aggregate list')\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error destroying shopping list item: ', err)\n          displayFlash('error', \"Something unexpected happened while trying to delete your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\")\n        }\n\n        error && error()\n      })\n  }\n\n  const value = {\n    shoppingLists,\n    shoppingListLoadingState,\n    performShoppingListUpdate,\n    performShoppingListCreate,\n    performShoppingListDestroy,\n    performShoppingListItemCreate,\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy,\n    listItemEditFormVisible,\n    setListItemEditFormVisible,\n    listItemEditFormProps,\n    setListItemEditFormProps,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    fetchLists()\n    return () => mountedRef.current = false\n  }, [fetchLists])\n\n  return(\n    <ShoppingListContext.Provider value={value}>\n      {children}\n    </ShoppingListContext.Provider>\n  )\n}\n\nShoppingListProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    shoppingLists: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      user_id: PropTypes.number,\n      title: PropTypes.string.isRequired,\n      aggregate: PropTypes.bool.isRequired,\n      list_items: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number,\n        list_id: PropTypes.number,\n        description: PropTypes.string.isRequired,\n        quantity: PropTypes.number.isRequired,\n        notes: PropTypes.string\n      })).isRequired\n    })),\n    shoppingListLoadingState: PropTypes.string,\n    performShoppingListUpdate: PropTypes.func,\n    performShoppingListCreate: PropTypes.func,\n    performShoppingListDestroy: PropTypes.func,\n    performShoppingListItemCreate: PropTypes.func,\n    performShoppingListItemUpdate: PropTypes.func,\n    performShoppingListItemDelete: PropTypes.func\n  })\n}\n\nexport { ShoppingListContext, ShoppingListProvider}\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { useContext } from 'react'\nimport { ColorContext } from '../contexts/colorContext'\nimport { AppContext } from '../contexts/appContext'\nimport { ShoppingListContext } from '../contexts/shoppingListContext'\n\nconst useCustomContext = (cxt, msg) => {\n  const context = useContext(cxt)\n\n  if (!context) {\n    throw new Error(msg)\n  }\n\n  return context\n}\n\nexport const useColorScheme = () => (\n  useCustomContext(ColorContext, 'useColorScheme must be used within a ColorProvider')\n)\n\nexport const useAppContext = () => (\n  useCustomContext(AppContext, 'useAppContext must be used within a AppProvider')\n)\n\nexport const useShoppingListContext = () => (\n  useCustomContext(ShoppingListContext, 'useShoppingListContext must be used within a ShoppingListProvider')\n)\n","export default __webpack_public_path__ + \"static/media/googleIcon.9432a66b.svg\";","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport icon from './googleIcon.svg'\nimport styles from './logoutDropdown.module.css'\n\nconst LogoutDropdown = ({className, logOutFunction}) => {\n  const mountedRef = useRef(true)\n\n  const logOutAndUnmount = e => {\n    e.preventDefault()\n\n    logOutFunction(() => { mountedRef.current = false })\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ))\n\n  return(\n    <div className={className}>\n      <button className={styles.button} onClick={logOutAndUnmount}>\n        <div className={styles.body}>\n          <div className={styles.googleLogout}>\n            <img src={icon} alt='Google logo' />\n            Log Out With Google\n          </div>\n        </div>\n      </button>\n    </div>\n  )\n}\n\nLogoutDropdown.propTypes = {\n  className: PropTypes.string,\n  logOutFunction: PropTypes.func.isRequired\n}\n\nexport default LogoutDropdown\n","export default __webpack_public_path__ + \"static/media/anonymousAvatar.36d1acc1.jpg\";","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport LogoutDropdown from '../logoutDropdown/logoutDropdown'\nimport anonymousAvatar from './anonymousAvatar.jpg'\nimport styles from './dashboardHeader.module.css'\n\nconst DashboardHeader = () => {\n  const {\n    profileData,\n    logOutAndRedirect\n  } = useAppContext()\n\n  const [dropdownVisible, setDropdownVisible] = useState(false)\n  const mountedRef = useRef(true)\n\n  const logOutFunction = useCallback((callback = null) => {\n    setDropdownVisible(false);\n\n    logOutAndRedirect(paths.home, () => {\n      callback && callback()\n      mountedRef.current = false\n    })\n  }, [logOutAndRedirect])\n\n  useEffect(() => {\n    return () => (mountedRef.current = false)\n  }, [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.bar}>\n        <span className={styles.headerContainer}>\n          <h1 className={styles.header}>\n            <Link className={styles.headerLinkLarge} to={paths.dashboard.main}>Skyrim Inventory<br className={styles.bp} /> Management</Link>\n            <Link className={styles.headerLinkSmall} to={paths.dashboard.main}>S. I. M.</Link>\n          </h1>\n        </span>\n        {profileData ?\n        <button className={styles.profile} onClick={() => setDropdownVisible(!dropdownVisible)}>\n          <div className={styles.profileText}>\n            <p className={styles.textTop}>{profileData.name}</p>\n            <p className={styles.textBottom}>{profileData.email}</p>\n          </div>\n          <img className={styles.avatar} src={profileData.image_url || anonymousAvatar} alt='User avatar' referrerPolicy='no-referrer' />\n        </button> :\n        null\n        }\n        <LogoutDropdown\n          className={dropdownVisible ? styles.logoutDropdown : styles.hidden}\n          logOutFunction={logOutFunction}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default DashboardHeader\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardHeader from '../components/dashboardHeader/dashboardHeader'\nimport styles from './dashboardLayout.module.css'\n\nconst DashboardLayout = ({ title, children }) => {\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        {title ?\n        <div className={styles.titleContainer}>\n          <h2 className={styles.title}>{title}</h2>\n          <hr className={styles.hr} />\n        </div> :\n        null}\n        {children}\n      </div>\n      <DashboardHeader />\n    </div>\n  )\n}\n\nDashboardLayout.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node.isRequired\n}\n\nexport default DashboardLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactLoading from 'react-loading'\n\nconst possibleTypes = [\n  'blank',\n  'balls',\n  'bars',\n  'bubbles',\n  'cubes',\n  'cylon',\n  'spin',\n  'spinningBubbles',\n  'spokes'\n]\n\nconst Loading = ({ className, type = 'bubbles', color, height, width }) => (\n  <ReactLoading className={className} type={type} color={color} height={height} width={width} />\n)\n\nLoading.propTypes = {\n  className: PropTypes.string,\n  type: PropTypes.oneOf(possibleTypes),\n  color: PropTypes.string.isRequired,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n}\n\nexport default Loading\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { useColorScheme } from '../../hooks/contexts'\nimport styles from './navigationCard.module.css'\n\nconst NavigationCard = ({ href, children }) => {\n  const { schemeColorDarkest, hoverColorDark, textColorPrimary} = useColorScheme()\n\n  const styleVars = {\n    '--background-color': schemeColorDarkest,\n    '--hover-color': hoverColorDark,\n    '--text-color': textColorPrimary\n  }\n\n  return(\n    <Link className={styles.root} to={href} style={styleVars}>\n      {children}\n    </Link>\n  )\n}\n\nNavigationCard.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport default NavigationCard\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport NavigationCard from '../navigationCard/navigationCard'\nimport styles from './navigationMosaic.module.css'\n\nconst NavigationMosaic = ({ cardArray }) => (\n  <div className={styles.root}>\n    {cardArray.map(({ colorScheme, href, children, key }) => (\n      <div key={key} className={styles.card}>\n        <ColorProvider colorScheme={colorScheme}>\n          <NavigationCard \n            href={href}\n            children={children}\n          />\n        </ColorProvider>\n      </div>\n    ))}\n  </div>\n)\n\nNavigationMosaic.propTypes = {\n  cardArray: PropTypes.arrayOf(\n    PropTypes.shape({\n      href: PropTypes.string.isRequired,\n      children: PropTypes.node.isRequired,\n      key: PropTypes.string.isRequired,\n      colorScheme: PropTypes.shape({\n        schemeColorDarkest: PropTypes.string.isRequired,\n        schemeColorDark: PropTypes.string.isRequired,\n        schemeColorLight: PropTypes.string.isRequired,\n        schemeColorLightest: PropTypes.string.isRequired,\n        hoverColorDark: PropTypes.string.isRequired,\n        hoverColorLight: PropTypes.string.isRequired,\n        hoverColorLightest: PropTypes.string.isRequired,\n        textColorPrimary: PropTypes.string.isRequired,\n        textColorSecondary: PropTypes.string,\n        textColorTertiary: PropTypes.string,\n        borderColor: PropTypes.string\n      }).isRequired\n    })\n  ).isRequired\n}\n\nexport default NavigationMosaic\n","import React, { useRef, useEffect } from 'react'\nimport {\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n} from '../../utils/colorSchemes'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport Loading from '../../components/loading/loading'\nimport NavigationMosaic from '../../components/navigationMosaic/navigationMosaic'\nimport styles from './dashboardPage.module.css'\n\nconst cards = [\n  {\n    colorScheme: YELLOW,\n    href: '#',\n    children: 'Your Games',\n    key: 'your-games'\n  },\n  {\n    colorScheme: PINK,\n    href: paths.dashboard.shoppingLists,\n    children: 'Your Shopping Lists',\n    key: 'your-shopping-lists'\n  },\n  {\n    colorScheme: BLUE,\n    href: '#',\n    children: 'Nav Link 3',\n    key: 'nav-link-3'\n  },\n  {\n    colorScheme: GREEN,\n    href: '#',\n    children: 'Nav Link 4',\n    key: 'nav-link-4'\n  },\n  {\n    colorScheme: AQUA,\n    href: '#',\n    children: 'Nav Link 5',\n    key: 'nav-link-5'\n  }\n]\n\nconst DashboardPage = () => {\n  const { token, profileLoadState, setShouldRedirectTo } = useAppContext()\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    if (!token && !isStorybook) {\n      setShouldRedirectTo(paths.login)\n      mountedRef.current = false\n    }\n\n    return () => mountedRef.current = false\n  }, [token, setShouldRedirectTo])\n  \n  return(\n    <DashboardLayout>\n      {profileLoadState === 'done' ? <div className={styles.root}>\n        <NavigationMosaic cardArray={cards} />\n      </div> :\n      <Loading className={styles.loading} type='bubbles' color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n    </DashboardLayout>\n  )\n}\n\nexport default DashboardPage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './flashMessage.module.css'\n\nconst SUCCESS = 'success'\nconst INFO = 'info'\nconst ERROR = 'error'\nconst WARNING = 'warning'\n\nconst colors = {\n  [SUCCESS]: {\n    body: '#e5f2e5',\n    border: '#b2d8b2',\n    text: '#329932'\n  },\n  [INFO]: {\n    body: '#cce5ff',\n    border: '#b3d8ff',\n    text: '#4e6d8e',\n  },\n  [ERROR]: {\n    body: '#ffcccc',\n    border: '#ff9999',\n    text: '#cc0000'\n  },\n  [WARNING]: {\n    body: '#fefde4',\n    border: '#fdf797',\n    text: '#b0a723'\n  }\n}\n\nconst FlashMessage = ({ type = INFO, header, message }) => {\n  const colorVars = {\n    '--body-color': colors[type].body,\n    '--border-color': colors[type].border,\n    '--text-color': colors[type].text\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      {header && <p className={styles.header}>{header}</p>}\n      {typeof message === 'string' ? message :\n      <ul className={styles.messageList}>\n        {message.map((msg, index) => <li key={`message-${index}`} className={styles.msg}>{msg}</li>)}\n      </ul>}\n    </div>\n  )\n}\n\nFlashMessage.propTypes = {\n  type: PropTypes.oneOf([SUCCESS, INFO, ERROR, WARNING]),\n  header: PropTypes.string,\n  message: PropTypes.oneOfType([\n    PropTypes.string, PropTypes.arrayOf(PropTypes.string)\n  ]).isRequired\n}\n\nexport default FlashMessage\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useShoppingListContext } from '../../hooks/contexts'\nimport styles from './shoppingListCreateForm.module.css'\nimport classNames from 'classnames'\n\nconst ShoppingListCreateForm = ({ disabled }) => {\n  const { hideFlash } = useAppContext()\n\n  const {\n    performShoppingListCreate\n  } = useShoppingListContext()\n\n  const [inputValue, setInputValue] = useState('')\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const updateValue = e => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n  }\n\n  const createShoppingList = e => {\n    e.preventDefault()\n    hideFlash()\n    const title = e.target.elements.title.value\n    performShoppingListCreate(title, () => setInputValue(''))\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <form className={styles.form} onSubmit={createShoppingList}>\n        <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n          <input\n            className={styles.input}\n            type='text'\n            name='title'\n            placeholder='Title'\n            value={inputValue}\n            onChange={updateValue}\n          />\n          <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit'>Create</button>\n        </fieldset>\n      </form>\n    </div>\n  )\n}\n\nShoppingListCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default ShoppingListCreateForm\n","import { useState, useRef, useEffect } from 'react'\n\nconst useComponentVisible = () => {\n  const [isComponentVisible, setIsComponentVisible] = useState(false)\n  const componentRef = useRef(null)\n  const triggerRef = useRef(null)\n\n  const componentRefContains = element => componentRef.current && componentRef.current.contains(element)\n  const triggerRefContains = element => triggerRef.current && triggerRef.current.contains(element)\n\n  const handleHideDiv = e => {\n    if (e.key === 'Escape') {\n      setIsComponentVisible(false)\n    }\n  }\n\n  const handleClickOutside = e => {\n    if (!componentRefContains(e.target) && !triggerRefContains(e.target)) {\n      setIsComponentVisible(false)\n    } else if (triggerRefContains(e.target)) {\n      setIsComponentVisible(!isComponentVisible)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleHideDiv, true)\n    document.addEventListener('click', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('keydown', handleHideDiv, true)\n      document.removeEventListener('click', handleClickOutside, true)\n    }\n  })\n\n  return { componentRef, triggerRef, isComponentVisible, setIsComponentVisible }\n}\n\nexport default useComponentVisible\n","import { useState, useLayoutEffect } from 'react'\nimport useResizeObserver from '@react-hook/resize-observer'\n\nconst useSize = target => {\n  const [size, setSize] = useState()\n\n  useLayoutEffect(() => {\n    setSize(target.current.getBoundingClientRect())\n  }, [target])\n\n  useResizeObserver(target, (entry) => setSize(entry.contentRect))\n\n  return size\n}\n\nexport default useSize\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { useColorScheme } from '../../hooks/contexts'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport styles from './shoppingListEditForm.module.css'\n\nconst ShoppingListEditForm = ({ formRef, maxTotalWidth, className, title, onSubmit }) => {\n  const getInputTextWidth = (text) => {\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n    context.font = '21px Quattrocento Sans'\n\n    const max = (maxTextWidth || maxTotalWidth)\n    \n    // The 1.1 proved necessary to prevent text from scrolling out of the\n    // view prematurely in Safari\n    const textWidth = context.measureText(text).width * 1.1\n\n    return Math.min(textWidth, max)\n  }\n\n  const [inputValue, setInputValue] = useState(title)\n  const [maxTextWidth, setMaxTextWidth] = useState(null)\n  const [inputWidth, setInputWidth] = useState(`${getInputTextWidth(title)}px`)\n  const inputRef = useRef(null)\n  const buttonRef = useRef(null)\n\n  const { schemeColorDarkest, textColorPrimary, borderColor, schemeColorLightest } = useColorScheme()\n\n  const colorVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--text-color': textColorPrimary,\n    '--border-color': borderColor,\n    '--icon-hover-color': schemeColorLightest\n  }\n\n  const updateInputWidth = (e) => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n    setInputWidth(`${getInputTextWidth(newValue)}px`)\n  }\n\n  useEffect(() => {\n    inputRef.current.focus()\n  })\n\n  useEffect(() => {\n    if (!buttonRef.current) return setMaxTextWidth(maxTotalWidth)\n\n    setMaxTextWidth(maxTotalWidth - buttonRef.current.offsetWidth)\n  }, [maxTotalWidth])\n\n  return(\n    <form className={classnames(className, styles.root)} style={colorVars} ref={formRef} onSubmit={onSubmit}>\n      <input\n        className={styles.input}\n        onClick={e => e.stopPropagation()}\n        onChange={updateInputWidth}\n        type='text'\n        name='title'\n        ref={inputRef}\n        style={{width: inputWidth}}\n        value={inputValue}\n      />\n      <button className={styles.submit} ref={buttonRef} name='submit' type='submit'>\n        <FontAwesomeIcon className={styles.fa} icon={faCheckSquare} />\n      </button>\n    </form>\n  )\n}\n\nShoppingListEditForm.propTypes = {\n  formRef: PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  }),\n  maxTotalWidth: PropTypes.number,\n  className: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired\n}\n\nexport default ShoppingListEditForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faAngleUp, faAngleDown, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { useAppContext, useColorScheme, useShoppingListContext } from '../../hooks/contexts'\nimport SlideToggle from 'react-slide-toggle'\nimport styles from './shoppingListItem.module.css'\n\nconst ShoppingListItem = ({\n  itemId,\n  listTitle,\n  canEdit,\n  description,\n  quantity,\n  notes\n}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  // This enables us to set the quantity to the new quantity during the time between when\n  // the user increments/decrements the quantity and the time the API responds.\n  const [currentQuantity, setCurrentQuantity] = useState(quantity)\n\n  const {\n    displayFlash,\n    hideFlash,\n  } = useAppContext()\n\n  const {\n    schemeColorDarkest,\n    textColorPrimary,\n    hoverColorDark,\n    schemeColorDark,\n    hoverColorLight,\n    textColorSecondary,\n    borderColor,\n    schemeColorLightest,\n    textColorTertiary\n  } = useColorScheme()\n\n  const {\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy,\n    setListItemEditFormProps,\n    setListItemEditFormVisible\n  } = useShoppingListContext()\n\n  const mountedRef = useRef(true)\n  const headerRef = useRef(null)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const deleteRef = useRef(null)\n  const incRef = useRef(null)\n  const decRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n  const editRefContains = el => refContains(editRef, el)\n  const deleteRefContains = el => refContains(deleteRef, el)\n  const incRefContains = el => refContains(incRef, el)\n  const decRefContains = el => refContains(decRef, el)\n  const iconContains = el => editRefContains(el) || deleteRefContains(el) || incRefContains(el) || decRefContains(el)\n  \n  const toggleDetails = e => {\n    if (!e || !iconContains(e.target)) setToggleEvent(Date.now)\n  }\n\n  const styleVars = {\n    '--main-color': schemeColorDark,\n    '--title-text-color': textColorSecondary,\n    '--border-color': borderColor,\n    '--body-background-color': schemeColorLightest,\n    '--body-text-color': textColorTertiary,\n    '--hover-color': hoverColorLight\n  }\n\n  const incrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity + 1\n\n    setCurrentQuantity(newQuantity)\n\n    performShoppingListItemUpdate(itemId, { quantity: newQuantity }, false, null, () => { setCurrentQuantity(oldQuantity) })\n  }\n\n  const decrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity - 1\n\n    if (newQuantity > 0) {\n      setCurrentQuantity(newQuantity)\n      performShoppingListItemUpdate(itemId, { quantity: newQuantity }, false, null, () => { setCurrentQuantity(oldQuantity) })\n    } else if (newQuantity === 0) {\n      const confirmed = window.confirm(\"Item quantity must be greater than zero. Delete the item instead?\")\n\n      if (confirmed) {\n        performShoppingListItemDestroy(itemId, () => { mountedRef.current = false })\n      } else {\n        displayFlash('info', 'Your item was not deleted.')\n      }\n    }\n  }\n\n  const destroyItem = () => {\n    const confirmed = window.confirm(\"Destroy shopping list item? Your aggregate list will be updated to reflect the change. This action cannot be undone.\")\n\n    if (confirmed) {\n      performShoppingListItemDestroy(itemId, () => { mountedRef.current = false })\n    } else {\n      displayFlash('info', 'Your item was not deleted.')\n    }\n  }\n\n  const showEditForm = () => {\n    hideFlash()\n    setListItemEditFormProps({\n      listTitle: listTitle,\n      buttonColor: {\n        schemeColorDarkest,\n        hoverColorDark,\n        borderColor,\n        textColorPrimary\n      },\n      currentAttributes: {\n        id: itemId,\n        quantity: quantity,\n        description: description,\n        notes: notes,\n      }\n    })\n    setListItemEditFormVisible(true)\n  }\n\n  useEffect(() => {\n    setCurrentQuantity(quantity)\n  }, [quantity])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ))\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.toggle} onClick={toggleDetails}>\n        <span ref={headerRef} className={classNames(styles.header, { [styles.headerEditable]: canEdit })}>\n          {canEdit &&\n            <span className={styles.editIcons} ref={iconsRef}>\n              <button className={styles.icon} ref={deleteRef} onClick={destroyItem}><FontAwesomeIcon className={classNames(styles.fa, styles.destroyIcon\n              )} icon={faTimes} /></button>\n              <button className={styles.icon} ref={editRef} onClick={showEditForm}><FontAwesomeIcon className={styles.fa} icon={faEdit} /></button>\n            </span>}\n          <h4 className={styles.description}>{description}</h4>\n        </span>\n        <span className={styles.quantity}>\n          {canEdit && <button className={styles.icon} ref={incRef} onClick={incrementQuantity}>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleUp} />\n          </button>}\n          <div className={styles.quantityContent}>\n            {currentQuantity}\n          </div>\n          {canEdit && <button className={styles.icon} ref={decRef} onClick={decrementQuantity}>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n          </button>}\n        </span>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.notes}>{notes || 'No details available'}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItem.propTypes = {\n  itemId: PropTypes.number.isRequired,\n  listTitle: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  description: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  notes: PropTypes.string\n}\n\nexport default ShoppingListItem\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport SlideToggle from 'react-slide-toggle'\nimport { useAppContext, useColorScheme, useShoppingListContext } from '../../hooks/contexts'\nimport styles from './shoppingListItemCreateForm.module.css'\n\nconst ShoppingListItemCreateForm = ({ listId }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const { hideFlash } = useAppContext()\n  const { performShoppingListItemCreate } = useShoppingListContext()\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    schemeColorLightest,\n    borderColor,\n    textColorSecondary,\n    textColorTertiary\n  } = useColorScheme()\n  \n  const formRef = useRef(null)\n\n  const colorVars = {\n    '--base-color': schemeColorDark,\n    '--hover-color': hoverColorLight,\n    '--body-color': schemeColorLightest,\n    '--border-color': borderColor,\n    '--text-color-main': textColorSecondary,\n    '--text-color-secondary': textColorTertiary\n  }\n\n  const toggleForm = () => {\n    setToggleEvent(Date.now)\n  }\n\n  const createShoppingListItem = e => {\n    e.preventDefault()\n\n    hideFlash()\n\n    const description = e.target.elements.description.value\n    const quantity = Number(e.target.elements.quantity.value)\n    const notes = e.target.elements.notes.value\n    const attrs = { description, quantity, notes }\n\n    performShoppingListItemCreate(listId, attrs, () => {\n      formRef.current.reset()\n      toggleForm()\n    })\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <div className={styles.triggerContainer}>\n        <button className={styles.triggerButton} onClick={toggleForm}>\n          Add item to list...\n        </button>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <form className={styles.form} ref={formRef} onSubmit={createShoppingListItem}>\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label} htmlFor='description'>Description</label>\n                <input className={styles.input} type='text' name='description' placeholder='Description' />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label} htmlFor='quantity'>Quantity</label>\n                <input className={styles.input} type='number' inputMode='numeric' name='quantity' defaultValue={1} />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label} htmlFor='notes'>Notes</label>\n                <input className={styles.input} type='text' name='notes' placeholder='Notes' />\n              </fieldset>\n\n              <button className={styles.submit} type='submit'>Add to List</button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItemCreateForm.propTypes = {\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingListItemCreateForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport SlideToggle from 'react-slide-toggle'\nimport useComponentVisible from '../../hooks/useComponentVisible'\nimport useSize from '../../hooks/useSize'\nimport { useAppContext, useColorScheme, useShoppingListContext } from '../../hooks/contexts'\nimport ShoppingListEditForm from '../shoppingListEditForm/shoppingListEditForm'\nimport ShoppingListItem from '../shoppingListItem/shoppingListItem'\nimport styles from './shoppingList.module.css'\nimport ShoppingListItemCreateForm from '../shoppingListItemCreateForm/shoppingListItemCreateForm'\n\nconst isValid = str => (\n  // The title is valid if the entire string matches the regex. It can\n  // contain alphanumeric characters, spaces, and leading or trailing\n  // whitespace (which will be stripped before it is saved in the DB).\n  // Any other characters (including non-space whitespace characters\n  // that are not leading or trailing) will cause a validation error\n  // on the backend. The title of a regular list may also not be \"All\n  // Items\".\n  !!str && str.match(/^\\s*[a-z0-9 ]*\\s*$/i) && str.match(/^\\s*[a-z0-9 ]*\\s*$/i)[0] === str && str.toLowerCase() !== 'all items'\n)\n\nconst ShoppingList = ({ canEdit = true, listId, title}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [currentTitle, setCurrentTitle] = useState(title)\n  const [maxEditFormWidth, setMaxEditFormWidth] = useState(null)\n  const [listItems, setListItems] = useState([])\n  const slideTriggerRef = useRef(null)\n  const deleteTriggerRef = useRef(null)\n  const iconsRef = useRef(null)\n\n  const size = useSize(slideTriggerRef)\n\n  const { componentRef, triggerRef, isComponentVisible, setIsComponentVisible } = useComponentVisible()\n\n  const { displayFlash, hideFlash } = useAppContext()\n\n  const {\n    shoppingLists,\n    performShoppingListUpdate,\n    performShoppingListDestroy,\n  } = useShoppingListContext()\n\n  const originalTitle = title // to switch back in case of API error on update\n\n  const slideTriggerRefContains = element => slideTriggerRef.current && (slideTriggerRef.current === element || slideTriggerRef.current.contains(element))\n  const triggerRefContains = element => triggerRef.current && (triggerRef.current === element || triggerRef.current.contains(element))\n  const deleteTriggerRefContains = element => deleteTriggerRef.current && (deleteTriggerRef.current === element || deleteTriggerRef.current.contains(element))\n  const componentRefContains = element => componentRef.current && (componentRef.current === element || componentRef.current.contains(element))\n  const shouldToggleListItems = element => (slideTriggerRefContains(element) && !triggerRefContains(element)) && !componentRefContains(element) && !deleteTriggerRefContains(element)\n\n  const toggleListItems = (e) => {\n    if (shouldToggleListItems(e.target)) {\n      setToggleEvent(Date.now)\n    }\n  }\n\n  const {\n    schemeColorDarkest,\n    borderColor,\n    textColorPrimary,\n    textColorSecondary,\n    hoverColorDark,\n    schemeColorDark,\n    schemeColorLightest\n  } = useColorScheme()\n\n  const styleVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--border-color': borderColor,\n    '--text-color-primary': textColorPrimary,\n    '--text-color-secondary': textColorSecondary,\n    '--hover-color': hoverColorDark,\n    '--scheme-color-lighter': schemeColorDark,\n    '--scheme-color-lightest': schemeColorLightest,\n    '--max-title-width': `${maxEditFormWidth - 32}px`\n  }\n\n  const submitAndHideForm = e => {\n    e.preventDefault()\n\n    hideFlash()\n\n    const newTitle = e.nativeEvent.target.children[0].defaultValue\n\n    if (!newTitle || isValid(newTitle)) setCurrentTitle(newTitle)\n\n    performShoppingListUpdate(listId, newTitle, null, () => { setCurrentTitle(originalTitle) })\n    setIsComponentVisible(false)\n  }\n\n  const deleteList = e => {\n    e.preventDefault()\n\n    const confirmed = window.confirm(`Are you sure you want to delete the list \"${title}\"? You will also lose any list items on the list. This action cannot be undone.`)\n\n    hideFlash()\n\n    if (confirmed) {\n      performShoppingListDestroy(listId)\n    } else {\n      displayFlash('info', 'Your list was not deleted.')\n    }\n  }\n\n  useEffect(() => {\n    if (!shoppingLists) return // it'll run again when they populate\n\n    const items = shoppingLists.find(obj => obj.id === listId).list_items\n\n    setListItems([...items])\n  }, [shoppingLists, listId])\n\n  useEffect(() => {\n    if (!size || !iconsRef.current) return\n\n    setMaxEditFormWidth(size.width - iconsRef.current.offsetWidth - 16)\n  }, [size])\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.titleContainer}>\n        <div className={styles.trigger} ref={slideTriggerRef} onClick={toggleListItems}>\n          {canEdit &&\n          <span className={styles.editIcons} ref={iconsRef}>\n            <div className={styles.icon} ref={deleteTriggerRef} onClick={deleteList}>\n              <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n            </div>\n            <div className={styles.icon} ref={triggerRef}>\n              <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n            </div>\n          </span>}\n          {canEdit && isComponentVisible ?\n            <ShoppingListEditForm\n              formRef={componentRef}\n              maxTotalWidth={maxEditFormWidth}\n              className={styles.form}\n              title={title}\n              onSubmit={submitAndHideForm}\n            /> :\n            <h3 className={styles.title}>{currentTitle}</h3>}\n        </div>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            {!canEdit && listItems.length === 0 && <div className={styles.emptyList}>You have no shopping list items.</div>}\n            {canEdit && <ShoppingListItemCreateForm listId={listId} />}\n            {listItems && listItems.length > 0 && listItems.map(({ id, description, quantity, notes }) => {\n              const itemKey = `${title.toLowerCase().replace(' ', '-')}-${id}`\n\n              return(\n                <ShoppingListItem\n                  key={itemKey}\n                  itemId={id}\n                  listTitle={title}\n                  canEdit={canEdit}\n                  description={description}\n                  quantity={quantity}\n                  notes={notes}\n                />\n              )\n            })}\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingList.propTypes = {\n  title: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool,\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingList\n","import React from 'react'\nimport colorSchemes, { YELLOW } from '../../utils/colorSchemes'\nimport { useShoppingListContext } from '../../hooks/contexts'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport Loading from '../loading/loading'\nimport ShoppingList from '../shoppingList/shoppingList'\nimport styles from './shoppingListPageContent.module.css'\n\nconst ShoppingListPageContent = () => {\n  const { shoppingLists, shoppingListLoadingState } = useShoppingListContext()\n\n  /*\n   *\n   * Define possible states that affect content\n   * \n   */\n\n  // Expected states\n  const listsLoadedAndNotEmpty = shoppingLists && shoppingListLoadingState === 'done' && shoppingLists.length > 0\n\n  /*\n   *\n   * Return appropriate values for the state the component is in\n   * \n   */\n\n  if (listsLoadedAndNotEmpty) {\n    return(\n      <>\n        {shoppingLists.map(({ id, title, aggregate }, index) => {\n          // If there are more lists than colour schemes, cycle through the colour schemes\n          const colorSchemesIndex = index < colorSchemes.length ? index : index % colorSchemes.length\n          const colorScheme = colorSchemes[colorSchemesIndex]\n          const listKey = title.toLowerCase().replace(' ', '-')\n\n          return (\n            <ColorProvider key={listKey} colorScheme={colorScheme}>\n              <div className={styles.shoppingList}>\n                <ShoppingList\n                  canEdit={!aggregate}\n                  listId={id}\n                  title={title}\n                />\n              </div>\n            </ColorProvider>\n          )\n        })}\n      </>\n    )\n  } else if (shoppingListLoadingState === 'loading') {\n    return <Loading className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />\n  } else {\n    return null\n  }\n}\n\nexport default ShoppingListPageContent\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { useShoppingListContext } from '../../hooks/contexts'\nimport styles from './shoppingListItemEditForm.module.css'\n\nconst ShoppingListItemEditForm = ({ listTitle, elementRef, buttonColor, currentAttributes }) => {\n  const { performShoppingListItemUpdate } = useShoppingListContext()\n\n  const mountedRef = useRef(true)\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n\n  const colorVars = {\n    '--button-background-color': buttonColor.schemeColorDarkest,\n    '--button-text-color': buttonColor.textColorPrimary,\n    '--button-hover-color': buttonColor.hoverColorDark,\n    '--button-border-color': buttonColor.borderColor\n  }\n\n  const updateItem = e => {\n    e.preventDefault()\n\n    const quantity = e.target.elements.quantity.value\n    const notes = e.target.elements.notes.value\n\n    performShoppingListItemUpdate(currentAttributes.id, { quantity, notes }, true, () => {\n      mountedRef.current = false\n      if (formRef.current) formRef.current.reset()\n    })\n  }\n\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].classList.add('modal-open')\n    inputRef && inputRef.current.focus()\n\n    return () => {\n      document.getElementsByTagName('body')[0].classList.remove('modal-open')\n    }\n  }, [])\n\n  return(\n    <div ref={elementRef} className={styles.root} style={colorVars}>\n      <h4 className={styles.header}>{currentAttributes.description}</h4>\n      <p className={styles.subheader}>{`On list \"${listTitle}\"`}</p>\n      <form className={styles.form} ref={formRef} onSubmit={updateItem}>\n        <fieldset className={styles.fieldset}>\n          <label className={styles.quantityLabel} htmlFor='quantity'>Quantity</label>\n          <input\n            className={styles.input}\n            ref={inputRef}\n            type='number'\n            inputMode='numeric'\n            name='quantity'\n            defaultValue={currentAttributes.quantity}\n          />\n        </fieldset>\n        <fieldset className={styles.fieldset}>\n          <label className={styles.notesLabel} htmlFor='notes'>Notes</label>\n          <textarea\n            className={styles.input}\n            type='text'\n            name='notes'\n            defaultValue={currentAttributes.notes}\n          />\n        </fieldset>\n        <button className={styles.submit}>Update Item</button>\n      </form>\n    </div>\n  )\n}\n\nShoppingListItemEditForm.propTypes = {\n  elementRef: PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  }),\n  listTitle: PropTypes.string.isRequired,\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    description: PropTypes.string.isRequired,\n    quantity: PropTypes.number.isRequired,\n    notes: PropTypes.string\n  }).isRequired\n}\n\nexport default ShoppingListItemEditForm\n","import React, { useEffect, useRef, useCallback } from 'react'\nimport { useAppContext, useShoppingListContext } from '../../hooks/contexts'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport ShoppingListCreateForm from '../../components/shoppingListCreateForm/shoppingListCreateForm'\nimport ShoppingListPageContent from '../../components/shoppingListPageContent/shoppingListPageContent'\nimport styles from './shoppingListPage.module.css'\nimport ShoppingListItemEditForm from '../../components/shoppingListItemEditForm/shoppingListItemEditForm'\n\nconst ShoppingListPage = () => {\n  const { flashProps, flashVisible } = useAppContext()\n\n  const {\n    listItemEditFormVisible,\n    setListItemEditFormVisible,\n    listItemEditFormProps,\n    shoppingListLoadingState\n  } = useShoppingListContext()\n\n  const shouldDisableForm = shoppingListLoadingState === 'loading' || shoppingListLoadingState === 'error'\n  const formRef = useRef(null)\n\n  const formRefContains = el => formRef.current && (formRef.current === el || formRef.current.contains(el))\n\n  const hideForm = useCallback(e => {\n    if (e.key === 'Escape' || !formRefContains(e.target)) {\n      setListItemEditFormVisible(false)\n    }\n  }, [setListItemEditFormVisible])\n\n  useEffect(() => {\n    window.addEventListener('keyup', hideForm)\n\n    return () => window.removeEventListener('keyup', hideForm)\n  }, [hideForm])\n\n  return(\n    <DashboardLayout title='Your Shopping Lists'>\n      {listItemEditFormVisible && <div className={styles.overlay} onClick={hideForm}><ShoppingListItemEditForm elementRef={formRef} {...listItemEditFormProps} /></div>}\n      {flashVisible && <div className={styles.flash}><FlashMessage {...flashProps} /></div>}\n      <div className={styles.createForm}><ShoppingListCreateForm disabled={shouldDisableForm} /></div>\n      <ShoppingListPageContent /> {/* This component implements its own loading & error handling behaviour */}\n    </DashboardLayout>\n  )\n}\n\nexport default ShoppingListPage\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport { authorize } from '../../utils/simApi'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport logOutWithGoogle from '../../utils/logOutWithGoogle'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './homePage.module.css'\n\nconst HomePage = () => {\n  const { token, setShouldRedirectTo, removeSessionCookie } = useAppContext()\n\n  const mountedRef = useRef(true)\n\n  const verifyLogin = useCallback(() => {\n    if (token && !isStorybook) {\n      authorize(token)\n        .then(resp => resp.status === 500 ? resp.json() : null)\n        .then(data => {\n          if (data) {\n            throw new Error('Internal Server Error: ', data.errors[0])\n          } else {\n            setShouldRedirectTo(paths.dashboard.main)\n            mountedRef.current = false\n          }\n        })\n        .catch(err => {\n          if (process.env.NODE_ENV === 'development') console.error(err.message)\n\n          logOutWithGoogle(() => removeSessionCookie())\n        })\n    }\n  }, [token, removeSessionCookie, setShouldRedirectTo])\n\n  useEffect(() => {\n    verifyLogin()\n    return () => mountedRef.current = false\n  }, [token, verifyLogin])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>Skyrim Inventory Management</h1>\n        <Link className={styles.login} to={paths.login}>Log in with Google</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React, { useEffect, useState, useRef } from 'react'\nimport GoogleLogin from 'react-google-login'\nimport {\n  googleClientId,\n  frontendBaseUri\n} from '../../utils/config'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './loginPage.module.css'\n\nconst LoginPage = () => {\n  const {\n    token,\n    setSessionCookie,\n    removeSessionCookie,\n    setShouldRedirectTo\n  } = useAppContext()\n\n  const [loginErrorMessage, setLoginErrorMessage] = useState(null)\n  const mountedRef = useRef(true)\n\n  const successCallback = (resp) => {\n    const { tokenId } = resp\n\n    if (tokenId) {\n      setSessionCookie(tokenId)\n      setShouldRedirectTo(paths.dashboard.main)\n      mountedRef.current = false\n    }\n  }\n\n  const failureCallback = (resp) => {\n    if (process.env.NODE_ENV === 'development') console.error('Login failure: ', resp)\n    token && removeSessionCookie()\n    setLoginErrorMessage('Something went wrong! Please try logging in again.')\n  }\n\n  useEffect(() => (\n    () => (mountedRef.current = false)\n  ))\n\n  return(\n    <div className={styles.root}>\n      {loginErrorMessage ?\n      <p className={styles.errorMessage}>{loginErrorMessage}</p> :\n      null}\n      <div className={styles.container}>\n        <GoogleLogin\n          className={styles.button}\n          clientId={googleClientId}\n          buttonText='Log In With Google'\n          onSuccess={successCallback}\n          onFailure={failureCallback}\n          redirectUri={`${frontendBaseUri}${paths.dashboard.main}`}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPage\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './notFoundPage.module.css'\n\nconst NotFoundPage = () => {\n  const { token } = useAppContext()\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>SIM: Page Not Found</h1>\n        <Link className={styles.link} to={token ? paths.dashboard.main : paths.home}>Go Back</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Helmet } from 'react-helmet-async'\nimport { AppProvider } from '../contexts/appContext'\nimport DashboardPage from '../pages/dashboardPage/dashboardPage'\nimport ShoppingListPage from '../pages/shoppingListPage/shoppingListPage'\nimport HomePage from '../pages/homePage/homePage'\nimport LoginPage from '../pages/loginPage/loginPage'\nimport NotFoundPage from '../pages/notFoundPage/notFoundPage'\nimport paths from './paths'\nimport { ShoppingListProvider } from '../contexts/shoppingListContext'\n\nconst siteTitle = 'Skyrim Inventory Management |'\n\nconst pages = [\n  {\n    pageId: 'home',\n    title: `${siteTitle} Home`,\n    description: 'Manage your inventory across multiple properties in Skyrim',\n    jsx: <HomePage />,\n    path: paths.home\n  },\n  {\n    pageId: 'login',\n    title: `${siteTitle} Login`,\n    description: 'Log into Skyrim Inventory Management using your Google account',\n    jsx: <LoginPage />,\n    path: paths.login\n  },\n  {\n    pageId: 'dashboard',\n    title: `${siteTitle} Dashboard`,\n    description: 'Skyrim Inventory Management User Dashboard',\n    jsx: <DashboardPage />,\n    path: paths.dashboard.main\n  },\n  {\n    pageId: 'shoppingLists',\n    title: `${siteTitle} Manage Shopping Lists`,\n    description: 'Manage Skyrim Shopping Lists',\n    jsx: <ShoppingListProvider><ShoppingListPage /></ShoppingListProvider>,\n    path: paths.dashboard.shoppingLists\n  }\n]\n\nconst PageRoutes = () => (\n  <Switch>\n    {pages.map(\n      ({ pageId, title, description, jsx, path }) => {\n        return(\n          <Route exact path={path} key={pageId}>\n            <Helmet>\n              <html lang='en' />\n\n              <title>{title}</title>\n              <meta name='description' content={description} />\n            </Helmet>\n            <AppProvider>\n              {jsx}\n            </AppProvider>\n          </Route>\n        )\n      }\n    )}\n    <Route key='notFound'>\n      <Helmet>\n        <html lang='en' />\n\n        <title>Skyrim Inventory Management | Page Not Found</title>\n        <meta name='description' content='Skyrim Inventory Management could not find the page you were looking for' />\n      </Helmet>\n      <AppProvider>\n        <NotFoundPage />\n      </AppProvider>\n    </Route>\n  </Switch>\n)\n\nexport default PageRoutes\n","import React from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\nimport PageRoutes from './routing/pageRoutes'\n\nconst App = () => {\n  return(\n    <Router basename={process.env.PUBLIC_URL}>\n      <HelmetProvider>\n        <PageRoutes />\n      </HelmetProvider>\n    </Router>\n  )\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}