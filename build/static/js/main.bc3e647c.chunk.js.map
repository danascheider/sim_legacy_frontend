{"version":3,"sources":["components/shoppingListItem/shoppingListItem.module.css","components/shoppingListItemCreateForm/shoppingListItemCreateForm.module.css","components/dashboardHeader/dashboardHeader.module.css","components/shoppingList/shoppingList.module.css","components/gameCreateForm/gameCreateForm.module.css","components/game/game.module.css","components/gamesDropdown/gamesDropdown.module.css","layouts/dashboardLayout.module.css","components/shoppingListCreateForm/shoppingListCreateForm.module.css","components/modalForm/modalForm.module.css","components/shoppingListsPageContent/shoppingListsPageContent.module.css","pages/homePage/homePage.module.css","pages/loginPage/loginPage.module.css","components/flashMessage/flashMessage.module.css","components/modal/modal.module.css","pages/gamesPage/gamesPage.module.css","components/shoppingListEditForm/shoppingListEditForm.module.css","pages/notFoundPage/notFoundPage.module.css","components/logoutDropdown/logoutDropdown.module.css","components/navigationMosaic/navigationMosaic.module.css","pages/dashboardPage/dashboardPage.module.css","pages/shoppingListsPage/shoppingListsPage.module.css","components/gamesDropdownOption/gamesDropdownOption.module.css","components/navigationCard/navigationCard.module.css","utils/config.js","utils/customErrors.js","utils/simApi.js","utils/logOutWithGoogle.js","utils/isTestEnv.js","routing/paths.js","contexts/appContext.js","contexts/colorContext.js","hooks/useQuery.js","contexts/shoppingListsContext.js","hooks/contexts.js","contexts/gamesContext.js","pages/homePage/homePage.js","pages/loginPage/loginPage.js","utils/colorSchemes.js","components/logoutDropdown/googleIcon.svg","components/logoutDropdown/logoutDropdown.js","components/dashboardHeader/anonymousAvatar.jpg","components/dashboardHeader/dashboardHeader.js","components/gamesDropdownOption/gamesDropdownOption.js","components/gamesDropdown/gamesDropdown.js","layouts/dashboardLayout.js","components/loading/loading.js","components/navigationCard/navigationCard.js","components/navigationMosaic/navigationMosaic.js","pages/dashboardPage/dashboardPage.js","components/flashMessage/flashMessage.js","components/modal/modal.js","hocs/withModal.js","components/modalForm/modalForm.js","components/modalGameForm/modalGameForm.js","components/game/game.js","components/gameCreateForm/gameCreateForm.js","pages/gamesPage/gamesPage.js","components/shoppingListCreateForm/shoppingListCreateForm.js","utils/titlecase.js","hooks/useComponentVisible.js","hooks/useSize.js","components/shoppingListEditForm/shoppingListEditForm.js","components/shoppingListItemEditForm/shoppingListItemEditForm.js","components/shoppingListItem/shoppingListItem.js","components/shoppingListItemCreateForm/shoppingListItemCreateForm.js","components/shoppingList/shoppingList.js","components/shoppingListsPageContent/shoppingListsPageContent.js","pages/shoppingListsPage/shoppingListsPage.js","pages/notFoundPage/notFoundPage.js","routing/pageRoutes.js","App.js","index.js"],"names":["module","exports","backendBaseUri","sessionCookieName","AuthorizationError","message","this","code","name","stack","Error","NotFoundError","MethodNotAllowedError","prototype","contentTypeHeader","authHeader","token","combinedHeaders","createShoppingList","gameId","attrs","uri","body","JSON","stringify","shopping_list","fetch","method","headers","then","resp","status","json","updateShoppingList","listId","id","destroyShoppingList","createShoppingListItem","shopping_list_item","defaultErrorCallback","err","console","error","logOutWithGoogle","success","window","gapi","auth2","GoogleAuth","getAuthInstance","disconnect","isTestEnv","process","STORYBOOK","isStorybook","paths","home","login","dashboard","main","games","shoppingLists","allPaths","pathsScopedToGames","DONE","AppContext","createContext","AppProvider","children","overrideValue","pathname","useLocation","useCookies","cookies","setCookie","removeCookie","useState","flashProps","setFlashProps","flashVisible","setFlashVisible","modalAttributes","setModalAttributes","modalVisible","setModalVisible","profileData","setProfileData","shouldRedirectTo","redirectPath","setRedirectPath","profileLoadState","setProfileLoadState","mountedRef","useRef","removeSessionCookie","useCallback","setShouldRedirectTo","path","current","onAuthenticatedPage","indexOf","shouldFetchProfileData","logOutAndRedirect","callback","value","setSessionCookie","useEffect","fetchUserProfile","errors","catch","Provider","to","ColorContext","ColorProvider","colorScheme","useQuery","URLSearchParams","search","LOADING","ERROR","shoppingListLoadingStates","ShoppingListsContext","ShoppingListsProvider","queryString","useAppContext","useGamesContext","activeGameId","useMemo","length","parseInt","get","setShoppingLists","shoppingListLoadingState","setShoppingListLoadingState","shoppingListsOverridden","addOrUpdateListItem","list","item","originalItem","list_items","find","listItem","description","toLowerCase","newListItems","originalItemPosition","splice","unshift","removeItemFromList","itemId","newList","index","fetchLists","fetchShoppingLists","type","performShoppingListUpdate","newTitle","callbacks","onSuccess","onNotFound","onUnprocessableEntity","onUnauthorized","onInternalServerError","title","newShoppingLists","map","header","performShoppingListCreate","Array","isArray","performShoppingListDestroy","filter","aggregate","performShoppingListItemCreate","aggregateListItem","regularListItem","newLists","aggregateList","regularList","regularListPosition","newAggregateList","newRegularList","performShoppingListItemUpdate","updateShoppingListItem","list_id","performShoppingListItemDestroy","destroyShoppingListItem","regularListToRemoveItemFrom","listFromListItemId","regularListIndex","deletedItem","useCustomContext","cxt","msg","context","useContext","useColorScheme","useShoppingListsContext","GamesContext","gameLoadingStates","GamesProvider","setGames","gameLoadingState","setGameLoadingState","gamesOverridden","fetchUserGames","fetchGames","performGameCreate","game","createGame","newGames","performGameUpdate","updateGame","performGameDestroy","destroyGame","destroyedGame","gameIndex","HomePage","verifyLogin","authorize","data","className","styles","root","container","LoginPage","loginErrorMessage","setLoginErrorMessage","errorMessage","button","clientId","buttonText","tokenId","onFailure","redirectUri","YELLOW","schemeColorDarkest","schemeColorDark","schemeColorLight","schemeColorLightest","hoverColorDark","hoverColorLight","hoverColorLightest","textColorPrimary","textColorSecondary","textColorTertiary","borderColor","PINK","BLUE","GREEN","AQUA","colorSchemes","LogoutDropdown","logOutFunction","onClick","e","preventDefault","googleLogout","src","icon","alt","DashboardHeader","dropdownVisible","setDropdownVisible","bar","headerContainer","headerLinkLarge","bp","headerLinkSmall","profile","profileText","textTop","textBottom","email","avatar","image_url","anonymousAvatar","referrerPolicy","logoutDropdown","hidden","GamesDropdownOption","onKeyDown","ariaSelected","classNames","role","tabIndex","substring","GamesDropdown","history","useHistory","activeGame","setActiveGame","dropdownExpanded","setDropdownExpanded","inputValue","setInputValue","componentRef","expandDropdown","collapseDropdown","colorVars","selectGame","params","push","toString","isActiveGame","collapseDropdownAndResetValue","relatedTarget","contains","g","document","addEventListener","removeEventListener","ref","style","input","disabled","onChange","currentTarget","placeholder","onFocus","key","target","blur","focusables","getElementsByClassName","focus","trigger","fa","faAngleDown","dropdown","replace","DashboardLayout","includeGameSelect","titleContainer","hr","Loading","color","height","width","NavigationCard","href","styleVars","NavigationMosaic","cardArray","card","cards","DashboardPage","loading","INFO","colors","border","text","FlashMessage","messageList","Modal","subtitle","contentRef","contentRefContains","el","hide","getElementsByTagName","classList","add","remove","content","withModal","WrappedComponent","childProps","ModalForm","modelName","buttonLabel","onSubmit","fields","buttonColor","formRef","inputRef","colorRef","Math","floor","random","Tag","tag","label","inputProps","fieldset","htmlFor","submit","formFields","inputMode","pattern","ModalGameForm","currentAttributes","field","defaultValue","unmountAndDisplayFlash","elements","attr","location","Game","toggleEvent","setToggleEvent","iconsRef","editRef","destroyRef","Date","now","editIcons","confirm","faTimes","attributes","ModalComponent","props","faEdit","collapsed","setCollapsibleElement","collapsible","GameCreateForm","toggleForm","onSuccessOrFatalError","reset","slideToggleTrigger","onExpanded","form","fieldsetDisabled","buttonDisabled","GamesPage","Object","keys","noGames","ShoppingListCreateForm","showFlashAndClearInput","newValue","LOWERCASE_WORDS","titlecase","words","split","word","letter","toUpperCase","slice","capitalize","join","useComponentVisible","isComponentVisible","setIsComponentVisible","triggerRef","triggerRefContains","element","handleHideDiv","handleClickOutside","useSize","size","setSize","useLayoutEffect","getBoundingClientRect","useResizeObserver","entry","contentRect","ShoppingListEditForm","maxTotalWidth","getInputTextWidth","createElement","getContext","font","max","maxTextWidth","textWidth","measureText","min","setMaxTextWidth","inputWidth","setInputWidth","buttonRef","offsetWidth","classnames","stopPropagation","faCheckSquare","required","ShoppingListItemEditForm","quantity","notes","ShoppingListItem","listTitle","canEdit","setCollapsed","currentQuantity","setCurrentQuantity","deleteRef","incRef","decRef","refContains","iconContains","editRefContains","deleteRefContains","incRefContains","decRefContains","displayFlash","toggle","headerEditable","destroyIcon","oldQuantity","newQuantity","faAngleUp","quantityContent","ShoppingListItemCreateForm","resetToggleAndDisplayFlash","triggerContainer","triggerButton","ShoppingList","DELETE_CONFIRMATION","currentTitle","setCurrentTitle","maxEditFormWidth","setMaxEditFormWidth","listItems","setListItems","slideTriggerRef","deleteTriggerRef","originalTitle","shouldToggleListItems","slideTriggerRefContains","componentRefContains","deleteTriggerRefContains","items","obj","confirmed","onError","str","nativeEvent","match","resetTitleAndDisplayError","emptyList","itemKey","ShoppingListsPageContent","listsLoadedAndNotEmpty","listsLoadedAndEmpty","listKey","shoppingList","noLists","link","ShoppingListsPage","shouldDisableForm","flash","createForm","NotFoundPage","siteTitle","pages","pageId","jsx","PageRoutes","exact","lang","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bc3e647c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItem_root__3NPoi\",\"collapsed\":\"shoppingListItem_collapsed__3iHS2\",\"toggle\":\"shoppingListItem_toggle__26aMd\",\"fa\":\"shoppingListItem_fa__2P4jA\",\"destroyIcon\":\"shoppingListItem_destroyIcon__2IBmH\",\"header\":\"shoppingListItem_header__1qqqT\",\"headerEditable\":\"shoppingListItem_headerEditable__2K0Ir\",\"description\":\"shoppingListItem_description__mnU6z\",\"editIcons\":\"shoppingListItem_editIcons__2RoL7\",\"quantity\":\"shoppingListItem_quantity__1ebyP\",\"quantityContent\":\"shoppingListItem_quantityContent__24Ts-\",\"icon\":\"shoppingListItem_icon__1pEqd\",\"collapsible\":\"shoppingListItem_collapsible__xa2wr\",\"notes\":\"shoppingListItem_notes__8g2fK\",\"button\":\"shoppingListItem_button__2k4QA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItemCreateForm_root__3B7YP\",\"collapsed\":\"shoppingListItemCreateForm_collapsed__3j8GF\",\"triggerContainer\":\"shoppingListItemCreateForm_triggerContainer__3IkQf\",\"triggerButton\":\"shoppingListItemCreateForm_triggerButton__2HK_d\",\"form\":\"shoppingListItemCreateForm_form__OXRXv\",\"fieldset\":\"shoppingListItemCreateForm_fieldset__1ovw9\",\"input\":\"shoppingListItemCreateForm_input__2Jire\",\"label\":\"shoppingListItemCreateForm_label__qlamy\",\"submit\":\"shoppingListItemCreateForm_submit__22fVU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardHeader_root__3lzne\",\"bar\":\"dashboardHeader_bar__1XEWl\",\"headerContainer\":\"dashboardHeader_headerContainer__1ZVqS\",\"header\":\"dashboardHeader_header__cB1mg\",\"headerLinkLarge\":\"dashboardHeader_headerLinkLarge__ED8Xx\",\"headerLinkSmall\":\"dashboardHeader_headerLinkSmall__3TlC1\",\"profile\":\"dashboardHeader_profile__A3WxH\",\"profileText\":\"dashboardHeader_profileText__1HPKf\",\"textTop\":\"dashboardHeader_textTop__2UNgU\",\"textBottom\":\"dashboardHeader_textBottom__1vLtl\",\"avatar\":\"dashboardHeader_avatar__2BhRu\",\"logoutDropdown\":\"dashboardHeader_logoutDropdown__37Dm5\",\"hidden\":\"dashboardHeader_hidden__Fkjhq\",\"bp\":\"dashboardHeader_bp__2hS3f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingList_root__2O9FT\",\"trigger\":\"shoppingList_trigger__WV4fR\",\"form\":\"shoppingList_form__1GdfA\",\"icon\":\"shoppingList_icon__3FP5H\",\"editIcons\":\"shoppingList_editIcons__gL8DA\",\"title\":\"shoppingList_title__3Gulc\",\"fa\":\"shoppingList_fa__hRtKq\",\"collapsible\":\"shoppingList_collapsible__2Zuq5\",\"emptyList\":\"shoppingList_emptyList__289Te\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gameCreateForm_root__1CiVs\",\"slideToggleTrigger\":\"gameCreateForm_slideToggleTrigger__47o12\",\"form\":\"gameCreateForm_form__2naYf\",\"fieldset\":\"gameCreateForm_fieldset__iwI0Y\",\"fieldsetDisabled\":\"gameCreateForm_fieldsetDisabled__255jN\",\"input\":\"gameCreateForm_input__3HuYv\",\"button\":\"gameCreateForm_button__1ePIs\",\"buttonDisabled\":\"gameCreateForm_buttonDisabled__1bleU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"game_root__Wpup7\",\"header\":\"game_header__2XbBS\",\"name\":\"game_name__GOPSp\",\"editIcons\":\"game_editIcons__1kxuu\",\"icon\":\"game_icon__WCvOa\",\"description\":\"game_description__KgWbf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdown_root__1EUlO\",\"header\":\"gamesDropdown_header__1Qiyc\",\"input\":\"gamesDropdown_input__z9Zui\",\"trigger\":\"gamesDropdown_trigger__3A35t\",\"hidden\":\"gamesDropdown_hidden__7-IH5\",\"dropdown\":\"gamesDropdown_dropdown__1kXtE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardLayout_root__2dfR_\",\"title\":\"dashboardLayout_title__1yGVn\",\"hr\":\"dashboardLayout_hr__29GgW\",\"container\":\"dashboardLayout_container__3AwFx\",\"headerContainer\":\"dashboardLayout_headerContainer__15_gZ\",\"titleContainer\":\"dashboardLayout_titleContainer__3J8Iz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListCreateForm_root__iSFdV\",\"button\":\"shoppingListCreateForm_button__2so-6\",\"fieldset\":\"shoppingListCreateForm_fieldset__1BLSp\",\"fieldsetDisabled\":\"shoppingListCreateForm_fieldsetDisabled__2V4n7\",\"input\":\"shoppingListCreateForm_input__3hAzq\",\"buttonDisabled\":\"shoppingListCreateForm_buttonDisabled__1USkv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modalForm_root__1vkew\",\"fieldset\":\"modalForm_fieldset__3Y2iw\",\"input\":\"modalForm_input__2W8sl\",\"submit\":\"modalForm_submit__2K3FT\",\"label\":\"modalForm_label__1q219\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noLists\":\"shoppingListsPageContent_noLists__1yLrC\",\"link\":\"shoppingListsPageContent_link__1seef\",\"shoppingList\":\"shoppingListsPageContent_shoppingList__3X_TT\",\"loading\":\"shoppingListsPageContent_loading__1Rj5P\",\"error\":\"shoppingListsPageContent_error__3KtOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"homePage_root__15tty\",\"container\":\"homePage_container__3kQJo\",\"header\":\"homePage_header__3EV45\",\"login\":\"homePage_login__3ala0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loginPage_root__2Vf7z\",\"errorMessage\":\"loginPage_errorMessage__8uTVC\",\"container\":\"loginPage_container__2xdLK\",\"button\":\"loginPage_button__1pDsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"flashMessage_root__2sPxp\",\"content\":\"flashMessage_content__3iY0s\",\"header\":\"flashMessage_header__Vx_Jr\",\"messageList\":\"flashMessage_messageList__3V9SA\",\"msg\":\"flashMessage_msg__3Wquk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__QSEqe\",\"content\":\"modal_content__1tQ-X\",\"title\":\"modal_title__1efUU\",\"subtitle\":\"modal_subtitle__4395I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesPage_root__oSBqG\",\"noGames\":\"gamesPage_noGames__1CUVF\",\"games\":\"gamesPage_games__2Q2dQ\",\"loading\":\"gamesPage_loading__1Q0HG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListEditForm_root__rs5qL\",\"input\":\"shoppingListEditForm_input__2FbCX\",\"submit\":\"shoppingListEditForm_submit__1FqNJ\",\"fa\":\"shoppingListEditForm_fa__Bb-dM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"notFoundPage_root__131Oh\",\"container\":\"notFoundPage_container__38cw2\",\"header\":\"notFoundPage_header__BhS9L\",\"link\":\"notFoundPage_link__2cDdM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"logoutDropdown_button__3hRUK\",\"body\":\"logoutDropdown_body__NiLPw\",\"googleLogout\":\"logoutDropdown_googleLogout__J9YSG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationMosaic_root__2CDUx\",\"card\":\"navigationMosaic_card__3hEln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardPage_root__oVxx1\",\"loading\":\"dashboardPage_loading__2vZsl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"shoppingListsPage_overlay__3Mlf4\",\"createForm\":\"shoppingListsPage_createForm__35weW\",\"flash\":\"shoppingListsPage_flash__vlZ2Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdownOption_root__1Itlx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationCard_root__1-FD3\"};","export const googleClientId = process.env.NODE_ENV === 'production' ?\n  '891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com' :\n  '891031345873-ir73kc1ru0ncv564iesac94kjaap5nf4.apps.googleusercontent.com'\n\nexport const backendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim-api.danascheider.com' : 'http://localhost:3000'\n\nexport const frontendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim.danascheider.com' : 'http://localhost:3001'\n\nexport const sessionCookieName = '_sim_google_session'\n","export function AuthorizationError(message = '401 Unauthorized') {\n  this.message = message\n  this.code = 401\n  this.name = 'AuthorizationError'\n  this.stack = (new Error()).stack\n}\n\nAuthorizationError.prototype = new Error()\n\nexport function NotFoundError(message = '404 Not Found') {\n  this.message = message\n  this.code = 404\n  this.name = 'NotFoundError'\n  this.stack = (new Error()).stack\n}\n\nNotFoundError.prototype = new Error()\n\nexport function MethodNotAllowedError(message = '405 Method Not Allowed') {\n  this.message = message\n  this.code = 405\n  this.name = 'MethodNotAllowedError'\n  this.stack = (new Error()).stack\n}\n\nMethodNotAllowedError.prototype = new Error()\n","/*\n *\n * This module is an abstraction layer for the SIM API that handles making requests\n * to the API. These functions handle three things: (1) formulating the requests based\n * on which function it is and the args being passed in (including assembling both\n * headers and request body) and (2) throwing an AuthorizationError if the request fails.\n * The AuthorizationError has name 'AuthorizationError', code 401, and either the\n * message passed to the constructor or, by default, '401 Unauthorized'.\n * \n * For more information on the SIM API, its endpoints, the requests it expects, or its\n * responses, please visit the backend API docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { backendBaseUri } from './config'\nimport {\n  AuthorizationError,\n  MethodNotAllowedError,\n  NotFoundError\n} from './customErrors'\n\nconst contentTypeHeader = { 'Content-Type': 'application/json' }\nconst authHeader = token => ({ 'Authorization': `Bearer ${token}`})\nconst combinedHeaders = token => ({ ...authHeader(token), ...contentTypeHeader })\n\n/*\n *\n * Google OAuth Token Verification Endpoint\n * \n */\n\nexport const authorize = token => {\n  const uri = `${backendBaseUri}/auth/verify_token`\n\n  return(\n    fetch(uri, {  headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n/*\n *\n * User Profile Endpoint\n * \n */\n\nexport const fetchUserProfile = token => {\n  const uri = `${backendBaseUri}/users/current`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n/*\n *\n * Game Endpoints (Scoped to Authenticated User)\n * \n */\n\n// GET /games\nexport const fetchGames = token => {\n  const uri = `${backendBaseUri}/games`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games\nexport const createGame = (token, attrs) => {\n  const uri = `${backendBaseUri}/games`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /games/:id\nexport const updateGame = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'PATCH',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// DELETE /games/:id\nexport const destroyGame = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n\n  return fetch(uri, {\n    method: 'DELETE',\n    headers: authHeader(token)\n  })\n  .then(resp => {\n    // I deviated from the usual pattern of throwing a NotFoundError here\n    // on 404 since the behaviour for 404s is the same as the behaviour for\n    // successful deletion of the game, and making it throw an error here\n    // would just mean duplicating all thatlogic in the handlers in the\n    // GamesProvider.\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp\n  })\n}\n\n/*\n *\n * Shopping List Endpoints (Scoped to Game)\n *\n */\n\n// GET /games/:id/shopping_lists\nexport const fetchShoppingLists = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games/:game_id/shopping_lists\nexport const createShoppingList = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n  const body = JSON.stringify({ shopping_list: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /shopping_lists/:id\nexport const updateShoppingList = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  const body = JSON.stringify({\n    id: listId,\n    shopping_list: attrs\n  })\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: body\n    })\n    .then(resp => {\n      // It might return a 422 error too, but in that case we'll need the response\n      // JSON to handle the error\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_lists/:id\nexport const destroyShoppingList = (token, listId) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token),\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      if (resp.status === 405) throw new MethodNotAllowedError('Aggregate lists are managed automatically and cannot be deleted manually.')\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n/*\n *\n * Shopping List Item Endpoints\n *\n */\n\n// POST /shopping_lists/:shopping_list_id/shopping_list_items\nexport const createShoppingListItem = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}/shopping_list_items`\n\n  return(\n    fetch(uri, {\n      method: 'POST',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.\")\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// PATCH /shopping_list_items/:id\nexport const updateShoppingListItem = (token, itemId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to update a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError('Items on aggregate shopping lists cannot be updated through the API')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_list_items/:id\nexport const destroyShoppingListItem = (token, itemId) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token)\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to delete a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError()\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n","const defaultErrorCallback = err => {\n  console.error('Error signing out: ', err.message)\n}\n\nconst logOutWithGoogle = (success = () => {}, error = defaultErrorCallback) => {\n  if (window.gapi && window.gapi.auth2) {\n    const GoogleAuth = window.gapi.auth2.getAuthInstance()\n\n    if (GoogleAuth !== null) {\n      GoogleAuth\n        .then(() => GoogleAuth.disconnect())\n        .then(success, error)\n    } else {\n      success() // Google thinks they aren't logged in anyway\n    }\n  }\n\n  success()\n}\n\nexport default logOutWithGoogle\n","export const isTestEnv = process.env.STORYBOOK || process.env.NODE_ENV === 'test'\n\nexport const isJest = process.env.NODE_ENV === 'test'\n\nexport const isStorybook = !!process.env.STORYBOOK\n","const paths = {\n  home: '/',\n  login: '/login',\n  dashboard: {\n    main: '/dashboard',\n    games: '/dashboard/games',\n    shoppingLists: '/dashboard/shopping_lists'\n  }\n}\n\nexport const allPaths = [\n  paths.home,\n  paths.login,\n  paths.dashboard.main,\n  paths.dashboard.games,\n  paths.dashboard.shoppingLists\n]\n\nexport const pathsScopedToGames = [\n  paths.dashboard.shoppingLists\n]\n\nexport default paths\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { createContext, useEffect, useState, useRef, useCallback } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { Redirect, useLocation } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { sessionCookieName } from '../utils/config'\nimport { fetchUserProfile } from '../utils/simApi'\nimport logOutWithGoogle from '../utils/logOutWithGoogle'\nimport { isTestEnv } from '../utils/isTestEnv'\nimport paths, { allPaths } from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\n\nconst AppContext = createContext()\n\n// overrideValue allows us to set the context value in Storybook.\n// I hate having the testing apparatus baked into the app code but\n// none of the solutions I found worked and I don't understand\n// Storybook decorators and whatnot enough to figure out how to\n// set the value for the context in the story,\nconst AppProvider = ({ children, overrideValue = {} }) => {\n  const { pathname } = useLocation()\n  const [cookies, setCookie, removeCookie] = useCookies([sessionCookieName])\n\n  const [flashProps, setFlashProps] = useState({})\n  const [flashVisible, setFlashVisible] = useState(false)\n\n  const [modalAttributes, setModalAttributes] = useState({})\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const [profileData, setProfileData] = useState(overrideValue.profileData)\n  const [redirectPath, setRedirectPath] = useState(overrideValue.shouldRedirectTo)\n  const [profileLoadState, setProfileLoadState] = useState(overrideValue.profileLoadState || LOADING)\n\n  const mountedRef = useRef(true)\n\n  const removeSessionCookie = useCallback(() => removeCookie(sessionCookieName), [removeCookie])\n  const setSessionCookie = token => setCookie(sessionCookieName, token)\n\n  const setShouldRedirectTo = useCallback(path => {\n    mountedRef.current && setRedirectPath(path)\n    mountedRef.current = false\n  }, [])\n\n  const onAuthenticatedPage = useCallback(() => {\n    return pathname !== paths.login && pathname !== paths.home && allPaths.indexOf(pathname) !== -1\n  }, [pathname])\n\n  const shouldFetchProfileData = useCallback(() => {\n    return !overrideValue.profileData && cookies[sessionCookieName] && onAuthenticatedPage()\n  }, [overrideValue.profileData, cookies, onAuthenticatedPage])\n\n  const logOutAndRedirect = useCallback((path = paths.login, callback = null) => {\n    logOutWithGoogle(() => {\n      removeSessionCookie()\n      callback && callback()\n      onAuthenticatedPage() && setShouldRedirectTo(path)\n    })\n  }, [removeSessionCookie, onAuthenticatedPage, setShouldRedirectTo])\n\n  const value = {\n    token: cookies[sessionCookieName],\n    profileData,\n    removeSessionCookie,\n    setSessionCookie,\n    profileLoadState,\n    setShouldRedirectTo,\n    logOutAndRedirect,\n    flashVisible,\n    flashProps,\n    setFlashVisible,\n    setFlashProps,\n    setModalVisible,\n    setModalAttributes,\n    modalVisible,\n    modalAttributes,\n    ...overrideValue // enables you to only change certain values\n  }\n\n  const fetchProfileData = () => {\n    if (shouldFetchProfileData()) {\n      fetchUserProfile(cookies[sessionCookieName])\n        .then(({ status, json }) => {\n          if (!mountedRef.current) return\n\n          if (status === 200) {\n            setProfileData(json)\n            if (!overrideValue.profileLoadState) setProfileLoadState(DONE)\n          } else {\n            throw new Error('Internal Server Error: ', json.errors[0])\n          }\n        })\n        .catch(error => {\n          if (process.env.NODE_ENV === 'development') console.error('Error returned while fetching profile data: ', error.message)\n\n          // I feel like this might not be the right behaviour if the error was a 500,\n          // but I also can't think of a case where an error like this would occur and\n          // not be a 401, given the user profile will be created during the authorization\n          // step if it doesn't exist already.\n          logOutAndRedirect()\n        })\n    } else if (isTestEnv && !overrideValue.profileLoadState) {\n      setProfileLoadState(DONE)\n    }\n  }\n\n  useEffect(() => {\n    if (onAuthenticatedPage() && !cookies[sessionCookieName] && mountedRef.current) logOutAndRedirect()\n  }, [onAuthenticatedPage, cookies, logOutAndRedirect])\n\n  useEffect(fetchProfileData, [\n                                onAuthenticatedPage,\n                                logOutAndRedirect,\n                                overrideValue.profileLoadState,\n                                shouldFetchProfileData,\n                                cookies\n                              ])\n\n  useEffect(() => (() => mountedRef.current = false), [])\n\n  return(\n    <AppContext.Provider value={value}>\n      {redirectPath ? <Redirect to={redirectPath} /> : children}\n    </AppContext.Provider>\n  )\n}\n\nAppProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    token: PropTypes.string,\n    profileData: PropTypes.shape({\n      id: PropTypes.number,\n      uid: PropTypes.string,\n      email: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      image_url: PropTypes.string\n    }),\n    setSessionCookie: PropTypes.func,\n    removeSessionCookie: PropTypes.func,\n    setProfileData: PropTypes.func,\n    flashVisible: PropTypes.bool,\n    flashProps: PropTypes.shape({\n      type: PropTypes.oneOf(['error', 'info', 'success']).isRequired,\n      message: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n      header: PropTypes.string\n    }),\n    setFlashVisible: PropTypes.func,\n    setFlashProps: PropTypes.func,\n    logOutAndRedirect: PropTypes.func,\n    setModalVisible: PropTypes.func,\n    setModalAttributes: PropTypes.func,\n    modalVisible: PropTypes.bool,\n    modalAttributes: PropTypes.shape({\n      Tag: PropTypes.elementType,\n      props: PropTypes.object\n    })\n  })\n}\n\nexport { AppContext, AppProvider }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { createContext } from 'react'\nimport PropTypes from 'prop-types'\n\n\nconst ColorContext = createContext()\n\nconst ColorProvider = ({ colorScheme, children }) => {\n  return(\n    <ColorContext.Provider value={colorScheme}>\n      {children}\n    </ColorContext.Provider>\n  )\n}\n\nColorProvider.propTypes = {\n  colorScheme: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    schemeColorDark: PropTypes.string.isRequired,\n    schemeColorLight: PropTypes.string.isRequired,\n    schemeColorLightest: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    hoverColorLight: PropTypes.string.isRequired,\n    hoverColorLightest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    textColorSecondary: PropTypes.string,\n    textColorTertiary: PropTypes.string,\n    borderColor: PropTypes.string\n  }).isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport { ColorProvider, ColorContext }\n","import { useLocation } from 'react-router-dom'\n\nconst useQuery = () => new URLSearchParams(useLocation().search)\n\nexport default useQuery\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport {\n  createContext,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  createShoppingList,\n  fetchShoppingLists,\n  updateShoppingList,\n  destroyShoppingList,\n  createShoppingListItem,\n  updateShoppingListItem,\n  destroyShoppingListItem\n} from '../utils/simApi'\nimport { useAppContext, useGamesContext } from '../hooks/contexts'\nimport useQuery from '../hooks/useQuery'\nimport paths from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\nconst ERROR = 'error'\n\nconst shoppingListLoadingStates = { LOADING, DONE, ERROR }\n\nconst ShoppingListsContext = createContext()\n\nconst ShoppingListsProvider = ({ children, overrideValue = {} }) => {\n  const queryString = useQuery()\n\n  const {\n    token,\n    logOutAndRedirect,\n    setFlashProps,\n    setFlashVisible\n  } = useAppContext()\n\n  const { games } = useGamesContext()\n\n  const activeGameId = useMemo(() => {\n    if (games && games.length) {\n      return parseInt(queryString.get('game_id') || games[0].id)\n    } else {\n      return null\n    }\n  }, [games, queryString])\n\n  const [shoppingLists, setShoppingLists] = useState(overrideValue.shoppingLists || [])\n  const [shoppingListLoadingState, setShoppingListLoadingState] = useState(LOADING)\n\n  const shoppingListsOverridden = useRef(false)\n  \n  if (overrideValue.shoppingLists) {\n    // Use this as the initial value only so that the shopping\n    // lists can be updated when we interact in Storybook or other\n    // tests\n    delete overrideValue.shoppingLists\n    shoppingListsOverridden.current = true\n  }\n\n  const mountedRef = useRef(true)\n\n  const addOrUpdateListItem = (list, item) => {\n    const originalItem = list.list_items.find(listItem => listItem.description.toLowerCase() === item.description.toLowerCase())\n    const newListItems = [...list.list_items]\n\n    if (originalItem) {\n      const originalItemPosition = list.list_items.indexOf(originalItem)\n      newListItems.splice(originalItemPosition, 1, item)\n    } else {\n      newListItems.unshift(item)\n    }\n\n    list.list_items = newListItems\n\n    return { ...list }\n  }\n\n  const listFromListItemId = itemId => shoppingLists.find(list => !!list.list_items.find(item => item.id === itemId))\n\n  const removeItemFromList = (list, itemId) => {\n    const newList = { ...list }\n    const newListItems = [...list.list_items]\n\n    const item = list.list_items.find(item => item.id === itemId)\n    const index = list.list_items.indexOf(item)\n\n    newListItems.splice(index, 1)\n    newList.list_items = newListItems\n    \n    return newList\n  }\n\n  const fetchLists = useCallback(() => {\n    if (token && !shoppingListsOverridden.current) {\n      fetchShoppingLists(token, activeGameId)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setShoppingLists(json)\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} while fetching shopping lists: ${json.errors}` : `Unknown error ${status} while fetching shopping lists`\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else if (err.code === 404 && mountedRef.current) {\n            setFlashProps({\n              type: 'error',\n              message: \"We couldn't find the game you're looking for.\"\n            })\n\n            setFlashVisible(true)\n\n            !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching shopping lists: ', err)\n\n            if (mountedRef.current) {\n              setFlashProps({\n                type: 'error',\n                message: \"There was an unexpected error loading your lists. It may have been on our end. We're sorry!\"\n              })\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n            }\n          }\n        })\n    } else {\n      mountedRef.current && !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n    }\n  }, [token, overrideValue.shoppingListLoadingState, setFlashProps, setFlashVisible, activeGameId, logOutAndRedirect])\n\n  const performShoppingListUpdate = (listId, newTitle, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingList(token, listId, { title: newTitle })\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const newShoppingLists = shoppingLists.map(list => { if (list.id === listId) { return json } else { return list } })\n          setShoppingLists(newShoppingLists)\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashProps({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your changes from being saved:`\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} when updating shopping list: ${json.errors}` : `Unknown error ${status} when updating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (process.env.NODE_ENV === 'development') console.error(`Error updating shopping list ${listId}: `, err)\n\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error',\n            message: \"Oops! The shopping list you wanted to update could not be found. Try refreshing the page to fix this issue.\"\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n          \n          onNotFound && onNotFound()\n        } else {\n          setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n\n          onInternalServerError && onInternalServerError()\n        }\n      }) \n  }\n\n  const performShoppingListCreate = (title, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onUnprocessableEntity, onInternalServerError } = callbacks\n\n    createShoppingList(token, activeGameId, { title })\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (Array.isArray(json) && json.length === 2) {\n            // It is an array of shopping lists. It includes the shopping list that was\n            // created and an aggregate list that was created automatically. This case only\n            // arises if there were no existing shopping lists, so in this case, we want\n            // to set the shopping lists array to the lists returned.\n            setShoppingLists(json)\n          } else if (json && typeof json === 'object') {\n            // It is the single shopping list that was created. This will happen if there\n            // is already an existing aggregate list.\n            const newShoppingLists = [...shoppingLists]\n            newShoppingLists.splice(1, 0, json)\n            setShoppingLists(newShoppingLists)\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashProps({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what\n          throw new Error(json.errors ? `Error ${status} while creating shopping list: ${json.errors}` : `Unknown error ${status} while creating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error',\n            message: 'The game you wanted to create a shopping list for could not be found. Try refreshing the page to fix this issue.'\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating shopping list: ', err)\n          \n          setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListDestroy = (listId, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onInternalServerError } = callbacks\n\n    destroyShoppingList(token, listId)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 204) {\n          // This means that the list was the game's last shopping list and both\n          // it and the aggregate list have been destroyed.\n          setShoppingLists([])\n          \n          setFlashProps({\n            type: 'success',\n            message: 'Since it was the last list for this game, the \"All Items\" list has been deleted as well.',\n            header: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 200) {\n          // This means that the aggregate list has been updated and returned,\n          // to adjust for any items that were deleted with the other list.\n          const newShoppingLists = shoppingLists.filter(list => list.id !== listId)\n                                                .map(list => (list.aggregate === true ? json : list))\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashProps({\n            type: 'success',\n            message: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list: ${json.errors}` : `Unknown error ${status} when deleting shopping list`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error deleting shopping list: ', err.message)\n\n          setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemCreate = (listId, attrs, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createShoppingListItem(token, listId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200 || status === 201) {\n          const [aggregateListItem, regularListItem] = json\n\n          // Have to create an actual new object or the state change won't cause useEffect\n          // hooks to run.\n          const newLists = [...shoppingLists]\n          const aggregateList = shoppingLists[0]\n          const regularList = shoppingLists.find(list => list.id === listId)\n          const regularListPosition = shoppingLists.indexOf(regularList)\n\n          const newAggregateList = addOrUpdateListItem(aggregateList, aggregateListItem)\n          const newRegularList = addOrUpdateListItem(regularList, regularListItem)\n\n          newLists[0] = newAggregateList\n          newLists[regularListPosition] = newRegularList\n\n          setShoppingLists(newLists)\n\n          if (status === 201) {\n            setFlashProps({\n              type: 'success',\n              message: 'Success! Your shopping list item has been created.'\n            })\n          } else {\n            setFlashProps({\n              type: 'success',\n              message: 'Success! Your new shopping list item has been combined with another item with the same description.'\n            })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashProps({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} when creating shopping list item: ${json.errors}` : `Unknown error ${status} when creating shopping list item`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error when creating shopping list item: ', err.message)\n\n          setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemUpdate = (itemId, attrs, callbacks) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingListItem(token, itemId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const [aggregateListItem, regularListItem] = json\n\n          let newShoppingLists = [...shoppingLists]\n\n          const regularList = shoppingLists.find(list => list.id === regularListItem.list_id)\n          const regularListPosition = shoppingLists.indexOf(regularList)\n\n          const newAggregateList = addOrUpdateListItem(shoppingLists[0], aggregateListItem)\n          const newRegularList = addOrUpdateListItem(regularList, regularListItem)\n\n          newShoppingLists[0] = newAggregateList\n          newShoppingLists[regularListPosition] = newRegularList\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashProps({ type: 'success', message: 'Success! Your shopping list item was updated.' })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashProps({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being updated:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} updating item ${itemId}: ${json.errors}` : `Unknown error ${status} updating item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list item you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Unexpected error editing list item ${itemId}: `, err)\n\n          setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemDestroy = (itemId, callbacks) => {\n    const { onSuccess, onNotFound, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyShoppingListItem(token, itemId)\n      .then(({ status, json }) => {\n        if (status === 200 || status === 204) {\n          const regularListToRemoveItemFrom = listFromListItemId(itemId)\n          const regularListIndex = shoppingLists.indexOf(regularListToRemoveItemFrom)\n          const newLists = [...shoppingLists]\n          let newAggregateList\n\n          if (status === 200) {\n            // If there is an updated aggregate list item, it will be returned. If\n            // the aggregate list item has been destroyed, the status will be 204.\n            newAggregateList = addOrUpdateListItem(shoppingLists[0], json)\n          } else {\n            const deletedItem = regularListToRemoveItemFrom.list_items.find(item => item.id === itemId)\n            const aggregateListItem = shoppingLists[0].list_items.find(item => item.description.toLowerCase() === deletedItem.description.toLowerCase())\n\n            newAggregateList = removeItemFromList(shoppingLists[0], aggregateListItem.id)\n          }\n\n          const newRegularList = removeItemFromList(regularListToRemoveItemFrom, itemId)\n\n          newLists[0] = newAggregateList\n          newLists.splice(regularListIndex, 1, newRegularList)\n\n          setShoppingLists(newLists)\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list item ${itemId}: ${json.errors}` : `Unknown error ${status} when deleting shopping list item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error', \n            message: \"Oops! We couldn't find the shopping list item you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error destroying shopping list item: ', err)\n\n          setFlashProps({\n            type: 'error', \n            message: \"Something unexpected happened while trying to delete your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const value = {\n    shoppingLists,\n    shoppingListLoadingState,\n    performShoppingListUpdate,\n    performShoppingListCreate,\n    performShoppingListDestroy,\n    performShoppingListItemCreate,\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    if (activeGameId && mountedRef.current) fetchLists()\n  }, [fetchLists, activeGameId])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ShoppingListsContext.Provider value={value}>\n      {children}\n    </ShoppingListsContext.Provider>\n  )\n}\n\nShoppingListsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    shoppingLists: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      user_id: PropTypes.number,\n      title: PropTypes.string.isRequired,\n      aggregate: PropTypes.bool.isRequired,\n      list_items: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number,\n        list_id: PropTypes.number,\n        description: PropTypes.string.isRequired,\n        quantity: PropTypes.number.isRequired,\n        notes: PropTypes.string\n      })).isRequired\n    })),\n    shoppingListLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performShoppingListUpdate: PropTypes.func,\n    performShoppingListCreate: PropTypes.func,\n    performShoppingListDestroy: PropTypes.func,\n    performShoppingListItemCreate: PropTypes.func,\n    performShoppingListItemUpdate: PropTypes.func,\n    performShoppingListItemDelete: PropTypes.func\n  })\n}\n\nexport { ShoppingListsContext, ShoppingListsProvider, shoppingListLoadingStates }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { useContext } from 'react'\nimport { ColorContext } from '../contexts/colorContext'\nimport { AppContext } from '../contexts/appContext'\nimport { GamesContext } from '../contexts/gamesContext'\nimport { ShoppingListsContext } from '../contexts/shoppingListsContext'\n\nconst useCustomContext = (cxt, msg) => {\n  const context = useContext(cxt)\n\n  if (!context) {\n    throw new Error(msg)\n  }\n\n  return context\n}\n\nexport const useColorScheme = () => (\n  useCustomContext(ColorContext, 'useColorScheme must be used within a ColorProvider')\n)\n\nexport const useAppContext = () => (\n  useCustomContext(AppContext, 'useAppContext must be used within a AppProvider')\n)\n\nexport const useShoppingListsContext = () => (\n  useCustomContext(ShoppingListsContext, 'useShoppingListsContext must be used within a ShoppingListProvider')\n)\n\nexport const useGamesContext = () => (\n  useCustomContext(GamesContext, 'useGamesContext must be used within a GamesProvider')\n)\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport { createContext, useState, useEffect, useRef, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  fetchGames,\n  createGame,\n  updateGame,\n  destroyGame\n} from '../utils/simApi'\nimport { useAppContext } from '../hooks/contexts'\nimport paths from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\nconst ERROR = 'error'\n\nconst gameLoadingStates = { LOADING, DONE, ERROR }\n\nconst GamesContext = createContext()\n\nconst GamesProvider = ({ children, overrideValue = {} }) => {\n  const { token, logOutAndRedirect, setFlashProps } = useAppContext()\n\n  const [games, setGames] = useState(overrideValue.games || [])\n  const [gameLoadingState, setGameLoadingState] = useState(overrideValue.gameLoadingState || LOADING)\n\n  const mountedRef = useRef(true)\n  const gamesOverridden = useRef(false)\n\n  if (overrideValue.games) {\n    // Use this as the initial value only so that the games can be\n    // updated when we interact in Storybook or other tests\n    delete overrideValue.games\n    gamesOverridden.current = true\n  }\n\n  const fetchUserGames = useCallback(() => {\n    if (token && !gamesOverridden.current) {\n      fetchGames(token)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setGames(json)\n              !overrideValue.gameLoadingState && setGameLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} when fetching games: ${json.errors}` : 'No game data returned from SIM'\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching games: ', err)\n\n            if (mountedRef.current) {\n              setFlashProps({\n                type: 'error',\n                message: \"There was an error loading your games. It may have been on our end. We're sorry!\"\n              })\n\n              setGameLoadingState(ERROR)\n            }\n          }\n        })\n    }\n  }, [token, overrideValue.gameLoadingState, setFlashProps, logOutAndRedirect])\n\n  const performGameCreate = useCallback((attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createGame(token, attrs)\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (mountedRef.current) {\n            const newGames = [...games]\n            newGames.unshift(json)\n            setGames(newGames)\n          }\n\n          setFlashProps({\n            type: 'success',\n            message: 'Success! Your game has been created.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashProps({\n            type: 'error',\n            header: `${json.errors.length} error(s) prevented your game from being created:`,\n            message: json.errors\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what.\n          throw new Error(json.errors ? `Error ${status} when creating game: ${json.errors}` : `Unknown error ${status} when creating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating game: ', err)\n\n          mountedRef.current && setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while creating your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashProps, logOutAndRedirect])\n\n  const performGameUpdate = useCallback((gameId, attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onNotFound, onInternalServerError, onUnauthorized } = callbacks\n\n    updateGame(token, gameId, attrs)\n      .then(({ status, json }) => {\n        if (status === 200) {\n          if (mountedRef.current) {\n            const newGames = games.map(game => parseInt(game.id) === parseInt(gameId) ? json : game)\n            setGames(newGames)\n            setFlashProps({ type: 'success', message: 'Success! Your game has been updated.' })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          if (mountedRef.current) {\n            setFlashProps({\n              type: 'error',\n              message: json.errors,\n              header: `${json.errors.length} error(s) prevented your game from being updated:`\n            })\n          }\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} while updating game: ${json.errors}` : `Error ${status} while updating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashProps({\n            type: 'error',\n            message: \"Oops! We couldn't find the game you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error updating game: ', err)\n\n          setFlashProps({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashProps, logOutAndRedirect])\n\n  const performGameDestroy = useCallback((gameId, callbacks) => {\n    const { onSuccess, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyGame(token, gameId)\n      .then(resp => {\n        // If the game isn't found we should treat it as if it's been destroyed\n        // and just remove it successfully\n        if ((resp.status === 204 || resp.status === 404) && mountedRef.current) {\n          const destroyedGame = games.find(game => parseInt(game.id) === parseInt(gameId))\n          const gameIndex = games.indexOf(destroyedGame)\n\n          const newGames = [...games]\n          newGames.splice(gameIndex, 1)\n\n          setGames(newGames)\n          setFlashProps({\n            type: 'success',\n            message: 'Your game has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          throw new Error(`Error ${resp.status} while destroying game ${gameId}`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error destroying game: ', err)\n\n          if (mountedRef.current) {\n            setFlashProps({\n              type: 'error',\n              message: \"Something unexpected happened while trying to delete your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n            })\n          }\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, logOutAndRedirect, setFlashProps])\n\n  const value = {\n    games,\n    gameLoadingState,\n    performGameCreate,\n    performGameUpdate,\n    performGameDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    mountedRef.current && fetchUserGames()\n  }, [fetchUserGames])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <GamesContext.Provider value={value}>\n      {children}\n    </GamesContext.Provider>\n  )\n}\n\nGamesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    games: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n      user_id: PropTypes.number,\n      name: PropTypes.string.isRequired,\n      description: PropTypes.string\n    })),\n    gameLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performGameCreate: PropTypes.func,\n    performGameUpdate: PropTypes.func,\n    performGameDestroy: PropTypes.func\n  })\n}\n\nexport { GamesContext, GamesProvider, gameLoadingStates }\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport { authorize } from '../../utils/simApi'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport logOutWithGoogle from '../../utils/logOutWithGoogle'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './homePage.module.css'\n\nconst HomePage = () => {\n  const { token, setShouldRedirectTo, removeSessionCookie } = useAppContext()\n\n  const mountedRef = useRef(true)\n\n  const verifyLogin = useCallback(() => {\n    if (token && !isStorybook) {\n      authorize(token)\n        .then(resp => resp.status === 500 ? resp.json() : null)\n        .then(data => {\n          if (data) {\n            throw new Error('Internal Server Error: ', data.errors[0])\n          } else {\n            setShouldRedirectTo(paths.dashboard.main)\n            mountedRef.current = false\n          }\n        })\n        .catch(err => {\n          if (process.env.NODE_ENV === 'development') console.error(err.message)\n\n          logOutWithGoogle(() => removeSessionCookie())\n        })\n    }\n  }, [token, removeSessionCookie, setShouldRedirectTo])\n\n  useEffect(() => {\n    verifyLogin()\n    return () => mountedRef.current = false\n  }, [token, verifyLogin])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>Skyrim Inventory Management</h1>\n        <Link className={styles.login} to={paths.login}>Log in with Google</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React, { useEffect, useState, useRef } from 'react'\nimport GoogleLogin from 'react-google-login'\nimport {\n  googleClientId,\n  frontendBaseUri\n} from '../../utils/config'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './loginPage.module.css'\n\nconst LoginPage = () => {\n  const {\n    token,\n    setSessionCookie,\n    removeSessionCookie,\n    setShouldRedirectTo\n  } = useAppContext()\n\n  const [loginErrorMessage, setLoginErrorMessage] = useState(null)\n  const mountedRef = useRef(true)\n\n  const successCallback = (resp) => {\n    const { tokenId } = resp\n\n    if (tokenId) {\n      setSessionCookie(tokenId)\n      setShouldRedirectTo(paths.dashboard.main)\n      mountedRef.current = false\n    }\n  }\n\n  const failureCallback = (resp) => {\n    if (process.env.NODE_ENV === 'development') console.error('Login failure: ', resp)\n    token && removeSessionCookie()\n    setLoginErrorMessage('Something went wrong! Please try logging in again.')\n  }\n\n  useEffect(() => (\n    () => (mountedRef.current = false)\n  ))\n\n  return(\n    <div className={styles.root}>\n      {loginErrorMessage ?\n      <p className={styles.errorMessage}>{loginErrorMessage}</p> :\n      null}\n      <div className={styles.container}>\n        <GoogleLogin\n          className={styles.button}\n          clientId={googleClientId}\n          buttonText='Log In With Google'\n          onSuccess={successCallback}\n          onFailure={failureCallback}\n          redirectUri={`${frontendBaseUri}${paths.dashboard.main}`}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPage\n","export const YELLOW = {\n  schemeColorDarkest: '#ffbf00',\n  schemeColorDark: '#ffcb32',\n  schemeColorLight: '#ffd866',\n  schemeColorLightest: '#fff2cc',\n  hoverColorDark: '#e5ab00',\n  hoverColorLight: '#ffc519',\n  hoverColorLightest: '#ffebb2',\n  textColorPrimary: '#4c3900',\n  textColorSecondary: '#4c3900',\n  textColorTertiary: '#7f5700',\n  borderColor: '#cc9800',\n}\n\nexport const PINK = {\n  schemeColorDarkest: '#e83f6f',\n  schemeColorDark: '#ec658b',\n  schemeColorLight: '#f18ba8',\n  schemeColorLightest: '#fad8e2',\n  hoverColorDark: '#d03863',\n  hoverColorLight: '#ea527d',\n  hoverColorLightest: '#f5b2c5',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#451221',\n  borderColor: '#b93258',\n}\n\nexport const BLUE = {\n  schemeColorDarkest: '#2274a5',\n  schemeColorDark: '#4e8fb7',\n  schemeColorLight: '#7aabc9',\n  schemeColorLightest: '#d2e3ed',\n  hoverColorDark: '#1e6894',\n  hoverColorLight: '#3881ae',\n  hoverColorLightest: '#bcd5e4',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#0d2e42',\n  borderColor: '#1b5c84'\n}\n\nexport const GREEN = {\n  schemeColorDarkest: '#00a323',\n  schemeColorDark: '#32b54e',\n  schemeColorLight: '#66c77b',\n  schemeColorLightest: '#ccecd3',\n  hoverColorDark: '#00921f',\n  hoverColorLight: '#19ac38',\n  hoverColorLightest: '#b2e3bd',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#00410e',\n  borderColor: '#00821c'\n}\n\nexport const AQUA = {\n  schemeColorDarkest: '#20e2e9',\n  schemeColorDark: '#62eaef',\n  schemeColorLight: '#8ff0f4',\n  schemeColorLightest: '#d2f9fa',\n  hoverColorDark: '#11cbd1',\n  hoverColorLight: '#4ce7ed',\n  hoverColorLightest: '#bcf6f8',\n  textColorPrimary: '#094345',\n  textColorSecondary: '#094345',\n  textColorTertiary: '#094345',\n  borderColor: '#19b4ba'\n}\n\nconst colorSchemes = [\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n]\n\nexport default colorSchemes\n","export default __webpack_public_path__ + \"static/media/googleIcon.9432a66b.svg\";","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport icon from './googleIcon.svg'\nimport styles from './logoutDropdown.module.css'\n\nconst LogoutDropdown = ({className, logOutFunction}) => {\n  const mountedRef = useRef(true)\n\n  const logOutAndUnmount = e => {\n    e.preventDefault()\n\n    logOutFunction(() => { mountedRef.current = false })\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ))\n\n  return(\n    <div className={className}>\n      <button className={styles.button} onClick={logOutAndUnmount}>\n        <div className={styles.body}>\n          <div className={styles.googleLogout}>\n            <img src={icon} alt='Google logo' />\n            Log Out With Google\n          </div>\n        </div>\n      </button>\n    </div>\n  )\n}\n\nLogoutDropdown.propTypes = {\n  className: PropTypes.string,\n  logOutFunction: PropTypes.func.isRequired\n}\n\nexport default LogoutDropdown\n","export default __webpack_public_path__ + \"static/media/anonymousAvatar.36d1acc1.jpg\";","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport LogoutDropdown from '../logoutDropdown/logoutDropdown'\nimport anonymousAvatar from './anonymousAvatar.jpg'\nimport styles from './dashboardHeader.module.css'\n\nconst DashboardHeader = () => {\n  const {\n    profileData,\n    logOutAndRedirect\n  } = useAppContext()\n\n  const [dropdownVisible, setDropdownVisible] = useState(false)\n  const mountedRef = useRef(true)\n\n  const logOutFunction = useCallback((callback = null) => {\n    setDropdownVisible(false);\n\n    logOutAndRedirect(paths.home, () => {\n      callback && callback()\n      mountedRef.current = false\n    })\n  }, [logOutAndRedirect])\n\n  useEffect(() => {\n    return () => (mountedRef.current = false)\n  }, [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.bar}>\n        <span className={styles.headerContainer}>\n          <h1 className={styles.header}>\n            <Link className={styles.headerLinkLarge} to={paths.dashboard.main}>Skyrim Inventory<br className={styles.bp} /> Management</Link>\n            <Link className={styles.headerLinkSmall} to={paths.dashboard.main}>S. I. M.</Link>\n          </h1>\n        </span>\n        {profileData ?\n        <button className={styles.profile} onClick={() => setDropdownVisible(!dropdownVisible)}>\n          <div className={styles.profileText}>\n            <p className={styles.textTop}>{profileData.name}</p>\n            <p className={styles.textBottom}>{profileData.email}</p>\n          </div>\n          <img className={styles.avatar} src={profileData.image_url || anonymousAvatar} alt='User avatar' referrerPolicy='no-referrer' />\n        </button> :\n        null\n        }\n        <LogoutDropdown\n          className={dropdownVisible ? styles.logoutDropdown : styles.hidden}\n          logOutFunction={logOutFunction}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default DashboardHeader\n","/*\n *\n * This component is intended for use within the GamesDropdown.\n * The GamesDropdown mimics a native `select` element. It is\n * critical that this component's role and ARIA attributes not\n * be changed except to make it more accessible or fix bugs in\n * accessibility. If you need a different role or aria attributes,\n * pass the values in as props or create another component.\n *\n */\n\nimport React from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport styles from './gamesDropdownOption.module.css'\n\nconst GamesDropdownOption = ({\n  name,\n  className,\n  onClick,\n  onKeyDown,\n  ariaSelected\n}) => {\n  return(\n    <li\n      className={classNames(styles.root, className)}\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      role='option'\n      tabIndex={0}\n      aria-selected={ariaSelected}\n    >\n      {name.length > 24 ? `${name.substring(0, 23)}...` : name}\n    </li>\n  )\n}\n\nGamesDropdownOption.propTypes = {\n  name: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  ariaSelected: PropTypes.bool.isRequired\n}\n\nexport default GamesDropdownOption\n","/*\n * It was important to have a styled options list, so a native HTML select\n * dropdown wouldn't do. This component has been made to be as accessible as\n * possible, adhering to the ARIA specification for comboboxes. More information\n * on comboboxes and their expected behaviour can be found in the ARIA docs:\n * https://www.w3.org/TR/wai-aria-practices-1.1/examples/combobox/aria1.1pattern/listbox-combo.html\n *\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react'\nimport classNames from 'classnames'\nimport { useHistory } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport useQuery from '../../hooks/useQuery'\nimport GamesDropdownOption from '../gamesDropdownOption/gamesDropdownOption'\nimport styles from './gamesDropdown.module.css'\n\nconst GamesDropdown = () => {\n  const history = useHistory()\n  const queryString = useQuery()\n\n  const { setFlashVisible } = useAppContext()\n  const { games, gameLoadingState, performGameCreate } = useGamesContext()\n\n  const [activeGame, setActiveGame] = useState(null)\n  const [dropdownExpanded, setDropdownExpanded] = useState(false)\n  const [inputValue, setInputValue] = useState('')\n\n  const componentRef = useRef(null)\n\n  const expandDropdown = () => setDropdownExpanded(true)\n  const collapseDropdown = useCallback(() => setDropdownExpanded(false), [setDropdownExpanded])\n  const toggleDropdown = () => setDropdownExpanded(!dropdownExpanded)\n\n  const colorVars = {\n    '--button-background-color': BLUE.schemeColorDarkest,\n    '--button-hover-color': BLUE.hoverColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor\n  }\n\n  const selectGame = useCallback(game => {\n    setActiveGame(game)\n    setInputValue(game.name)\n    \n    const params = new URLSearchParams(`game_id=${game.id}`)\n    history.push({ search: params.toString() })\n\n    collapseDropdown()\n  }, [history, collapseDropdown])\n\n  const isActiveGame = id => {\n    if (activeGame && !games.length) return false\n\n    return activeGame ? activeGame.id === id : id === games[0].id\n  }\n\n  const updateValue = e => setInputValue(e.currentTarget.value)\n\n  useEffect(() => {\n    const gameId = parseInt(queryString.get('game_id'))\n\n    if (games.length && gameId) {\n      if (activeGame && activeGame.id === gameId) return\n      const game = gameId ? games.find(game => game.id === gameId) : games[0]\n\n      selectGame(game || games[0])\n    } else if (games.length && !activeGame) {\n      selectGame(games[0])\n    }\n  }, [selectGame, activeGame, games, queryString])\n\n  useEffect(() => {\n    const collapseDropdownAndResetValue = e => {\n      if (componentRef.current !== e.relatedTarget && !componentRef.current.contains(e.relatedTarget)) {\n        // Hide the dropdown\n        collapseDropdown()\n\n        // Find out if there is a game whose title exactly matches the\n        // text typed into the input (without regard to case).\n        const game = games.find(g => g.name.toLowerCase() === inputValue.toLowerCase())\n\n        if (game) {\n          // If there is a matching game, it should be selected when the\n          // component is no longer focussed.\n          setActiveGame(game)\n          setInputValue(game.name)\n\n          const params = new URLSearchParams(`game_id=${game.id}`)\n          history.push({ search: params.toString() })\n        } else {\n          // If there is no matching game, the input value should be reset\n          // to the name of the active game.\n          activeGame && setInputValue(activeGame.name)\n        }\n      }\n    }\n\n    document.addEventListener('focusout', collapseDropdownAndResetValue)\n\n    return () => {\n      document.removeEventListener('focusout', collapseDropdownAndResetValue)\n    }\n  }, [games, setActiveGame, activeGame, setInputValue, inputValue, history, collapseDropdown])\n\n  return(\n    <div ref={componentRef} className={styles.root} style={colorVars} data-testid='games-dropdown'>\n      <div\n        className={styles.header}\n        role='combobox'\n        aria-haspopup='listbox'\n        aria-owns='gamesListbox'\n        aria-controls='gamesListbox'\n        aria-expanded={dropdownExpanded}\n      >\n        <input\n          className={classNames(styles.input, 'focusable')}\n          type='text'\n          disabled={gameLoadingState !== 'done' /* if 'loading' or 'error' it should be disabled*/}\n          value={inputValue}\n          onChange={updateValue}\n          placeholder='No games available'\n          aria-autocomplete='list'\n          aria-multiline={false}\n          aria-controls='gamesListbox'\n          onFocus={expandDropdown}\n          onClick={expandDropdown}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              const game = games.find(g => g.name.toLowerCase() === e.target.value.toLowerCase())\n\n              if (game) {\n                selectGame(game)\n              } else {\n                const callbacks = {\n                  // Although `games` has just been set in the API response handler,\n                  // there is no guarantee that it will be updated yet by the time the\n                  // callback runs. So instead of `selectGame`, here we just clear the\n                  // query string and set the active game to `null`. The `useEffect`\n                  // hook will run when the `games` array is updated and will set the\n                  // query string and the active game to the newly created game.\n                  onSuccess: () => {\n                    history.push({ search: '' })\n                    setActiveGame(null)\n                    e.target.blur()\n                  },\n                  onUnprocessableEntity: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  },\n                  onInternalServerError: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  }\n                }\n\n                performGameCreate({ name: inputValue }, callbacks)\n              }\n            } else if (e.key === 'ArrowUp') {\n              e.preventDefault()\n              const focusables = document.getElementsByClassName('focusable')\n              focusables[focusables.length - 1].focus()\n            } else if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            } else if (e.key === 'Escape') {\n              collapseDropdown()\n            }\n          }}\n        />\n        <button\n          className={styles.trigger}\n          onClick={toggleDropdown}\n          onKeyDown={e => {\n            if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            }\n          }}\n          disabled={gameLoadingState !== 'done'}\n          data-testid='games-dropdown-trigger'\n        >\n          <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n        </button>\n      </div>\n      <ul\n        id='gamesListbox'\n        className={classNames(styles.dropdown, { [styles.hidden]: !dropdownExpanded || !games.length })}\n        role='listbox'\n      >\n        {games.map(({ id, name }, index) => {\n          return(\n            <GamesDropdownOption\n              className='focusable'\n              onClick={() => selectGame({ id, name })}\n              onKeyDown={e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  selectGame({ id, name })\n                } else if (e.key === 'ArrowUp') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  focusables[index - 1].focus()\n                } else if (e.key === 'ArrowDown') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  const nextIndex = index < focusables.length - 1 ? index + 1 : 0\n                  focusables[nextIndex].focus()\n                }\n              }}\n              key={`${name.toLowerCase().replace(' ', '_')}-${id}`}\n              ariaSelected={isActiveGame(id)}\n              name={name}\n            />\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default GamesDropdown\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardHeader from '../components/dashboardHeader/dashboardHeader'\nimport GamesDropdown from '../components/gamesDropdown/gamesDropdown'\nimport styles from './dashboardLayout.module.css'\n\nconst DashboardLayout = ({ title, includeGameSelect = false, children }) => {\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        {title ?\n        <div className={styles.headerContainer}>\n          <div className={styles.titleContainer}>\n            <h2 className={styles.title}>{title}</h2>\n            {includeGameSelect && <GamesDropdown />}\n          </div>\n          <hr className={styles.hr} />\n        </div> :\n        null}\n        {children}\n      </div>\n      <DashboardHeader />\n    </div>\n  )\n}\n\nDashboardLayout.propTypes = {\n  title: PropTypes.string,\n  includeGameSelect: PropTypes.bool,\n  children: PropTypes.node.isRequired\n}\n\nexport default DashboardLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactLoading from 'react-loading'\n\nconst possibleTypes = [\n  'blank',\n  'balls',\n  'bars',\n  'bubbles',\n  'cubes',\n  'cylon',\n  'spin',\n  'spinningBubbles',\n  'spokes'\n]\n\nconst Loading = ({ className, type = 'bubbles', color, height, width }) => (\n  <ReactLoading className={className} type={type} color={color} height={height} width={width} />\n)\n\nLoading.propTypes = {\n  className: PropTypes.string,\n  type: PropTypes.oneOf(possibleTypes),\n  color: PropTypes.string.isRequired,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n}\n\nexport default Loading\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { useColorScheme } from '../../hooks/contexts'\nimport styles from './navigationCard.module.css'\n\nconst NavigationCard = ({ href, children }) => {\n  const { schemeColorDarkest, hoverColorDark, textColorPrimary} = useColorScheme()\n\n  const styleVars = {\n    '--background-color': schemeColorDarkest,\n    '--hover-color': hoverColorDark,\n    '--text-color': textColorPrimary\n  }\n\n  return(\n    <Link className={styles.root} to={href} style={styleVars}>\n      {children}\n    </Link>\n  )\n}\n\nNavigationCard.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport default NavigationCard\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport NavigationCard from '../navigationCard/navigationCard'\nimport styles from './navigationMosaic.module.css'\n\nconst NavigationMosaic = ({ cardArray }) => (\n  <div className={styles.root}>\n    {cardArray.map(({ colorScheme, href, children, key }) => (\n      <div key={key} className={styles.card}>\n        <ColorProvider colorScheme={colorScheme}>\n          <NavigationCard \n            href={href}\n            children={children}\n          />\n        </ColorProvider>\n      </div>\n    ))}\n  </div>\n)\n\nNavigationMosaic.propTypes = {\n  cardArray: PropTypes.arrayOf(\n    PropTypes.shape({\n      href: PropTypes.string.isRequired,\n      children: PropTypes.node.isRequired,\n      key: PropTypes.string.isRequired,\n      colorScheme: PropTypes.shape({\n        schemeColorDarkest: PropTypes.string.isRequired,\n        schemeColorDark: PropTypes.string.isRequired,\n        schemeColorLight: PropTypes.string.isRequired,\n        schemeColorLightest: PropTypes.string.isRequired,\n        hoverColorDark: PropTypes.string.isRequired,\n        hoverColorLight: PropTypes.string.isRequired,\n        hoverColorLightest: PropTypes.string.isRequired,\n        textColorPrimary: PropTypes.string.isRequired,\n        textColorSecondary: PropTypes.string,\n        textColorTertiary: PropTypes.string,\n        borderColor: PropTypes.string\n      }).isRequired\n    })\n  ).isRequired\n}\n\nexport default NavigationMosaic\n","import React, { useRef, useEffect } from 'react'\nimport {\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n} from '../../utils/colorSchemes'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport Loading from '../../components/loading/loading'\nimport NavigationMosaic from '../../components/navigationMosaic/navigationMosaic'\nimport styles from './dashboardPage.module.css'\n\nconst cards = [\n  {\n    colorScheme: YELLOW,\n    href: paths.dashboard.games,\n    children: 'Your Games',\n    key: 'your-games'\n  },\n  {\n    colorScheme: PINK,\n    href: paths.dashboard.shoppingLists,\n    children: 'Your Shopping Lists',\n    key: 'your-shopping-lists'\n  },\n  {\n    colorScheme: BLUE,\n    href: '#',\n    children: 'Nav Link 3',\n    key: 'nav-link-3'\n  },\n  {\n    colorScheme: GREEN,\n    href: '#',\n    children: 'Nav Link 4',\n    key: 'nav-link-4'\n  },\n  {\n    colorScheme: AQUA,\n    href: '#',\n    children: 'Nav Link 5',\n    key: 'nav-link-5'\n  }\n]\n\nconst DashboardPage = () => {\n  const { token, profileLoadState, setShouldRedirectTo } = useAppContext()\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    if (!token && !isStorybook) {\n      setShouldRedirectTo(paths.login)\n      mountedRef.current = false\n    }\n\n    return () => mountedRef.current = false\n  }, [token, setShouldRedirectTo])\n  \n  return(\n    <DashboardLayout>\n      {profileLoadState === 'done' ? <div className={styles.root}>\n        <NavigationMosaic cardArray={cards} />\n      </div> :\n      <Loading className={styles.loading} type='bubbles' color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n    </DashboardLayout>\n  )\n}\n\nexport default DashboardPage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './flashMessage.module.css'\n\nconst SUCCESS = 'success'\nconst INFO = 'info'\nconst ERROR = 'error'\nconst WARNING = 'warning'\n\nconst colors = {\n  [SUCCESS]: {\n    body: '#e5f2e5',\n    border: '#b2d8b2',\n    text: '#329932'\n  },\n  [INFO]: {\n    body: '#cce5ff',\n    border: '#b3d8ff',\n    text: '#4e6d8e',\n  },\n  [ERROR]: {\n    body: '#ffcccc',\n    border: '#ff9999',\n    text: '#cc0000'\n  },\n  [WARNING]: {\n    body: '#fefde4',\n    border: '#fdf797',\n    text: '#b0a723'\n  }\n}\n\nconst FlashMessage = ({ type = INFO, header, message }) => {\n  const colorVars = {\n    '--body-color': colors[type].body,\n    '--border-color': colors[type].border,\n    '--text-color': colors[type].text\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      {header && <p className={styles.header}>{header}</p>}\n      {typeof message === 'string' ? message :\n      <ul className={styles.messageList}>\n        {message.map((msg, index) => <li key={`message-${index}`} className={styles.msg}>{msg}</li>)}\n      </ul>}\n    </div>\n  )\n}\n\nFlashMessage.propTypes = {\n  type: PropTypes.oneOf([SUCCESS, INFO, ERROR, WARNING]),\n  header: PropTypes.string,\n  message: PropTypes.oneOfType([\n    PropTypes.string, PropTypes.arrayOf(PropTypes.string)\n  ]).isRequired\n}\n\nexport default FlashMessage\n","import React, { useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './modal.module.css'\n\nconst Modal = ({ children, title, subtitle }) => {\n  const { setModalVisible } = useAppContext()\n\n  const contentRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const contentRefContains = useCallback(el => (\n    contentRef.current && (contentRef.current === el || contentRef.current.contains(el))\n  ), [])\n\n  const hide = useCallback(e => {\n    if ((e.type === 'click' && !contentRefContains(e.target)) || (e.type === 'keydown' && e.key === 'Escape')) {\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n  }, [contentRefContains, setModalVisible])\n\n  useEffect(() => {\n    window.addEventListener('keydown', hide)\n\n    return () => window.removeEventListener('keydown', hide)\n  }, [hide])\n\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].classList.add('modal-open')\n\n    return () => {\n      document.getElementsByTagName('body')[0].classList.remove('modal-open')\n      mountedRef.current = false\n    }\n  }, [])\n\n  return(\n    <div role='dialog' className={styles.root} onClick={hide}>\n      <div ref={contentRef} className={styles.content}>\n        <h3 className={styles.title}>{title}</h3>\n        {subtitle && <p className={styles.subtitle}>{subtitle}</p>}\n        {children}\n      </div>\n    </div>\n  )\n}\n\nModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired,\n  subtitle: PropTypes.string\n}\n\nexport default Modal\n","import React from 'react'\nimport Modal from '../components/modal/modal'\n\nconst withModal = WrappedComponent => {\n  return ({ title, subtitle = null, ...childProps }) => (\n    <Modal title={title} subtitle={subtitle}>\n      <WrappedComponent {...childProps} />\n    </Modal>\n  )\n}\n\nexport default withModal\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport colorSchemes from '../../utils/colorSchemes'\nimport styles from './modalForm.module.css'\n\nconst ModalForm = ({\n  modelName,\n  buttonLabel,\n  onSubmit,\n  fields,\n  buttonColor = null,\n}) => {\n  const mountedRef = useRef(true)\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n\n  // If the button color isn't specified in the props, pick\n  // a random color\n  const colorRef = useRef(buttonColor || colorSchemes[Math.floor(Math.random() * colorSchemes.length)])\n\n  const colorVars = {\n    '--button-background-color': colorRef.current.schemeColorDarkest,\n    '--button-text-color': colorRef.current.textColorPrimary,\n    '--button-hover-color': colorRef.current.hoverColorDark,\n    '--button-border-color': colorRef.current.borderColor\n  }\n\n  useEffect(() => {\n    inputRef.current && inputRef.current.focus()\n\n    return () => mountedRef.current = false\n  }, [])\n\n  return(\n    <form\n      ref={formRef}\n      className={styles.root}\n      style={colorVars}\n      onSubmit={onSubmit}\n      data-testid={`${modelName}-form`}\n    >\n      {fields.map(({ tag: Tag, label, name, ...inputProps }, index) => {\n        if (index === 0) inputProps['ref'] = inputRef\n\n        return(\n          <fieldset key={`${modelName}-${name}`} className={styles.fieldset}>\n            <label className={styles.label} htmlFor={name}>{label}</label>\n            <Tag\n              className={styles.input}\n              name={name}\n              {...inputProps}\n            />\n          </fieldset>\n        )\n      })}\n      <button className={styles.submit} type='submit'>{buttonLabel}</button>\n    </form>\n  )\n}\n\nModalForm.propTypes = {\n  // Should be a lower-cased string without whitespace. Used to set\n  // the test ID of the form to something more specific.\n  modelName: PropTypes.string.isRequired,\n  // The text that should appear on the form's button\n  buttonLabel: PropTypes.string.isRequired,\n  // Submit handler for the form\n  onSubmit: PropTypes.func.isRequired,\n  // The color of the form's button, taken from /src/utils/colorSchemes.js.\n  // Those color schemes automatically include these keys.\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }),\n  // A description of the form fields\n  fields: PropTypes.arrayOf(PropTypes.shape({\n    // It is recommended that the name of the form field be the same as the\n    // name of the attribute it sets (all lower case)\n    name: PropTypes.string.isRequired,\n    // This form supports inputs and textareas. It's possible that in the\n    // future it could be modified to support other form controls as well.\n    tag: PropTypes.oneOf(['input', 'textarea']).isRequired,\n    // The text of the label. Generally the name, titlecased.\n    label: PropTypes.string.isRequired,\n    // The type of the form control.\n    type: PropTypes.oneOf(['text', 'number', 'textarea']).isRequired,\n    // The placeholder value is required in case a value is `null`\n    placeholder: PropTypes.string.isRequired,\n    // Optional inputMode determines what keypad mobile users see. More\n    // options could be added to this list but we didn't need them yet\n    // so I just put these ones.\n    inputMode: PropTypes.oneOf(['numeric', 'text']),\n    // The starting `value` of the field, generally the current value of\n    // the attribute, if there is one.\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  })).isRequired\n}\n\nexport default ModalForm\n","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport { pathsScopedToGames } from '../../routing/paths'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'name',\n    tag: 'input',\n    label: 'Name',\n    type: 'text',\n    placeholder: 'Name',\n    inputMode: 'text',\n    pattern: \"^\\\\s*[A-Za-z0-9 \\\\-',]*\\\\s*$\",\n    title: 'Name can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n  },\n  {\n    name: 'description',\n    tag: 'input',\n    label: 'Description',\n    type: 'text',\n    placeholder: 'Description',\n    inputMode: 'text'\n  }\n]\n\nconst ModalGameForm = ({ type, currentAttributes = {} }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performGameCreate, performGameUpdate } = useGamesContext()\n\n  const history = useHistory()\n\n  const mountedRef = useRef(true)\n\n  const onSubmit = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const unmountAndDisplayFlash = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onUnprocessableEntity: unmountAndDisplayFlash,\n      onInternalServerError: unmountAndDisplayFlash,\n      onNotFound: unmountAndDisplayFlash, // only valid for update but won't break anything\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    for (const attr in attrs) {\n      if (attrs[attr] === currentAttributes[attr]) delete attrs[attr]\n    }\n\n    if (type === 'create') {\n      const onSuccess = () => {\n        // If the user is on a page where there is a games dropdown,\n        // they should see a flash message when a game is created since\n        // they won't see the game added to a list.\n        if (pathsScopedToGames.indexOf(history.location.pathname) > -1) {\n          unmountAndDisplayFlash()\n        } else {\n          setModalVisible(false)\n          mountedRef.current = false\n        }\n      }\n\n      callbacks.onSuccess = onSuccess\n\n      performGameCreate(attrs, callbacks)\n    } else {\n      callbacks.onSuccess = unmountAndDisplayFlash\n\n      performGameUpdate(currentAttributes.id, attrs, callbacks)\n    }\n  }\n\n  const fields = formFields.map(field => (\n    currentAttributes[field.name] ? { defaultValue: currentAttributes[field.name], ...field } : field\n  ))\n  \n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='game'\n      buttonLabel={type === 'create' ? 'Create Game' : 'Update Game'}\n      onSubmit={onSubmit}\n      fields={fields}\n    />\n  )  \n}\n\nModalGameForm.propTypes = {\n  type: PropTypes.oneOf(['create', 'edit']).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    description: PropTypes.string\n  })\n}\n\nexport default ModalGameForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport SlideToggle from 'react-slide-toggle'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport withModal from '../../hocs/withModal'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './game.module.css'\n\nconst DEFAULT_DESCRIPTION = 'This game has no description.'\nconst DESTROY_CONFIRMATION = 'Are you sure you want to delete this game? This cannot be undone. You will lose all data associated with the game you delete.'\n\nconst Game = ({ gameId, name, description }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const {\n    setFlashProps,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n  const { performGameDestroy } = useGamesContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const destroyRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n\n  const toggleDescription = e => {\n    if (!e || !refContains(iconsRef, e.target)) setToggleEvent(Date.now)\n  }\n\n  const showEditForm = () => {\n    setFlashVisible(false)\n\n    const attributes = { id: gameId, name, description }\n\n    const ModalComponent = withModal(ModalGameForm)\n    setModalAttributes({\n      Tag: ModalComponent,\n      props: {\n        title: 'Edit Game',\n        type: 'edit',\n        currentAttributes: attributes\n      }\n    })\n    setModalVisible(true)\n  }\n\n  const destroyGame = e => {\n    setFlashVisible(false)\n\n    const confirmed = window.confirm(DESTROY_CONFIRMATION)\n\n    const displayFlashAndUnmount = () => {\n      setFlashVisible(true)\n      mountedRef.current = false\n    }\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: displayFlashAndUnmount,\n        onInternalServerError: () => mountedRef.current && setFlashVisible(true)\n      }\n\n      performGameDestroy(gameId, callbacks)\n    } else {\n      setFlashProps({\n        type: 'info',\n        message: 'Your game was not deleted.'\n      })\n      \n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.header} onClick={toggleDescription}>\n        <span ref={iconsRef} className={styles.editIcons}>\n          <button\n            ref={destroyRef}\n            className={styles.icon}\n            onClick={destroyGame}\n            data-testid={`game-destroy-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n          </button>\n          <button\n            ref={editRef}\n            className={styles.icon}\n            onClick={showEditForm}\n            data-testid={`game-edit-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n          </button>\n        </span>\n        <h3 className={styles.name}>{name}</h3>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.description}>{description || DEFAULT_DESCRIPTION}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGame.propTypes = {\n  gameId: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string\n}\n\nexport default Game\n","import React, { useEffect, useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport styles from './gameCreateForm.module.css'\n\nconst GameCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n  const { performGameCreate } = useGamesContext()\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const toggleForm = () => mountedRef.current && setToggleEvent(Date.now)\n\n  const createGame = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    const onSuccessOrFatalError = () => {\n      setFlashVisible(true)\n      formRef.current && formRef.current.reset()\n      toggleForm()\n    }\n\n    const callbacks = {\n      onSuccess: onSuccessOrFatalError,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: onSuccessOrFatalError,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    performGameCreate(attrs, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <h3 className={styles.slideToggleTrigger} onClick={toggleForm}>Create Game...</h3>\n      <SlideToggle toggleEvent={toggleEvent} onExpanded={() => inputRef.current.focus()} collapsed>\n        {({ setCollapsibleElement }) => (\n          /* Include this div so we can set the form ref to something else */\n          <div ref={setCollapsibleElement}>\n            {/* Unfortunately, setting data-testid seems the only way to test this since fireEvent.click on the button doesn't work */}\n            <form ref={formRef} className={styles.form} data-testid='game-create-form' onSubmit={createGame}>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  ref={inputRef}\n                  className={styles.input}\n                  type='text'\n                  name='name'\n                  placeholder='Name'\n                  aria-label='Name'\n                  pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n                  title=\"Name can contain only alphanumeric characters, spaces, commas, hyphens, and apostrophes\"\n                />\n              </fieldset>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  className={styles.input}\n                  type='text'\n                  name='description'\n                  placeholder='Description'\n                  aria-label='Description'\n                />\n              </fieldset>\n              <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit' disabled={disabled}>\n                Create\n              </button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGameCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default GameCreateForm\n","import React, { useEffect } from 'react'\nimport { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport { gameLoadingStates } from '../../contexts/gamesContext'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport Game from '../../components/game/game'\nimport GameCreateForm from '../../components/gameCreateForm/gameCreateForm'\nimport Loading from '../../components/loading/loading'\nimport styles from './gamesPage.module.css'\n\nconst { LOADING, DONE, ERROR } = gameLoadingStates\n\nconst GamesPage = () => {\n  const {\n    flashProps,\n    flashVisible,\n    setFlashVisible,\n    modalVisible,\n    modalAttributes\n  } = useAppContext()\n\n  const {\n    games,\n    gameLoadingState\n  } = useGamesContext()\n\n  useEffect(() => {\n    // Flash message props will be set when the `GamesContext` handles the error.\n    // Displaying the flash message in the context provider left the possibility\n    // that this flash message would be displayed on pages other than this one,\n    // where we don't want it.\n    if (gameLoadingState === ERROR) setFlashVisible(true)\n  }, [gameLoadingState, setFlashVisible])\n\n  return(\n    <DashboardLayout title='Your Games'>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <div className={styles.root}>\n        {flashVisible && Object.keys(flashProps).length && <FlashMessage {...flashProps} />}\n        {games && games.length === 0 && gameLoadingState === DONE && <p className={styles.noGames}>You have no games.</p>}\n        {gameLoadingState === DONE && <GameCreateForm disabled={gameLoadingState === LOADING || gameLoadingState === ERROR} />}\n        {games && games.length > 0 && gameLoadingState === DONE && <div className={styles.games}>\n          {games.map(({ id, name, description }) => <Game key={name} gameId={id} name={name} description={description} />)}\n        </div>}\n        {gameLoadingState === LOADING && <Loading type='bubbles' className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n      </div>\n    </DashboardLayout>\n  )\n}\n\nexport default GamesPage\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListCreateForm.module.css'\n\nconst ShoppingListCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n\n  const { performShoppingListCreate } = useShoppingListsContext()\n\n  const [inputValue, setInputValue] = useState('')\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const updateValue = e => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n  }\n\n  const createShoppingList = e => {\n    e.preventDefault()\n    setFlashVisible(false)\n    const title = e.target.elements.title.value\n\n    const showFlashAndClearInput = () => {\n      setInputValue('')\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: () => setInputValue(''),\n      onNotFound: showFlashAndClearInput,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: showFlashAndClearInput\n    }\n    performShoppingListCreate(title, callbacks)\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <form data-testid='shopping-list-create-form' onSubmit={createShoppingList}>\n        <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n          <input\n            className={styles.input}\n            type='text'\n            name='title'\n            placeholder='Title'\n            aria-label='Title'\n            value={inputValue}\n            onChange={updateValue}\n            pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n            title='Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n          />\n          <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit'>Create</button>\n        </fieldset>\n      </form>\n    </div>\n  )\n}\n\nShoppingListCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default ShoppingListCreateForm\n","/*\n *\n * This duplicates the logic in the back end's Titlecase lib module. This module\n * attempts to accurately title-case titles instead of just making every word\n * capitalised.\n *\n * There is a comment in the file where this module is defined on the backend\n * detailing the challenges of accurate title casing. Primarily, these challenges\n * arise from two factors: (1) inconsistency of style guides and (2) the fact that\n * most style guides consider part of speech in determining whether a word should\n * be capitalised. This can be problematic with words like \"like\", which  can be\n * a preposition, adjective, adverb, or conjunction, depending on usage. In general,\n * prepositions, conjunctions, and short (< 5-character) adverbs should be all\n * lower case.\n *\n * This code does not attempt to guess part of speech or do any other tricks to\n * determine which words should be capitalised. It capitalises the first and last\n * word of the string (standard in almost all style guides) and any words in the\n * middle, other than the designated LOWERCASE_WORDS, which are only capitalised\n * if they are the first or last word in the string.\n *\n */\n\nconst LOWERCASE_WORDS = [\n  'a',\n  'an',\n  'the',\n  'and',\n  'but',\n  'for',\n  'at',\n  'by',\n  'from',\n  'with',\n  'to',\n  'in',\n  'of',\n  'into',\n  'onto',\n  'on',\n  'without',\n  'within'\n]\n\nconst capitalize = word => {\n  const letter = word[0].toUpperCase()\n  return `${letter}${word.slice(1)}`\n}\n\nconst titlecase = text => {\n  const words = text.toLowerCase().split(' ')\n\n  return words.map((word, index) => (\n    LOWERCASE_WORDS.indexOf(word) > -1 && [1, words.length].indexOf(index) === -1 ? word : capitalize(word)\n  )).join(' ')\n}\n\nexport default titlecase\n","import { useState, useRef, useEffect } from 'react'\n\nconst useComponentVisible = () => {\n  const [isComponentVisible, setIsComponentVisible] = useState(false)\n  const componentRef = useRef(null)\n  const triggerRef = useRef(null)\n\n  const componentRefContains = element => componentRef.current && componentRef.current.contains(element)\n  const triggerRefContains = element => triggerRef.current && triggerRef.current.contains(element)\n\n  const handleHideDiv = e => {\n    if (e.key === 'Escape') {\n      setIsComponentVisible(false)\n    }\n  }\n\n  const handleClickOutside = e => {\n    if (!componentRefContains(e.target) && !triggerRefContains(e.target)) {\n      setIsComponentVisible(false)\n    } else if (triggerRefContains(e.target)) {\n      setIsComponentVisible(!isComponentVisible)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleHideDiv, true)\n    document.addEventListener('click', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('keydown', handleHideDiv, true)\n      document.removeEventListener('click', handleClickOutside, true)\n    }\n  })\n\n  return { componentRef, triggerRef, isComponentVisible, setIsComponentVisible }\n}\n\nexport default useComponentVisible\n","import { useState, useLayoutEffect } from 'react'\nimport useResizeObserver from '@react-hook/resize-observer'\n\nconst useSize = target => {\n  const [size, setSize] = useState()\n\n  useLayoutEffect(() => {\n    setSize(target.current.getBoundingClientRect())\n  }, [target])\n\n  useResizeObserver(target, (entry) => setSize(entry.contentRect))\n\n  return size\n}\n\nexport default useSize\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { useColorScheme } from '../../hooks/contexts'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport styles from './shoppingListEditForm.module.css'\n\nconst ShoppingListEditForm = ({ formRef, maxTotalWidth, className, title, onSubmit }) => {\n  const getInputTextWidth = (text) => {\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n\n    context.font = '21px Quattrocento Sans'\n\n    const max = (maxTextWidth || maxTotalWidth)\n    \n    // The 1.1 proved necessary to prevent text from scrolling out of the\n    // view prematurely in Safari\n    const textWidth = context.measureText(text).width * 1.1\n\n    return Math.min(textWidth, max)\n  }\n\n  const [inputValue, setInputValue] = useState(title)\n  const [maxTextWidth, setMaxTextWidth] = useState(null)\n  const [inputWidth, setInputWidth] = useState(`${getInputTextWidth(title)}px`)\n\n  const inputRef = useRef(null)\n  const buttonRef = useRef(null)\n\n  const { schemeColorDarkest, textColorPrimary, borderColor, schemeColorLightest } = useColorScheme()\n\n  const colorVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--text-color': textColorPrimary,\n    '--border-color': borderColor,\n    '--icon-hover-color': schemeColorLightest\n  }\n\n  const updateInputWidth = (e) => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n    setInputWidth(`${getInputTextWidth(newValue)}px`)\n  }\n\n  useEffect(() => {\n    inputRef.current.focus()\n  })\n\n  useEffect(() => {\n    if (!buttonRef.current) return setMaxTextWidth(maxTotalWidth)\n\n    setMaxTextWidth(maxTotalWidth - buttonRef.current.offsetWidth)\n  }, [maxTotalWidth])\n\n  return(\n    <form className={classnames(className, styles.root)} style={colorVars} ref={formRef} onSubmit={onSubmit}>\n      <input\n        className={styles.input}\n        onClick={e => e.stopPropagation()}\n        onChange={updateInputWidth}\n        type='text'\n        name='title'\n        aria-label='Title'\n        ref={inputRef}\n        style={{width: inputWidth}}\n        value={inputValue}\n        pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n        title='Title can only contain alphanumeric characters, spaces, hyphens, commas, and apostrophes'\n      />\n      <button className={styles.submit} ref={buttonRef} name='submit' type='submit'>\n        <FontAwesomeIcon className={styles.fa} icon={faCheckSquare} />\n      </button>\n    </form>\n  )\n}\n\nShoppingListEditForm.propTypes = {\n  formRef: PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  }),\n  maxTotalWidth: PropTypes.number,\n  className: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired\n}\n\nexport default ShoppingListEditForm\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'quantity',\n    tag: 'input',\n    label: 'Quantity',\n    type: 'number',\n    placeholder: 'Quantity',\n    inputMode: 'numeric',\n    min: 1,\n    required: true\n  },\n  {\n    name: 'notes',\n    tag: 'textarea',\n    label: 'Notes',\n    type: 'textarea',\n    placeholder: 'This item has no notes',\n    inputMode: 'text'\n  }\n]\n\nconst ShoppingListItemEditForm = ({ buttonColor, currentAttributes }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performShoppingListItemUpdate } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n\n  const fields = formFields.map(field => ({ defaultValue: currentAttributes[field.name], ...field }))\n\n  const updateItem = e => {\n    e.preventDefault()\n\n    const callback = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onSuccess: callback,\n      onNotFound: callback,\n      onUnprocessableEntity: callback,\n      onInternalServerError: callback,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const quantity = e.target.elements.quantity.value\n    const notes = e.target.elements.notes.value\n\n    performShoppingListItemUpdate(currentAttributes.id, { quantity, notes }, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='shopping-list-item'\n      buttonLabel='Update Item'\n      buttonColor={buttonColor}\n      onSubmit={updateItem}\n      fields={fields}\n    />\n  )\n}\n\nShoppingListItemEditForm.propTypes = {\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    description: PropTypes.string.isRequired,\n    quantity: PropTypes.number.isRequired,\n    notes: PropTypes.string\n  }).isRequired\n}\n\nexport default ShoppingListItemEditForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faAngleUp, faAngleDown, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport ShoppingListItemEditForm from '../shoppingListItemEditForm/shoppingListItemEditForm'\nimport SlideToggle from 'react-slide-toggle'\nimport styles from './shoppingListItem.module.css'\n\nconst ShoppingListItem = ({\n  itemId,\n  listTitle,\n  canEdit,\n  description,\n  quantity,\n  notes\n}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n\n  // This enables us to set the quantity to the new quantity during the time between when\n  // the user increments/decrements the quantity and the time the API responds.\n  const [currentQuantity, setCurrentQuantity] = useState(quantity)\n\n  const {\n    setFlashProps,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n\n  const {\n    schemeColorDarkest,\n    textColorPrimary,\n    hoverColorDark,\n    schemeColorDark,\n    hoverColorLight,\n    textColorSecondary,\n    borderColor,\n    schemeColorLightest,\n    textColorTertiary\n  } = useColorScheme()\n\n  const {\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy\n  } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const deleteRef = useRef(null)\n  const incRef = useRef(null)\n  const decRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n  const editRefContains = el => refContains(editRef, el)\n  const deleteRefContains = el => refContains(deleteRef, el)\n  const incRefContains = el => refContains(incRef, el)\n  const decRefContains = el => refContains(decRef, el)\n  const iconContains = el => editRefContains(el) || deleteRefContains(el) || incRefContains(el) || decRefContains(el)\n  \n  const toggleDetails = e => {\n    if (!iconContains(e.target)) {\n      setToggleEvent(Date.now)\n      setCollapsed(!collapsed)\n    }\n  }\n\n  const displayFlash = (type, message, header = null) => {\n    if (mountedRef.current) {\n      setFlashProps({ type, message, header })\n      setFlashVisible(true)\n    }\n  }\n\n  const styleVars = {\n    '--main-color': schemeColorDark,\n    '--title-text-color': textColorSecondary,\n    '--border-color': borderColor,\n    '--body-background-color': schemeColorLightest,\n    '--body-text-color': textColorTertiary,\n    '--hover-color': hoverColorLight\n  }\n\n  const incrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity + 1\n\n    if (mountedRef.current) setCurrentQuantity(newQuantity)\n\n    const callbacks = {\n      onNotFound: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      },\n      onInternalServerError: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      }\n    }\n\n    performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n  }\n\n  const decrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity - 1\n\n    if (newQuantity > 0) {\n      const callbacks = {\n        onNotFound: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        },\n        onInternalServerError: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        }\n      }\n\n      setCurrentQuantity(newQuantity)\n      performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n    } else if (newQuantity === 0) {\n      const confirmed = window.confirm(\"Item quantity must be greater than zero. Delete the item instead?\")\n\n      if (confirmed) {\n        performShoppingListItemDestroy(itemId, () => { mountedRef.current = false })\n      } else {\n        displayFlash('info', 'Your item was not deleted.')\n      }\n    }\n  }\n\n  const destroyItem = () => {\n    const confirmed = window.confirm(\"Destroy shopping list item? Your aggregate list will be updated to reflect the change. This action cannot be undone.\")\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: () => mountedRef.current = false,\n        onUnauthorized: () => mountedRef.current = false,\n        onNotFound: () => setFlashVisible(true),\n        onInternalServerError: () => setFlashVisible(true)\n      }\n\n      performShoppingListItemDestroy(itemId, callbacks)\n    } else {\n      displayFlash('info', 'Your item was not deleted.')\n    }\n  }\n\n  const showEditForm = () => {\n    if (mountedRef.current) {\n      setFlashVisible(false)\n\n      const Tag = withModal(ShoppingListItemEditForm)\n\n      setModalAttributes({\n        Tag,\n        props: {\n          title: description,\n          subtitle: `On list \"${listTitle}\"`,\n          buttonColor: {\n            schemeColorDarkest,\n            hoverColorDark,\n            borderColor,\n            textColorPrimary\n          },\n          currentAttributes: {\n            id: itemId,\n            quantity,\n            notes,\n            description\n          }\n        }\n      })\n\n      setModalVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (mountedRef.current) setCurrentQuantity(quantity)\n  }, [quantity])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={styleVars}>\n      <div className={styles.toggle} onClick={toggleDetails}>\n        <span className={classNames(styles.header, { [styles.headerEditable]: canEdit })}>\n          {canEdit &&\n            <span className={styles.editIcons} ref={iconsRef}>\n              <button className={styles.icon} ref={deleteRef} onClick={destroyItem} data-testid='destroy-item'>\n                <FontAwesomeIcon className={classNames(styles.fa, styles.destroyIcon)} icon={faTimes} />\n              </button>\n              <button className={styles.icon} ref={editRef} onClick={showEditForm} data-testid='edit-item'>\n                <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n              </button>\n            </span>}\n          <h4 className={styles.description}>{description}</h4>\n        </span>\n        <span className={styles.quantity}>\n          {canEdit && <button className={styles.icon} ref={incRef} onClick={incrementQuantity} data-testid='incrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleUp} />\n          </button>}\n          <div className={styles.quantityContent}>\n            {currentQuantity}\n          </div>\n          {canEdit && <button className={styles.icon} ref={decRef} onClick={decrementQuantity} data-testid='decrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n          </button>}\n        </span>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.notes}>{notes || 'No details available'}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItem.propTypes = {\n  itemId: PropTypes.number.isRequired,\n  listTitle: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  description: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  notes: PropTypes.string\n}\n\nexport default ShoppingListItem\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListItemCreateForm.module.css'\n\nconst ShoppingListItemCreateForm = ({ listId }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n  const { setFlashVisible } = useAppContext()\n  const { performShoppingListItemCreate } = useShoppingListsContext()\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    schemeColorLightest,\n    borderColor,\n    textColorSecondary,\n    textColorTertiary\n  } = useColorScheme()\n\n  const formRef = useRef(null)\n\n  const colorVars = {\n    '--base-color': schemeColorDark,\n    '--hover-color': hoverColorLight,\n    '--body-color': schemeColorLightest,\n    '--border-color': borderColor,\n    '--text-color-main': textColorSecondary,\n    '--text-color-secondary': textColorTertiary\n  }\n\n  const toggleForm = () => {\n    setToggleEvent(Date.now)\n    setCollapsed(!collapsed)\n  }\n\n  const createShoppingListItem = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const description = e.target.elements.description.value\n    const quantity = parseInt(e.target.elements.quantity.value)\n    const notes = e.target.elements.notes.value\n    const attrs = { description, quantity, notes }\n\n    const resetToggleAndDisplayFlash = () => {\n      formRef.current.reset()\n      toggleForm()\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: resetToggleAndDisplayFlash,\n      onNotFound: resetToggleAndDisplayFlash,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: resetToggleAndDisplayFlash\n    }\n\n    performShoppingListItemCreate(listId, attrs, callbacks)\n  }\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={colorVars}>\n      <div className={styles.triggerContainer}>\n        <button className={styles.triggerButton} onClick={toggleForm}>\n          Add item to list...\n        </button>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <form className={styles.form} ref={formRef} onSubmit={createShoppingListItem}>\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Description</label>\n                <input className={styles.input} type='text' name='description' placeholder='Description' required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Quantity</label>\n                <input className={styles.input} type='number' inputMode='numeric' min={1} name='quantity' defaultValue={1} required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Notes</label>\n                <input className={styles.input} type='text' name='notes' placeholder='Notes' />\n              </fieldset>\n\n              <button className={styles.submit} type='submit'>Add to List</button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItemCreateForm.propTypes = {\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingListItemCreateForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport SlideToggle from 'react-slide-toggle'\nimport titlecase from '../../utils/titlecase'\nimport useComponentVisible from '../../hooks/useComponentVisible'\nimport useSize from '../../hooks/useSize'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport ShoppingListEditForm from '../shoppingListEditForm/shoppingListEditForm'\nimport ShoppingListItem from '../shoppingListItem/shoppingListItem'\nimport styles from './shoppingList.module.css'\nimport ShoppingListItemCreateForm from '../shoppingListItemCreateForm/shoppingListItemCreateForm'\n\nconst isValid = str => (\n  // The title is valid if the entire string matches the regex. It can\n  // contain alphanumeric characters, spaces, and leading or trailing\n  // whitespace (which will be stripped before it is saved in the DB).\n  // Any other characters (including non-space whitespace characters\n  // that are not leading or trailing) will cause a validation error\n  // on the backend. The title of a regular list may also not be \"All\n  // Items\".\n  !!str && str.match(/^\\s*[a-z0-9 ]*\\s*$/i) && str.match(/^\\s*[a-z0-9 ]*\\s*$/i)[0] === str && str.toLowerCase() !== 'all items'\n)\n\nconst ShoppingList = ({ canEdit = true, listId, title}) => {\n  const DELETE_CONFIRMATION = `Are you sure you want to delete the list \"${title}\"? You will also lose any list items on the list. This action cannot be undone.`\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [currentTitle, setCurrentTitle] = useState(title)\n  const [maxEditFormWidth, setMaxEditFormWidth] = useState(null)\n  const [listItems, setListItems] = useState([])\n\n  const mountedRef = useRef(true)\n  const slideTriggerRef = useRef(null)\n  const deleteTriggerRef = useRef(null)\n  const iconsRef = useRef(null)\n\n  const size = useSize(slideTriggerRef)\n\n  const { componentRef, triggerRef, isComponentVisible, setIsComponentVisible } = useComponentVisible()\n\n  const { setFlashProps, setFlashVisible } = useAppContext()\n\n  const {\n    shoppingLists,\n    performShoppingListUpdate,\n    performShoppingListDestroy,\n  } = useShoppingListsContext()\n\n  const originalTitle = title // to switch back in case of API error on update\n\n  const slideTriggerRefContains = element => slideTriggerRef.current && (slideTriggerRef.current === element || slideTriggerRef.current.contains(element))\n  const triggerRefContains = element => triggerRef.current && (triggerRef.current === element || triggerRef.current.contains(element))\n  const deleteTriggerRefContains = element => deleteTriggerRef.current && (deleteTriggerRef.current === element || deleteTriggerRef.current.contains(element))\n  const componentRefContains = element => componentRef.current && (componentRef.current === element || componentRef.current.contains(element))\n  const shouldToggleListItems = element => (slideTriggerRefContains(element) && !triggerRefContains(element)) && !componentRefContains(element) && !deleteTriggerRefContains(element)\n\n  const toggleListItems = e => {\n    if (shouldToggleListItems(e.target)) {\n      setToggleEvent(Date.now)\n    }\n  }\n\n  const {\n    schemeColorDarkest,\n    borderColor,\n    textColorPrimary,\n    textColorSecondary,\n    hoverColorDark,\n    schemeColorDark,\n    schemeColorLightest\n  } = useColorScheme()\n\n  const styleVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--border-color': borderColor,\n    '--text-color-primary': textColorPrimary,\n    '--text-color-secondary': textColorSecondary,\n    '--hover-color': hoverColorDark,\n    '--scheme-color-lighter': schemeColorDark,\n    '--scheme-color-lightest': schemeColorLightest,\n    '--max-title-width': `${maxEditFormWidth - 32}px`\n  }\n\n  const submitAndHideForm = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const newTitle = e.nativeEvent.target.children[0].defaultValue\n\n    if (!newTitle || isValid(newTitle)) setCurrentTitle(titlecase(newTitle))\n\n    const resetTitleAndDisplayError = () => {\n      setCurrentTitle(originalTitle)\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onNotFound: resetTitleAndDisplayError,\n      onUnprocessableEntity: resetTitleAndDisplayError,\n      onInternalServerError: resetTitleAndDisplayError\n    }\n\n    performShoppingListUpdate(listId, newTitle, callbacks)\n    setIsComponentVisible(false)\n  }\n\n  const deleteList = e => {\n    const confirmed = window.confirm(DELETE_CONFIRMATION)\n\n    setFlashVisible(false)\n\n    if (confirmed) {\n      const onSuccess = () => {\n        setFlashVisible(true)\n        mountedRef.current = false\n      }\n\n      const onError = () => setFlashVisible(true)\n\n      performShoppingListDestroy(listId, { onSuccess, onNotFound: onError, onInternalServerError: onError })\n    } else if (mountedRef.current) {\n      setFlashProps({\n        type: 'info',\n        message: 'Your list was not deleted.'\n      })\n\n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (!shoppingLists || !mountedRef.current) return // it'll run again when they populate\n\n    const items = shoppingLists.find(obj => obj.id === listId).list_items\n\n    setListItems([...items])\n  }, [shoppingLists, listId])\n\n  useEffect(() => {\n    if (!size || !iconsRef.current || !mountedRef.current) return\n\n    setMaxEditFormWidth(size.width - iconsRef.current.offsetWidth - 16)\n  }, [size])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.titleContainer}>\n        <div className={styles.trigger} ref={slideTriggerRef} onClick={toggleListItems}>\n          {canEdit &&\n          <span className={styles.editIcons} ref={iconsRef}>\n            <div className={styles.icon} ref={deleteTriggerRef} onClick={deleteList} data-testid='delete-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n            </div>\n            <div className={styles.icon} ref={triggerRef} data-testid='edit-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n            </div>\n          </span>}\n          {canEdit && isComponentVisible ?\n            <ShoppingListEditForm\n              formRef={componentRef}\n              maxTotalWidth={maxEditFormWidth}\n              className={styles.form}\n              title={title}\n              onSubmit={submitAndHideForm}\n            /> :\n            <h3 className={styles.title}>{currentTitle}</h3>}\n        </div>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            {!canEdit && listItems.length === 0 && <div className={styles.emptyList}>You have no shopping list items.</div>}\n            {canEdit && <ShoppingListItemCreateForm listId={listId} />}\n            {listItems && listItems.length > 0 && listItems.map(({ id, description, quantity, notes }) => {\n              const itemKey = `${title.toLowerCase().replace(' ', '-')}-${id}`\n\n              return(\n                <ShoppingListItem\n                  key={itemKey}\n                  itemId={id}\n                  listTitle={title}\n                  canEdit={canEdit}\n                  description={description}\n                  quantity={quantity}\n                  notes={notes}\n                />\n              )\n            })}\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingList.propTypes = {\n  title: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool,\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingList\n","import React from 'react'\nimport colorSchemes, { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport { shoppingListLoadingStates } from '../../contexts/shoppingListsContext'\nimport Loading from '../loading/loading'\nimport ShoppingList from '../shoppingList/shoppingList'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './shoppingListsPageContent.module.css'\n\nconst { LOADING, DONE } = shoppingListLoadingStates\n\nconst ShoppingListsPageContent = () => {\n  const { setModalAttributes, setModalVisible } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n  const { shoppingLists, shoppingListLoadingState } = useShoppingListsContext()\n\n  /*\n   *\n   * Define click handler\n   *\n   */\n\n  const showGameForm = e => {\n    e.preventDefault()\n\n    setModalAttributes({\n      Tag: withModal(ModalGameForm),\n      props: {\n        title: 'Create Game',\n        type: 'create'\n      }\n    })\n\n    setModalVisible(true)\n  }\n\n  /*\n   *\n   * Define possible states that affect content\n   * \n   */\n\n  const listsLoadedAndNotEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length > 0\n  const listsLoadedAndEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length === 0\n\n  /*\n   *\n   * Return appropriate values for the state the component is in\n   * \n   */\n  if (gameLoadingState === DONE && !games.length) {\n    return(\n      <p className={styles.noLists}>\n        You need a game to use the shopping lists feature. <button className={styles.link} onClick={showGameForm}>Create a game</button> to get started.\n      </p>\n    )\n  } else if (listsLoadedAndNotEmpty) {\n    return(\n      <>\n        {shoppingLists.map(({ id, title, aggregate }, index) => {\n\n          // If there are more lists than colour schemes, cycle through the colour schemes\n          const colorSchemesIndex = index < colorSchemes.length ? index : index % colorSchemes.length\n          const colorScheme = colorSchemes[colorSchemesIndex]\n          const listKey = title.toLowerCase().replace(' ', '-')\n\n          return (\n            <ColorProvider key={listKey} colorScheme={colorScheme}>\n              <div className={styles.shoppingList}>\n                <ShoppingList\n                  canEdit={!aggregate}\n                  listId={id}\n                  title={title}\n                />\n              </div>\n            </ColorProvider>\n          )\n        })}\n      </>\n    )\n  } else if (listsLoadedAndEmpty) {\n    return <p className={styles.noLists}>This game has no shopping lists.</p>\n  } else if (shoppingListLoadingState === LOADING) {\n    return <Loading className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />\n  } else {\n    return null\n  }\n}\n\nexport default ShoppingListsPageContent\n","import React, { useEffect, useRef } from 'react'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport { shoppingListLoadingStates } from '../../contexts/shoppingListsContext'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport ShoppingListCreateForm from '../../components/shoppingListCreateForm/shoppingListCreateForm'\nimport ShoppingListsPageContent from '../../components/shoppingListsPageContent/shoppingListsPageContent'\nimport styles from './shoppingListsPage.module.css'\n\nconst { LOADING, ERROR } = shoppingListLoadingStates\n\nconst ShoppingListsPage = () => {\n  const { \n    flashProps, \n    flashVisible, \n    setFlashVisible,\n    modalVisible,\n    modalAttributes\n  } = useAppContext()\n\n  const { shoppingListLoadingState } = useShoppingListsContext()\n\n  const shouldDisableForm = shoppingListLoadingState === LOADING || shoppingListLoadingState === ERROR\n\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    if (mountedRef.current && shoppingListLoadingState === ERROR) setFlashVisible(true)\n  }, [shoppingListLoadingState, setFlashVisible])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <DashboardLayout title='Your Shopping Lists' includeGameSelect>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      {flashVisible && <div className={styles.flash}><FlashMessage {...flashProps} /></div>}\n      <div className={styles.createForm}><ShoppingListCreateForm disabled={shouldDisableForm} /></div>\n      <ShoppingListsPageContent /> {/* This component implements its own loading & error handling behaviour */}\n    </DashboardLayout>\n  )\n}\n\nexport default ShoppingListsPage\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './notFoundPage.module.css'\n\nconst NotFoundPage = () => {\n  const { token } = useAppContext()\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>SIM: Page Not Found</h1>\n        <Link className={styles.link} to={token ? paths.dashboard.main : paths.home}>Go Back</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Helmet } from 'react-helmet-async'\nimport { AppProvider } from '../contexts/appContext'\nimport { GamesProvider } from '../contexts/gamesContext'\nimport { ShoppingListsProvider } from '../contexts/shoppingListsContext'\nimport HomePage from '../pages/homePage/homePage'\nimport LoginPage from '../pages/loginPage/loginPage'\nimport DashboardPage from '../pages/dashboardPage/dashboardPage'\nimport GamesPage from '../pages/gamesPage/gamesPage'\nimport ShoppingListsPage from '../pages/shoppingListsPage/shoppingListsPage'\nimport NotFoundPage from '../pages/notFoundPage/notFoundPage'\nimport paths from './paths'\n\nconst siteTitle = 'Skyrim Inventory Management |'\n\nconst pages = [\n  {\n    pageId: 'home',\n    title: `${siteTitle} Home`,\n    description: 'Manage your inventory across multiple properties in Skyrim',\n    jsx: <HomePage />,\n    path: paths.home\n  },\n  {\n    pageId: 'login',\n    title: `${siteTitle} Login`,\n    description: 'Log into Skyrim Inventory Management using your Google account',\n    jsx: <LoginPage />,\n    path: paths.login\n  },\n  {\n    pageId: 'dashboard',\n    title: `${siteTitle} Dashboard`,\n    description: 'Skyrim Inventory Management User Dashboard',\n    jsx: <DashboardPage />,\n    path: paths.dashboard.main\n  },\n  {\n    pageId: 'games',\n    title: `${siteTitle} Your Games`,\n    description: 'Manage Skyrim Games',\n    jsx: <GamesProvider><GamesPage /></GamesProvider>,\n    path: paths.dashboard.games\n  },\n  {\n    pageId: 'shoppingLists',\n    title: `${siteTitle} Manage Shopping Lists`,\n    description: 'Manage Skyrim Shopping Lists',\n    jsx: <GamesProvider><ShoppingListsProvider><ShoppingListsPage /></ShoppingListsProvider></GamesProvider>,\n    path: paths.dashboard.shoppingLists\n  }\n]\n\nconst PageRoutes = () => (\n  <Switch>\n    {pages.map(\n      ({ pageId, title, description, jsx, path }) => {\n        return(\n          <Route exact path={path} key={pageId}>\n            <Helmet>\n              <html lang='en' />\n\n              <title>{title}</title>\n              <meta name='description' content={description} />\n            </Helmet>\n            <AppProvider>\n              {jsx}\n            </AppProvider>\n          </Route>\n        )\n      }\n    )}\n    <Route key='notFound'>\n      <Helmet>\n        <html lang='en' />\n\n        <title>Skyrim Inventory Management | Page Not Found</title>\n        <meta name='description' content='Skyrim Inventory Management could not find the page you were looking for' />\n      </Helmet>\n      <AppProvider>\n        <NotFoundPage />\n      </AppProvider>\n    </Route>\n  </Switch>\n)\n\nexport default PageRoutes\n","import React from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\nimport PageRoutes from './routing/pageRoutes'\n\nconst App = () => {\n  return(\n    <Router basename={process.env.PUBLIC_URL}>\n      <HelmetProvider>\n        <PageRoutes />\n      </HelmetProvider>\n    </Router>\n  )\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}