{"version":3,"sources":["components/shoppingListItem/shoppingListItem.module.css","components/shoppingListItemCreateForm/shoppingListItemCreateForm.module.css","components/dashboardHeader/dashboardHeader.module.css","components/shoppingList/shoppingList.module.css","components/gameCreateForm/gameCreateForm.module.css","components/game/game.module.css","components/gamesDropdown/gamesDropdown.module.css","layouts/dashboardLayout.module.css","components/shoppingListCreateForm/shoppingListCreateForm.module.css","components/flashMessage/flashMessage.module.css","components/modalForm/modalForm.module.css","components/shoppingListsPageContent/shoppingListsPageContent.module.css","pages/homePage/homePage.module.css","pages/loginPage/loginPage.module.css","components/modal/modal.module.css","pages/gamesPage/gamesPage.module.css","components/shoppingListEditForm/shoppingListEditForm.module.css","pages/notFoundPage/notFoundPage.module.css","components/logoutDropdown/logoutDropdown.module.css","components/navigationMosaic/navigationMosaic.module.css","pages/dashboardPage/dashboardPage.module.css","components/loadingError/loadingError.module.css","components/gamesDropdownOption/gamesDropdownOption.module.css","components/navigationCard/navigationCard.module.css","pages/shoppingListsPage/shoppingListsPage.module.css","utils/config.js","utils/customErrors.js","utils/simApi.js","utils/logOutWithGoogle.js","utils/isTestEnv.js","routing/paths.js","contexts/appContext.js","utils/loadingStates.js","contexts/colorContext.js","hooks/useQuery.js","contexts/shoppingListsContext.js","hooks/contexts.js","contexts/gamesContext.js","pages/homePage/homePage.js","pages/loginPage/loginPage.js","utils/colorSchemes.js","components/logoutDropdown/googleIcon.svg","components/logoutDropdown/logoutDropdown.js","components/dashboardHeader/anonymousAvatar.jpg","components/dashboardHeader/dashboardHeader.js","components/gamesDropdownOption/gamesDropdownOption.js","components/gamesDropdown/gamesDropdown.js","layouts/dashboardLayout.js","components/loading/loading.js","components/navigationCard/navigationCard.js","components/navigationMosaic/navigationMosaic.js","pages/dashboardPage/dashboardPage.js","components/flashMessage/flashMessage.js","components/modal/modal.js","hocs/withModal.js","components/modalForm/modalForm.js","components/modalGameForm/modalGameForm.js","components/game/game.js","components/gameCreateForm/gameCreateForm.js","components/loadingError/loadingError.js","pages/gamesPage/gamesPage.js","components/shoppingListCreateForm/shoppingListCreateForm.js","utils/titlecase.js","hooks/useComponentVisible.js","hooks/useSize.js","components/shoppingListEditForm/shoppingListEditForm.js","components/shoppingListItemEditForm/shoppingListItemEditForm.js","components/shoppingListItem/shoppingListItem.js","components/shoppingListItemCreateForm/shoppingListItemCreateForm.js","components/shoppingList/shoppingList.js","components/shoppingListsPageContent/shoppingListsPageContent.js","pages/shoppingListsPage/shoppingListsPage.js","pages/notFoundPage/notFoundPage.js","routing/pageRoutes.js","App.js","index.js"],"names":["module","exports","backendBaseUri","sessionCookieName","AuthorizationError","message","this","code","name","stack","Error","NotFoundError","MethodNotAllowedError","prototype","contentTypeHeader","authHeader","token","combinedHeaders","createShoppingList","gameId","attrs","uri","body","JSON","stringify","shopping_list","fetch","method","headers","then","resp","status","json","updateShoppingList","listId","id","destroyShoppingList","createShoppingListItem","shopping_list_item","defaultErrorCallback","err","console","error","logOutWithGoogle","success","window","gapi","auth2","GoogleAuth","getAuthInstance","disconnect","isTestEnv","process","STORYBOOK","isStorybook","paths","home","login","dashboard","main","games","shoppingLists","allPaths","pathsScopedToGames","DONE","AppContext","createContext","AppProvider","children","overrideValue","pathname","useLocation","useCookies","cookies","setCookie","removeCookie","useState","type","flashAttributes","setFlashAttributes","flashVisible","setFlashVisible","modalAttributes","setModalAttributes","modalVisible","setModalVisible","profileData","setProfileData","shouldRedirectTo","redirectPath","setRedirectPath","profileLoadState","setProfileLoadState","mountedRef","useRef","removeSessionCookie","useCallback","setShouldRedirectTo","path","current","onAuthenticatedPage","indexOf","shouldFetchProfileData","logOutAndRedirect","callback","value","setSessionCookie","useEffect","fetchUserProfile","errors","catch","Provider","to","LOADING","ERROR","ColorContext","ColorProvider","colorScheme","useQuery","URLSearchParams","search","ShoppingListsContext","ShoppingListsProvider","queryString","useAppContext","useGamesContext","activeGameId","useMemo","length","parseInt","get","setShoppingLists","shoppingListLoadingState","setShoppingListLoadingState","shoppingListsOverridden","addOrUpdateListItem","list","item","originalItem","list_items","find","listItem","description","toLowerCase","newListItems","originalItemPosition","splice","unshift","removeItemFromList","itemId","newList","index","fetchLists","fetchShoppingLists","performShoppingListUpdate","newTitle","callbacks","onSuccess","onNotFound","onUnprocessableEntity","onUnauthorized","onInternalServerError","title","newShoppingLists","map","header","performShoppingListCreate","Array","isArray","performShoppingListDestroy","filter","aggregate","performShoppingListItemCreate","aggregateListItem","regularListItem","newLists","aggregateList","regularList","regularListPosition","newAggregateList","newRegularList","performShoppingListItemUpdate","updateShoppingListItem","list_id","performShoppingListItemDestroy","destroyShoppingListItem","regularListToRemoveItemFrom","listFromListItemId","regularListIndex","deletedItem","useCustomContext","cxt","msg","context","useContext","useColorScheme","useShoppingListsContext","GamesContext","GamesProvider","setGames","gameLoadingState","setGameLoadingState","gamesOverridden","fetchUserGames","fetchGames","performGameCreate","game","createGame","newGames","performGameUpdate","updateGame","performGameDestroy","destroyGame","destroyedGame","gameIndex","HomePage","verifyLogin","authorize","data","className","styles","root","container","LoginPage","loginErrorMessage","setLoginErrorMessage","errorMessage","button","clientId","buttonText","tokenId","onFailure","redirectUri","YELLOW","schemeColorDarkest","schemeColorDark","schemeColorLight","schemeColorLightest","hoverColorDark","hoverColorLight","hoverColorLightest","textColorPrimary","textColorSecondary","textColorTertiary","borderColor","PINK","BLUE","GREEN","AQUA","colorSchemes","LogoutDropdown","logOutFunction","onClick","e","preventDefault","googleLogout","src","icon","alt","DashboardHeader","dropdownVisible","setDropdownVisible","bar","headerContainer","headerLinkLarge","bp","headerLinkSmall","profile","profileText","textTop","textBottom","email","avatar","image_url","anonymousAvatar","referrerPolicy","logoutDropdown","hidden","GamesDropdownOption","onKeyDown","ariaSelected","classNames","role","tabIndex","substring","GamesDropdown","history","useHistory","activeGame","setActiveGame","dropdownExpanded","setDropdownExpanded","inputValue","setInputValue","componentRef","expandDropdown","collapseDropdown","colorVars","selectGame","params","push","toString","isActiveGame","collapseDropdownAndResetValue","relatedTarget","contains","g","document","addEventListener","removeEventListener","ref","style","input","disabled","onChange","currentTarget","placeholder","onFocus","key","target","blur","focusables","getElementsByClassName","focus","trigger","fa","faAngleDown","dropdown","replace","DashboardLayout","includeGameSelect","titleContainer","hr","Loading","color","height","width","NavigationCard","href","styleVars","NavigationMosaic","cardArray","card","cards","DashboardPage","loading","colors","FlashMessage","setTimeout","messageList","Modal","subtitle","contentRef","contentRefContains","el","hide","getElementsByTagName","classList","add","remove","content","withModal","WrappedComponent","childProps","ModalForm","modelName","buttonLabel","onSubmit","fields","buttonColor","formRef","inputRef","colorRef","Math","floor","random","Tag","tag","label","inputProps","fieldset","htmlFor","submit","formFields","inputMode","pattern","ModalGameForm","currentAttributes","field","defaultValue","unmountAndDisplayFlash","elements","attr","location","Game","toggleEvent","setToggleEvent","iconsRef","editRef","destroyRef","Date","now","editIcons","confirm","faTimes","attributes","ModalComponent","props","faEdit","collapsed","setCollapsibleElement","collapsible","GameCreateForm","toggleForm","onSuccessOrFatalError","reset","slideToggleTrigger","onExpanded","form","fieldsetDisabled","buttonDisabled","LoadingError","text","GamesPage","noGames","ShoppingListCreateForm","showFlashAndClearInput","newValue","LOWERCASE_WORDS","titlecase","words","split","word","letter","toUpperCase","slice","capitalize","join","useComponentVisible","isComponentVisible","setIsComponentVisible","triggerRef","triggerRefContains","element","handleHideDiv","handleClickOutside","useSize","size","setSize","useLayoutEffect","getBoundingClientRect","useResizeObserver","entry","contentRect","ShoppingListEditForm","maxTotalWidth","getInputTextWidth","createElement","getContext","font","max","maxTextWidth","textWidth","measureText","min","setMaxTextWidth","inputWidth","setInputWidth","buttonRef","offsetWidth","classnames","stopPropagation","faCheckSquare","required","ShoppingListItemEditForm","quantity","notes","ShoppingListItem","listTitle","canEdit","setCollapsed","currentQuantity","setCurrentQuantity","deleteRef","incRef","decRef","refContains","iconContains","editRefContains","deleteRefContains","incRefContains","decRefContains","displayFlash","toggle","headerEditable","destroyIcon","oldQuantity","newQuantity","faAngleUp","quantityContent","ShoppingListItemCreateForm","resetToggleAndDisplayFlash","triggerContainer","triggerButton","ShoppingList","DELETE_CONFIRMATION","currentTitle","setCurrentTitle","maxEditFormWidth","setMaxEditFormWidth","listItems","setListItems","slideTriggerRef","deleteTriggerRef","originalTitle","shouldToggleListItems","slideTriggerRefContains","componentRefContains","deleteTriggerRefContains","items","obj","confirmed","onError","str","nativeEvent","match","resetTitleAndDisplayError","emptyList","itemKey","ShoppingListsPageContent","listsLoadedAndNotEmpty","listsLoadedAndEmpty","listKey","shoppingList","noLists","link","ShoppingListsPage","shouldDisableForm","createForm","NotFoundPage","siteTitle","pages","pageId","jsx","PageRoutes","exact","lang","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.880aad81.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItem_root__3NPoi\",\"collapsed\":\"shoppingListItem_collapsed__3iHS2\",\"toggle\":\"shoppingListItem_toggle__26aMd\",\"fa\":\"shoppingListItem_fa__2P4jA\",\"destroyIcon\":\"shoppingListItem_destroyIcon__2IBmH\",\"header\":\"shoppingListItem_header__1qqqT\",\"headerEditable\":\"shoppingListItem_headerEditable__2K0Ir\",\"description\":\"shoppingListItem_description__mnU6z\",\"editIcons\":\"shoppingListItem_editIcons__2RoL7\",\"quantity\":\"shoppingListItem_quantity__1ebyP\",\"quantityContent\":\"shoppingListItem_quantityContent__24Ts-\",\"icon\":\"shoppingListItem_icon__1pEqd\",\"collapsible\":\"shoppingListItem_collapsible__xa2wr\",\"notes\":\"shoppingListItem_notes__8g2fK\",\"button\":\"shoppingListItem_button__2k4QA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItemCreateForm_root__3B7YP\",\"collapsed\":\"shoppingListItemCreateForm_collapsed__3j8GF\",\"triggerContainer\":\"shoppingListItemCreateForm_triggerContainer__3IkQf\",\"triggerButton\":\"shoppingListItemCreateForm_triggerButton__2HK_d\",\"form\":\"shoppingListItemCreateForm_form__OXRXv\",\"fieldset\":\"shoppingListItemCreateForm_fieldset__1ovw9\",\"input\":\"shoppingListItemCreateForm_input__2Jire\",\"label\":\"shoppingListItemCreateForm_label__qlamy\",\"submit\":\"shoppingListItemCreateForm_submit__22fVU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardHeader_root__3lzne\",\"bar\":\"dashboardHeader_bar__1XEWl\",\"headerContainer\":\"dashboardHeader_headerContainer__1ZVqS\",\"header\":\"dashboardHeader_header__cB1mg\",\"headerLinkLarge\":\"dashboardHeader_headerLinkLarge__ED8Xx\",\"headerLinkSmall\":\"dashboardHeader_headerLinkSmall__3TlC1\",\"profile\":\"dashboardHeader_profile__A3WxH\",\"profileText\":\"dashboardHeader_profileText__1HPKf\",\"textTop\":\"dashboardHeader_textTop__2UNgU\",\"textBottom\":\"dashboardHeader_textBottom__1vLtl\",\"avatar\":\"dashboardHeader_avatar__2BhRu\",\"logoutDropdown\":\"dashboardHeader_logoutDropdown__37Dm5\",\"hidden\":\"dashboardHeader_hidden__Fkjhq\",\"bp\":\"dashboardHeader_bp__2hS3f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingList_root__2O9FT\",\"trigger\":\"shoppingList_trigger__WV4fR\",\"form\":\"shoppingList_form__1GdfA\",\"icon\":\"shoppingList_icon__3FP5H\",\"editIcons\":\"shoppingList_editIcons__gL8DA\",\"title\":\"shoppingList_title__3Gulc\",\"fa\":\"shoppingList_fa__hRtKq\",\"collapsible\":\"shoppingList_collapsible__2Zuq5\",\"emptyList\":\"shoppingList_emptyList__289Te\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gameCreateForm_root__1CiVs\",\"slideToggleTrigger\":\"gameCreateForm_slideToggleTrigger__47o12\",\"form\":\"gameCreateForm_form__2naYf\",\"fieldset\":\"gameCreateForm_fieldset__iwI0Y\",\"fieldsetDisabled\":\"gameCreateForm_fieldsetDisabled__255jN\",\"input\":\"gameCreateForm_input__3HuYv\",\"button\":\"gameCreateForm_button__1ePIs\",\"buttonDisabled\":\"gameCreateForm_buttonDisabled__1bleU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"game_root__Wpup7\",\"header\":\"game_header__2XbBS\",\"name\":\"game_name__GOPSp\",\"editIcons\":\"game_editIcons__1kxuu\",\"icon\":\"game_icon__WCvOa\",\"description\":\"game_description__KgWbf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdown_root__1EUlO\",\"header\":\"gamesDropdown_header__1Qiyc\",\"input\":\"gamesDropdown_input__z9Zui\",\"trigger\":\"gamesDropdown_trigger__3A35t\",\"hidden\":\"gamesDropdown_hidden__7-IH5\",\"dropdown\":\"gamesDropdown_dropdown__1kXtE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardLayout_root__2dfR_\",\"title\":\"dashboardLayout_title__1yGVn\",\"hr\":\"dashboardLayout_hr__29GgW\",\"container\":\"dashboardLayout_container__3AwFx\",\"headerContainer\":\"dashboardLayout_headerContainer__15_gZ\",\"titleContainer\":\"dashboardLayout_titleContainer__3J8Iz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListCreateForm_root__iSFdV\",\"button\":\"shoppingListCreateForm_button__2so-6\",\"fieldset\":\"shoppingListCreateForm_fieldset__1BLSp\",\"fieldsetDisabled\":\"shoppingListCreateForm_fieldsetDisabled__2V4n7\",\"input\":\"shoppingListCreateForm_input__3hAzq\",\"buttonDisabled\":\"shoppingListCreateForm_buttonDisabled__1USkv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"flashMessage_root__2sPxp\",\"hidden\":\"flashMessage_hidden__cxPrx\",\"content\":\"flashMessage_content__3iY0s\",\"header\":\"flashMessage_header__Vx_Jr\",\"messageList\":\"flashMessage_messageList__3V9SA\",\"msg\":\"flashMessage_msg__3Wquk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modalForm_root__1vkew\",\"fieldset\":\"modalForm_fieldset__3Y2iw\",\"input\":\"modalForm_input__2W8sl\",\"submit\":\"modalForm_submit__2K3FT\",\"label\":\"modalForm_label__1q219\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noLists\":\"shoppingListsPageContent_noLists__1yLrC\",\"link\":\"shoppingListsPageContent_link__1seef\",\"shoppingList\":\"shoppingListsPageContent_shoppingList__3X_TT\",\"loading\":\"shoppingListsPageContent_loading__1Rj5P\",\"error\":\"shoppingListsPageContent_error__3KtOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"homePage_root__15tty\",\"container\":\"homePage_container__3kQJo\",\"header\":\"homePage_header__3EV45\",\"login\":\"homePage_login__3ala0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loginPage_root__2Vf7z\",\"errorMessage\":\"loginPage_errorMessage__8uTVC\",\"container\":\"loginPage_container__2xdLK\",\"button\":\"loginPage_button__1pDsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__QSEqe\",\"content\":\"modal_content__1tQ-X\",\"title\":\"modal_title__1efUU\",\"subtitle\":\"modal_subtitle__4395I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesPage_root__oSBqG\",\"noGames\":\"gamesPage_noGames__1CUVF\",\"games\":\"gamesPage_games__2Q2dQ\",\"loading\":\"gamesPage_loading__1Q0HG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListEditForm_root__rs5qL\",\"input\":\"shoppingListEditForm_input__2FbCX\",\"submit\":\"shoppingListEditForm_submit__1FqNJ\",\"fa\":\"shoppingListEditForm_fa__Bb-dM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"notFoundPage_root__131Oh\",\"container\":\"notFoundPage_container__38cw2\",\"header\":\"notFoundPage_header__BhS9L\",\"link\":\"notFoundPage_link__2cDdM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"logoutDropdown_button__3hRUK\",\"body\":\"logoutDropdown_body__NiLPw\",\"googleLogout\":\"logoutDropdown_googleLogout__J9YSG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationMosaic_root__2CDUx\",\"card\":\"navigationMosaic_card__3hEln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardPage_root__oVxx1\",\"loading\":\"dashboardPage_loading__2vZsl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loadingError_root__1A6gy\",\"text\":\"loadingError_text__3auLV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdownOption_root__1Itlx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationCard_root__1-FD3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"shoppingListsPage_overlay__3Mlf4\",\"createForm\":\"shoppingListsPage_createForm__35weW\",\"flash\":\"shoppingListsPage_flash__vlZ2Z\"};","export const googleClientId = process.env.NODE_ENV === 'production' ?\n  '891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com' :\n  '891031345873-ir73kc1ru0ncv564iesac94kjaap5nf4.apps.googleusercontent.com'\n\nexport const backendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim-api.danascheider.com' : 'http://localhost:3000'\n\nexport const frontendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim.danascheider.com' : 'http://localhost:3001'\n\nexport const sessionCookieName = '_sim_google_session'\n","export function AuthorizationError(message = '401 Unauthorized') {\n  this.message = message\n  this.code = 401\n  this.name = 'AuthorizationError'\n  this.stack = (new Error()).stack\n}\n\nAuthorizationError.prototype = new Error()\n\nexport function NotFoundError(message = '404 Not Found') {\n  this.message = message\n  this.code = 404\n  this.name = 'NotFoundError'\n  this.stack = (new Error()).stack\n}\n\nNotFoundError.prototype = new Error()\n\nexport function MethodNotAllowedError(message = '405 Method Not Allowed') {\n  this.message = message\n  this.code = 405\n  this.name = 'MethodNotAllowedError'\n  this.stack = (new Error()).stack\n}\n\nMethodNotAllowedError.prototype = new Error()\n","/*\n *\n * This module is an abstraction layer for the SIM API that handles making requests\n * to the API. These functions handle three things: (1) formulating the requests based\n * on which function it is and the args being passed in (including assembling both\n * headers and request body) and (2) throwing an AuthorizationError if the request fails.\n * The AuthorizationError has name 'AuthorizationError', code 401, and either the\n * message passed to the constructor or, by default, '401 Unauthorized'.\n * \n * For more information on the SIM API, its endpoints, the requests it expects, or its\n * responses, please visit the backend API docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { backendBaseUri } from './config'\nimport {\n  AuthorizationError,\n  MethodNotAllowedError,\n  NotFoundError\n} from './customErrors'\n\nconst contentTypeHeader = { 'Content-Type': 'application/json' }\nconst authHeader = token => ({ 'Authorization': `Bearer ${token}`})\nconst combinedHeaders = token => ({ ...authHeader(token), ...contentTypeHeader })\n\n/*\n *\n * Google OAuth Token Verification Endpoint\n * \n */\n\nexport const authorize = token => {\n  const uri = `${backendBaseUri}/auth/verify_token`\n\n  return(\n    fetch(uri, {  headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n/*\n *\n * User Profile Endpoint\n * \n */\n\nexport const fetchUserProfile = token => {\n  const uri = `${backendBaseUri}/users/current`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n/*\n *\n * Game Endpoints (Scoped to Authenticated User)\n * \n */\n\n// GET /games\nexport const fetchGames = token => {\n  const uri = `${backendBaseUri}/games`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games\nexport const createGame = (token, attrs) => {\n  const uri = `${backendBaseUri}/games`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /games/:id\nexport const updateGame = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'PATCH',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// DELETE /games/:id\nexport const destroyGame = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n\n  return fetch(uri, {\n    method: 'DELETE',\n    headers: authHeader(token)\n  })\n  .then(resp => {\n    // I deviated from the usual pattern of throwing a NotFoundError here\n    // on 404 since the behaviour for 404s is the same as the behaviour for\n    // successful deletion of the game, and making it throw an error here\n    // would just mean duplicating all thatlogic in the handlers in the\n    // GamesProvider.\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp\n  })\n}\n\n/*\n *\n * Shopping List Endpoints (Scoped to Game)\n *\n */\n\n// GET /games/:id/shopping_lists\nexport const fetchShoppingLists = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games/:game_id/shopping_lists\nexport const createShoppingList = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n  const body = JSON.stringify({ shopping_list: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /shopping_lists/:id\nexport const updateShoppingList = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  const body = JSON.stringify({\n    id: listId,\n    shopping_list: attrs\n  })\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: body\n    })\n    .then(resp => {\n      // It might return a 422 error too, but in that case we'll need the response\n      // JSON to handle the error\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_lists/:id\nexport const destroyShoppingList = (token, listId) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token),\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      if (resp.status === 405) throw new MethodNotAllowedError('Aggregate lists are managed automatically and cannot be deleted manually.')\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n/*\n *\n * Shopping List Item Endpoints\n *\n */\n\n// POST /shopping_lists/:shopping_list_id/shopping_list_items\nexport const createShoppingListItem = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}/shopping_list_items`\n\n  return(\n    fetch(uri, {\n      method: 'POST',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.\")\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// PATCH /shopping_list_items/:id\nexport const updateShoppingListItem = (token, itemId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to update a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError('Items on aggregate shopping lists cannot be updated through the API')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_list_items/:id\nexport const destroyShoppingListItem = (token, itemId) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token)\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to delete a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError()\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n","const defaultErrorCallback = err => {\n  console.error('Error signing out: ', err.message)\n}\n\nconst logOutWithGoogle = (success = () => {}, error = defaultErrorCallback) => {\n  if (window.gapi && window.gapi.auth2) {\n    const GoogleAuth = window.gapi.auth2.getAuthInstance()\n\n    if (GoogleAuth !== null) {\n      GoogleAuth\n        .then(() => GoogleAuth.disconnect())\n        .then(success, error)\n    } else {\n      success() // Google thinks they aren't logged in anyway\n    }\n  }\n\n  success()\n}\n\nexport default logOutWithGoogle\n","export const isTestEnv = process.env.STORYBOOK || process.env.NODE_ENV === 'test'\n\nexport const isJest = process.env.NODE_ENV === 'test'\n\nexport const isStorybook = !!process.env.STORYBOOK\n","const paths = {\n  home: '/',\n  login: '/login',\n  dashboard: {\n    main: '/dashboard',\n    games: '/dashboard/games',\n    shoppingLists: '/dashboard/shopping_lists'\n  }\n}\n\nexport const allPaths = [\n  paths.home,\n  paths.login,\n  paths.dashboard.main,\n  paths.dashboard.games,\n  paths.dashboard.shoppingLists\n]\n\nexport const pathsScopedToGames = [\n  paths.dashboard.shoppingLists\n]\n\nexport default paths\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { createContext, useEffect, useState, useRef, useCallback } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { Redirect, useLocation } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { sessionCookieName } from '../utils/config'\nimport { fetchUserProfile } from '../utils/simApi'\nimport logOutWithGoogle from '../utils/logOutWithGoogle'\nimport { isTestEnv } from '../utils/isTestEnv'\nimport paths, { allPaths } from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\n\nconst AppContext = createContext()\n\n// overrideValue allows us to set the context value in Storybook.\n// I hate having the testing apparatus baked into the app code but\n// none of the solutions I found worked and I don't understand\n// Storybook decorators and whatnot enough to figure out how to\n// set the value for the context in the story,\nconst AppProvider = ({ children, overrideValue = {} }) => {\n  const { pathname } = useLocation()\n  const [cookies, setCookie, removeCookie] = useCookies([sessionCookieName])\n\n  const [flashAttributes, setFlashAttributes] = useState({ type: 'info', message: '' })\n  const [flashVisible, setFlashVisible] = useState(false)\n\n  const [modalAttributes, setModalAttributes] = useState({})\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const [profileData, setProfileData] = useState(overrideValue.profileData)\n  const [redirectPath, setRedirectPath] = useState(overrideValue.shouldRedirectTo)\n  const [profileLoadState, setProfileLoadState] = useState(overrideValue.profileLoadState || LOADING)\n\n  const mountedRef = useRef(true)\n\n  const removeSessionCookie = useCallback(() => removeCookie(sessionCookieName), [removeCookie])\n  const setSessionCookie = token => setCookie(sessionCookieName, token)\n\n  const setShouldRedirectTo = useCallback(path => {\n    mountedRef.current && setRedirectPath(path)\n    mountedRef.current = false\n  }, [])\n\n  const onAuthenticatedPage = useCallback(() => {\n    return pathname !== paths.login && pathname !== paths.home && allPaths.indexOf(pathname) !== -1\n  }, [pathname])\n\n  const shouldFetchProfileData = useCallback(() => {\n    return !overrideValue.profileData && cookies[sessionCookieName] && onAuthenticatedPage()\n  }, [overrideValue.profileData, cookies, onAuthenticatedPage])\n\n  const logOutAndRedirect = useCallback((path = paths.login, callback = null) => {\n    logOutWithGoogle(() => {\n      removeSessionCookie()\n      callback && callback()\n      onAuthenticatedPage() && setShouldRedirectTo(path)\n    })\n  }, [removeSessionCookie, onAuthenticatedPage, setShouldRedirectTo])\n\n  const value = {\n    token: cookies[sessionCookieName],\n    profileData,\n    removeSessionCookie,\n    setSessionCookie,\n    profileLoadState,\n    setShouldRedirectTo,\n    logOutAndRedirect,\n    flashVisible,\n    flashAttributes,\n    setFlashVisible,\n    setFlashAttributes,\n    setModalVisible,\n    setModalAttributes,\n    modalVisible,\n    modalAttributes,\n    ...overrideValue // enables you to only change certain values\n  }\n\n  const fetchProfileData = () => {\n    if (shouldFetchProfileData()) {\n      fetchUserProfile(cookies[sessionCookieName])\n        .then(({ status, json }) => {\n          if (!mountedRef.current) return\n\n          if (status === 200) {\n            setProfileData(json)\n            if (!overrideValue.profileLoadState) setProfileLoadState(DONE)\n          } else {\n            throw new Error('Internal Server Error: ', json.errors[0])\n          }\n        })\n        .catch(error => {\n          if (process.env.NODE_ENV === 'development') console.error('Error returned while fetching profile data: ', error.message)\n\n          // I feel like this might not be the right behaviour if the error was a 500,\n          // but I also can't think of a case where an error like this would occur and\n          // not be a 401, given the user profile will be created during the authorization\n          // step if it doesn't exist already.\n          logOutAndRedirect()\n        })\n    } else if (isTestEnv && !overrideValue.profileLoadState) {\n      setProfileLoadState(DONE)\n    }\n  }\n\n  useEffect(() => {\n    if (onAuthenticatedPage() && !cookies[sessionCookieName] && mountedRef.current) logOutAndRedirect()\n  }, [onAuthenticatedPage, cookies, logOutAndRedirect])\n\n  useEffect(fetchProfileData, [\n                                onAuthenticatedPage,\n                                logOutAndRedirect,\n                                overrideValue.profileLoadState,\n                                shouldFetchProfileData,\n                                cookies\n                              ])\n\n  useEffect(() => (() => mountedRef.current = false), [])\n\n  return(\n    <AppContext.Provider value={value}>\n      {redirectPath ? <Redirect to={redirectPath} /> : children}\n    </AppContext.Provider>\n  )\n}\n\nAppProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    token: PropTypes.string,\n    profileData: PropTypes.shape({\n      id: PropTypes.number,\n      uid: PropTypes.string,\n      email: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      image_url: PropTypes.string\n    }),\n    setSessionCookie: PropTypes.func,\n    removeSessionCookie: PropTypes.func,\n    setProfileData: PropTypes.func,\n    flashVisible: PropTypes.bool,\n    flashAttributes: PropTypes.shape({\n      type: PropTypes.oneOf(['error', 'info', 'success']).isRequired,\n      message: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n      header: PropTypes.string\n    }),\n    setFlashVisible: PropTypes.func,\n    setFlashAttributes: PropTypes.func,\n    logOutAndRedirect: PropTypes.func,\n    setModalVisible: PropTypes.func,\n    setModalAttributes: PropTypes.func,\n    modalVisible: PropTypes.bool,\n    modalAttributes: PropTypes.shape({\n      Tag: PropTypes.elementType,\n      props: PropTypes.object\n    })\n  })\n}\n\nexport { AppContext, AppProvider }\n","export const LOADING = 'loading'\nexport const DONE = 'done'\nexport const ERROR = 'error'\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { createContext } from 'react'\nimport PropTypes from 'prop-types'\n\n\nconst ColorContext = createContext()\n\nconst ColorProvider = ({ colorScheme, children }) => {\n  return(\n    <ColorContext.Provider value={colorScheme}>\n      {children}\n    </ColorContext.Provider>\n  )\n}\n\nColorProvider.propTypes = {\n  colorScheme: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    schemeColorDark: PropTypes.string.isRequired,\n    schemeColorLight: PropTypes.string.isRequired,\n    schemeColorLightest: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    hoverColorLight: PropTypes.string.isRequired,\n    hoverColorLightest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    textColorSecondary: PropTypes.string,\n    textColorTertiary: PropTypes.string,\n    borderColor: PropTypes.string\n  }).isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport { ColorProvider, ColorContext }\n","import { useLocation } from 'react-router-dom'\n\nconst useQuery = () => new URLSearchParams(useLocation().search)\n\nexport default useQuery\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport {\n  createContext,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  createShoppingList,\n  fetchShoppingLists,\n  updateShoppingList,\n  destroyShoppingList,\n  createShoppingListItem,\n  updateShoppingListItem,\n  destroyShoppingListItem\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext, useGamesContext } from '../hooks/contexts'\nimport useQuery from '../hooks/useQuery'\nimport paths from '../routing/paths'\n\nconst ShoppingListsContext = createContext()\n\nconst ShoppingListsProvider = ({ children, overrideValue = {} }) => {\n  const queryString = useQuery()\n\n  const {\n    token,\n    logOutAndRedirect,\n    setFlashAttributes,\n    setFlashVisible\n  } = useAppContext()\n\n  const { games } = useGamesContext()\n\n  const activeGameId = useMemo(() => {\n    if (games && games.length) {\n      return parseInt(queryString.get('game_id') || games[0].id)\n    } else {\n      return null\n    }\n  }, [games, queryString])\n\n  const [shoppingLists, setShoppingLists] = useState(overrideValue.shoppingLists || [])\n  const [shoppingListLoadingState, setShoppingListLoadingState] = useState(LOADING)\n\n  const shoppingListsOverridden = useRef(false)\n  \n  if (overrideValue.shoppingLists) {\n    // Use this as the initial value only so that the shopping\n    // lists can be updated when we interact in Storybook or other\n    // tests\n    delete overrideValue.shoppingLists\n    shoppingListsOverridden.current = true\n  }\n\n  const mountedRef = useRef(true)\n\n  const addOrUpdateListItem = (list, item) => {\n    const originalItem = list.list_items.find(listItem => listItem.description.toLowerCase() === item.description.toLowerCase())\n    const newListItems = [...list.list_items]\n\n    if (originalItem) {\n      const originalItemPosition = list.list_items.indexOf(originalItem)\n      newListItems.splice(originalItemPosition, 1, item)\n    } else {\n      newListItems.unshift(item)\n    }\n\n    list.list_items = newListItems\n\n    return { ...list }\n  }\n\n  const listFromListItemId = itemId => shoppingLists.find(list => !!list.list_items.find(item => item.id === itemId))\n\n  const removeItemFromList = (list, itemId) => {\n    const newList = { ...list }\n    const newListItems = [...list.list_items]\n\n    const item = list.list_items.find(item => item.id === itemId)\n    const index = list.list_items.indexOf(item)\n\n    newListItems.splice(index, 1)\n    newList.list_items = newListItems\n    \n    return newList\n  }\n\n  const fetchLists = useCallback(() => {\n    if (token && !shoppingListsOverridden.current) {\n      fetchShoppingLists(token, activeGameId)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setShoppingLists(json)\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} while fetching shopping lists: ${json.errors}` : `Unknown error ${status} while fetching shopping lists`\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else if (err.code === 404 && mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"We couldn't find the game you're looking for.\"\n            })\n\n            setFlashVisible(true)\n\n            !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching shopping lists: ', err)\n\n            if (mountedRef.current) {\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n            }\n          }\n        })\n    } else {\n      mountedRef.current && !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n    }\n  }, [token, overrideValue.shoppingListLoadingState, setFlashAttributes, setFlashVisible, activeGameId, logOutAndRedirect])\n\n  const performShoppingListUpdate = (listId, newTitle, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingList(token, listId, { title: newTitle })\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const newShoppingLists = shoppingLists.map(list => { if (list.id === listId) { return json } else { return list } })\n          setShoppingLists(newShoppingLists)\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your changes from being saved:`\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} when updating shopping list: ${json.errors}` : `Unknown error ${status} when updating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (process.env.NODE_ENV === 'development') console.error(`Error updating shopping list ${listId}: `, err)\n\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! The shopping list you wanted to update could not be found. Try refreshing the page to fix this issue.\"\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n          \n          onNotFound && onNotFound()\n        } else {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n\n          onInternalServerError && onInternalServerError()\n        }\n      }) \n  }\n\n  const performShoppingListCreate = (title, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onUnprocessableEntity, onInternalServerError } = callbacks\n\n    createShoppingList(token, activeGameId, { title })\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (Array.isArray(json) && json.length === 2) {\n            // It is an array of shopping lists. It includes the shopping list that was\n            // created and an aggregate list that was created automatically. This case only\n            // arises if there were no existing shopping lists, so in this case, we want\n            // to set the shopping lists array to the lists returned.\n            setShoppingLists(json)\n          } else if (json && typeof json === 'object') {\n            // It is the single shopping list that was created. This will happen if there\n            // is already an existing aggregate list.\n            const newShoppingLists = [...shoppingLists]\n            newShoppingLists.splice(1, 0, json)\n            setShoppingLists(newShoppingLists)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your shopping list was created.',\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what\n          throw new Error(json.errors ? `Error ${status} while creating shopping list: ${json.errors}` : `Unknown error ${status} while creating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: 'The game you wanted to create a shopping list for could not be found. Try refreshing the page to fix this issue.'\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating shopping list: ', err)\n          \n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListDestroy = (listId, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onInternalServerError } = callbacks\n\n    destroyShoppingList(token, listId)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 204) {\n          // This means that the list was the game's last shopping list and both\n          // it and the aggregate list have been destroyed.\n          setShoppingLists([])\n          \n          setFlashAttributes({\n            type: 'success',\n            message: 'Since it was the last list for this game, the \"All Items\" list has been deleted as well.',\n            header: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 200) {\n          // This means that the aggregate list has been updated and returned,\n          // to adjust for any items that were deleted with the other list.\n          const newShoppingLists = shoppingLists.filter(list => list.id !== listId)\n                                                .map(list => (list.aggregate === true ? json : list))\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list: ${json.errors}` : `Unknown error ${status} when deleting shopping list`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error deleting shopping list: ', err.message)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemCreate = (listId, attrs, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createShoppingListItem(token, listId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200 || status === 201) {\n          const [aggregateListItem, regularListItem] = json\n\n          // Have to create an actual new object or the state change won't cause useEffect\n          // hooks to run.\n          const newLists = [...shoppingLists]\n          const aggregateList = shoppingLists[0]\n          const regularList = shoppingLists.find(list => list.id === listId)\n          const regularListPosition = shoppingLists.indexOf(regularList)\n\n          const newAggregateList = addOrUpdateListItem(aggregateList, aggregateListItem)\n          const newRegularList = addOrUpdateListItem(regularList, regularListItem)\n\n          newLists[0] = newAggregateList\n          newLists[regularListPosition] = newRegularList\n\n          setShoppingLists(newLists)\n\n          if (status === 201) {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your shopping list item has been created.'\n            })\n          } else {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your new shopping list item has been combined with another item with the same description.'\n            })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} when creating shopping list item: ${json.errors}` : `Unknown error ${status} when creating shopping list item`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error when creating shopping list item: ', err.message)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemUpdate = (itemId, attrs, callbacks) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingListItem(token, itemId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const [aggregateListItem, regularListItem] = json\n\n          let newShoppingLists = [...shoppingLists]\n\n          const regularList = shoppingLists.find(list => list.id === regularListItem.list_id)\n          const regularListPosition = shoppingLists.indexOf(regularList)\n\n          const newAggregateList = addOrUpdateListItem(shoppingLists[0], aggregateListItem)\n          const newRegularList = addOrUpdateListItem(regularList, regularListItem)\n\n          newShoppingLists[0] = newAggregateList\n          newShoppingLists[regularListPosition] = newRegularList\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashAttributes({ type: 'success', message: 'Success! Your shopping list item was updated.' })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being updated:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} updating item ${itemId}: ${json.errors}` : `Unknown error ${status} updating item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list item you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Unexpected error editing list item ${itemId}: `, err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemDestroy = (itemId, callbacks) => {\n    const { onSuccess, onNotFound, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyShoppingListItem(token, itemId)\n      .then(({ status, json }) => {\n        if (status === 200 || status === 204) {\n          const regularListToRemoveItemFrom = listFromListItemId(itemId)\n          const regularListIndex = shoppingLists.indexOf(regularListToRemoveItemFrom)\n          const newLists = [...shoppingLists]\n          let newAggregateList\n\n          if (status === 200) {\n            // If there is an updated aggregate list item, it will be returned. If\n            // the aggregate list item has been destroyed, the status will be 204.\n            newAggregateList = addOrUpdateListItem(shoppingLists[0], json)\n          } else {\n            const deletedItem = regularListToRemoveItemFrom.list_items.find(item => item.id === itemId)\n            const aggregateListItem = shoppingLists[0].list_items.find(item => item.description.toLowerCase() === deletedItem.description.toLowerCase())\n\n            newAggregateList = removeItemFromList(shoppingLists[0], aggregateListItem.id)\n          }\n\n          const newRegularList = removeItemFromList(regularListToRemoveItemFrom, itemId)\n\n          newLists[0] = newAggregateList\n          newLists.splice(regularListIndex, 1, newRegularList)\n\n          setShoppingLists(newLists)\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list item ${itemId}: ${json.errors}` : `Unknown error ${status} when deleting shopping list item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error', \n            message: \"Oops! We couldn't find the shopping list item you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error destroying shopping list item: ', err)\n\n          setFlashAttributes({\n            type: 'error', \n            message: \"Something unexpected happened while trying to delete your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const value = {\n    shoppingLists,\n    shoppingListLoadingState,\n    performShoppingListUpdate,\n    performShoppingListCreate,\n    performShoppingListDestroy,\n    performShoppingListItemCreate,\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    if (activeGameId && mountedRef.current) fetchLists()\n  }, [fetchLists, activeGameId])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ShoppingListsContext.Provider value={value}>\n      {children}\n    </ShoppingListsContext.Provider>\n  )\n}\n\nShoppingListsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    shoppingLists: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      user_id: PropTypes.number,\n      title: PropTypes.string.isRequired,\n      aggregate: PropTypes.bool.isRequired,\n      list_items: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number,\n        list_id: PropTypes.number,\n        description: PropTypes.string.isRequired,\n        quantity: PropTypes.number.isRequired,\n        notes: PropTypes.string\n      })).isRequired\n    })),\n    shoppingListLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performShoppingListUpdate: PropTypes.func,\n    performShoppingListCreate: PropTypes.func,\n    performShoppingListDestroy: PropTypes.func,\n    performShoppingListItemCreate: PropTypes.func,\n    performShoppingListItemUpdate: PropTypes.func,\n    performShoppingListItemDelete: PropTypes.func\n  })\n}\n\nexport { ShoppingListsContext, ShoppingListsProvider }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { useContext } from 'react'\nimport { ColorContext } from '../contexts/colorContext'\nimport { AppContext } from '../contexts/appContext'\nimport { GamesContext } from '../contexts/gamesContext'\nimport { ShoppingListsContext } from '../contexts/shoppingListsContext'\n\nconst useCustomContext = (cxt, msg) => {\n  const context = useContext(cxt)\n\n  if (!context) {\n    throw new Error(msg)\n  }\n\n  return context\n}\n\nexport const useColorScheme = () => (\n  useCustomContext(ColorContext, 'useColorScheme must be used within a ColorProvider')\n)\n\nexport const useAppContext = () => (\n  useCustomContext(AppContext, 'useAppContext must be used within a AppProvider')\n)\n\nexport const useShoppingListsContext = () => (\n  useCustomContext(ShoppingListsContext, 'useShoppingListsContext must be used within a ShoppingListProvider')\n)\n\nexport const useGamesContext = () => (\n  useCustomContext(GamesContext, 'useGamesContext must be used within a GamesProvider')\n)\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport { createContext, useState, useEffect, useRef, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  fetchGames,\n  createGame,\n  updateGame,\n  destroyGame\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext } from '../hooks/contexts'\nimport paths from '../routing/paths'\n\nconst GamesContext = createContext()\n\nconst GamesProvider = ({ children, overrideValue = {} }) => {\n  const { token, logOutAndRedirect, setFlashAttributes } = useAppContext()\n\n  const [games, setGames] = useState(overrideValue.games || [])\n  const [gameLoadingState, setGameLoadingState] = useState(overrideValue.gameLoadingState || LOADING)\n\n  const mountedRef = useRef(true)\n  const gamesOverridden = useRef(false)\n\n  if (overrideValue.games) {\n    // Use this as the initial value only so that the games can be\n    // updated when we interact in Storybook or other tests\n    delete overrideValue.games\n    gamesOverridden.current = true\n  }\n\n  const fetchUserGames = useCallback(() => {\n    if (token && !gamesOverridden.current) {\n      fetchGames(token)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setGames(json)\n              !overrideValue.gameLoadingState && setGameLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} when fetching games: ${json.errors}` : 'No game data returned from SIM'\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching games: ', err)\n\n            if (mountedRef.current) setGameLoadingState(ERROR)\n          }\n        })\n    }\n  }, [token, overrideValue.gameLoadingState, logOutAndRedirect])\n\n  const performGameCreate = useCallback((attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createGame(token, attrs)\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (mountedRef.current) {\n            const newGames = [...games]\n            newGames.unshift(json)\n            setGames(newGames)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your game has been created.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            header: `${json.errors.length} error(s) prevented your game from being created:`,\n            message: json.errors\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what.\n          throw new Error(json.errors ? `Error ${status} when creating game: ${json.errors}` : `Unknown error ${status} when creating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating game: ', err)\n\n          mountedRef.current && setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while creating your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashAttributes, logOutAndRedirect])\n\n  const performGameUpdate = useCallback((gameId, attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onNotFound, onInternalServerError, onUnauthorized } = callbacks\n\n    updateGame(token, gameId, attrs)\n      .then(({ status, json }) => {\n        if (status === 200) {\n          if (mountedRef.current) {\n            const newGames = games.map(game => parseInt(game.id) === parseInt(gameId) ? json : game)\n            setGames(newGames)\n            setFlashAttributes({ type: 'success', message: 'Success! Your game has been updated.' })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          if (mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: json.errors,\n              header: `${json.errors.length} error(s) prevented your game from being updated:`\n            })\n          }\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} while updating game: ${json.errors}` : `Error ${status} while updating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the game you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error updating game: ', err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashAttributes, logOutAndRedirect])\n\n  const performGameDestroy = useCallback((gameId, callbacks) => {\n    const { onSuccess, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyGame(token, gameId)\n      .then(resp => {\n        // If the game isn't found we should treat it as if it's been destroyed\n        // and just remove it successfully\n        if ((resp.status === 204 || resp.status === 404) && mountedRef.current) {\n          const destroyedGame = games.find(game => parseInt(game.id) === parseInt(gameId))\n          const gameIndex = games.indexOf(destroyedGame)\n\n          const newGames = [...games]\n          newGames.splice(gameIndex, 1)\n\n          setGames(newGames)\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your game has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          throw new Error(`Error ${resp.status} while destroying game ${gameId}`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error destroying game: ', err)\n\n          if (mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"Something unexpected happened while trying to delete your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n            })\n          }\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, logOutAndRedirect, setFlashAttributes])\n\n  const value = {\n    games,\n    gameLoadingState,\n    performGameCreate,\n    performGameUpdate,\n    performGameDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    mountedRef.current && fetchUserGames()\n  }, [fetchUserGames])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <GamesContext.Provider value={value}>\n      {children}\n    </GamesContext.Provider>\n  )\n}\n\nGamesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    games: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n      user_id: PropTypes.number,\n      name: PropTypes.string.isRequired,\n      description: PropTypes.string\n    })),\n    gameLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performGameCreate: PropTypes.func,\n    performGameUpdate: PropTypes.func,\n    performGameDestroy: PropTypes.func\n  })\n}\n\nexport { GamesContext, GamesProvider }\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport { authorize } from '../../utils/simApi'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport logOutWithGoogle from '../../utils/logOutWithGoogle'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './homePage.module.css'\n\nconst HomePage = () => {\n  const { token, setShouldRedirectTo, removeSessionCookie } = useAppContext()\n\n  const mountedRef = useRef(true)\n\n  const verifyLogin = useCallback(() => {\n    if (token && !isStorybook) {\n      authorize(token)\n        .then(resp => resp.status === 500 ? resp.json() : null)\n        .then(data => {\n          if (data) {\n            throw new Error('Internal Server Error: ', data.errors[0])\n          } else {\n            setShouldRedirectTo(paths.dashboard.main)\n            mountedRef.current = false\n          }\n        })\n        .catch(err => {\n          if (process.env.NODE_ENV === 'development') console.error(err.message)\n\n          logOutWithGoogle(() => removeSessionCookie())\n        })\n    }\n  }, [token, removeSessionCookie, setShouldRedirectTo])\n\n  useEffect(() => {\n    verifyLogin()\n    return () => mountedRef.current = false\n  }, [token, verifyLogin])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>Skyrim Inventory Management</h1>\n        <Link className={styles.login} to={paths.login}>Log in with Google</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React, { useEffect, useState, useRef } from 'react'\nimport GoogleLogin from 'react-google-login'\nimport {\n  googleClientId,\n  frontendBaseUri\n} from '../../utils/config'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './loginPage.module.css'\n\nconst LoginPage = () => {\n  const {\n    token,\n    setSessionCookie,\n    removeSessionCookie,\n    setShouldRedirectTo\n  } = useAppContext()\n\n  const [loginErrorMessage, setLoginErrorMessage] = useState(null)\n  const mountedRef = useRef(true)\n\n  const successCallback = (resp) => {\n    const { tokenId } = resp\n\n    if (tokenId) {\n      setSessionCookie(tokenId)\n      setShouldRedirectTo(paths.dashboard.main)\n      mountedRef.current = false\n    }\n  }\n\n  const failureCallback = (resp) => {\n    if (process.env.NODE_ENV === 'development') console.error('Login failure: ', resp)\n    token && removeSessionCookie()\n    setLoginErrorMessage('Something went wrong! Please try logging in again.')\n  }\n\n  useEffect(() => (\n    () => (mountedRef.current = false)\n  ))\n\n  return(\n    <div className={styles.root}>\n      {loginErrorMessage ?\n      <p className={styles.errorMessage}>{loginErrorMessage}</p> :\n      null}\n      <div className={styles.container}>\n        <GoogleLogin\n          className={styles.button}\n          clientId={googleClientId}\n          buttonText='Log In With Google'\n          onSuccess={successCallback}\n          onFailure={failureCallback}\n          redirectUri={`${frontendBaseUri}${paths.dashboard.main}`}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPage\n","export const YELLOW = {\n  schemeColorDarkest: '#ffbf00',\n  schemeColorDark: '#ffcb32',\n  schemeColorLight: '#ffd866',\n  schemeColorLightest: '#fff2cc',\n  hoverColorDark: '#e5ab00',\n  hoverColorLight: '#ffc519',\n  hoverColorLightest: '#ffebb2',\n  textColorPrimary: '#4c3900',\n  textColorSecondary: '#4c3900',\n  textColorTertiary: '#7f5700',\n  borderColor: '#cc9800',\n}\n\nexport const PINK = {\n  schemeColorDarkest: '#e83f6f',\n  schemeColorDark: '#ec658b',\n  schemeColorLight: '#f18ba8',\n  schemeColorLightest: '#fad8e2',\n  hoverColorDark: '#d03863',\n  hoverColorLight: '#ea527d',\n  hoverColorLightest: '#f5b2c5',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#451221',\n  borderColor: '#b93258',\n}\n\nexport const BLUE = {\n  schemeColorDarkest: '#2274a5',\n  schemeColorDark: '#4e8fb7',\n  schemeColorLight: '#7aabc9',\n  schemeColorLightest: '#d2e3ed',\n  hoverColorDark: '#1e6894',\n  hoverColorLight: '#3881ae',\n  hoverColorLightest: '#bcd5e4',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#0d2e42',\n  borderColor: '#1b5c84'\n}\n\nexport const GREEN = {\n  schemeColorDarkest: '#00a323',\n  schemeColorDark: '#32b54e',\n  schemeColorLight: '#66c77b',\n  schemeColorLightest: '#ccecd3',\n  hoverColorDark: '#00921f',\n  hoverColorLight: '#19ac38',\n  hoverColorLightest: '#b2e3bd',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#00410e',\n  borderColor: '#00821c'\n}\n\nexport const AQUA = {\n  schemeColorDarkest: '#20e2e9',\n  schemeColorDark: '#62eaef',\n  schemeColorLight: '#8ff0f4',\n  schemeColorLightest: '#d2f9fa',\n  hoverColorDark: '#11cbd1',\n  hoverColorLight: '#4ce7ed',\n  hoverColorLightest: '#bcf6f8',\n  textColorPrimary: '#094345',\n  textColorSecondary: '#094345',\n  textColorTertiary: '#094345',\n  borderColor: '#19b4ba'\n}\n\nconst colorSchemes = [\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n]\n\nexport default colorSchemes\n","export default __webpack_public_path__ + \"static/media/googleIcon.9432a66b.svg\";","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport icon from './googleIcon.svg'\nimport styles from './logoutDropdown.module.css'\n\nconst LogoutDropdown = ({className, logOutFunction}) => {\n  const mountedRef = useRef(true)\n\n  const logOutAndUnmount = e => {\n    e.preventDefault()\n\n    logOutFunction(() => { mountedRef.current = false })\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ))\n\n  return(\n    <div className={className}>\n      <button className={styles.button} onClick={logOutAndUnmount}>\n        <div className={styles.body}>\n          <div className={styles.googleLogout}>\n            <img src={icon} alt='Google logo' />\n            Log Out With Google\n          </div>\n        </div>\n      </button>\n    </div>\n  )\n}\n\nLogoutDropdown.propTypes = {\n  className: PropTypes.string,\n  logOutFunction: PropTypes.func.isRequired\n}\n\nexport default LogoutDropdown\n","export default __webpack_public_path__ + \"static/media/anonymousAvatar.36d1acc1.jpg\";","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport LogoutDropdown from '../logoutDropdown/logoutDropdown'\nimport anonymousAvatar from './anonymousAvatar.jpg'\nimport styles from './dashboardHeader.module.css'\n\nconst DashboardHeader = () => {\n  const {\n    profileData,\n    logOutAndRedirect\n  } = useAppContext()\n\n  const [dropdownVisible, setDropdownVisible] = useState(false)\n  const mountedRef = useRef(true)\n\n  const logOutFunction = useCallback((callback = null) => {\n    setDropdownVisible(false);\n\n    logOutAndRedirect(paths.home, () => {\n      callback && callback()\n      mountedRef.current = false\n    })\n  }, [logOutAndRedirect])\n\n  useEffect(() => {\n    return () => (mountedRef.current = false)\n  }, [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.bar}>\n        <span className={styles.headerContainer}>\n          <h1 className={styles.header}>\n            <Link className={styles.headerLinkLarge} to={paths.dashboard.main}>Skyrim Inventory<br className={styles.bp} /> Management</Link>\n            <Link className={styles.headerLinkSmall} to={paths.dashboard.main}>S. I. M.</Link>\n          </h1>\n        </span>\n        {profileData ?\n        <button className={styles.profile} onClick={() => setDropdownVisible(!dropdownVisible)}>\n          <div className={styles.profileText}>\n            <p className={styles.textTop}>{profileData.name}</p>\n            <p className={styles.textBottom}>{profileData.email}</p>\n          </div>\n          <img className={styles.avatar} src={profileData.image_url || anonymousAvatar} alt='User avatar' referrerPolicy='no-referrer' />\n        </button> :\n        null\n        }\n        <LogoutDropdown\n          className={dropdownVisible ? styles.logoutDropdown : styles.hidden}\n          logOutFunction={logOutFunction}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default DashboardHeader\n","/*\n *\n * This component is intended for use within the GamesDropdown.\n * The GamesDropdown mimics a native `select` element. It is\n * critical that this component's role and ARIA attributes not\n * be changed except to make it more accessible or fix bugs in\n * accessibility. If you need a different role or aria attributes,\n * pass the values in as props or create another component.\n *\n */\n\nimport React from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport styles from './gamesDropdownOption.module.css'\n\nconst GamesDropdownOption = ({\n  name,\n  className,\n  onClick,\n  onKeyDown,\n  ariaSelected\n}) => {\n  return(\n    <li\n      className={classNames(styles.root, className)}\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      role='option'\n      tabIndex={0}\n      aria-selected={ariaSelected}\n    >\n      {name.length > 24 ? `${name.substring(0, 23)}...` : name}\n    </li>\n  )\n}\n\nGamesDropdownOption.propTypes = {\n  name: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  ariaSelected: PropTypes.bool.isRequired\n}\n\nexport default GamesDropdownOption\n","/*\n * It was important to have a styled options list, so a native HTML select\n * dropdown wouldn't do. This component has been made to be as accessible as\n * possible, adhering to the ARIA specification for comboboxes. More information\n * on comboboxes and their expected behaviour can be found in the ARIA docs:\n * https://www.w3.org/TR/wai-aria-practices-1.1/examples/combobox/aria1.1pattern/listbox-combo.html\n *\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react'\nimport classNames from 'classnames'\nimport { useHistory } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport useQuery from '../../hooks/useQuery'\nimport GamesDropdownOption from '../gamesDropdownOption/gamesDropdownOption'\nimport styles from './gamesDropdown.module.css'\n\nconst GamesDropdown = () => {\n  const history = useHistory()\n  const queryString = useQuery()\n\n  const { setFlashVisible } = useAppContext()\n  const { games, gameLoadingState, performGameCreate } = useGamesContext()\n\n  const [activeGame, setActiveGame] = useState(null)\n  const [dropdownExpanded, setDropdownExpanded] = useState(false)\n  const [inputValue, setInputValue] = useState('')\n\n  const componentRef = useRef(null)\n\n  const expandDropdown = () => setDropdownExpanded(true)\n  const collapseDropdown = useCallback(() => setDropdownExpanded(false), [setDropdownExpanded])\n  const toggleDropdown = () => setDropdownExpanded(!dropdownExpanded)\n\n  const colorVars = {\n    '--button-background-color': BLUE.schemeColorDarkest,\n    '--button-hover-color': BLUE.hoverColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor\n  }\n\n  const selectGame = useCallback(game => {\n    setActiveGame(game)\n    setInputValue(game.name)\n    \n    const params = new URLSearchParams(`game_id=${game.id}`)\n    history.push({ search: params.toString() })\n\n    collapseDropdown()\n  }, [history, collapseDropdown])\n\n  const isActiveGame = id => {\n    if (activeGame && !games.length) return false\n\n    return activeGame ? activeGame.id === id : id === games[0].id\n  }\n\n  const updateValue = e => setInputValue(e.currentTarget.value)\n\n  useEffect(() => {\n    const gameId = parseInt(queryString.get('game_id'))\n\n    if (games.length && gameId) {\n      if (activeGame && activeGame.id === gameId) return\n      const game = gameId ? games.find(game => game.id === gameId) : games[0]\n\n      selectGame(game || games[0])\n    } else if (games.length && !activeGame) {\n      selectGame(games[0])\n    }\n  }, [selectGame, activeGame, games, queryString])\n\n  useEffect(() => {\n    const collapseDropdownAndResetValue = e => {\n      if (componentRef.current !== e.relatedTarget && !componentRef.current.contains(e.relatedTarget)) {\n        // Hide the dropdown\n        collapseDropdown()\n\n        // Find out if there is a game whose title exactly matches the\n        // text typed into the input (without regard to case).\n        const game = games.find(g => g.name.toLowerCase() === inputValue.toLowerCase())\n\n        if (game) {\n          // If there is a matching game, it should be selected when the\n          // component is no longer focussed.\n          setActiveGame(game)\n          setInputValue(game.name)\n\n          const params = new URLSearchParams(`game_id=${game.id}`)\n          history.push({ search: params.toString() })\n        } else {\n          // If there is no matching game, the input value should be reset\n          // to the name of the active game.\n          activeGame && setInputValue(activeGame.name)\n        }\n      }\n    }\n\n    document.addEventListener('focusout', collapseDropdownAndResetValue)\n\n    return () => {\n      document.removeEventListener('focusout', collapseDropdownAndResetValue)\n    }\n  }, [games, setActiveGame, activeGame, setInputValue, inputValue, history, collapseDropdown])\n\n  return(\n    <div ref={componentRef} className={styles.root} style={colorVars} data-testid='games-dropdown'>\n      <div\n        className={styles.header}\n        role='combobox'\n        aria-haspopup='listbox'\n        aria-owns='gamesListbox'\n        aria-controls='gamesListbox'\n        aria-expanded={dropdownExpanded}\n      >\n        <input\n          className={classNames(styles.input, 'focusable')}\n          type='text'\n          disabled={gameLoadingState !== 'done' /* if 'loading' or 'error' it should be disabled*/}\n          value={inputValue}\n          onChange={updateValue}\n          placeholder='No games available'\n          aria-autocomplete='list'\n          aria-multiline={false}\n          aria-controls='gamesListbox'\n          onFocus={expandDropdown}\n          onClick={expandDropdown}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              const game = games.find(g => g.name.toLowerCase() === e.target.value.toLowerCase())\n\n              if (game) {\n                selectGame(game)\n              } else {\n                const callbacks = {\n                  // Although `games` has just been set in the API response handler,\n                  // there is no guarantee that it will be updated yet by the time the\n                  // callback runs. So instead of `selectGame`, here we just clear the\n                  // query string and set the active game to `null`. The `useEffect`\n                  // hook will run when the `games` array is updated and will set the\n                  // query string and the active game to the newly created game.\n                  onSuccess: () => {\n                    history.push({ search: '' })\n                    setActiveGame(null)\n                    e.target.blur()\n                  },\n                  onUnprocessableEntity: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  },\n                  onInternalServerError: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  }\n                }\n\n                performGameCreate({ name: inputValue }, callbacks)\n              }\n            } else if (e.key === 'ArrowUp') {\n              e.preventDefault()\n              const focusables = document.getElementsByClassName('focusable')\n              focusables[focusables.length - 1].focus()\n            } else if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            } else if (e.key === 'Escape') {\n              collapseDropdown()\n            }\n          }}\n        />\n        <button\n          className={styles.trigger}\n          onClick={toggleDropdown}\n          onKeyDown={e => {\n            if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            }\n          }}\n          disabled={gameLoadingState !== 'done'}\n          data-testid='games-dropdown-trigger'\n        >\n          <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n        </button>\n      </div>\n      <ul\n        id='gamesListbox'\n        className={classNames(styles.dropdown, { [styles.hidden]: !dropdownExpanded || !games.length })}\n        role='listbox'\n      >\n        {games.map(({ id, name }, index) => {\n          return(\n            <GamesDropdownOption\n              className='focusable'\n              onClick={() => selectGame({ id, name })}\n              onKeyDown={e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  selectGame({ id, name })\n                } else if (e.key === 'ArrowUp') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  focusables[index - 1].focus()\n                } else if (e.key === 'ArrowDown') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  const nextIndex = index < focusables.length - 1 ? index + 1 : 0\n                  focusables[nextIndex].focus()\n                }\n              }}\n              key={`${name.toLowerCase().replace(' ', '_')}-${id}`}\n              ariaSelected={isActiveGame(id)}\n              name={name}\n            />\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default GamesDropdown\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardHeader from '../components/dashboardHeader/dashboardHeader'\nimport GamesDropdown from '../components/gamesDropdown/gamesDropdown'\nimport styles from './dashboardLayout.module.css'\n\nconst DashboardLayout = ({ title, includeGameSelect = false, children }) => {\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        {title ?\n        <div className={styles.headerContainer}>\n          <div className={styles.titleContainer}>\n            <h2 className={styles.title}>{title}</h2>\n            {includeGameSelect && <GamesDropdown />}\n          </div>\n          <hr className={styles.hr} />\n        </div> :\n        null}\n        {children}\n      </div>\n      <DashboardHeader />\n    </div>\n  )\n}\n\nDashboardLayout.propTypes = {\n  title: PropTypes.string,\n  includeGameSelect: PropTypes.bool,\n  children: PropTypes.node.isRequired\n}\n\nexport default DashboardLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactLoading from 'react-loading'\n\nconst possibleTypes = [\n  'blank',\n  'balls',\n  'bars',\n  'bubbles',\n  'cubes',\n  'cylon',\n  'spin',\n  'spinningBubbles',\n  'spokes'\n]\n\nconst Loading = ({ className, type = 'bubbles', color, height, width }) => (\n  <ReactLoading className={className} type={type} color={color} height={height} width={width} />\n)\n\nLoading.propTypes = {\n  className: PropTypes.string,\n  type: PropTypes.oneOf(possibleTypes),\n  color: PropTypes.string.isRequired,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n}\n\nexport default Loading\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { useColorScheme } from '../../hooks/contexts'\nimport styles from './navigationCard.module.css'\n\nconst NavigationCard = ({ href, children }) => {\n  const { schemeColorDarkest, hoverColorDark, textColorPrimary} = useColorScheme()\n\n  const styleVars = {\n    '--background-color': schemeColorDarkest,\n    '--hover-color': hoverColorDark,\n    '--text-color': textColorPrimary\n  }\n\n  return(\n    <Link className={styles.root} to={href} style={styleVars}>\n      {children}\n    </Link>\n  )\n}\n\nNavigationCard.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport default NavigationCard\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport NavigationCard from '../navigationCard/navigationCard'\nimport styles from './navigationMosaic.module.css'\n\nconst NavigationMosaic = ({ cardArray }) => (\n  <div className={styles.root}>\n    {cardArray.map(({ colorScheme, href, children, key }) => (\n      <div key={key} className={styles.card}>\n        <ColorProvider colorScheme={colorScheme}>\n          <NavigationCard \n            href={href}\n            children={children}\n          />\n        </ColorProvider>\n      </div>\n    ))}\n  </div>\n)\n\nNavigationMosaic.propTypes = {\n  cardArray: PropTypes.arrayOf(\n    PropTypes.shape({\n      href: PropTypes.string.isRequired,\n      children: PropTypes.node.isRequired,\n      key: PropTypes.string.isRequired,\n      colorScheme: PropTypes.shape({\n        schemeColorDarkest: PropTypes.string.isRequired,\n        schemeColorDark: PropTypes.string.isRequired,\n        schemeColorLight: PropTypes.string.isRequired,\n        schemeColorLightest: PropTypes.string.isRequired,\n        hoverColorDark: PropTypes.string.isRequired,\n        hoverColorLight: PropTypes.string.isRequired,\n        hoverColorLightest: PropTypes.string.isRequired,\n        textColorPrimary: PropTypes.string.isRequired,\n        textColorSecondary: PropTypes.string,\n        textColorTertiary: PropTypes.string,\n        borderColor: PropTypes.string\n      }).isRequired\n    })\n  ).isRequired\n}\n\nexport default NavigationMosaic\n","import React, { useRef, useEffect } from 'react'\nimport {\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n} from '../../utils/colorSchemes'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport Loading from '../../components/loading/loading'\nimport NavigationMosaic from '../../components/navigationMosaic/navigationMosaic'\nimport styles from './dashboardPage.module.css'\n\nconst cards = [\n  {\n    colorScheme: YELLOW,\n    href: paths.dashboard.games,\n    children: 'Your Games',\n    key: 'your-games'\n  },\n  {\n    colorScheme: PINK,\n    href: paths.dashboard.shoppingLists,\n    children: 'Your Shopping Lists',\n    key: 'your-shopping-lists'\n  },\n  {\n    colorScheme: BLUE,\n    href: '#',\n    children: 'Nav Link 3',\n    key: 'nav-link-3'\n  },\n  {\n    colorScheme: GREEN,\n    href: '#',\n    children: 'Nav Link 4',\n    key: 'nav-link-4'\n  },\n  {\n    colorScheme: AQUA,\n    href: '#',\n    children: 'Nav Link 5',\n    key: 'nav-link-5'\n  }\n]\n\nconst DashboardPage = () => {\n  const { token, profileLoadState, setShouldRedirectTo } = useAppContext()\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    if (!token && !isStorybook) {\n      setShouldRedirectTo(paths.login)\n      mountedRef.current = false\n    }\n\n    return () => mountedRef.current = false\n  }, [token, setShouldRedirectTo])\n  \n  return(\n    <DashboardLayout>\n      {profileLoadState === 'done' ? <div className={styles.root}>\n        <NavigationMosaic cardArray={cards} />\n      </div> :\n      <Loading className={styles.loading} type='bubbles' color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n    </DashboardLayout>\n  )\n}\n\nexport default DashboardPage\n","import React, { useEffect } from 'react'\nimport classNames from 'classnames'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './flashMessage.module.css'\n\nconst SUCCESS = 'success'\nconst INFO = 'info'\nconst ERROR = 'error'\nconst WARNING = 'warning'\n\nconst colors = {\n  [SUCCESS]: '#329932',\n  [INFO]: '#4e6d8e',\n  [ERROR]: '#cc0000',\n  [WARNING]: '#b0a723'\n}\n\nconst FlashMessage = () => {\n  const { flashVisible, setFlashVisible, flashAttributes } = useAppContext()\n\n  const { type, header, message } = flashAttributes\n\n  const colorVars = { '--text-color': colors[type] }\n\n  useEffect(() => {\n    if (flashVisible) {\n      setTimeout(() => {\n        setFlashVisible(false)\n      }, 4000)\n    }\n  }, [flashVisible, setFlashVisible])\n\n  return(\n    <div className={classNames(styles.root, { [styles.hidden]: !flashVisible })} style={colorVars}>\n      {header && <p className={styles.header}>{header}</p>}\n      {typeof message === 'string' ? message :\n      <ul className={styles.messageList}>\n        {message.map((msg, index) => <li key={`message-${index}`} className={styles.msg}>{msg}</li>)}\n      </ul>}\n    </div>\n  )\n}\n\nexport default FlashMessage\n","import React, { useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './modal.module.css'\n\nconst Modal = ({ children, title, subtitle }) => {\n  const { setModalVisible } = useAppContext()\n\n  const contentRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const contentRefContains = useCallback(el => (\n    contentRef.current && (contentRef.current === el || contentRef.current.contains(el))\n  ), [])\n\n  const hide = useCallback(e => {\n    if ((e.type === 'click' && !contentRefContains(e.target)) || (e.type === 'keydown' && e.key === 'Escape')) {\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n  }, [contentRefContains, setModalVisible])\n\n  useEffect(() => {\n    window.addEventListener('keydown', hide)\n\n    return () => window.removeEventListener('keydown', hide)\n  }, [hide])\n\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].classList.add('modal-open')\n\n    return () => {\n      document.getElementsByTagName('body')[0].classList.remove('modal-open')\n      mountedRef.current = false\n    }\n  }, [])\n\n  return(\n    <div role='dialog' className={styles.root} onClick={hide}>\n      <div ref={contentRef} className={styles.content}>\n        <h3 className={styles.title}>{title}</h3>\n        {subtitle && <p className={styles.subtitle}>{subtitle}</p>}\n        {children}\n      </div>\n    </div>\n  )\n}\n\nModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired,\n  subtitle: PropTypes.string\n}\n\nexport default Modal\n","import React from 'react'\nimport Modal from '../components/modal/modal'\n\nconst withModal = WrappedComponent => {\n  return ({ title, subtitle = null, ...childProps }) => (\n    <Modal title={title} subtitle={subtitle}>\n      <WrappedComponent {...childProps} />\n    </Modal>\n  )\n}\n\nexport default withModal\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport colorSchemes from '../../utils/colorSchemes'\nimport styles from './modalForm.module.css'\n\nconst ModalForm = ({\n  modelName,\n  buttonLabel,\n  onSubmit,\n  fields,\n  buttonColor = null,\n}) => {\n  const mountedRef = useRef(true)\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n\n  // If the button color isn't specified in the props, pick\n  // a random color\n  const colorRef = useRef(buttonColor || colorSchemes[Math.floor(Math.random() * colorSchemes.length)])\n\n  const colorVars = {\n    '--button-background-color': colorRef.current.schemeColorDarkest,\n    '--button-text-color': colorRef.current.textColorPrimary,\n    '--button-hover-color': colorRef.current.hoverColorDark,\n    '--button-border-color': colorRef.current.borderColor\n  }\n\n  useEffect(() => {\n    inputRef.current && inputRef.current.focus()\n\n    return () => mountedRef.current = false\n  }, [])\n\n  return(\n    <form\n      ref={formRef}\n      className={styles.root}\n      style={colorVars}\n      onSubmit={onSubmit}\n      data-testid={`${modelName}-form`}\n    >\n      {fields.map(({ tag: Tag, label, name, ...inputProps }, index) => {\n        if (index === 0) inputProps['ref'] = inputRef\n\n        return(\n          <fieldset key={`${modelName}-${name}`} className={styles.fieldset}>\n            <label className={styles.label} htmlFor={name}>{label}</label>\n            <Tag\n              className={styles.input}\n              name={name}\n              {...inputProps}\n            />\n          </fieldset>\n        )\n      })}\n      <button className={styles.submit} type='submit'>{buttonLabel}</button>\n    </form>\n  )\n}\n\nModalForm.propTypes = {\n  // Should be a lower-cased string without whitespace. Used to set\n  // the test ID of the form to something more specific.\n  modelName: PropTypes.string.isRequired,\n  // The text that should appear on the form's button\n  buttonLabel: PropTypes.string.isRequired,\n  // Submit handler for the form\n  onSubmit: PropTypes.func.isRequired,\n  // The color of the form's button, taken from /src/utils/colorSchemes.js.\n  // Those color schemes automatically include these keys.\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }),\n  // A description of the form fields\n  fields: PropTypes.arrayOf(PropTypes.shape({\n    // It is recommended that the name of the form field be the same as the\n    // name of the attribute it sets (all lower case)\n    name: PropTypes.string.isRequired,\n    // This form supports inputs and textareas. It's possible that in the\n    // future it could be modified to support other form controls as well.\n    tag: PropTypes.oneOf(['input', 'textarea']).isRequired,\n    // The text of the label. Generally the name, titlecased.\n    label: PropTypes.string.isRequired,\n    // The type of the form control.\n    type: PropTypes.oneOf(['text', 'number', 'textarea']).isRequired,\n    // The placeholder value is required in case a value is `null`\n    placeholder: PropTypes.string.isRequired,\n    // Optional inputMode determines what keypad mobile users see. More\n    // options could be added to this list but we didn't need them yet\n    // so I just put these ones.\n    inputMode: PropTypes.oneOf(['numeric', 'text']),\n    // The starting `value` of the field, generally the current value of\n    // the attribute, if there is one.\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  })).isRequired\n}\n\nexport default ModalForm\n","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport { pathsScopedToGames } from '../../routing/paths'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'name',\n    tag: 'input',\n    label: 'Name',\n    type: 'text',\n    placeholder: 'Name',\n    inputMode: 'text',\n    pattern: \"^\\\\s*[A-Za-z0-9 \\\\-',]*\\\\s*$\",\n    title: 'Name can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n  },\n  {\n    name: 'description',\n    tag: 'input',\n    label: 'Description',\n    type: 'text',\n    placeholder: 'Description',\n    inputMode: 'text'\n  }\n]\n\nconst ModalGameForm = ({ type, currentAttributes = {} }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performGameCreate, performGameUpdate } = useGamesContext()\n\n  const history = useHistory()\n\n  const mountedRef = useRef(true)\n\n  const onSubmit = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const unmountAndDisplayFlash = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onUnprocessableEntity: unmountAndDisplayFlash,\n      onInternalServerError: unmountAndDisplayFlash,\n      onNotFound: unmountAndDisplayFlash, // only valid for update but won't break anything\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    for (const attr in attrs) {\n      if (attrs[attr] === currentAttributes[attr]) delete attrs[attr]\n    }\n\n    if (type === 'create') {\n      const onSuccess = () => {\n        // If the user is on a page where there is a games dropdown,\n        // they should see a flash message when a game is created since\n        // they won't see the game added to a list.\n        if (pathsScopedToGames.indexOf(history.location.pathname) > -1) {\n          unmountAndDisplayFlash()\n        } else {\n          setModalVisible(false)\n          mountedRef.current = false\n        }\n      }\n\n      callbacks.onSuccess = onSuccess\n\n      performGameCreate(attrs, callbacks)\n    } else {\n      callbacks.onSuccess = unmountAndDisplayFlash\n\n      performGameUpdate(currentAttributes.id, attrs, callbacks)\n    }\n  }\n\n  const fields = formFields.map(field => (\n    currentAttributes[field.name] ? { defaultValue: currentAttributes[field.name], ...field } : field\n  ))\n  \n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='game'\n      buttonLabel={type === 'create' ? 'Create Game' : 'Update Game'}\n      onSubmit={onSubmit}\n      fields={fields}\n    />\n  )  \n}\n\nModalGameForm.propTypes = {\n  type: PropTypes.oneOf(['create', 'edit']).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    description: PropTypes.string\n  })\n}\n\nexport default ModalGameForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport SlideToggle from 'react-slide-toggle'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport withModal from '../../hocs/withModal'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './game.module.css'\n\nconst DEFAULT_DESCRIPTION = 'This game has no description.'\nconst DESTROY_CONFIRMATION = 'Are you sure you want to delete this game? This cannot be undone. You will lose all data associated with the game you delete.'\n\nconst Game = ({ gameId, name, description }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const {\n    setFlashAttributes,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n  const { performGameDestroy } = useGamesContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const destroyRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n\n  const toggleDescription = e => {\n    if (!e || !refContains(iconsRef, e.target)) setToggleEvent(Date.now)\n  }\n\n  const showEditForm = () => {\n    setFlashVisible(false)\n\n    const attributes = { id: gameId, name, description }\n\n    const ModalComponent = withModal(ModalGameForm)\n    setModalAttributes({\n      Tag: ModalComponent,\n      props: {\n        title: 'Edit Game',\n        type: 'edit',\n        currentAttributes: attributes\n      }\n    })\n    setModalVisible(true)\n  }\n\n  const destroyGame = e => {\n    setFlashVisible(false)\n\n    const confirmed = window.confirm(DESTROY_CONFIRMATION)\n\n    const displayFlashAndUnmount = () => {\n      setFlashVisible(true)\n      mountedRef.current = false\n    }\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: displayFlashAndUnmount,\n        onInternalServerError: () => mountedRef.current && setFlashVisible(true)\n      }\n\n      performGameDestroy(gameId, callbacks)\n    } else {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your game was not deleted.'\n      })\n      \n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.header} onClick={toggleDescription}>\n        <span ref={iconsRef} className={styles.editIcons}>\n          <button\n            ref={destroyRef}\n            className={styles.icon}\n            onClick={destroyGame}\n            data-testid={`game-destroy-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n          </button>\n          <button\n            ref={editRef}\n            className={styles.icon}\n            onClick={showEditForm}\n            data-testid={`game-edit-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n          </button>\n        </span>\n        <h3 className={styles.name}>{name}</h3>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.description}>{description || DEFAULT_DESCRIPTION}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGame.propTypes = {\n  gameId: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string\n}\n\nexport default Game\n","import React, { useEffect, useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport styles from './gameCreateForm.module.css'\n\nconst GameCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n  const { performGameCreate } = useGamesContext()\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const toggleForm = () => mountedRef.current && setToggleEvent(Date.now)\n\n  const createGame = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    const onSuccessOrFatalError = () => {\n      setFlashVisible(true)\n      formRef.current && formRef.current.reset()\n      toggleForm()\n    }\n\n    const callbacks = {\n      onSuccess: onSuccessOrFatalError,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: onSuccessOrFatalError,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    performGameCreate(attrs, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <h3 className={styles.slideToggleTrigger} onClick={toggleForm}>Create Game...</h3>\n      <SlideToggle toggleEvent={toggleEvent} onExpanded={() => inputRef.current.focus()} collapsed>\n        {({ setCollapsibleElement }) => (\n          /* Include this div so we can set the form ref to something else */\n          <div ref={setCollapsibleElement}>\n            {/* Unfortunately, setting data-testid seems the only way to test this since fireEvent.click on the button doesn't work */}\n            <form ref={formRef} className={styles.form} data-testid='game-create-form' onSubmit={createGame}>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  ref={inputRef}\n                  className={styles.input}\n                  type='text'\n                  name='name'\n                  placeholder='Name'\n                  aria-label='Name'\n                  pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n                  title=\"Name can contain only alphanumeric characters, spaces, commas, hyphens, and apostrophes\"\n                />\n              </fieldset>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  className={styles.input}\n                  type='text'\n                  name='description'\n                  placeholder='Description'\n                  aria-label='Description'\n                />\n              </fieldset>\n              <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit' disabled={disabled}>\n                Create\n              </button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGameCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default GameCreateForm\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './loadingError.module.css'\n\nconst LoadingError = ({ modelName }) => (\n  <div className={styles.root}>\n    <p className={styles.text}>\n      There was an error loading your {modelName}. It may have been on our end. We're sorry!\n    </p>\n  </div>\n)\n\nLoadingError.propTypes = {\n  modelName: PropTypes.oneOf(['games', 'shopping lists'])\n}\n\nexport default LoadingError\n","import React from 'react'\nimport { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport Game from '../../components/game/game'\nimport GameCreateForm from '../../components/gameCreateForm/gameCreateForm'\nimport Loading from '../../components/loading/loading'\nimport LoadingError from '../../components/loadingError/loadingError'\nimport styles from './gamesPage.module.css'\n\nconst GamesPage = () => {\n  const { modalVisible, modalAttributes } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n\n  return(\n    <DashboardLayout title='Your Games'>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <div className={styles.root}>\n        <FlashMessage />\n        {games && games.length === 0 && gameLoadingState === DONE && <p className={styles.noGames}>You have no games.</p>}\n        {gameLoadingState === DONE && <GameCreateForm disabled={gameLoadingState === LOADING || gameLoadingState === ERROR} />}\n        {games && games.length > 0 && gameLoadingState === DONE && <div className={styles.games}>\n          {games.map(({ id, name, description }) => <Game key={name} gameId={id} name={name} description={description} />)}\n        </div>}\n        {gameLoadingState === LOADING && <Loading type='bubbles' className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n        {gameLoadingState === ERROR && <LoadingError modelName='games' />}\n      </div>\n    </DashboardLayout>\n  )\n}\n\nexport default GamesPage\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListCreateForm.module.css'\n\nconst ShoppingListCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n\n  const { performShoppingListCreate } = useShoppingListsContext()\n\n  const [inputValue, setInputValue] = useState('')\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const updateValue = e => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n  }\n\n  const createShoppingList = e => {\n    e.preventDefault()\n    setFlashVisible(false)\n    const title = e.target.elements.title.value\n\n    const showFlashAndClearInput = () => {\n      setInputValue('')\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: showFlashAndClearInput,\n      onNotFound: showFlashAndClearInput,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: showFlashAndClearInput\n    }\n    performShoppingListCreate(title, callbacks)\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <form data-testid='shopping-list-create-form' onSubmit={createShoppingList}>\n        <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n          <input\n            className={styles.input}\n            type='text'\n            name='title'\n            placeholder='Title'\n            aria-label='Title'\n            value={inputValue}\n            onChange={updateValue}\n            pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n            title='Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n          />\n          <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit'>Create</button>\n        </fieldset>\n      </form>\n    </div>\n  )\n}\n\nShoppingListCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default ShoppingListCreateForm\n","/*\n *\n * This duplicates the logic in the back end's Titlecase lib module. This module\n * attempts to accurately title-case titles instead of just making every word\n * capitalised.\n *\n * There is a comment in the file where this module is defined on the backend\n * detailing the challenges of accurate title casing. Primarily, these challenges\n * arise from two factors: (1) inconsistency of style guides and (2) the fact that\n * most style guides consider part of speech in determining whether a word should\n * be capitalised. This can be problematic with words like \"like\", which  can be\n * a preposition, adjective, adverb, or conjunction, depending on usage. In general,\n * prepositions, conjunctions, and short (< 5-character) adverbs should be all\n * lower case.\n *\n * This code does not attempt to guess part of speech or do any other tricks to\n * determine which words should be capitalised. It capitalises the first and last\n * word of the string (standard in almost all style guides) and any words in the\n * middle, other than the designated LOWERCASE_WORDS, which are only capitalised\n * if they are the first or last word in the string.\n *\n */\n\nconst LOWERCASE_WORDS = [\n  'a',\n  'an',\n  'the',\n  'and',\n  'but',\n  'for',\n  'at',\n  'by',\n  'from',\n  'with',\n  'to',\n  'in',\n  'of',\n  'into',\n  'onto',\n  'on',\n  'without',\n  'within'\n]\n\nconst capitalize = word => {\n  const letter = word[0].toUpperCase()\n  return `${letter}${word.slice(1)}`\n}\n\nconst titlecase = text => {\n  const words = text.toLowerCase().split(' ')\n\n  return words.map((word, index) => (\n    LOWERCASE_WORDS.indexOf(word) > -1 && [1, words.length].indexOf(index) === -1 ? word : capitalize(word)\n  )).join(' ')\n}\n\nexport default titlecase\n","import { useState, useRef, useEffect } from 'react'\n\nconst useComponentVisible = () => {\n  const [isComponentVisible, setIsComponentVisible] = useState(false)\n  const componentRef = useRef(null)\n  const triggerRef = useRef(null)\n\n  const componentRefContains = element => componentRef.current && componentRef.current.contains(element)\n  const triggerRefContains = element => triggerRef.current && triggerRef.current.contains(element)\n\n  const handleHideDiv = e => {\n    if (e.key === 'Escape') {\n      setIsComponentVisible(false)\n    }\n  }\n\n  const handleClickOutside = e => {\n    if (!componentRefContains(e.target) && !triggerRefContains(e.target)) {\n      setIsComponentVisible(false)\n    } else if (triggerRefContains(e.target)) {\n      setIsComponentVisible(!isComponentVisible)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleHideDiv, true)\n    document.addEventListener('click', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('keydown', handleHideDiv, true)\n      document.removeEventListener('click', handleClickOutside, true)\n    }\n  })\n\n  return { componentRef, triggerRef, isComponentVisible, setIsComponentVisible }\n}\n\nexport default useComponentVisible\n","import { useState, useLayoutEffect } from 'react'\nimport useResizeObserver from '@react-hook/resize-observer'\n\nconst useSize = target => {\n  const [size, setSize] = useState()\n\n  useLayoutEffect(() => {\n    setSize(target.current.getBoundingClientRect())\n  }, [target])\n\n  useResizeObserver(target, (entry) => setSize(entry.contentRect))\n\n  return size\n}\n\nexport default useSize\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { useColorScheme } from '../../hooks/contexts'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport styles from './shoppingListEditForm.module.css'\n\nconst ShoppingListEditForm = ({ formRef, maxTotalWidth, className, title, onSubmit }) => {\n  const getInputTextWidth = (text) => {\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n\n    context.font = '21px Quattrocento Sans'\n\n    const max = (maxTextWidth || maxTotalWidth)\n    \n    // The 1.1 proved necessary to prevent text from scrolling out of the\n    // view prematurely in Safari\n    const textWidth = context.measureText(text).width * 1.1\n\n    return Math.min(textWidth, max)\n  }\n\n  const [inputValue, setInputValue] = useState(title)\n  const [maxTextWidth, setMaxTextWidth] = useState(null)\n  const [inputWidth, setInputWidth] = useState(`${getInputTextWidth(title)}px`)\n\n  const inputRef = useRef(null)\n  const buttonRef = useRef(null)\n\n  const { schemeColorDarkest, textColorPrimary, borderColor, schemeColorLightest } = useColorScheme()\n\n  const colorVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--text-color': textColorPrimary,\n    '--border-color': borderColor,\n    '--icon-hover-color': schemeColorLightest\n  }\n\n  const updateInputWidth = (e) => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n    setInputWidth(`${getInputTextWidth(newValue)}px`)\n  }\n\n  useEffect(() => {\n    inputRef.current.focus()\n  })\n\n  useEffect(() => {\n    if (!buttonRef.current) return setMaxTextWidth(maxTotalWidth)\n\n    setMaxTextWidth(maxTotalWidth - buttonRef.current.offsetWidth)\n  }, [maxTotalWidth])\n\n  return(\n    <form className={classnames(className, styles.root)} style={colorVars} ref={formRef} onSubmit={onSubmit}>\n      <input\n        className={styles.input}\n        onClick={e => e.stopPropagation()}\n        onChange={updateInputWidth}\n        type='text'\n        name='title'\n        aria-label='Title'\n        ref={inputRef}\n        style={{width: inputWidth}}\n        value={inputValue}\n        pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n        title='Title can only contain alphanumeric characters, spaces, hyphens, commas, and apostrophes'\n      />\n      <button className={styles.submit} ref={buttonRef} name='submit' type='submit'>\n        <FontAwesomeIcon className={styles.fa} icon={faCheckSquare} />\n      </button>\n    </form>\n  )\n}\n\nShoppingListEditForm.propTypes = {\n  formRef: PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  }),\n  maxTotalWidth: PropTypes.number,\n  className: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired\n}\n\nexport default ShoppingListEditForm\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'quantity',\n    tag: 'input',\n    label: 'Quantity',\n    type: 'number',\n    placeholder: 'Quantity',\n    inputMode: 'numeric',\n    min: 1,\n    required: true\n  },\n  {\n    name: 'notes',\n    tag: 'textarea',\n    label: 'Notes',\n    type: 'textarea',\n    placeholder: 'This item has no notes',\n    inputMode: 'text'\n  }\n]\n\nconst ShoppingListItemEditForm = ({ buttonColor, currentAttributes }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performShoppingListItemUpdate } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n\n  const fields = formFields.map(field => ({ defaultValue: currentAttributes[field.name], ...field }))\n\n  const updateItem = e => {\n    e.preventDefault()\n\n    const callback = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onSuccess: callback,\n      onNotFound: callback,\n      onUnprocessableEntity: callback,\n      onInternalServerError: callback,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const quantity = e.target.elements.quantity.value\n    const notes = e.target.elements.notes.value\n\n    performShoppingListItemUpdate(currentAttributes.id, { quantity, notes }, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='shopping-list-item'\n      buttonLabel='Update Item'\n      buttonColor={buttonColor}\n      onSubmit={updateItem}\n      fields={fields}\n    />\n  )\n}\n\nShoppingListItemEditForm.propTypes = {\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    description: PropTypes.string.isRequired,\n    quantity: PropTypes.number.isRequired,\n    notes: PropTypes.string\n  }).isRequired\n}\n\nexport default ShoppingListItemEditForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faAngleUp, faAngleDown, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport ShoppingListItemEditForm from '../shoppingListItemEditForm/shoppingListItemEditForm'\nimport SlideToggle from 'react-slide-toggle'\nimport styles from './shoppingListItem.module.css'\n\nconst ShoppingListItem = ({\n  itemId,\n  listTitle,\n  canEdit,\n  description,\n  quantity,\n  notes\n}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n\n  // This enables us to set the quantity to the new quantity during the time between when\n  // the user increments/decrements the quantity and the time the API responds.\n  const [currentQuantity, setCurrentQuantity] = useState(quantity)\n\n  const {\n    setFlashAttributes,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n\n  const {\n    schemeColorDarkest,\n    textColorPrimary,\n    hoverColorDark,\n    schemeColorDark,\n    hoverColorLight,\n    textColorSecondary,\n    borderColor,\n    schemeColorLightest,\n    textColorTertiary\n  } = useColorScheme()\n\n  const {\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy\n  } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const deleteRef = useRef(null)\n  const incRef = useRef(null)\n  const decRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n  const editRefContains = el => refContains(editRef, el)\n  const deleteRefContains = el => refContains(deleteRef, el)\n  const incRefContains = el => refContains(incRef, el)\n  const decRefContains = el => refContains(decRef, el)\n  const iconContains = el => editRefContains(el) || deleteRefContains(el) || incRefContains(el) || decRefContains(el)\n  \n  const toggleDetails = e => {\n    if (!iconContains(e.target)) {\n      setToggleEvent(Date.now)\n      setCollapsed(!collapsed)\n    }\n  }\n\n  const displayFlash = (type, message, header = null) => {\n    if (mountedRef.current) {\n      setFlashAttributes({ type, message, header })\n      setFlashVisible(true)\n    }\n  }\n\n  const styleVars = {\n    '--main-color': schemeColorDark,\n    '--title-text-color': textColorSecondary,\n    '--border-color': borderColor,\n    '--body-background-color': schemeColorLightest,\n    '--body-text-color': textColorTertiary,\n    '--hover-color': hoverColorLight\n  }\n\n  const incrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity + 1\n\n    if (mountedRef.current) setCurrentQuantity(newQuantity)\n\n    const callbacks = {\n      onNotFound: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      },\n      onInternalServerError: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      }\n    }\n\n    performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n  }\n\n  const decrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity - 1\n\n    if (newQuantity > 0) {\n      const callbacks = {\n        onNotFound: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        },\n        onInternalServerError: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        }\n      }\n\n      setCurrentQuantity(newQuantity)\n      performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n    } else if (newQuantity === 0) {\n      const confirmed = window.confirm(\"Item quantity must be greater than zero. Delete the item instead?\")\n\n      if (confirmed) {\n        performShoppingListItemDestroy(itemId, () => { mountedRef.current = false })\n      } else {\n        displayFlash('info', 'Your item was not deleted.')\n      }\n    }\n  }\n\n  const destroyItem = () => {\n    const confirmed = window.confirm(\"Destroy shopping list item? Your aggregate list will be updated to reflect the change. This action cannot be undone.\")\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: () => mountedRef.current = false,\n        onUnauthorized: () => mountedRef.current = false,\n        onNotFound: () => setFlashVisible(true),\n        onInternalServerError: () => setFlashVisible(true)\n      }\n\n      performShoppingListItemDestroy(itemId, callbacks)\n    } else {\n      displayFlash('info', 'Your item was not deleted.')\n    }\n  }\n\n  const showEditForm = () => {\n    if (mountedRef.current) {\n      setFlashVisible(false)\n\n      const Tag = withModal(ShoppingListItemEditForm)\n\n      setModalAttributes({\n        Tag,\n        props: {\n          title: description,\n          subtitle: `On list \"${listTitle}\"`,\n          buttonColor: {\n            schemeColorDarkest,\n            hoverColorDark,\n            borderColor,\n            textColorPrimary\n          },\n          currentAttributes: {\n            id: itemId,\n            quantity,\n            notes,\n            description\n          }\n        }\n      })\n\n      setModalVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (mountedRef.current) setCurrentQuantity(quantity)\n  }, [quantity])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={styleVars}>\n      <div className={styles.toggle} onClick={toggleDetails}>\n        <span className={classNames(styles.header, { [styles.headerEditable]: canEdit })}>\n          {canEdit &&\n            <span className={styles.editIcons} ref={iconsRef}>\n              <button className={styles.icon} ref={deleteRef} onClick={destroyItem} data-testid='destroy-item'>\n                <FontAwesomeIcon className={classNames(styles.fa, styles.destroyIcon)} icon={faTimes} />\n              </button>\n              <button className={styles.icon} ref={editRef} onClick={showEditForm} data-testid='edit-item'>\n                <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n              </button>\n            </span>}\n          <h4 className={styles.description}>{description}</h4>\n        </span>\n        <span className={styles.quantity}>\n          {canEdit && <button className={styles.icon} ref={incRef} onClick={incrementQuantity} data-testid='incrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleUp} />\n          </button>}\n          <div className={styles.quantityContent}>\n            {currentQuantity}\n          </div>\n          {canEdit && <button className={styles.icon} ref={decRef} onClick={decrementQuantity} data-testid='decrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n          </button>}\n        </span>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.notes}>{notes || 'No details available'}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItem.propTypes = {\n  itemId: PropTypes.number.isRequired,\n  listTitle: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  description: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  notes: PropTypes.string\n}\n\nexport default ShoppingListItem\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListItemCreateForm.module.css'\n\nconst ShoppingListItemCreateForm = ({ listId }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n  const { setFlashVisible } = useAppContext()\n  const { performShoppingListItemCreate } = useShoppingListsContext()\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    schemeColorLightest,\n    borderColor,\n    textColorSecondary,\n    textColorTertiary\n  } = useColorScheme()\n\n  const formRef = useRef(null)\n\n  const colorVars = {\n    '--base-color': schemeColorDark,\n    '--hover-color': hoverColorLight,\n    '--body-color': schemeColorLightest,\n    '--border-color': borderColor,\n    '--text-color-main': textColorSecondary,\n    '--text-color-secondary': textColorTertiary\n  }\n\n  const toggleForm = () => {\n    setToggleEvent(Date.now)\n    setCollapsed(!collapsed)\n  }\n\n  const createShoppingListItem = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const description = e.target.elements.description.value\n    const quantity = parseInt(e.target.elements.quantity.value)\n    const notes = e.target.elements.notes.value\n    const attrs = { description, quantity, notes }\n\n    const resetToggleAndDisplayFlash = () => {\n      formRef.current.reset()\n      toggleForm()\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: resetToggleAndDisplayFlash,\n      onNotFound: resetToggleAndDisplayFlash,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: resetToggleAndDisplayFlash\n    }\n\n    performShoppingListItemCreate(listId, attrs, callbacks)\n  }\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={colorVars}>\n      <div className={styles.triggerContainer}>\n        <button className={styles.triggerButton} onClick={toggleForm}>\n          Add item to list...\n        </button>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <form className={styles.form} ref={formRef} onSubmit={createShoppingListItem}>\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Description</label>\n                <input className={styles.input} type='text' name='description' placeholder='Description' required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Quantity</label>\n                <input className={styles.input} type='number' inputMode='numeric' min={1} name='quantity' defaultValue={1} required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Notes</label>\n                <input className={styles.input} type='text' name='notes' placeholder='Notes' />\n              </fieldset>\n\n              <button className={styles.submit} type='submit'>Add to List</button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItemCreateForm.propTypes = {\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingListItemCreateForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport SlideToggle from 'react-slide-toggle'\nimport titlecase from '../../utils/titlecase'\nimport useComponentVisible from '../../hooks/useComponentVisible'\nimport useSize from '../../hooks/useSize'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport ShoppingListEditForm from '../shoppingListEditForm/shoppingListEditForm'\nimport ShoppingListItem from '../shoppingListItem/shoppingListItem'\nimport styles from './shoppingList.module.css'\nimport ShoppingListItemCreateForm from '../shoppingListItemCreateForm/shoppingListItemCreateForm'\n\nconst isValid = str => (\n  // The title is valid if the entire string matches the regex. It can\n  // contain alphanumeric characters, spaces, and leading or trailing\n  // whitespace (which will be stripped before it is saved in the DB).\n  // Any other characters (including non-space whitespace characters\n  // that are not leading or trailing) will cause a validation error\n  // on the backend. The title of a regular list may also not be \"All\n  // Items\".\n  !!str && str.match(/^\\s*[a-z0-9 ]*\\s*$/i) && str.match(/^\\s*[a-z0-9 ]*\\s*$/i)[0] === str && str.toLowerCase() !== 'all items'\n)\n\nconst ShoppingList = ({ canEdit = true, listId, title}) => {\n  const DELETE_CONFIRMATION = `Are you sure you want to delete the list \"${title}\"? You will also lose any list items on the list. This action cannot be undone.`\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [currentTitle, setCurrentTitle] = useState(title)\n  const [maxEditFormWidth, setMaxEditFormWidth] = useState(null)\n  const [listItems, setListItems] = useState([])\n\n  const mountedRef = useRef(true)\n  const slideTriggerRef = useRef(null)\n  const deleteTriggerRef = useRef(null)\n  const iconsRef = useRef(null)\n\n  const size = useSize(slideTriggerRef)\n\n  const { componentRef, triggerRef, isComponentVisible, setIsComponentVisible } = useComponentVisible()\n\n  const { setFlashAttributes, setFlashVisible } = useAppContext()\n\n  const {\n    shoppingLists,\n    performShoppingListUpdate,\n    performShoppingListDestroy,\n  } = useShoppingListsContext()\n\n  const originalTitle = title // to switch back in case of API error on update\n\n  const slideTriggerRefContains = element => slideTriggerRef.current && (slideTriggerRef.current === element || slideTriggerRef.current.contains(element))\n  const triggerRefContains = element => triggerRef.current && (triggerRef.current === element || triggerRef.current.contains(element))\n  const deleteTriggerRefContains = element => deleteTriggerRef.current && (deleteTriggerRef.current === element || deleteTriggerRef.current.contains(element))\n  const componentRefContains = element => componentRef.current && (componentRef.current === element || componentRef.current.contains(element))\n  const shouldToggleListItems = element => (slideTriggerRefContains(element) && !triggerRefContains(element)) && !componentRefContains(element) && !deleteTriggerRefContains(element)\n\n  const toggleListItems = e => {\n    if (shouldToggleListItems(e.target)) {\n      setToggleEvent(Date.now)\n    }\n  }\n\n  const {\n    schemeColorDarkest,\n    borderColor,\n    textColorPrimary,\n    textColorSecondary,\n    hoverColorDark,\n    schemeColorDark,\n    schemeColorLightest\n  } = useColorScheme()\n\n  const styleVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--border-color': borderColor,\n    '--text-color-primary': textColorPrimary,\n    '--text-color-secondary': textColorSecondary,\n    '--hover-color': hoverColorDark,\n    '--scheme-color-lighter': schemeColorDark,\n    '--scheme-color-lightest': schemeColorLightest,\n    '--max-title-width': `${maxEditFormWidth - 32}px`\n  }\n\n  const submitAndHideForm = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const newTitle = e.nativeEvent.target.children[0].defaultValue\n\n    if (!newTitle || isValid(newTitle)) setCurrentTitle(titlecase(newTitle))\n\n    const resetTitleAndDisplayError = () => {\n      setCurrentTitle(originalTitle)\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onNotFound: resetTitleAndDisplayError,\n      onUnprocessableEntity: resetTitleAndDisplayError,\n      onInternalServerError: resetTitleAndDisplayError\n    }\n\n    performShoppingListUpdate(listId, newTitle, callbacks)\n    setIsComponentVisible(false)\n  }\n\n  const deleteList = e => {\n    const confirmed = window.confirm(DELETE_CONFIRMATION)\n\n    setFlashVisible(false)\n\n    if (confirmed) {\n      const onSuccess = () => {\n        setFlashVisible(true)\n        mountedRef.current = false\n      }\n\n      const onError = () => setFlashVisible(true)\n\n      performShoppingListDestroy(listId, { onSuccess, onNotFound: onError, onInternalServerError: onError })\n    } else if (mountedRef.current) {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your list was not deleted.'\n      })\n\n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (!shoppingLists || !mountedRef.current) return // it'll run again when they populate\n\n    const items = shoppingLists.find(obj => obj.id === listId).list_items\n\n    setListItems([...items])\n  }, [shoppingLists, listId])\n\n  useEffect(() => {\n    if (!size || !iconsRef.current || !mountedRef.current) return\n\n    setMaxEditFormWidth(size.width - iconsRef.current.offsetWidth - 16)\n  }, [size])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.titleContainer}>\n        <div className={styles.trigger} ref={slideTriggerRef} onClick={toggleListItems}>\n          {canEdit &&\n          <span className={styles.editIcons} ref={iconsRef}>\n            <div className={styles.icon} ref={deleteTriggerRef} onClick={deleteList} data-testid='delete-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n            </div>\n            <div className={styles.icon} ref={triggerRef} data-testid='edit-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n            </div>\n          </span>}\n          {canEdit && isComponentVisible ?\n            <ShoppingListEditForm\n              formRef={componentRef}\n              maxTotalWidth={maxEditFormWidth}\n              className={styles.form}\n              title={title}\n              onSubmit={submitAndHideForm}\n            /> :\n            <h3 className={styles.title}>{currentTitle}</h3>}\n        </div>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            {!canEdit && listItems.length === 0 && <div className={styles.emptyList}>You have no shopping list items.</div>}\n            {canEdit && <ShoppingListItemCreateForm listId={listId} />}\n            {listItems && listItems.length > 0 && listItems.map(({ id, description, quantity, notes }) => {\n              const itemKey = `${title.toLowerCase().replace(' ', '-')}-${id}`\n\n              return(\n                <ShoppingListItem\n                  key={itemKey}\n                  itemId={id}\n                  listTitle={title}\n                  canEdit={canEdit}\n                  description={description}\n                  quantity={quantity}\n                  notes={notes}\n                />\n              )\n            })}\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingList.propTypes = {\n  title: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool,\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingList\n","import React from 'react'\nimport colorSchemes, { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport Loading from '../loading/loading'\nimport LoadingError from '../loadingError/loadingError'\nimport ShoppingList from '../shoppingList/shoppingList'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './shoppingListsPageContent.module.css'\n\nconst ShoppingListsPageContent = () => {\n  const { setModalAttributes, setModalVisible } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n  const { shoppingLists, shoppingListLoadingState } = useShoppingListsContext()\n\n  /*\n   *\n   * Define click handler\n   *\n   */\n\n  const showGameForm = e => {\n    e.preventDefault()\n\n    setModalAttributes({\n      Tag: withModal(ModalGameForm),\n      props: {\n        title: 'Create Game',\n        type: 'create'\n      }\n    })\n\n    setModalVisible(true)\n  }\n\n  /*\n   *\n   * Define possible states that affect content\n   * \n   */\n\n  const listsLoadedAndNotEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length > 0\n  const listsLoadedAndEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length === 0\n\n  /*\n   *\n   * Return appropriate values for the state the component is in\n   * \n   */\n  if (gameLoadingState === DONE && !games.length) {\n    return(\n      <p className={styles.noLists}>\n        You need a game to use the shopping lists feature. <button className={styles.link} onClick={showGameForm}>Create a game</button> to get started.\n      </p>\n    )\n  } else if (listsLoadedAndNotEmpty) {\n    return(\n      <>\n        {shoppingLists.map(({ id, title, aggregate }, index) => {\n\n          // If there are more lists than colour schemes, cycle through the colour schemes\n          const colorSchemesIndex = index < colorSchemes.length ? index : index % colorSchemes.length\n          const colorScheme = colorSchemes[colorSchemesIndex]\n          const listKey = title.toLowerCase().replace(' ', '-')\n\n          return (\n            <ColorProvider key={listKey} colorScheme={colorScheme}>\n              <div className={styles.shoppingList}>\n                <ShoppingList\n                  canEdit={!aggregate}\n                  listId={id}\n                  title={title}\n                />\n              </div>\n            </ColorProvider>\n          )\n        })}\n      </>\n    )\n  } else if (listsLoadedAndEmpty) {\n    return <p className={styles.noLists}>This game has no shopping lists.</p>\n  } else if (shoppingListLoadingState === LOADING) {\n    return <Loading className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />\n  } else if (gameLoadingState === ERROR || shoppingListLoadingState === ERROR) {\n    // It's possible both are errored but we'll worry about games first\n    const name = gameLoadingState === ERROR ? 'games' : 'shopping lists'\n    return <LoadingError modelName={name} />\n  } else {\n    return null\n  }\n}\n\nexport default ShoppingListsPageContent\n","import React, { useEffect, useRef } from 'react'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport { LOADING, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport ShoppingListCreateForm from '../../components/shoppingListCreateForm/shoppingListCreateForm'\nimport ShoppingListsPageContent from '../../components/shoppingListsPageContent/shoppingListsPageContent'\nimport styles from './shoppingListsPage.module.css'\n\nconst ShoppingListsPage = () => {\n  const {  modalVisible, modalAttributes } = useAppContext()\n  const { shoppingListLoadingState } = useShoppingListsContext()\n\n  const shouldDisableForm = shoppingListLoadingState === LOADING || shoppingListLoadingState === ERROR\n\n  const mountedRef = useRef(true)\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <DashboardLayout title='Your Shopping Lists' includeGameSelect>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <FlashMessage />\n      <div className={styles.createForm}><ShoppingListCreateForm disabled={shouldDisableForm} /></div>\n      <ShoppingListsPageContent /> {/* This component implements its own loading & error handling behaviour */}\n    </DashboardLayout>\n  )\n}\n\nexport default ShoppingListsPage\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './notFoundPage.module.css'\n\nconst NotFoundPage = () => {\n  const { token } = useAppContext()\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>SIM: Page Not Found</h1>\n        <Link className={styles.link} to={token ? paths.dashboard.main : paths.home}>Go Back</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Helmet } from 'react-helmet-async'\nimport { AppProvider } from '../contexts/appContext'\nimport { GamesProvider } from '../contexts/gamesContext'\nimport { ShoppingListsProvider } from '../contexts/shoppingListsContext'\nimport HomePage from '../pages/homePage/homePage'\nimport LoginPage from '../pages/loginPage/loginPage'\nimport DashboardPage from '../pages/dashboardPage/dashboardPage'\nimport GamesPage from '../pages/gamesPage/gamesPage'\nimport ShoppingListsPage from '../pages/shoppingListsPage/shoppingListsPage'\nimport NotFoundPage from '../pages/notFoundPage/notFoundPage'\nimport paths from './paths'\n\nconst siteTitle = 'Skyrim Inventory Management |'\n\nconst pages = [\n  {\n    pageId: 'home',\n    title: `${siteTitle} Home`,\n    description: 'Manage your inventory across multiple properties in Skyrim',\n    jsx: <HomePage />,\n    path: paths.home\n  },\n  {\n    pageId: 'login',\n    title: `${siteTitle} Login`,\n    description: 'Log into Skyrim Inventory Management using your Google account',\n    jsx: <LoginPage />,\n    path: paths.login\n  },\n  {\n    pageId: 'dashboard',\n    title: `${siteTitle} Dashboard`,\n    description: 'Skyrim Inventory Management User Dashboard',\n    jsx: <DashboardPage />,\n    path: paths.dashboard.main\n  },\n  {\n    pageId: 'games',\n    title: `${siteTitle} Your Games`,\n    description: 'Manage Skyrim Games',\n    jsx: <GamesProvider><GamesPage /></GamesProvider>,\n    path: paths.dashboard.games\n  },\n  {\n    pageId: 'shoppingLists',\n    title: `${siteTitle} Manage Shopping Lists`,\n    description: 'Manage Skyrim Shopping Lists',\n    jsx: <GamesProvider><ShoppingListsProvider><ShoppingListsPage /></ShoppingListsProvider></GamesProvider>,\n    path: paths.dashboard.shoppingLists\n  }\n]\n\nconst PageRoutes = () => (\n  <Switch>\n    {pages.map(\n      ({ pageId, title, description, jsx, path }) => {\n        return(\n          <Route exact path={path} key={pageId}>\n            <Helmet>\n              <html lang='en' />\n\n              <title>{title}</title>\n              <meta name='description' content={description} />\n            </Helmet>\n            <AppProvider>\n              {jsx}\n            </AppProvider>\n          </Route>\n        )\n      }\n    )}\n    <Route key='notFound'>\n      <Helmet>\n        <html lang='en' />\n\n        <title>Skyrim Inventory Management | Page Not Found</title>\n        <meta name='description' content='Skyrim Inventory Management could not find the page you were looking for' />\n      </Helmet>\n      <AppProvider>\n        <NotFoundPage />\n      </AppProvider>\n    </Route>\n  </Switch>\n)\n\nexport default PageRoutes\n","import React from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\nimport PageRoutes from './routing/pageRoutes'\n\nconst App = () => {\n  return(\n    <Router basename={process.env.PUBLIC_URL}>\n      <HelmetProvider>\n        <PageRoutes />\n      </HelmetProvider>\n    </Router>\n  )\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}