{"version":3,"sources":["components/shoppingListItem/shoppingListItem.module.css","components/inventoryListItemCreateForm/inventoryListItemCreateForm.module.css","components/shoppingListItemCreateForm/shoppingListItemCreateForm.module.css","components/dashboardHeader/dashboardHeader.module.css","components/inventoryListItem/inventoryListItem.module.css","components/inventoryList/inventoryList.module.css","components/shoppingList/shoppingList.module.css","components/gameCreateForm/gameCreateForm.module.css","components/game/game.module.css","components/gamesDropdown/gamesDropdown.module.css","layouts/dashboardLayout.module.css","components/inventoryListCreateForm/inventoryListCreateForm.module.css","components/shoppingListCreateForm/shoppingListCreateForm.module.css","components/flashMessage/flashMessage.module.css","components/modalForm/modalForm.module.css","components/inventoryPageContent/inventoryPageContent.module.css","components/shoppingListsPageContent/shoppingListsPageContent.module.css","pages/homePage/homePage.module.css","pages/loginPage/loginPage.module.css","components/modal/modal.module.css","pages/gamesPage/gamesPage.module.css","components/listEditForm/listEditForm.module.css","pages/notFoundPage/notFoundPage.module.css","components/logoutDropdown/logoutDropdown.module.css","components/navigationMosaic/navigationMosaic.module.css","pages/dashboardPage/dashboardPage.module.css","components/loadingError/loadingError.module.css","components/gamesDropdownOption/gamesDropdownOption.module.css","components/navigationCard/navigationCard.module.css","pages/inventoryPage/inventoryPage.module.css","pages/shoppingListsPage/shoppingListsPage.module.css","utils/config.js","utils/customErrors.js","utils/simApi.js","utils/logOutWithGoogle.js","utils/isTestEnv.js","routing/paths.js","contexts/appContext.js","utils/loadingStates.js","contexts/colorContext.js","hooks/useQuery.js","contexts/shoppingListsContext.js","contexts/inventoryListsContext.js","hooks/contexts.js","contexts/gamesContext.js","pages/homePage/homePage.js","pages/loginPage/loginPage.js","utils/colorSchemes.js","components/logoutDropdown/googleIcon.svg","components/logoutDropdown/logoutDropdown.js","components/dashboardHeader/anonymousAvatar.jpg","components/dashboardHeader/dashboardHeader.js","components/gamesDropdownOption/gamesDropdownOption.js","components/gamesDropdown/gamesDropdown.js","layouts/dashboardLayout.js","components/loading/loading.js","components/navigationCard/navigationCard.js","components/navigationMosaic/navigationMosaic.js","pages/dashboardPage/dashboardPage.js","components/flashMessage/flashMessage.js","components/modal/modal.js","hocs/withModal.js","components/modalForm/modalForm.js","components/modalGameForm/modalGameForm.js","components/game/game.js","components/gameCreateForm/gameCreateForm.js","components/loadingError/loadingError.js","pages/gamesPage/gamesPage.js","components/inventoryListCreateForm/inventoryListCreateForm.js","utils/titlecase.js","hooks/useComponentVisible.js","hooks/useSize.js","components/listEditForm/listEditForm.js","components/inventoryListItem/inventoryListItem.js","components/inventoryListItemCreateForm/inventoryListItemCreateForm.js","components/inventoryList/inventoryList.js","components/inventoryPageContent/inventoryPageContent.js","pages/inventoryPage/inventoryPage.js","components/shoppingListCreateForm/shoppingListCreateForm.js","components/shoppingListItemEditForm/shoppingListItemEditForm.js","components/shoppingListItem/shoppingListItem.js","components/shoppingListItemCreateForm/shoppingListItemCreateForm.js","components/shoppingList/shoppingList.js","components/shoppingListsPageContent/shoppingListsPageContent.js","pages/shoppingListsPage/shoppingListsPage.js","pages/notFoundPage/notFoundPage.js","routing/pageRoutes.js","App.js","index.js"],"names":["module","exports","backendBaseUri","sessionCookieName","AuthorizationError","message","this","code","name","stack","Error","NotFoundError","MethodNotAllowedError","prototype","contentTypeHeader","authHeader","token","combinedHeaders","createShoppingList","gameId","attrs","uri","body","JSON","stringify","shopping_list","fetch","method","headers","then","resp","status","json","updateShoppingList","listId","id","destroyShoppingList","createShoppingListItem","shopping_list_item","updateInventoryList","inventory_list","defaultErrorCallback","err","console","error","logOutWithGoogle","success","window","gapi","auth2","GoogleAuth","getAuthInstance","disconnect","isTestEnv","process","STORYBOOK","isStorybook","paths","home","login","dashboard","main","games","shoppingLists","inventory","authenticatedPaths","pathsScopedToGames","DONE","AppContext","createContext","AppProvider","children","overrideValue","pathname","useLocation","useCookies","cookies","setCookie","removeCookie","useState","type","flashAttributes","setFlashAttributes","flashVisible","setFlashVisible","modalAttributes","setModalAttributes","modalVisible","setModalVisible","profileData","setProfileData","shouldRedirectTo","redirectPath","setRedirectPath","profileLoadState","setProfileLoadState","mountedRef","useRef","removeSessionCookie","useCallback","setShouldRedirectTo","path","current","onAuthenticatedPage","indexOf","shouldFetchProfileData","logOutAndRedirect","callback","value","setSessionCookie","useEffect","fetchUserProfile","errors","catch","Provider","to","LOADING","ERROR","ColorContext","ColorProvider","colorScheme","useQuery","URLSearchParams","search","ShoppingListsContext","ShoppingListsProvider","queryString","useAppContext","useGamesContext","activeGameId","useMemo","length","parseInt","get","setShoppingLists","shoppingListLoadingState","setShoppingListLoadingState","shoppingListsOverridden","addOrUpdateListItem","list","item","originalItem","list_items","find","listItem","description","toLowerCase","newListItems","originalItemPosition","splice","unshift","removeItemFromList","itemId","newList","index","fetchLists","fetchShoppingLists","performShoppingListUpdate","newTitle","callbacks","onSuccess","onNotFound","onUnprocessableEntity","onUnauthorized","onInternalServerError","title","newShoppingLists","map","header","performShoppingListCreate","Array","isArray","performShoppingListDestroy","filter","aggregate","performShoppingListItemCreate","newLists","i","list_id","listPosition","performShoppingListItemUpdate","updateShoppingListItem","performShoppingListItemDestroy","destroyShoppingListItem","newAggregateList","regularListToRemoveItemFrom","listFromListItemId","regularListIndex","deletedItem","aggregateListItem","newRegularList","InventoryListsContext","InventoryListsProvider","inventoryLists","setInventoryLists","inventoryListLoadingState","setInventoryListLoadingState","inventoryListsOverridden","fetchInventoryLists","performInventoryListCreate","createInventoryList","newInventoryLists","performInventoryListUpdate","performInventoryListDestroy","destroyInventoryList","performInventoryListItemCreate","inventory_list_item","createInventoryListItem","useCustomContext","cxt","msg","context","useContext","useColorScheme","useShoppingListsContext","GamesContext","useInventoryListsContext","GamesProvider","setGames","gameLoadingState","setGameLoadingState","gamesOverridden","fetchUserGames","fetchGames","performGameCreate","game","createGame","newGames","performGameUpdate","updateGame","performGameDestroy","destroyGame","destroyedGame","gameIndex","HomePage","verifyLogin","authorize","data","className","styles","root","container","LoginPage","loginErrorMessage","setLoginErrorMessage","errorMessage","button","clientId","buttonText","tokenId","onFailure","redirectUri","YELLOW","schemeColorDarkest","schemeColorDark","schemeColorLight","schemeColorLightest","hoverColorDark","hoverColorLight","hoverColorLightest","textColorPrimary","textColorSecondary","textColorTertiary","borderColor","PINK","BLUE","GREEN","AQUA","colorSchemes","LogoutDropdown","logOutFunction","onClick","e","preventDefault","googleLogout","src","icon","alt","DashboardHeader","dropdownVisible","setDropdownVisible","bar","headerContainer","headerLinkLarge","bp","headerLinkSmall","profile","profileText","textTop","textBottom","email","avatar","image_url","anonymousAvatar","referrerPolicy","logoutDropdown","hidden","GamesDropdownOption","onKeyDown","ariaSelected","classNames","role","tabIndex","substring","GamesDropdown","history","useHistory","activeGame","setActiveGame","dropdownExpanded","setDropdownExpanded","inputValue","setInputValue","componentRef","expandDropdown","collapseDropdown","colorVars","selectGame","params","push","toString","isActiveGame","collapseDropdownAndResetValue","relatedTarget","contains","g","document","addEventListener","removeEventListener","ref","style","input","disabled","onChange","currentTarget","placeholder","onFocus","key","target","blur","focusables","getElementsByClassName","focus","trigger","fa","faAngleDown","dropdown","replace","DashboardLayout","includeGameSelect","titleContainer","hr","Loading","color","height","width","NavigationCard","href","styleVars","NavigationMosaic","cardArray","card","cards","DashboardPage","loading","colors","FlashMessage","setTimeout","messageList","Modal","subtitle","contentRef","contentRefContains","el","hide","getElementsByTagName","classList","add","remove","content","withModal","WrappedComponent","childProps","ModalForm","modelName","buttonLabel","onSubmit","fields","buttonColor","formRef","inputRef","colorRef","Math","floor","random","Tag","tag","label","inputProps","fieldset","htmlFor","submit","formFields","inputMode","pattern","ModalGameForm","currentAttributes","field","defaultValue","unmountAndDisplayFlash","elements","attr","location","Game","toggleEvent","setToggleEvent","iconsRef","editRef","destroyRef","Date","now","editIcons","confirm","faTimes","attributes","ModalComponent","props","faEdit","collapsed","setCollapsibleElement","collapsible","GameCreateForm","toggleForm","onSuccessOrFatalError","reset","slideToggleTrigger","onExpanded","form","fieldsetDisabled","buttonDisabled","LoadingError","text","GamesPage","noGames","InventoryListCreateForm","showFlashAndClearInput","newValue","LOWERCASE_WORDS","titlecase","words","split","word","letter","toUpperCase","slice","capitalize","join","useComponentVisible","isComponentVisible","setIsComponentVisible","triggerRef","triggerRefContains","element","handleHideDiv","handleClickOutside","useSize","size","setSize","useLayoutEffect","getBoundingClientRect","useResizeObserver","entry","contentRect","ListEditForm","maxTotalWidth","getInputTextWidth","createElement","getContext","font","max","maxTextWidth","textWidth","measureText","min","setMaxTextWidth","inputWidth","setInputWidth","buttonRef","offsetWidth","classnames","stopPropagation","faCheckSquare","formatWeight","weight","undefined","weightNum","Number","toFixed","InventoryListItem","canEdit","quantity","notes","unitWeight","setCollapsed","toggle","quantityContent","InventoryListItemCreateForm","unit_weight","resetToggleAndDisplayFlash","triggerContainer","triggerButton","required","step","InventoryList","DELETE_CONFIRMATION","currentTitle","setCurrentTitle","maxEditFormWidth","setMaxEditFormWidth","listItems","setListItems","slideTriggerRef","deleteTriggerRef","shouldToggleListItems","slideTriggerRefContains","componentRefContains","deleteTriggerRefContains","items","obj","confirmed","onError","str","match","resetTitleDisplayErrorAndHideForm","emptyList","itemKey","listTitle","InventoryPageContent","listsLoadedAndNotEmpty","listsLoadedAndEmpty","listKey","inventoryList","noLists","link","InventoryPage","shouldDisableForm","createForm","ShoppingListCreateForm","ShoppingListItemEditForm","ShoppingListItem","currentQuantity","setCurrentQuantity","deleteRef","incRef","decRef","refContains","iconContains","editRefContains","deleteRefContains","incRefContains","decRefContains","displayFlash","headerEditable","destroyIcon","oldQuantity","newQuantity","faAngleUp","ShoppingListItemCreateForm","ShoppingList","nativeEvent","resetTitleAndDisplayError","ShoppingListsPageContent","shoppingList","ShoppingListsPage","NotFoundPage","siteTitle","pages","pageId","jsx","PageRoutes","exact","lang","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"oJACAA,EAAOC,QAAU,CAAC,KAAO,+BAA+B,UAAY,oCAAoC,OAAS,iCAAiC,GAAK,6BAA6B,YAAc,sCAAsC,OAAS,iCAAiC,eAAiB,yCAAyC,UAAY,oCAAoC,SAAW,mCAAmC,gBAAkB,0CAA0C,KAAO,+BAA+B,YAAc,sCAAsC,YAAc,sCAAsC,MAAQ,gCAAgC,MAAQ,gCAAgC,OAAS,mC,kBCA7sBD,EAAOC,QAAU,CAAC,KAAO,0CAA0C,UAAY,+CAA+C,iBAAmB,sDAAsD,cAAgB,mDAAmD,KAAO,0CAA0C,SAAW,8CAA8C,MAAQ,2CAA2C,MAAQ,2CAA2C,OAAS,8C,gBCAneD,EAAOC,QAAU,CAAC,KAAO,yCAAyC,UAAY,8CAA8C,iBAAmB,qDAAqD,cAAgB,kDAAkD,KAAO,yCAAyC,SAAW,6CAA6C,MAAQ,0CAA0C,MAAQ,0CAA0C,OAAS,6C,qBCA3dD,EAAOC,QAAU,CAAC,KAAO,8BAA8B,IAAM,6BAA6B,gBAAkB,yCAAyC,OAAS,gCAAgC,gBAAkB,yCAAyC,gBAAkB,yCAAyC,QAAU,iCAAiC,YAAc,qCAAqC,QAAU,iCAAiC,WAAa,oCAAoC,OAAS,gCAAgC,eAAiB,wCAAwC,OAAS,gCAAgC,GAAK,8B,kBCA9nBD,EAAOC,QAAU,CAAC,KAAO,gCAAgC,UAAY,qCAAqC,OAAS,kCAAkC,GAAK,8BAA8B,YAAc,uCAAuC,OAAS,kCAAkC,SAAW,oCAAoC,gBAAkB,2CAA2C,YAAc,uCAAuC,YAAc,uCAAuC,MAAQ,iCAAiC,MAAQ,iCAAiC,OAAS,oC,gBCAzkBD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,QAAU,+BAA+B,KAAO,4BAA4B,KAAO,4BAA4B,MAAQ,6BAA6B,UAAY,iCAAiC,GAAK,0BAA0B,YAAc,mCAAmC,UAAY,mC,gBCAlVD,EAAOC,QAAU,CAAC,KAAO,2BAA2B,QAAU,8BAA8B,KAAO,2BAA2B,KAAO,2BAA2B,UAAY,gCAAgC,MAAQ,4BAA4B,GAAK,yBAAyB,YAAc,kCAAkC,UAAY,kC,kBCA1UD,EAAOC,QAAU,CAAC,KAAO,6BAA6B,mBAAqB,2CAA2C,KAAO,6BAA6B,SAAW,iCAAiC,iBAAmB,yCAAyC,MAAQ,8BAA8B,OAAS,+BAA+B,eAAiB,yC,gBCAjWD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,OAAS,qBAAqB,KAAO,mBAAmB,UAAY,wBAAwB,KAAO,mBAAmB,YAAc,4B,iBCAhLD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,OAAS,8BAA8B,MAAQ,6BAA6B,QAAU,+BAA+B,OAAS,8BAA8B,SAAW,kC,iBCA5ND,EAAOC,QAAU,CAAC,KAAO,8BAA8B,MAAQ,+BAA+B,GAAK,4BAA4B,UAAY,mCAAmC,gBAAkB,yCAAyC,eAAiB,0C,gBCA1PD,EAAOC,QAAU,CAAC,KAAO,sCAAsC,OAAS,wCAAwC,SAAW,0CAA0C,iBAAmB,kDAAkD,MAAQ,uCAAuC,eAAiB,kD,gBCA1SD,EAAOC,QAAU,CAAC,KAAO,qCAAqC,OAAS,uCAAuC,SAAW,yCAAyC,iBAAmB,iDAAiD,MAAQ,sCAAsC,eAAiB,iD,iBCArSD,EAAOC,QAAU,CAAC,KAAO,2BAA2B,OAAS,6BAA6B,QAAU,8BAA8B,OAAS,6BAA6B,YAAc,kCAAkC,IAAM,4B,gBCA9ND,EAAOC,QAAU,CAAC,KAAO,wBAAwB,SAAW,4BAA4B,MAAQ,yBAAyB,OAAS,0BAA0B,MAAQ,2B,gBCApKD,EAAOC,QAAU,CAAC,QAAU,sCAAsC,KAAO,mCAAmC,cAAgB,4CAA4C,QAAU,sCAAsC,MAAQ,sC,gBCAhOD,EAAOC,QAAU,CAAC,QAAU,0CAA0C,KAAO,uCAAuC,aAAe,+CAA+C,QAAU,0CAA0C,MAAQ,0C,mBCA9OD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,UAAY,4BAA4B,OAAS,yBAAyB,MAAQ,0B,gBCAlID,EAAOC,QAAU,CAAC,KAAO,wBAAwB,aAAe,gCAAgC,UAAY,6BAA6B,OAAS,4B,iBCAlJD,EAAOC,QAAU,CAAC,KAAO,oBAAoB,QAAU,uBAAuB,MAAQ,qBAAqB,SAAW,0B,gBCAtHD,EAAOC,QAAU,CAAC,KAAO,wBAAwB,QAAU,2BAA2B,MAAQ,yBAAyB,QAAU,6B,gBCAjID,EAAOC,QAAU,CAAC,KAAO,2BAA2B,MAAQ,4BAA4B,OAAS,6BAA6B,GAAK,2B,gBCAnID,EAAOC,QAAU,CAAC,KAAO,2BAA2B,UAAY,gCAAgC,OAAS,6BAA6B,KAAO,6B,kBCA7ID,EAAOC,QAAU,CAAC,OAAS,+BAA+B,KAAO,6BAA6B,aAAe,uC,qBCA7GD,EAAOC,QAAU,CAAC,KAAO,+BAA+B,KAAO,iC,gBCA/DD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,QAAU,iC,gBCA/DD,EAAOC,QAAU,CAAC,KAAO,2BAA2B,KAAO,6B,sBCA3DD,EAAOC,QAAU,CAAC,KAAO,oC,iBCAzBD,EAAOC,QAAU,CAAC,KAAO,+B,kBCAzBD,EAAOC,QAAU,CAAC,WAAa,oC,gBCA/BD,EAAOC,QAAU,CAAC,WAAa,wC,+JCGlBC,EAAyD,mCAIzDC,EAAoB,sBCR1B,SAASC,IAAkD,IAA/BC,EAA8B,uDAApB,mBAC3CC,KAAKD,QAAUA,EACfC,KAAKC,KAAO,IACZD,KAAKE,KAAO,qBACZF,KAAKG,OAAS,IAAIC,OAASD,MAKtB,SAASE,IAA0C,IAA5BN,EAA2B,uDAAjB,gBACtCC,KAAKD,QAAUA,EACfC,KAAKC,KAAO,IACZD,KAAKE,KAAO,gBACZF,KAAKG,OAAS,IAAIC,OAASD,MAKtB,SAASG,IAA2D,IAArCP,EAAoC,uDAA1B,yBAC9CC,KAAKD,QAAUA,EACfC,KAAKC,KAAO,IACZD,KAAKE,KAAO,wBACZF,KAAKG,OAAS,IAAIC,OAASD,MAf7BL,EAAmBS,UAAY,IAAIH,MASnCC,EAAcE,UAAY,IAAIH,MAS9BE,EAAsBC,UAAY,IAAIH,MCHtC,I,EAAMI,EAAoB,CAAE,eAAgB,oBACtCC,EAAa,SAAAC,GAAK,MAAK,CAAE,cAAgB,UAAhB,OAA2BA,KACpDC,EAAkB,SAAAD,GAAK,kCAAUD,EAAWC,IAAWF,IAkIhDI,EAAqB,SAACF,EAAOG,EAAQC,GAChD,IAAMC,EAAG,UAAMnB,EAAN,kBAA8BiB,EAA9B,mBACHG,EAAOC,KAAKC,UAAU,CAAEC,cAAeL,IAE7C,OAAOM,MAAML,EAAK,CAChBM,OAAQ,OACRC,QAASX,EAAgBD,GACzBM,KAAMA,IAEPO,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EACnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eAK/CC,EAAqB,SAACjB,EAAOkB,EAAQd,GAChD,IAAMC,EAAG,UAAMnB,EAAN,2BAAuCgC,GAE1CZ,EAAOC,KAAKC,UAAU,CAC1BW,GAAID,EACJT,cAAeL,IAGjB,OACEM,MAAML,EAAK,CACTM,OAAQ,QACRC,QAASX,EAAgBD,GACzBM,KAAMA,IAEPO,MAAK,SAAAC,GAGJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAAc,2EACjD,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eAMjDI,EAAsB,SAACpB,EAAOkB,GACzC,IAAMb,EAAG,UAAMnB,EAAN,2BAAuCgC,GAEhD,OACER,MAAML,EAAK,CACTM,OAAQ,SACRC,QAASb,EAAWC,KAErBa,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAAc,2EACjD,GAAoB,MAAhBmB,EAAKC,OAAgB,MAAM,IAAInB,EAAsB,6EACzD,OAAoB,MAAhBkB,EAAKC,OAAuB,CAAEA,OAAQD,EAAKC,OAAQC,KAAM,MACtDF,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eAYjDK,EAAyB,SAACrB,EAAOkB,EAAQd,GACpD,IAAMC,EAAG,UAAMnB,EAAN,2BAAuCgC,EAAvC,wBAET,OACER,MAAML,EAAK,CACTM,OAAQ,OACRC,QAASX,EAAgBD,GACzBM,KAAMC,KAAKC,UAAU,CAAEc,mBAAoBlB,MAE5CS,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAAc,mGACjD,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eAiFjDO,EAAsB,SAACvB,EAAOkB,EAAQd,GACjD,IAAMC,EAAG,UAAMnB,EAAN,4BAAwCgC,GAC3CZ,EAAOC,KAAKC,UAAU,CAAEgB,eAAgBpB,IAE9C,OACEM,MAAML,EAAK,CAAEM,OAAQ,QAASC,QAASX,EAAgBD,GAAQM,SAC5DO,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAEnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eCpU1DS,EAAuB,SAAAC,GAC3BC,QAAQC,MAAM,sBAAuBF,EAAIrC,UAmB5BwC,EAhBU,WAAuD,IAAtDC,EAAqD,uDAA3C,aAAUF,EAAiC,uDAAzBH,EACpD,GAAIM,OAAOC,MAAQD,OAAOC,KAAKC,MAAO,CACpC,IAAMC,EAAaH,OAAOC,KAAKC,MAAME,kBAElB,OAAfD,EACFA,EACGrB,MAAK,kBAAMqB,EAAWE,gBACtBvB,KAAKiB,EAASF,GAEjBE,IAIJA,KCjBWO,EAAYC,mIAAYC,YAAaD,EAIrCE,IAAgBF,mIAAYC,UCJnCE,EAAQ,CACZC,KAAM,IACNC,MAAO,SACPC,UAAW,CACTC,KAAM,aACNC,MAAO,mBACPC,cAAe,4BACfC,UAAW,yBAIFC,EAAqB,CAChCR,EAAMG,UAAUC,KAChBJ,EAAMG,UAAUE,MAChBL,EAAMG,UAAUG,cAChBN,EAAMG,UAAUI,WAGLE,EAAqB,CAChCT,EAAMG,UAAUG,cAChBN,EAAMG,UAAUI,WAGHP,I,OCATU,EAAO,OAEPC,EAAaC,0BAObC,EAAc,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,SAAmC,IAAzBC,qBAAyB,MAAT,GAAS,EAChDC,EAAaC,cAAbD,SACR,EAA2CE,YAAW,CAACxE,IAAvD,mBAAOyE,EAAP,KAAgBC,EAAhB,KAA2BC,EAA3B,KAEA,EAA8CC,mBAAS,CAAEC,KAAM,OAAQ3E,QAAS,KAAhF,mBAAO4E,EAAP,KAAwBC,EAAxB,KACA,EAAwCH,oBAAS,GAAjD,mBAAOI,EAAP,KAAqBC,EAArB,KAEA,EAA8CL,mBAAS,IAAvD,mBAAOM,EAAP,KAAwBC,EAAxB,KACA,EAAwCP,oBAAS,GAAjD,mBAAOQ,EAAP,KAAqBC,EAArB,KAEA,EAAsCT,mBAASP,EAAciB,aAA7D,mBAAOA,EAAP,KAAoBC,EAApB,KACA,EAAwCX,mBAASP,EAAcmB,kBAA/D,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAAgDd,mBAASP,EAAcsB,kBAtBzD,WAsBd,mBAAOA,EAAP,KAAyBC,EAAzB,KAEMC,GAAaC,kBAAO,GAEpBC,GAAsBC,uBAAY,kBAAMrB,EAAa3E,KAAoB,CAAC2E,IAG1EsB,GAAsBD,uBAAY,SAAAE,GACtCL,GAAWM,SAAWT,EAAgBQ,GACtCL,GAAWM,SAAU,IACpB,IAEGC,GAAsBJ,uBAAY,kBACtClC,EAAmBuC,QAAQ/B,IAAa,IACvC,CAACA,IAEEgC,GAAyBN,uBAAY,WACzC,OAAQ3B,EAAciB,aAAeb,EAAQzE,IAAsBoG,OAClE,CAAC/B,EAAciB,YAAab,EAAS2B,KAElCG,GAAoBP,uBAAY,WAA0C,IAAzCE,EAAwC,uDAAjC5C,EAAME,MAAOgD,EAAoB,uDAAT,KACpE9D,GAAiB,WACfqD,KACAS,GAAYA,IACZJ,MAAyBH,GAAoBC,QAE9C,CAACH,GAAqBK,GAAqBH,KAExCQ,GAAK,aACT5F,MAAO4D,EAAQzE,GACfsF,cACAS,uBACAW,iBA3BuB,SAAA7F,GAAK,OAAI6D,EAAU1E,EAAmBa,IA4B7D8E,mBACAM,uBACAM,qBACAvB,eACAF,kBACAG,kBACAF,qBACAM,kBACAF,qBACAC,eACAF,mBACGb,GA4CL,OAdAsC,qBAAU,WACJP,OAA0B3B,EAAQzE,IAAsB6F,GAAWM,SAASI,OAC/E,CAACH,GAAqB3B,EAAS8B,KAElCI,qBA/ByB,WACnBL,KJ1CwB,SAAAzF,GAC9B,IAAMK,EAAG,UAAMnB,EAAN,kBAET,OACEwB,MAAML,EAAK,CAAEO,QAASb,EAAWC,KAC9Ba,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,OAAO0B,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,cIoC1D+E,CAAiBnC,EAAQzE,IACtB0B,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,GAAWM,QAAhB,CAEA,GAAe,MAAXvE,EAIF,MAAM,IAAIrB,MAAM,0BAA2BsB,EAAKgF,OAAO,IAHvDtB,EAAe1D,GACVwC,EAAcsB,kBAAkBC,EAAoB5B,OAK5D8C,OAAM,SAAArE,GAOL8D,QAEKrD,IAAcmB,EAAcsB,kBACrCC,EAAoB5B,KAQI,CACEoC,GACAG,GACAlC,EAAcsB,iBACdW,GACA7B,IAG9BkC,qBAAU,kBAAO,kBAAMd,GAAWM,SAAU,KAAQ,IAGlD,cAAClC,EAAW8C,SAAZ,CAAqBN,MAAOA,GAA5B,SACGhB,EAAe,cAAC,IAAD,CAAUuB,GAAIvB,IAAmBrB,K,OCtI1C6C,EAAU,UACVjD,EAAO,OACPkD,EAAQ,QCSfC,EAAejD,0BAEfkD,EAAgB,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,YAAajD,EAAe,EAAfA,SACpC,OACE,cAAC+C,EAAaJ,SAAd,CAAuBN,MAAOY,EAA9B,SACGjD,KCZQkD,EAFE,kBAAM,IAAIC,gBAAgBhD,cAAciD,SCiCnDC,EAAuBvD,0BAEvBwD,EAAwB,SAAC,GAAsC,IAApCtD,EAAmC,EAAnCA,SAAmC,IAAzBC,qBAAyB,MAAT,GAAS,EAC5DsD,EAAcL,IAEpB,EAKIM,IAJF/G,EADF,EACEA,MACA0F,EAFF,EAEEA,kBACAxB,EAHF,EAGEA,mBACAE,EAJF,EAIEA,gBAGMtB,EAAUkE,KAAVlE,MAEFmE,EAAeC,mBAAQ,WAC3B,OAAIpE,GAASA,EAAMqE,OACVC,SAASN,EAAYO,IAAI,YAAcvE,EAAM,GAAG3B,IAEhD,OAER,CAAC2B,EAAOgE,IAEX,EAA0C/C,mBAASP,EAAcT,eAAiB,IAAlF,mBAAOA,EAAP,KAAsBuE,EAAtB,KACA,EAAgEvD,mBAASqC,GAAzE,mBAAOmB,EAAP,KAAiCC,EAAjC,KAEMC,EAA0BxC,kBAAO,GAEnCzB,EAAcT,uBAITS,EAAcT,cACrB0E,EAAwBnC,SAAU,GAGpC,IAAMN,EAAaC,kBAAO,GAEpByC,EAAsB,SAACC,EAAMC,GACjC,IAAMC,EAAeF,EAAKG,WAAWC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,YAAYC,gBAAkBN,EAAKK,YAAYC,iBACxGC,EAAY,YAAOR,EAAKG,YAE9B,GAAID,EAAc,CAChB,IAAMO,EAAuBT,EAAKG,WAAWtC,QAAQqC,GACrDM,EAAaE,OAAOD,EAAsB,EAAGR,QAE7CO,EAAaG,QAAQV,GAKvB,OAFAD,EAAKG,WAAaK,EAEX,eAAKR,IAKRY,EAAqB,SAACZ,EAAMa,GAChC,IAAMC,EAAO,eAAQd,GACfQ,EAAY,YAAOR,EAAKG,YAExBF,EAAOD,EAAKG,WAAWC,MAAK,SAAAH,GAAI,OAAIA,EAAKzG,KAAOqH,KAChDE,EAAQf,EAAKG,WAAWtC,QAAQoC,GAKtC,OAHAO,EAAaE,OAAOK,EAAO,GAC3BD,EAAQX,WAAaK,EAEdM,GAGHE,EAAaxD,uBAAY,WACzBnF,IAAUyH,EAAwBnC,QRoCR,SAACtF,EAAOG,GACxC,IAAME,EAAG,UAAMnB,EAAN,kBAA8BiB,EAA9B,mBAET,OACEO,MAAML,EAAK,CAAEO,QAASb,EAAWC,KAC9Ba,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EACnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,cQ3C1D4H,CAAmB5I,EAAOiH,GACvBpG,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,EAKG,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,2CAAgEC,EAAKgF,QAArE,wBAAiGjF,EAAjG,kCAChB,MAAM,IAAIrB,MAAML,GANZ2F,EAAWM,UACbgC,EAAiBtG,IAChBwC,EAAc+D,0BAA4BC,EAA4BrE,OAO5E8C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,kBAAMqC,EAAWM,SAAU,KAEpC,MAAb5D,EAAInC,MAAgByF,EAAWM,SACxCpB,EAAmB,CACjBF,KAAM,QACN3E,QAAS,kDAGX+E,GAAgB,IAEfZ,EAAc+D,0BAA4BC,EAA4BnB,IAInErB,EAAWM,UACZ9B,EAAc+D,0BAA4BC,EAA4BnB,MAK/ErB,EAAWM,UAAY9B,EAAc+D,0BAA4BC,EAA4BrE,KAE9F,CAACnD,EAAOwD,EAAc+D,yBAA0BrD,EAAoBE,EAAiB6C,EAAcvB,IA+XhGE,EAAK,aACT7C,gBACAwE,2BACAsB,0BAhYgC,SAAC3H,EAAQ4H,GAA8B,IAApBC,EAAmB,uDAAP,GACvDC,EAAwFD,EAAxFC,UAAWC,EAA6EF,EAA7EE,WAAYC,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,sBAEtEnI,EAAmBjB,EAAOkB,EAAQ,CAAEmI,MAAOP,IACxCjI,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,EAAgB,CAClB,IAAMuI,EAAmBvG,EAAcwG,KAAI,SAAA5B,GAAU,OAAIA,EAAKxG,KAAOD,EAAiBF,EAAqB2G,KAC3GL,EAAiBgC,GAEjBN,GAAaA,QACR,IAAe,MAAXjI,EAST,MAAM,IAAIrB,MAAMsB,EAAKgF,OAAL,gBAAuBjF,EAAvB,yCAA8DC,EAAKgF,QAAnE,wBAA+FjF,EAA/F,iCARhBmD,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,wDAGR+B,GAAyBA,QAK5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,gHAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,mJAGX+J,GAAyBA,SAoV/BK,0BA/UgC,SAACJ,GAA2B,IAApBN,EAAmB,uDAAP,GAC5CC,EAAwFD,EAAxFC,UAAWG,EAA6EJ,EAA7EI,eAAgBF,EAA6DF,EAA7DE,WAAYC,EAAiDH,EAAjDG,sBAAuBE,EAA0BL,EAA1BK,sBAEtElJ,EAAmBF,EAAOiH,EAAc,CAAEoC,UACvCxI,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,EAAgB,CAClB,GAAI2I,MAAMC,QAAQ3I,IAAyB,IAAhBA,EAAKmG,OAK9BG,EAAiBtG,QACZ,GAAIA,GAAwB,kBAATA,EAAmB,CAG3C,IAAMsI,EAAgB,YAAOvG,GAC7BuG,EAAiBjB,OAAO,EAAG,EAAGrH,GAC9BsG,EAAiBgC,GAGnBpF,EAAmB,CACjBF,KAAM,UACN3E,QAAS,6CAGX2J,GAAaA,QACR,IAAe,MAAXjI,EAUT,MAAM,IAAIrB,MAAMsB,EAAKgF,OAAL,gBAAuBjF,EAAvB,0CAA+DC,EAAKgF,QAApE,wBAAgGjF,EAAhG,kCAThBmD,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,gEAGR+B,GAAyBA,QAM5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,qHAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,mJAGX+J,GAAyBA,SAoR/BQ,2BA/QiC,SAAC1I,GAA4B,IAApB6H,EAAmB,uDAAP,GAC9CC,EAAiED,EAAjEC,UAAWG,EAAsDJ,EAAtDI,eAAgBF,EAAsCF,EAAtCE,WAAYG,EAA0BL,EAA1BK,sBAE/ChI,EAAoBpB,EAAOkB,GACxBL,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,EAGFuG,EAAiB,IAEjBpD,EAAmB,CACjBF,KAAM,UACN3E,QAAS,2FACTmK,OAAQ,yCAGVR,GAAaA,QACR,IAAe,MAAXjI,EAcJ,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,yCAA8DC,EAAKgF,QAAnE,wBAA+FjF,EAA/F,wCAAqIG,GACrJ,MAAM,IAAIxB,MAAML,GAbhB,IAAMiK,EAAmBvG,EAAc8G,QAAO,SAAAlC,GAAI,OAAIA,EAAKxG,KAAOD,KAC3BqI,KAAI,SAAA5B,GAAI,OAAwB,IAAnBA,EAAKmC,UAAqB9I,EAAO2G,KAErFL,EAAiBgC,GAEjBpF,EAAmB,CACjBF,KAAM,UACN3E,QAAS,yCAGX2J,GAAaA,QAMhB/C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,yHAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,mJAGX+J,GAAyBA,SAqN/BW,8BAhNoC,SAAC7I,EAAQd,GAA2B,IAApB2I,EAAmB,uDAAP,GACxDC,EAAwFD,EAAxFC,UAAWC,EAA6EF,EAA7EE,WAAYC,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,sBAEtE/H,EAAuBrB,EAAOkB,EAAQd,GACnCS,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,GAA6B,MAAXA,EAAgB,CAWpC,IARA,IAAMiJ,EAAQ,YAAOjH,GAHe,WAW3BkH,GACP,IAAMtC,EAAO5E,EAAcgF,MAAK,SAAAJ,GAAI,OAAIA,EAAKxG,KAAOH,EAAKiJ,GAAGC,WACtDC,EAAepH,EAAcyC,QAAQmC,GACrCc,EAAUf,EAAoBC,EAAM3G,EAAKiJ,IAE/CD,EAASG,GAAgB1B,GALlBwB,EAAI,EAAGA,EAAIjJ,EAAKmG,OAAQ8C,IAAM,EAA9BA,GAQT3C,EAAiB0C,GAGf9F,EADa,MAAXnD,EACiB,CACjBiD,KAAM,UACN3E,QAAS,sDAGQ,CACjB2E,KAAM,UACN3E,QAAS,wGAIb2J,GAAaA,QACR,IAAe,MAAXjI,EAQJ,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,8CAAmEC,EAAKgF,QAAxE,wBAAoGjF,EAApG,qCAChB,MAAM,IAAIrB,MAAML,GAThB6E,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,qEAGR+B,GAAyBA,QAM5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,iIAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,wJAGX+J,GAAyBA,SAsI/BgB,8BAjIoC,SAAC5B,EAAQpI,EAAO2I,GACpD,IAAQC,EAAwFD,EAAxFC,UAAWC,EAA6EF,EAA7EE,WAAYC,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,uBRpKpC,SAACpJ,EAAOwI,EAAQpI,GACpD,IAAMC,EAAG,UAAMnB,EAAN,gCAA4CsJ,GAErD,OACE9H,MAAML,EAAK,CACTM,OAAQ,QACRC,QAASX,EAAgBD,GACzBM,KAAMC,KAAKC,UAAU,CAAEc,mBAAoBlB,MAE5CS,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAAc,yFACjD,GAAoB,MAAhBmB,EAAKC,OAAgB,MAAM,IAAInB,EAAsB,uEACzD,OAAOkB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eQyJ1DqJ,CAAuBrK,EAAOwI,EAAQpI,GACnCS,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,EAAgB,CAGlB,IAFA,IAAIuI,EAAgB,YAAOvG,GADT,WAGTkH,GACP,IAAMtC,EAAO5E,EAAcgF,MAAK,SAAAJ,GAAI,OAAIA,EAAKxG,KAAOH,EAAKiJ,GAAGC,WACtDzB,EAAUf,EAAoBC,EAAM3G,EAAKiJ,IACzCE,EAAepH,EAAcyC,QAAQmC,GAC3C2B,EAAiBa,GAAgB1B,GAJ1BwB,EAAI,EAAGA,EAAIjJ,EAAKmG,OAAQ8C,IAAM,EAA9BA,GAOT3C,EAAiBgC,GAEjBpF,EAAmB,CAAEF,KAAM,UAAW3E,QAAS,kDAE/C2J,GAAaA,QACR,IAAe,MAAXjI,EAQJ,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,0BAA+CyH,EAA/C,aAA0DxH,EAAKgF,QAA/D,wBAA2FjF,EAA3F,0BAAmHyH,GACnI,MAAM,IAAI9I,MAAML,GAThB6E,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,qEAGR+B,GAAyBA,QAM5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,8HAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,wJAGX+J,GAAyBA,SA0E/BkB,+BArEqC,SAAC9B,EAAQO,GAC9C,IAAQC,EAAiED,EAAjEC,UAAWC,EAAsDF,EAAtDE,WAAYE,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,uBR9MZ,SAACpJ,EAAOwI,GAC7C,IAAMnI,EAAG,UAAMnB,EAAN,gCAA4CsJ,GAErD,OACE9H,MAAML,EAAK,CACTM,OAAQ,SACRC,QAASb,EAAWC,KAErBa,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAAc,yFACjD,GAAoB,MAAhBmB,EAAKC,OAAgB,MAAM,IAAInB,EACnC,OAAoB,MAAhBkB,EAAKC,OAAuB,CAAEA,OAAQD,EAAKC,OAAQC,KAAM,MACtDF,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eQmM1DuJ,CAAwBvK,EAAOwI,GAC5B3H,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,GAA6B,MAAXA,EAyBf,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,6CAAkEyH,EAAlE,aAA6ExH,EAAKgF,QAAlF,wBAA8GjF,EAA9G,6CAAyJyH,GACzK,MAAM,IAAI9I,MAAML,GA1BhB,IAGImL,EAHEC,EA7Xa,SAAAjC,GAAM,OAAIzF,EAAcgF,MAAK,SAAAJ,GAAI,QAAMA,EAAKG,WAAWC,MAAK,SAAAH,GAAI,OAAIA,EAAKzG,KAAOqH,QA6X/DkC,CAAmBlC,GACjDmC,EAAmB5H,EAAcyC,QAAQiF,GACzCT,EAAQ,YAAOjH,GAGrB,GAAe,MAAXhC,EAGFyJ,EAAmB9C,EAAoB3E,EAAc,GAAI/B,OACpD,CACL,IAAM4J,EAAcH,EAA4B3C,WAAWC,MAAK,SAAAH,GAAI,OAAIA,EAAKzG,KAAOqH,KAC9EqC,EAAoB9H,EAAc,GAAG+E,WAAWC,MAAK,SAAAH,GAAI,OAAIA,EAAKK,YAAYC,gBAAkB0C,EAAY3C,YAAYC,iBAE9HsC,EAAmBjC,EAAmBxF,EAAc,GAAI8H,EAAkB1J,IAG5E,IAAM2J,EAAiBvC,EAAmBkC,EAA6BjC,GAEvEwB,EAAS,GAAKQ,EACdR,EAAS3B,OAAOsC,EAAkB,EAAGG,GAErCxD,EAAiB0C,GAEjBhB,GAAaA,OAMhB/C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,8HAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,wJAGX+J,GAAyBA,UAc5B5F,GAWL,OARAsC,qBAAU,WACJmB,GAAgBjC,EAAWM,SAASqD,MACvC,CAACA,EAAY1B,IAEhBnB,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,cAACsB,EAAqBV,SAAtB,CAA+BN,MAAOA,EAAtC,SACGrC,KCjgBDwH,EAAwB1H,0BAExB2H,EAAyB,SAAC,GAAsC,IAApCzH,EAAmC,EAAnCA,SAAmC,IAAzBC,qBAAyB,MAAT,GAAS,EAC7DsD,EAAcL,IAEpB,EAA0EM,IAAlE/G,EAAR,EAAQA,MAAO0F,EAAf,EAAeA,kBAAmBxB,EAAlC,EAAkCA,mBAAoBE,EAAtD,EAAsDA,gBAC9CtB,EAAUkE,KAAVlE,MAEFmE,EAAeC,mBAAQ,WAC3B,OAAIpE,GAASA,EAAMqE,OACVC,SAASN,EAAYO,IAAI,YAAcvE,EAAM,GAAG3B,IAEhD,OAER,CAAC2B,EAAOgE,IAEX,EAA4C/C,mBAASP,EAAcyH,gBAAkB,IAArF,mBAAOA,EAAP,KAAuBC,EAAvB,KACA,EAAkEnH,mBAASqC,GAA3E,mBAAO+E,EAAP,KAAkCC,EAAlC,KAEMC,EAA2BpG,kBAAO,GAEpCzB,EAAcyH,wBAITzH,EAAcyH,eACrBI,EAAyB/F,SAAU,GAGrC,IAAMN,EAAaC,kBAAO,GAkBpB0D,EAAaxD,uBAAY,WACzBnF,IAAUqL,EAAyB/F,ST0MR,SAACtF,EAAOG,GACzC,IAAME,EAAG,UAAMnB,EAAN,kBAA8BiB,EAA9B,oBAET,OACEO,MAAML,EAAK,CAAEO,QAASb,EAAWC,KAC9Ba,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAEnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,cSlN1DsK,CAAoBtL,EAAOiH,GACxBpG,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAAhB,CAEA,GAAe,MAAXvE,EAIG,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,4CAAiEC,EAAKgF,QAAtE,wBAAkGjF,EAAlG,mCAChB,MAAM,IAAIrB,MAAML,GALhB6L,EAAkBlK,IAEjBwC,EAAc2H,2BAA6BC,EAA6BjI,OAM5E8C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,kBAAMqC,EAAWM,SAAU,KACpC,MAAb5D,EAAInC,MAAgByF,EAAWM,SACxCpB,EAAmB,CACjBF,KAAM,QACN3E,QAAS,kDAGX+E,GAAgB,IAEfZ,EAAc2H,2BAA6BC,EAA6B/E,IAIrErB,EAAWM,UACZ9B,EAAc2H,2BAA6BC,EAA6B/E,QAKlF,CAACrG,EAAO0F,EAAmBxB,EAAoBE,EAAiBZ,EAAc2H,0BAA2BlE,IAEtGsE,EAA6BpG,uBAAY,SAACkE,EAAON,GACrD,IAAQC,EAAwFD,EAAxFC,UAAWC,EAA6EF,EAA7EE,WAAYC,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,uBTmLvC,SAACpJ,EAAOG,EAAQC,GACjD,IAAMC,EAAG,UAAMnB,EAAN,kBAA8BiB,EAA9B,oBACHG,EAAOC,KAAKC,UAAU,CAAEgB,eAAgBpB,IAE9C,OACEM,MAAML,EAAK,CAAEM,OAAQ,OAAQC,QAASX,EAAgBD,GAAQM,SAC3DO,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAEnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eS3L5DwK,CAAoBxL,EAAOiH,EAAc,CAAEoC,UACxCxI,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,EAAgB,CAClB,GAAI2I,MAAMC,QAAQ3I,IAAyB,IAAhBA,EAAKmG,OAK9B+D,EAAkBlK,QACb,GAAIA,GAAwB,kBAATA,EAAmB,CAG3C,IAAMyK,EAAiB,YAAOR,GAC9BQ,EAAkBpD,OAAO,EAAG,EAAGrH,GAC/BkK,EAAkBO,GAGpBvH,EAAmB,CACjBF,KAAM,UACN3E,QAAS,8CAGX2J,GAAaA,QACR,IAAe,MAAXjI,EAST,MAAM,IAAIrB,MAAMsB,EAAKgF,OAAL,gBAAuBjF,EAAvB,2CAAgEC,EAAKgF,QAArE,wBAAiGjF,EAAjG,mCARhBmD,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,iEAGR+B,GAAyBA,QAK5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,uHAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,mJAGX+J,GAAyBA,UAG9B,CAACpJ,EAAOiH,EAAc/C,EAAoB+G,EAAgBvF,IAEvDgG,EAA6BvG,uBAAY,SAACjE,EAAQmI,GAA2B,IAApBN,EAAmB,uDAAP,GACjEC,EAAwFD,EAAxFC,UAAWC,EAA6EF,EAA7EE,WAAYC,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,sBAEtE7H,EAAoBvB,EAAOkB,EAAQ,CAAEmI,UAClCxI,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,EAAgB,CAClB,IAAM0K,EAAoBR,EAAe1B,KAAI,SAAA5B,GAAI,OAAIA,EAAKxG,KAAOD,EAASF,EAAO2G,KACjFuD,EAAkBO,GAClBzC,GAAaA,QACR,IAAe,MAAXjI,EAST,MAAM,IAAIrB,MAAMsB,EAAKgF,OAAL,gBAAuBjF,EAAvB,0CAA+DC,EAAKgF,QAApE,wBAAgGjF,EAAhG,kCARhBmD,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,yDAGR+B,GAAyBA,QAK5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,+GAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,oJAGX+J,GAAyBA,UAG9B,CAACpJ,EAAOiL,EAAgBvF,EAAmBxB,IAExCyH,EAA8BxG,uBAAY,SAACjE,EAAQ6H,GACvD,IAAQC,EAAiED,EAAjEC,UAAWC,EAAsDF,EAAtDE,WAAYG,EAA0CL,EAA1CK,sBAAuBD,EAAmBJ,EAAnBI,gBTkGtB,SAACnJ,EAAOkB,GAC1C,IAAMb,EAAG,UAAMnB,EAAN,4BAAwCgC,GAEjD,OACER,MAAML,EAAK,CAAEM,OAAQ,SAAUC,QAASb,EAAWC,KAChDa,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAEnC,OAAoB,MAAhBmB,EAAKC,OACA,CAAEA,OAAQD,EAAKC,OAAQC,KAAM,MAE7BF,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eS5G9D4K,CAAqB5L,EAAOkB,GACzBL,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,EAGFmK,EAAkB,IAElBhH,EAAmB,CACjBF,KAAM,UACNwF,OAAQ,iDACRnK,QAAS,8FAGX2J,GAAaA,QACR,IAAe,MAAXjI,EAaJ,CACWC,EAAKgF,OAAL,gBAAuBjF,EAAvB,yCAA8DG,EAA9D,aAAyEF,EAAKgF,QAA9E,wBAA0GjF,EAA1G,yCAAiJG,GACjK,MAAM,IAAIxB,MAZV,IAAM+L,EAAoBR,EAAepB,QAAO,SAAAlC,GAAI,OAAIA,EAAKxG,KAAOD,KAC3BqI,KAAI,SAAA5B,GAAI,OAAuB,IAAnBA,EAAKmC,UAAqB9I,EAAO2G,KACtFuD,EAAkBO,GAElBvH,EAAmB,CACjBF,KAAM,UACN3E,QAAS,0CAGX2J,GAAaA,QAMhB/C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,wHAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,oJAGX+J,GAAyBA,UAG9B,CAACpJ,EAAOiL,EAAgBvF,EAAmBxB,IAExC2H,EAAiC1G,uBAAY,SAACjE,EAAQd,EAAO2I,GACjE,IAAQC,EAAwFD,EAAxFC,UAAWC,EAA6EF,EAA7EE,WAAYC,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,uBT4DnC,SAACpJ,EAAOkB,EAAQd,GACrD,IAAMC,EAAG,UAAMnB,EAAN,4BAAwCgC,EAAxC,yBACHZ,EAAOC,KAAKC,UAAU,CAAEsL,oBAAqB1L,IAEnD,OACEM,MAAML,EAAK,CAAEM,OAAQ,OAAQC,QAASX,EAAgBD,GAAQM,SAC3DO,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EAEnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eSpE5D+K,CAAwB/L,EAAOkB,EAAQd,GACpCS,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAKgE,EAAWM,QAEhB,GAAe,MAAXvE,GAA6B,MAAXA,EAAgB,CAWpC,IARA,IAAMiJ,EAAQ,YAAOiB,GAHe,WAW3BhB,GACP,IAAMtC,EAAOsD,EAAelD,MAAK,SAAAJ,GAAI,OAAIA,EAAKxG,KAAOH,EAAKiJ,GAAGC,WACvDC,EAAec,EAAezF,QAAQmC,GACtCc,EA3PY,SAACd,EAAMC,GACjC,IAAMC,EAAeF,EAAKG,WAAWC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,YAAYC,gBAAkBN,EAAKK,YAAYC,iBACxGC,EAAY,YAAOR,EAAKG,YAE9B,GAAID,EAAc,CAChB,IAAMO,EAAuBT,EAAKG,WAAWtC,QAAQqC,GACrDM,EAAaE,OAAOD,EAAsB,EAAGR,QAE7CO,EAAaG,QAAQV,GAKvB,OAFAD,EAAKG,WAAaK,EAEX,eAAKR,GA8OYD,CAAoBC,EAAM3G,EAAKiJ,IAE/CD,EAASG,GAAgB1B,GALlBwB,EAAI,EAAGA,EAAIjJ,EAAKmG,OAAQ8C,IAAM,EAA9BA,GAQTiB,EAAkBlB,GAGhB9F,EADa,MAAXnD,EACiB,CACjBiD,KAAM,UACN3E,QAAS,uDAGQ,CACjB2E,KAAM,UACN3E,QAAS,yGAIb2J,GAAaA,QACR,IAAe,MAAXjI,EAQJ,CACL,IAAM1B,EAAU2B,EAAKgF,QAAUhF,EAAKgF,OAAOmB,OAA3B,gBAA6CpG,EAA7C,kDAA6FG,EAA7F,aAAwGF,EAAKgF,QAA7G,wBAAyIjF,EAAzI,kDAAyLG,GACzM,MAAM,IAAIxB,MAAML,GAThB6E,EAAmB,CACjBF,KAAM,QACNwF,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,0DACN9H,QAAS2B,EAAKgF,SAGhBkD,GAAyBA,QAM5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,gIAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,yJAGX+J,GAAyBA,UAG9B,CAACpJ,EAAOiL,EAAgBvF,EAAmBxB,IAExC0B,EAAK,aACTqF,iBACAE,4BACAI,6BACAG,6BACAC,8BACAE,kCACGrI,GAWL,OARAsC,qBAAU,WACJmB,GAAgBjC,EAAWM,SAASqD,MACvC,CAACA,EAAY1B,IAEhBnB,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,cAACyF,EAAsB7E,SAAvB,CAAgCN,MAAOA,EAAvC,SACGrC,KC5XDyI,EAAmB,SAACC,EAAKC,GAC7B,IAAMC,EAAUC,qBAAWH,GAE3B,IAAKE,EACH,MAAM,IAAIzM,MAAMwM,GAGlB,OAAOC,GAGIE,EAAiB,kBAC5BL,EAAiB1F,EAAc,uDAGpBS,EAAgB,kBAC3BiF,EAAiB5I,EAAY,oDAGlBkJ,EAA0B,kBACrCN,EAAiBpF,EAAsB,wEAG5BI,GAAkB,kBAC7BgF,EAAiBO,GAAc,wDAGpBC,GAA2B,kBACtCR,EAAiBjB,EAAuB,2ECjBpCwB,GAAelJ,0BAEfoJ,GAAgB,SAAC,GAAsC,IAApClJ,EAAmC,EAAnCA,SAAmC,IAAzBC,qBAAyB,MAAT,GAAS,EAC1D,EAAyDuD,IAAjD/G,EAAR,EAAQA,MAAO0F,EAAf,EAAeA,kBAAmBxB,EAAlC,EAAkCA,mBAElC,EAA0BH,mBAASP,EAAcV,OAAS,IAA1D,mBAAOA,EAAP,KAAc4J,EAAd,KACA,EAAgD3I,mBAASP,EAAcmJ,kBAAoBvG,GAA3F,mBAAOuG,EAAP,KAAyBC,EAAzB,KAEM5H,EAAaC,kBAAO,GACpB4H,EAAkB5H,kBAAO,GAE3BzB,EAAcV,eAGTU,EAAcV,MACrB+J,EAAgBvH,SAAU,GAG5B,IAAMwH,EAAiB3H,uBAAY,WAC7BnF,IAAU6M,EAAgBvH,SX0BR,SAAAtF,GACxB,IAAMK,EAAG,UAAMnB,EAAN,UAET,OACEwB,MAAML,EAAK,CAAEO,QAASb,EAAWC,KAC9Ba,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,OAAO0B,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,cWhC1D+L,CAAW/M,GACRa,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,EAKG,CACL,IAAM1B,EAAU2B,EAAKgF,OAAL,gBAAuBjF,EAAvB,iCAAsDC,EAAKgF,QAAW,iCACtF,MAAM,IAAItG,MAAML,GANZ2F,EAAWM,UACboH,EAAS1L,IACRwC,EAAcmJ,kBAAoBC,EAAoBzJ,OAO5D8C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,kBAAMqC,EAAWM,SAAU,KAKtDN,EAAWM,SAASsH,EAAoBvG,QAInD,CAACrG,EAAOwD,EAAcmJ,iBAAkBjH,IAErCsH,EAAoB7H,uBAAY,SAAC/E,EAAO2I,GAC5C,IAAQC,EAA4ED,EAA5EC,UAAWE,EAAiEH,EAAjEG,sBAAuBC,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,uBXYpC,SAACpJ,EAAOI,GAChC,IAAMC,EAAG,UAAMnB,EAAN,UACHoB,EAAOC,KAAKC,UAAU,CAAEyM,KAAM7M,IAEpC,OAAOM,MAAML,EAAK,CAChBM,OAAQ,OACRC,QAASX,EAAgBD,GACzBM,KAAMA,IAEPO,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,OAAO0B,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eWrBxDkM,CAAWlN,EAAOI,GACfS,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,EAAgB,CAClB,GAAIiE,EAAWM,QAAS,CACtB,IAAM6H,EAAQ,YAAOrK,GACrBqK,EAAS7E,QAAQtH,GACjB0L,EAASS,GAGXjJ,EAAmB,CACjBF,KAAM,UACN3E,QAAS,yCAGX2J,GAAaA,QACR,IAAe,MAAXjI,EAUT,MAAM,IAAIrB,MAAMsB,EAAKgF,OAAL,gBAAuBjF,EAAvB,gCAAqDC,EAAKgF,QAA1D,wBAAsFjF,EAAtF,wBAThBmD,EAAmB,CACjBF,KAAM,QACNwF,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,qDACN9H,QAAS2B,EAAKgF,SAGhBkD,GAAyBA,QAM5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,QAKpBnE,EAAWM,SAAWpB,EAAmB,CACvCF,KAAM,QACN3E,QAAS,kIAGX+J,GAAyBA,UAG9B,CAACpJ,EAAO8C,EAAOoB,EAAoBwB,IAEhC0H,EAAoBjI,uBAAY,SAAChF,EAAQC,EAAO2I,GACpD,IAAQC,EAAwFD,EAAxFC,UAAWE,EAA6EH,EAA7EG,sBAAuBD,EAAsDF,EAAtDE,WAAYG,EAA0CL,EAA1CK,sBAAuBD,EAAmBJ,EAAnBI,gBXtBvD,SAACnJ,EAAOG,EAAQC,GACxC,IAAMC,EAAG,UAAMnB,EAAN,kBAA8BiB,GACjCG,EAAOC,KAAKC,UAAU,CAAEyM,KAAM7M,IAEpC,OAAOM,MAAML,EAAK,CAChBM,OAAQ,QACRC,QAASX,EAAgBD,GACzBM,KAAMA,IAEPO,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,GAAoB,MAAhB0B,EAAKC,OAAgB,MAAM,IAAIpB,EACnC,OAAOmB,EAAKE,OAAOH,MAAK,SAAAG,GAAI,MAAK,CAAED,OAAQD,EAAKC,OAAQC,eWYxDqM,CAAWrN,EAAOG,EAAQC,GACvBS,MAAK,YAAuB,IAApBE,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACf,GAAe,MAAXD,EAAgB,CAClB,GAAIiE,EAAWM,QAAS,CACtB,IAAM6H,EAAWrK,EAAMyG,KAAI,SAAA0D,GAAI,OAAI7F,SAAS6F,EAAK9L,MAAQiG,SAASjH,GAAUa,EAAOiM,KACnFP,EAASS,GACTjJ,EAAmB,CAAEF,KAAM,UAAW3E,QAAS,yCAGjD2J,GAAaA,QACR,IAAe,MAAXjI,EAWT,MAAM,IAAIrB,MAAMsB,EAAKgF,OAAL,gBAAuBjF,EAAvB,iCAAsDC,EAAKgF,QAA3D,gBAA+EjF,EAA/E,yBAVZiE,EAAWM,SACbpB,EAAmB,CACjBF,KAAM,QACN3E,QAAS2B,EAAKgF,OACdwD,OAAO,GAAD,OAAKxI,EAAKgF,OAAOmB,OAAjB,uDAIV+B,GAAyBA,QAK5BjD,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,OAEE,MAAbzH,EAAInC,MACb2E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,gHAGX4J,GAAcA,MAId/E,EAAmB,CACjBF,KAAM,QACN3E,QAAS,0IAGX+J,GAAyBA,UAG9B,CAACpJ,EAAO8C,EAAOoB,EAAoBwB,IAEhC4H,EAAqBnI,uBAAY,SAAChF,EAAQ4I,GAC9C,IAAQC,EAAqDD,EAArDC,UAAWG,EAA0CJ,EAA1CI,eAAgBC,EAA0BL,EAA1BK,uBX1DZ,SAACpJ,EAAOG,GACjC,IAAME,EAAG,UAAMnB,EAAN,kBAA8BiB,GAEvC,OAAOO,MAAML,EAAK,CAChBM,OAAQ,SACRC,QAASb,EAAWC,KAErBa,MAAK,SAAAC,GAMJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,OAAO0B,MW8CPyM,CAAYvN,EAAOG,GAChBU,MAAK,SAAAC,GAGJ,GAAqB,MAAhBA,EAAKC,QAAkC,MAAhBD,EAAKC,SAAmBiE,EAAWM,QAe7D,MAAM,IAAI5F,MAAJ,gBAAmBoB,EAAKC,OAAxB,kCAAwDZ,IAd9D,IAAMqN,EAAgB1K,EAAMiF,MAAK,SAAAkF,GAAI,OAAI7F,SAAS6F,EAAK9L,MAAQiG,SAASjH,MAClEsN,EAAY3K,EAAM0C,QAAQgI,GAE1BL,EAAQ,YAAOrK,GACrBqK,EAAS9E,OAAOoF,EAAW,GAE3Bf,EAASS,GACTjJ,EAAmB,CACjBF,KAAM,UACN3E,QAAS,gCAGX2J,GAAaA,OAKhB/C,OAAM,SAAAvE,GACY,MAAbA,EAAInC,KACNmG,EAAkBjD,EAAME,OAAO,WAC7BqC,EAAWM,SAAU,EACrB6D,GAAkBA,QAKhBnE,EAAWM,SACbpB,EAAmB,CACjBF,KAAM,QACN3E,QAAS,0IAIb+J,GAAyBA,UAG9B,CAACpJ,EAAO8C,EAAO4C,EAAmBxB,IAE/B0B,EAAK,aACT9C,QACA6J,mBACAK,oBACAI,oBACAE,sBACG9J,GAWL,OARAsC,qBAAU,WACRd,EAAWM,SAAWwH,MACrB,CAACA,IAEJhH,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,cAACiH,GAAarG,SAAd,CAAuBN,MAAOA,EAA9B,SACGrC,K,oBC5LQmK,GAxCE,WACf,MAA4D3G,IAApD/G,EAAR,EAAQA,MAAOoF,EAAf,EAAeA,oBAAqBF,EAApC,EAAoCA,oBAE9BF,EAAaC,kBAAO,GAEpB0I,EAAcxI,uBAAY,WAC1BnF,IAAUwC,GZiBO,SAAAxC,GACvB,IAAMK,EAAG,UAAMnB,EAAN,sBAET,OACEwB,MAAML,EAAK,CAAGO,QAASb,EAAWC,KAC/Ba,MAAK,SAAAC,GACJ,GAAoB,MAAhBA,EAAKC,OAAgB,MAAM,IAAI3B,EACnC,OAAO0B,KYvBT8M,CAAU5N,GACPa,MAAK,SAAAC,GAAI,OAAoB,MAAhBA,EAAKC,OAAiBD,EAAKE,OAAS,QACjDH,MAAK,SAAAgN,GACJ,GAAIA,EACF,MAAM,IAAInO,MAAM,0BAA2BmO,EAAK7H,OAAO,IAEvDZ,EAAoB3C,EAAMG,UAAUC,MACpCmC,EAAWM,SAAU,KAGxBW,OAAM,SAAAvE,GAGLG,GAAiB,kBAAMqD,YAG5B,CAAClF,EAAOkF,EAAqBE,IAOhC,OALAU,qBAAU,WAER,OADA6H,IACO,kBAAM3I,EAAWM,SAAU,KACjC,CAACtF,EAAO2N,IAGT,qBAAKG,UAAWC,KAAOC,KAAvB,SACE,sBAAKF,UAAWC,KAAOE,UAAvB,UACE,oBAAIH,UAAWC,KAAOvE,OAAtB,yCACA,cAAC,IAAD,CAAMsE,UAAWC,KAAOpL,MAAOwD,GAAI1D,EAAME,MAAzC,sC,wCCiBOuL,GAlDG,WAChB,MAKInH,IAJF/G,EADF,EACEA,MACA6F,EAFF,EAEEA,iBACAX,EAHF,EAGEA,oBACAE,EAJF,EAIEA,oBAGF,EAAkDrB,mBAAS,MAA3D,mBAAOoK,EAAP,KAA0BC,EAA1B,KACMpJ,EAAaC,kBAAO,GAsB1B,OAJAa,qBAAU,kBACR,kBAAOd,EAAWM,SAAU,MAI5B,sBAAKwI,UAAWC,KAAOC,KAAvB,UACGG,EACD,mBAAGL,UAAWC,KAAOM,aAArB,SAAoCF,IACpC,KACA,qBAAKL,UAAWC,KAAOE,UAAvB,SACE,cAAC,KAAD,CACEH,UAAWC,KAAOO,OAClBC,SfhDR,2EeiDQC,WAAW,qBACXxF,UA9BgB,SAAClI,GACvB,IAAQ2N,EAAY3N,EAAZ2N,QAEJA,IACF5I,EAAiB4I,GACjBrJ,EAAoB3C,EAAMG,UAAUC,MACpCmC,EAAWM,SAAU,IAyBjBoJ,UArBgB,SAAC5N,GAEvBd,GAASkF,IACTkJ,EAAqB,uDAmBfO,YAAW,Uf/CkD,gCe+ClD,OAAuBlM,EAAMG,UAAUC,cCrD/C+L,GAAS,CACpBC,mBAAoB,UACpBC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,eAAgB,UAChBC,gBAAiB,UACjBC,mBAAoB,UACpBC,iBAAkB,UAClBC,mBAAoB,UACpBC,kBAAmB,UACnBC,YAAa,WAGFC,GAAO,CAClBX,mBAAoB,UACpBC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,eAAgB,UAChBC,gBAAiB,UACjBC,mBAAoB,UACpBC,iBAAkB,OAClBC,mBAAoB,OACpBC,kBAAmB,UACnBC,YAAa,WAGFE,GAAO,CAClBZ,mBAAoB,UACpBC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,eAAgB,UAChBC,gBAAiB,UACjBC,mBAAoB,UACpBC,iBAAkB,OAClBC,mBAAoB,OACpBC,kBAAmB,UACnBC,YAAa,WAGFG,GAAQ,CACnBb,mBAAoB,UACpBC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,eAAgB,UAChBC,gBAAiB,UACjBC,mBAAoB,UACpBC,iBAAkB,OAClBC,mBAAoB,OACpBC,kBAAmB,UACnBC,YAAa,WAGFI,GAAO,CAClBd,mBAAoB,UACpBC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,eAAgB,UAChBC,gBAAiB,UACjBC,mBAAoB,UACpBC,iBAAkB,UAClBC,mBAAoB,UACpBC,kBAAmB,UACnBC,YAAa,WAWAK,GARM,CACnBhB,GACAY,GACAC,GACAC,GACAC,IC3Ea,OAA0B,uC,oBCqC1BE,GAhCQ,SAAC,GAAiC,IAAhC/B,EAA+B,EAA/BA,UAAWgC,EAAoB,EAApBA,eAC5B9K,EAAaC,kBAAO,GAY1B,OAJAa,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,MAI3B,qBAAKwI,UAAWA,EAAhB,SACE,wBAAQA,UAAWC,KAAOO,OAAQyB,QAZb,SAAAC,GACvBA,EAAEC,iBAEFH,GAAe,WAAQ9K,EAAWM,SAAU,MAS1C,SACE,qBAAKwI,UAAWC,KAAOzN,KAAvB,SACE,sBAAKwN,UAAWC,KAAOmC,aAAvB,UACE,qBAAKC,IAAKC,GAAMC,IAAI,gBADtB,gCCtBK,OAA0B,4C,oBC0D1BC,GAlDS,WACtB,MAGIvJ,IAFFtC,EADF,EACEA,YACAiB,EAFF,EAEEA,kBAGF,EAA8C3B,oBAAS,GAAvD,mBAAOwM,EAAP,KAAwBC,EAAxB,KACMxL,EAAaC,kBAAO,GAEpB6K,EAAiB3K,uBAAY,WAAsB,IAArBQ,EAAoB,uDAAT,KAC7C6K,GAAmB,GAEnB9K,EAAkBjD,EAAMC,MAAM,WAC5BiD,GAAYA,IACZX,EAAWM,SAAU,OAEtB,CAACI,IAMJ,OAJAI,qBAAU,WACR,OAAO,kBAAOd,EAAWM,SAAU,KAClC,IAGD,qBAAKwI,UAAWC,KAAOC,KAAvB,SACE,sBAAKF,UAAWC,KAAO0C,IAAvB,UACE,sBAAM3C,UAAWC,KAAO2C,gBAAxB,SACE,qBAAI5C,UAAWC,KAAOvE,OAAtB,UACE,eAAC,IAAD,CAAMsE,UAAWC,KAAO4C,gBAAiBxK,GAAI1D,EAAMG,UAAUC,KAA7D,6BAAmF,oBAAIiL,UAAWC,KAAO6C,KAAzG,iBACA,cAAC,IAAD,CAAM9C,UAAWC,KAAO8C,gBAAiB1K,GAAI1D,EAAMG,UAAUC,KAA7D,2BAGH4B,EACD,yBAAQqJ,UAAWC,KAAO+C,QAASf,QAAS,kBAAMS,GAAoBD,IAAtE,UACE,sBAAKzC,UAAWC,KAAOgD,YAAvB,UACE,mBAAGjD,UAAWC,KAAOiD,QAArB,SAA+BvM,EAAYjF,OAC3C,mBAAGsO,UAAWC,KAAOkD,WAArB,SAAkCxM,EAAYyM,WAEhD,qBAAKpD,UAAWC,KAAOoD,OAAQhB,IAAK1L,EAAY2M,WAAaC,GAAiBhB,IAAI,cAAciB,eAAe,mBAEjH,KAEA,cAAC,GAAD,CACExD,UAAWyC,EAAkBxC,KAAOwD,eAAiBxD,KAAOyD,OAC5D1B,eAAgBA,U,iECNX2B,GA7Ba,SAAC,GAMtB,IALLjS,EAKI,EALJA,KACAsO,EAII,EAJJA,UACAiC,EAGI,EAHJA,QACA2B,EAEI,EAFJA,UACAC,EACI,EADJA,aAEA,OACE,oBACE7D,UAAW8D,KAAW7D,KAAOC,KAAMF,GACnCiC,QAASA,EACT2B,UAAWA,EACXG,KAAK,SACLC,SAAU,EACV,gBAAeH,EANjB,SAQGnS,EAAK2H,OAAS,GAAd,UAAsB3H,EAAKuS,UAAU,EAAG,IAAxC,OAAmDvS,K,oBCiM3CwS,GA7MO,WACpB,IAAMC,EAAUC,cACVpL,EAAcL,IAEZrC,EAAoB2C,IAApB3C,gBACR,EAAuD4C,KAA/ClE,EAAR,EAAQA,MAAO6J,EAAf,EAAeA,iBAAkBK,EAAjC,EAAiCA,kBAEjC,EAAoCjJ,mBAAS,MAA7C,mBAAOoO,EAAP,KAAmBC,EAAnB,KACA,EAAgDrO,oBAAS,GAAzD,mBAAOsO,EAAP,KAAyBC,EAAzB,KACA,EAAoCvO,mBAAS,IAA7C,mBAAOwO,EAAP,KAAmBC,EAAnB,KAEMC,EAAexN,iBAAO,MAEtByN,EAAiB,kBAAMJ,GAAoB,IAC3CK,EAAmBxN,uBAAY,kBAAMmN,GAAoB,KAAQ,CAACA,IAGlEM,EAAY,CAChB,4BAA6BnD,GAAKZ,mBAClC,uBAAwBY,GAAKR,eAC7B,sBAAuBQ,GAAKL,iBAC5B,wBAAyBK,GAAKF,aAG1BsD,EAAa1N,uBAAY,SAAA8H,GAC7BmF,EAAcnF,GACduF,EAAcvF,EAAKzN,MAEnB,IAAMsT,EAAS,IAAIpM,gBAAJ,kBAA+BuG,EAAK9L,KACnD8Q,EAAQc,KAAK,CAAEpM,OAAQmM,EAAOE,aAE9BL,MACC,CAACV,EAASU,IAEPM,EAAe,SAAA9R,GACnB,QAAIgR,IAAerP,EAAMqE,UAElBgL,EAAaA,EAAWhR,KAAOA,EAAKA,IAAO2B,EAAM,GAAG3B,KAmD7D,OA9CA2E,qBAAU,WACR,IAAM3F,EAASiH,SAASN,EAAYO,IAAI,YAExC,GAAIvE,EAAMqE,QAAUhH,EAAQ,CAC1B,GAAIgS,GAAcA,EAAWhR,KAAOhB,EAAQ,OAC5C,IAAM8M,EAAO9M,EAAS2C,EAAMiF,MAAK,SAAAkF,GAAI,OAAIA,EAAK9L,KAAOhB,KAAU2C,EAAM,GAErE+P,EAAW5F,GAAQnK,EAAM,SAChBA,EAAMqE,SAAWgL,GAC1BU,EAAW/P,EAAM,MAElB,CAAC+P,EAAYV,EAAYrP,EAAOgE,IAEnChB,qBAAU,WACR,IAAMoN,EAAgC,SAAAlD,GACpC,GAAIyC,EAAanN,UAAY0K,EAAEmD,gBAAkBV,EAAanN,QAAQ8N,SAASpD,EAAEmD,eAAgB,CAE/FR,IAIA,IAAM1F,EAAOnK,EAAMiF,MAAK,SAAAsL,GAAC,OAAIA,EAAE7T,KAAK0I,gBAAkBqK,EAAWrK,iBAEjE,GAAI+E,EAAM,CAGRmF,EAAcnF,GACduF,EAAcvF,EAAKzN,MAEnB,IAAMsT,EAAS,IAAIpM,gBAAJ,kBAA+BuG,EAAK9L,KACnD8Q,EAAQc,KAAK,CAAEpM,OAAQmM,EAAOE,kBAI9Bb,GAAcK,EAAcL,EAAW3S,QAO7C,OAFA8T,SAASC,iBAAiB,WAAYL,GAE/B,WACLI,SAASE,oBAAoB,WAAYN,MAE1C,CAACpQ,EAAOsP,EAAeD,EAAYK,EAAeD,EAAYN,EAASU,IAGxE,sBAAKc,IAAKhB,EAAc3E,UAAWC,KAAOC,KAAM0F,MAAOd,EAAW,cAAY,iBAA9E,UACE,sBACE9E,UAAWC,KAAOvE,OAClBqI,KAAK,WACL,gBAAc,UACd,YAAU,eACV,gBAAc,eACd,gBAAeQ,EANjB,UAQE,uBACEvE,UAAW8D,KAAW7D,KAAO4F,MAAO,aACpC3P,KAAK,OACL4P,SAA+B,SAArBjH,EACV/G,MAAO2M,EACPsB,SA/DY,SAAA7D,GAAC,OAAIwC,EAAcxC,EAAE8D,cAAclO,QAgE/CmO,YAAY,qBACZ,oBAAkB,OAClB,kBAAgB,EAChB,gBAAc,eACdC,QAAStB,EACT3C,QAAS2C,EACThB,UAAW,SAAA1B,GACT,GAAc,UAAVA,EAAEiE,IAAiB,CACrB,IAAMhH,EAAOnK,EAAMiF,MAAK,SAAAsL,GAAC,OAAIA,EAAE7T,KAAK0I,gBAAkB8H,EAAEkE,OAAOtO,MAAMsC,iBAErE,GAAI+E,EACF4F,EAAW5F,QAwBXD,EAAkB,CAAExN,KAAM+S,GAtBR,CAOhBvJ,UAAW,WACTiJ,EAAQc,KAAK,CAAEpM,OAAQ,KACvByL,EAAc,MACdpC,EAAEkE,OAAOC,QAEXjL,sBAAuB,WACrB9E,GAAgB,GAChB4L,EAAEkE,OAAOC,QAEX/K,sBAAuB,WACrBhF,GAAgB,GAChB4L,EAAEkE,OAAOC,eAMV,GAAc,YAAVnE,EAAEiE,IAAmB,CAC9BjE,EAAEC,iBACF,IAAMmE,EAAad,SAASe,uBAAuB,aACnDD,EAAWA,EAAWjN,OAAS,GAAGmN,YACf,cAAVtE,EAAEiE,KACXjE,EAAEC,iBACFqD,SAASe,uBAAuB,aAAa,GAAGC,SAC7B,WAAVtE,EAAEiE,KACXtB,OAIN,wBACE7E,UAAWC,KAAOwG,QAClBxE,QA5Ie,kBAAMuC,GAAqBD,IA6I1CX,UAAW,SAAA1B,GACK,cAAVA,EAAEiE,MACJjE,EAAEC,iBACFqD,SAASe,uBAAuB,aAAa,GAAGC,UAGpDV,SAA+B,SAArBjH,EACV,cAAY,yBAVd,SAYE,cAAC,KAAD,CAAiBmB,UAAWC,KAAOyG,GAAIpE,KAAMqE,YAGjD,oBACEtT,GAAG,eACH2M,UAAW8D,KAAW7D,KAAO2G,SAAR,gBAAqB3G,KAAOyD,QAAUa,IAAqBvP,EAAMqE,SACtF0K,KAAK,UAHP,SAKG/O,EAAMyG,KAAI,WAAeb,GAAW,IAAvBvH,EAAsB,EAAtBA,GAAI3B,EAAkB,EAAlBA,KAChB,OACE,cAAC,GAAD,CACEsO,UAAU,YACViC,QAAS,kBAAM8C,EAAW,CAAE1R,KAAI3B,UAChCkS,UAAW,SAAA1B,GACT,GAAc,UAAVA,EAAEiE,KAA6B,MAAVjE,EAAEiE,IACzBpB,EAAW,CAAE1R,KAAI3B,cACZ,GAAc,YAAVwQ,EAAEiE,IAAmB,CAC9BjE,EAAEC,iBACF,IAAMmE,EAAU,YAAOd,SAASe,uBAAuB,cACjD3L,EAAQ0L,EAAW5O,QAAQwK,EAAEkE,QACnCE,EAAW1L,EAAQ,GAAG4L,aACjB,GAAc,cAAVtE,EAAEiE,IAAqB,CAChCjE,EAAEC,iBACF,IAAMmE,EAAU,YAAOd,SAASe,uBAAuB,cACjD3L,EAAQ0L,EAAW5O,QAAQwK,EAAEkE,QAEnCE,EADkB1L,EAAQ0L,EAAWjN,OAAS,EAAIuB,EAAQ,EAAI,GACxC4L,UAI1B3C,aAAcsB,EAAa9R,GAC3B3B,KAAMA,GArBR,UAmBUA,EAAK0I,cAAcyM,QAAQ,IAAK,KAnB1C,YAmBkDxT,a,oBCtL/CyT,GA1BS,SAAC,GAAoD,IAAlDvL,EAAiD,EAAjDA,MAAiD,IAA1CwL,yBAA0C,SAAftR,EAAe,EAAfA,SAC3D,OACE,sBAAKuK,UAAWC,KAAOC,KAAvB,UACE,sBAAKF,UAAWC,KAAOE,UAAvB,UACG5E,EACD,sBAAKyE,UAAWC,KAAO2C,gBAAvB,UACE,sBAAK5C,UAAWC,KAAO+G,eAAvB,UACE,oBAAIhH,UAAWC,KAAO1E,MAAtB,SAA8BA,IAC7BwL,GAAqB,cAAC,GAAD,OAExB,oBAAI/G,UAAWC,KAAOgH,QAExB,KACCxR,KAEH,cAAC,GAAD,Q,oBCOSyR,GAZC,SAAC,GAAD,IAAGlH,EAAH,EAAGA,UAAH,IAAc9J,YAAd,MAAqB,UAArB,EAAgCiR,EAAhC,EAAgCA,MAAOC,EAAvC,EAAuCA,OAAQC,EAA/C,EAA+CA,MAA/C,OACd,cAAC,KAAD,CAAcrH,UAAWA,EAAW9J,KAAMA,EAAMiR,MAAOA,EAAOC,OAAQA,EAAQC,MAAOA,K,oBCUxEC,GArBQ,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,KAAM9R,EAAe,EAAfA,SAC9B,EAAgE8I,IAE1DiJ,EAAY,CAChB,qBAHF,EAAQzG,mBAIN,gBAJF,EAA4BI,eAK1B,eALF,EAA4CG,kBAQ5C,OACE,cAAC,IAAD,CAAMtB,UAAWC,KAAOC,KAAM7H,GAAIkP,EAAM3B,MAAO4B,EAA/C,SACG/R,K,oBC2BQgS,GAtCU,SAAC,GAAD,IAAGC,EAAH,EAAGA,UAAH,OACvB,qBAAK1H,UAAWC,KAAOC,KAAvB,SACGwH,EAAUjM,KAAI,gBAAG/C,EAAH,EAAGA,YAAa6O,EAAhB,EAAgBA,KAAM9R,EAAtB,EAAsBA,SAAU0Q,EAAhC,EAAgCA,IAAhC,OACb,qBAAenG,UAAWC,KAAO0H,KAAjC,SACE,cAAC,EAAD,CAAejP,YAAaA,EAA5B,SACE,cAAC,GAAD,CACE6O,KAAMA,EACN9R,SAAUA,OAJN0Q,S,oBCOVyB,GAAQ,CACZ,CACElP,YAAaoI,GACbyG,KAAM5S,EAAMG,UAAUE,MACtBS,SAAU,aACV0Q,IAAK,cAEP,CACEzN,YAAagJ,GACb6F,KAAM5S,EAAMG,UAAUG,cACtBQ,SAAU,sBACV0Q,IAAK,uBAEP,CACEzN,YAAaiJ,GACb4F,KAAM5S,EAAMG,UAAUI,UACtBO,SAAU,iBACV0Q,IAAK,kBAEP,CACEzN,YAAakJ,GACb2F,KAAM,IACN9R,SAAU,aACV0Q,IAAK,cAEP,CACEzN,YAAamJ,GACb0F,KAAM,IACN9R,SAAU,aACV0Q,IAAK,eA2BM0B,GAvBO,WACpB,MAAyD5O,IAAjD/G,EAAR,EAAQA,MAAO8E,EAAf,EAAeA,iBAAkBM,EAAjC,EAAiCA,oBAC3BJ,EAAaC,kBAAO,GAW1B,OATAa,qBAAU,WAMR,OALK9F,GAAUwC,IACb4C,EAAoB3C,EAAME,OAC1BqC,EAAWM,SAAU,GAGhB,kBAAMN,EAAWM,SAAU,KACjC,CAACtF,EAAOoF,IAGT,cAAC,GAAD,UACwB,SAArBN,EAA8B,qBAAKgJ,UAAWC,KAAOC,KAAvB,SAC7B,cAAC,GAAD,CAAkBwH,UAAWE,OAE/B,cAAC,GAAD,CAAS5H,UAAWC,KAAO6H,QAAS5R,KAAK,UAAUiR,MAAOrG,GAAOC,mBAAoBqG,OAAO,MAAMC,MAAM,W,oBCzDxGU,IAAM,oBALI,UAMH,WADD,eAJC,OAMH,WAFE,eAHE,QAMH,WAHC,eAFI,UAMH,WAJD,GAiCGC,GA1BM,WACnB,MAA2D/O,IAAnD5C,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAAiBH,EAAvC,EAAuCA,gBAE/BD,EAA0BC,EAA1BD,KAAMwF,EAAoBvF,EAApBuF,OAAQnK,EAAY4E,EAAZ5E,QAEhBuT,EAAY,CAAE,eAAgBiD,GAAO7R,IAU3C,OARA8B,qBAAU,WACJ3B,GACF4R,YAAW,WACT3R,GAAgB,KACf,OAEJ,CAACD,EAAcC,IAGhB,sBAAK0J,UAAW8D,KAAW7D,KAAOC,KAAR,gBAAiBD,KAAOyD,QAAUrN,IAAiBuP,MAAOd,EAApF,UACGpJ,GAAU,mBAAGsE,UAAWC,KAAOvE,OAArB,SAA8BA,IACrB,kBAAZnK,EAAuBA,EAC/B,oBAAIyO,UAAWC,KAAOiI,YAAtB,SACG3W,EAAQkK,KAAI,SAAC2C,EAAKxD,GAAN,OAAgB,oBAA6BoF,UAAWC,KAAO7B,IAA/C,SAAqDA,GAArD,kBAAoBxD,a,+CCiB1CuN,GAjDD,SAAC,GAAmC,IAAjC1S,EAAgC,EAAhCA,SAAU8F,EAAsB,EAAtBA,MAAO6M,EAAe,EAAfA,SACxB1R,EAAoBuC,IAApBvC,gBAEF2R,EAAalR,iBAAO,MACpBD,EAAaC,kBAAO,GAEpBmR,EAAqBjR,uBAAY,SAAAkR,GAAE,OACvCF,EAAW7Q,UAAY6Q,EAAW7Q,UAAY+Q,GAAMF,EAAW7Q,QAAQ8N,SAASiD,MAC/E,IAEGC,EAAOnR,uBAAY,SAAA6K,IACP,UAAXA,EAAEhM,OAAqBoS,EAAmBpG,EAAEkE,SAAwB,YAAXlE,EAAEhM,MAAgC,WAAVgM,EAAEiE,OACtFzP,GAAgB,GAChBQ,EAAWM,SAAU,KAEtB,CAAC8Q,EAAoB5R,IAiBxB,OAfAsB,qBAAU,WAGR,OAFA/D,OAAOwR,iBAAiB,UAAW+C,GAE5B,kBAAMvU,OAAOyR,oBAAoB,UAAW8C,MAClD,CAACA,IAEJxQ,qBAAU,WAGR,OAFAwN,SAASiD,qBAAqB,QAAQ,GAAGC,UAAUC,IAAI,cAEhD,WACLnD,SAASiD,qBAAqB,QAAQ,GAAGC,UAAUE,OAAO,cAC1D1R,EAAWM,SAAU,KAEtB,IAGD,qBAAKuM,KAAK,SAAS/D,UAAWC,KAAOC,KAAM+B,QAASuG,EAApD,SACE,sBAAK7C,IAAK0C,EAAYrI,UAAWC,KAAO4I,QAAxC,UACE,oBAAI7I,UAAWC,KAAO1E,MAAtB,SAA8BA,IAC7B6M,GAAY,mBAAGpI,UAAWC,KAAOmI,SAArB,SAAgCA,IAC5C3S,Q,wBC/BMqT,GARG,SAAAC,GAChB,OAAO,gBAAGxN,EAAH,EAAGA,MAAH,IAAU6M,gBAAV,MAAqB,KAArB,EAA8BY,EAA9B,0BACL,cAAC,GAAD,CAAOzN,MAAOA,EAAO6M,SAAUA,EAA/B,SACE,cAACW,EAAD,eAAsBC,Q,8CC8FbC,GA/FG,SAAC,GAMZ,IALLC,EAKI,EALJA,UACAC,EAII,EAJJA,YACAC,EAGI,EAHJA,SACAC,EAEI,EAFJA,OAEI,IADJC,mBACI,MADU,KACV,EACEpS,EAAaC,kBAAO,GACpBoS,EAAUpS,iBAAO,MACjBqS,EAAWrS,iBAAO,MAIlBsS,EAAWtS,iBAAOmS,GAAexH,GAAa4H,KAAKC,MAAMD,KAAKE,SAAW9H,GAAazI,UAEtFyL,EAAY,CAChB,4BAA6B2E,EAASjS,QAAQuJ,mBAC9C,sBAAuB0I,EAASjS,QAAQ8J,iBACxC,uBAAwBmI,EAASjS,QAAQ2J,eACzC,wBAAyBsI,EAASjS,QAAQiK,aAS5C,OANAzJ,qBAAU,WAGR,OAFAwR,EAAShS,SAAWgS,EAAShS,QAAQgP,QAE9B,kBAAMtP,EAAWM,SAAU,KACjC,IAGD,uBACEmO,IAAK4D,EACLvJ,UAAWC,KAAOC,KAClB0F,MAAOd,EACPsE,SAAUA,EACV,wBAAgBF,EAAhB,SALF,UAOGG,EAAO5N,KAAI,WAA2Cb,GAAW,IAA9CiP,EAA6C,EAAlDC,IAAUC,EAAwC,EAAxCA,MAAOrY,EAAiC,EAAjCA,KAASsY,EAAwB,mBAG/D,OAFc,IAAVpP,IAAaoP,EAAU,IAAUR,GAGnC,2BAAuCxJ,UAAWC,KAAOgK,SAAzD,UACE,uBAAOjK,UAAWC,KAAO8J,MAAOG,QAASxY,EAAzC,SAAgDqY,IAChD,cAACF,EAAD,aACE7J,UAAWC,KAAO4F,MAClBnU,KAAMA,GACFsY,MALR,UAAkBd,EAAlB,YAA+BxX,OAUnC,wBAAQsO,UAAWC,KAAOkK,OAAQjU,KAAK,SAAvC,SAAiDiT,QChDjDiB,GAAa,CACjB,CACE1Y,KAAM,OACNoY,IAAK,QACLC,MAAO,OACP7T,KAAM,OACN+P,YAAa,OACboE,UAAW,OACXC,QAAS,+BACT/O,MAAO,2FAET,CACE7J,KAAM,cACNoY,IAAK,QACLC,MAAO,cACP7T,KAAM,OACN+P,YAAa,cACboE,UAAW,SAyFAE,GArFO,SAAC,GAAsC,IAApCrU,EAAmC,EAAnCA,KAAmC,IAA7BsU,yBAA6B,MAAT,GAAS,EAC1D,EAA6CvR,IAArC3C,EAAR,EAAQA,gBAAiBI,EAAzB,EAAyBA,gBACzB,EAAiDwC,KAAzCgG,EAAR,EAAQA,kBAAmBI,EAA3B,EAA2BA,kBAErB6E,EAAUC,cAEVlN,EAAaC,kBAAO,GAoDpBkS,EAASe,GAAW3O,KAAI,SAAAgP,GAAK,OACjCD,EAAkBC,EAAM/Y,MAAxB,aAAkCgZ,aAAcF,EAAkBC,EAAM/Y,OAAU+Y,GAAUA,KAO9F,OAJAzS,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,cAAC,GAAD,CACE0R,UAAU,OACVC,YAAsB,WAATjT,EAAoB,cAAgB,cACjDkT,SA9Da,SAAAlH,GACfA,EAAEC,iBAEF7L,GAAgB,GAEhB,IAAMqU,EAAyB,WAC7BrU,GAAgB,GAChBI,GAAgB,GAChBQ,EAAWM,SAAU,GAGjByD,EAAY,CAChBG,sBAAuBuP,EACvBrP,sBAAuBqP,EACvBxP,WAAYwP,EACZtP,eAAgB,kBAAMnE,EAAWM,SAAU,IAGvClF,EAAQ,CACZZ,KAAMwQ,EAAEkE,OAAOwE,SAASlZ,KAAKoG,MAC7BqC,YAAa+H,EAAEkE,OAAOwE,SAASzQ,YAAYrC,OAG7C,IAAK,IAAM+S,KAAQvY,EACbA,EAAMuY,KAAUL,EAAkBK,WAAcvY,EAAMuY,GAG5D,GAAa,WAAT3U,EAAmB,CAarB+E,EAAUC,UAZQ,WAIZ9F,EAAmBsC,QAAQyM,EAAQ2G,SAASnV,WAAa,EAC3DgV,KAEAjU,GAAgB,GAChBQ,EAAWM,SAAU,IAMzB0H,EAAkB5M,EAAO2I,QAEzBA,EAAUC,UAAYyP,EAEtBrL,EAAkBkL,EAAkBnX,GAAIf,EAAO2I,IAiB/CoO,OAAQA,K,oBCyBC0B,GA9GF,SAAC,GAAmC,IAAjC1Y,EAAgC,EAAhCA,OAAQX,EAAwB,EAAxBA,KAAMyI,EAAkB,EAAlBA,YAC5B,EAAsClE,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KAEA,EAKIhS,IAJF7C,EADF,EACEA,mBACAE,EAFF,EAEEA,gBACAI,EAHF,EAGEA,gBACAF,EAJF,EAIEA,mBAEMgJ,EAAuBtG,KAAvBsG,mBAEFtI,EAAaC,kBAAO,GACpB+T,EAAW/T,iBAAO,MAClBgU,EAAUhU,iBAAO,MACjBiU,EAAajU,iBAAO,MAwD1B,OAJAa,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,sBAAKwI,UAAWC,KAAOC,KAAvB,UACE,sBAAKF,UAAWC,KAAOvE,OAAQuG,QAtDT,SAAAC,GAFN,IAACyD,EAAK4C,EAGnBrG,IAHcyD,EAGIuF,EAHC3C,EAGSrG,EAAEkE,OAHJT,EAAInO,UAAYmO,EAAInO,UAAY+Q,GAAM5C,EAAInO,QAAQ8N,SAASiD,MAG9C0C,EAAeI,KAAKC,MAqD9D,UACE,uBAAM3F,IAAKuF,EAAUlL,UAAWC,KAAOsL,UAAvC,UACE,wBACE5F,IAAKyF,EACLpL,UAAWC,KAAOqC,KAClBL,QAtCU,SAAAC,GAClB5L,GAAgB,GAEErC,OAAOuX,QA5CA,iIAyDvBhM,EAAmBnN,EALD,CAChB6I,UAP2B,WAC7B5E,GAAgB,GAChBY,EAAWM,SAAU,GAMnB8D,sBAAuB,kBAAMpE,EAAWM,SAAWlB,GAAgB,OAKrEF,EAAmB,CACjBF,KAAM,OACN3E,QAAS,+BAGX+E,GAAgB,KAgBV,kCAJF,SAME,cAAC,KAAD,CAAiB0J,UAAWC,KAAOyG,GAAIpE,KAAMmJ,SAE/C,wBACE9F,IAAKwF,EACLnL,UAAWC,KAAOqC,KAClBL,QA/DW,WACnB3L,GAAgB,GAEhB,IAAMoV,EAAa,CAAErY,GAAIhB,EAAQX,OAAMyI,eAEjCwR,EAAiB7C,GAAUyB,IACjC/T,EAAmB,CACjBqT,IAAK8B,EACLC,MAAO,CACLrQ,MAAO,YACPrF,KAAM,OACNsU,kBAAmBkB,KAGvBhV,GAAgB,IAkDR,+BAJF,SAME,cAAC,KAAD,CAAiBsJ,UAAWC,KAAOyG,GAAIpE,KAAMuJ,YAGjD,oBAAI7L,UAAWC,KAAOvO,KAAtB,SAA6BA,OAE/B,cAAC,KAAD,CAAasZ,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,qBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,SACE,mBAAG/L,UAAWC,KAAO9F,YAArB,SAAmCA,GAnGnB,2C,oBC2Fb8R,GA9FQ,SAAC,GAAkB,IAAhBnG,EAAe,EAAfA,SAChBxP,EAAoB2C,IAApB3C,gBACA4I,EAAsBhG,KAAtBgG,kBAER,EAAsCjJ,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KAEM1B,EAAUpS,iBAAO,MACjBqS,EAAWrS,iBAAO,MAClBD,EAAaC,kBAAO,GAEpB2N,EAAY,CAChB,iBAAkBnD,GAAKX,gBACvB,sBAAuBW,GAAKL,iBAC5B,wBAAyBK,GAAKF,YAC9B,uBAAwBE,GAAKP,iBAGzB8K,EAAa,kBAAMhV,EAAWM,SAAWyT,EAAeI,KAAKC,MAE7DlM,EAAa,SAAA8C,GACjBA,EAAEC,iBAEF7L,GAAgB,GAEhB,IAAMhE,EAAQ,CACZZ,KAAMwQ,EAAEkE,OAAOwE,SAASlZ,KAAKoG,MAC7BqC,YAAa+H,EAAEkE,OAAOwE,SAASzQ,YAAYrC,OAGvCqU,EAAwB,WAC5B7V,GAAgB,GAChBiT,EAAQ/R,SAAW+R,EAAQ/R,QAAQ4U,QACnCF,KAUFhN,EAAkB5M,EAPA,CAChB4I,UAAWiR,EACX/Q,sBAAuB,kBAAM9E,GAAgB,IAC7CgF,sBAAuB6Q,EACvB9Q,eAAgB,kBAAMnE,EAAWM,SAAU,MAU/C,OAJAQ,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,sBAAKwI,UAAWC,KAAOC,KAAM0F,MAAOd,EAApC,UACE,oBAAI9E,UAAWC,KAAOoM,mBAAoBpK,QAASiK,EAAnD,4BACA,cAAC,KAAD,CAAalB,YAAaA,EAAasB,WAAY,kBAAM9C,EAAShS,QAAQgP,SAASsF,WAAS,EAA5F,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OAEC,aADA,CACA,OAAKpG,IAAKoG,EAAV,SAEE,uBAAMpG,IAAK4D,EAASvJ,UAAWC,KAAOsM,KAAM,cAAY,mBAAmBnD,SAAUhK,EAArF,UACE,0BAAUY,UAAW8D,KAAW7D,KAAOgK,SAAR,gBAAqBhK,KAAOuM,iBAAmB1G,IAAaA,SAAUA,EAArG,SACE,uBACEH,IAAK6D,EACLxJ,UAAWC,KAAO4F,MAClB3P,KAAK,OACLxE,KAAK,OACLuU,YAAY,OACZ,aAAW,OACXqE,QAAQ,+BACR/O,MAAM,8FAGV,0BAAUyE,UAAW8D,KAAW7D,KAAOgK,SAAR,gBAAqBhK,KAAOuM,iBAAmB1G,IAAaA,SAAUA,EAArG,SACE,uBACE9F,UAAWC,KAAO4F,MAClB3P,KAAK,OACLxE,KAAK,cACLuU,YAAY,cACZ,aAAW,kBAGf,wBAAQjG,UAAW8D,KAAW7D,KAAOO,OAAR,gBAAmBP,KAAOwM,eAAiB3G,IAAa5P,KAAK,SAAS4P,SAAUA,EAA7G,gC,oBCvEC4G,GAZM,SAAC,GAAD,IAAGxD,EAAH,EAAGA,UAAH,OACnB,qBAAKlJ,UAAWC,KAAOC,KAAvB,SACE,oBAAGF,UAAWC,KAAO0M,KAArB,6CACmCzD,EADnC,oD,oBC2BW0D,GArBG,WAChB,MAA0C3T,IAAlCxC,EAAR,EAAQA,aAAcF,EAAtB,EAAsBA,gBACtB,EAAoC2C,KAA5BlE,EAAR,EAAQA,MAAO6J,EAAf,EAAeA,iBAEf,OACE,eAAC,GAAD,CAAiBtD,MAAM,aAAvB,UACG9E,GAAgB,cAACF,EAAgBsT,IAAjB,eAAyBtT,EAAgBqV,QAC1D,sBAAK5L,UAAWC,KAAOC,KAAvB,UACE,cAAC,GAAD,IACClL,GAA0B,IAAjBA,EAAMqE,QAAgBwF,IAAqBxJ,GAAQ,mBAAG2K,UAAWC,KAAO4M,QAArB,gCAC5DhO,IAAqBxJ,GAAQ,cAAC,GAAD,CAAgByQ,SAAUjH,IAAqBvG,GAAWuG,IAAqBtG,IAC5GvD,GAASA,EAAMqE,OAAS,GAAKwF,IAAqBxJ,GAAQ,qBAAK2K,UAAWC,KAAOjL,MAAvB,SACxDA,EAAMyG,KAAI,gBAAGpI,EAAH,EAAGA,GAAI3B,EAAP,EAAOA,KAAMyI,EAAb,EAAaA,YAAb,OAA+B,cAAC,GAAD,CAAiB9H,OAAQgB,EAAI3B,KAAMA,EAAMyI,YAAaA,GAA3CzI,QAEtDmN,IAAqBvG,GAAW,cAAC,GAAD,CAASpC,KAAK,UAAU8J,UAAWC,KAAO6H,QAASX,MAAOrG,GAAOC,mBAAoBqG,OAAO,MAAMC,MAAM,QACxIxI,IAAqBtG,GAAS,cAAC,GAAD,CAAc2Q,UAAU,iB,oBC4ChD4D,GAhEiB,SAAC,GAAkB,IAAhBhH,EAAe,EAAfA,SACzBxP,EAAoB2C,IAApB3C,gBAEAmH,EAA+BiB,KAA/BjB,2BAER,EAAoCxH,mBAAS,IAA7C,mBAAOwO,EAAP,KAAmBC,EAAnB,KAEMI,EAAY,CAChB,iBAAkBnD,GAAKX,gBACvB,sBAAuBW,GAAKL,iBAC5B,wBAAyBK,GAAKF,YAC9B,uBAAwBE,GAAKP,iBA2B/B,OACE,qBAAKpB,UAAWC,KAAOC,KAAM0F,MAAOd,EAApC,SACE,sBAAM,cAAY,6BAA6BsE,SArBvB,SAAAlH,GAC1BA,EAAEC,iBACF7L,GAAgB,GAChB,IAAMiF,EAAQ2G,EAAEkE,OAAOwE,SAASrP,MAAMzD,MAEhCiV,EAAyB,WAC7BrI,EAAc,IACdpO,GAAgB,IASlBmH,EAA2BlC,EANT,CAChBL,UAAW6R,EACX5R,WAAY4R,EACZ3R,sBAAuB,kBAAM9E,GAAgB,IAC7CgF,sBAAuByR,KAOvB,SACE,2BAAU/M,UAAW8D,KAAW7D,KAAOgK,SAAR,gBAAqBhK,KAAOuM,iBAAmB1G,IAAaA,SAAUA,EAArG,UACE,uBACE9F,UAAWC,KAAO4F,MAClB3P,KAAK,OACLxE,KAAK,QACLuU,YAAY,QACZ,aAAW,QACXnO,MAAO2M,EACPsB,SAnCU,SAAA7D,GAClB,IAAM8K,EAAW9K,EAAE8D,cAAclO,MACjC4M,EAAcsI,IAkCN1C,QAAQ,+BACR/O,MAAM,6FAER,wBAAQyE,UAAW8D,KAAW7D,KAAOO,OAAR,gBAAmBP,KAAOwM,eAAiB3G,IAAa5P,KAAK,SAA1F,4BCrCJ+W,GAAkB,CACtB,IACA,KACA,MACA,MACA,MACA,MACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,OACA,OACA,KACA,UACA,UAkBaC,GAVG,SAAAP,GAChB,IAAKA,EAAM,MAAO,GAElB,IAAMQ,EAAQR,EAAKvS,cAAcgT,MAAM,KAEvC,OAAOD,EAAM1R,KAAI,SAAC4R,EAAMzS,GAAP,OACfqS,GAAgBvV,QAAQ2V,IAAS,IAA2C,IAAtC,CAAC,EAAGF,EAAM9T,QAAQ3B,QAAQkD,GAAgByS,EAXjE,SAAAA,GACjB,IAAMC,EAASD,EAAK,GAAGE,cACvB,MAAM,GAAN,OAAUD,GAAV,OAAmBD,EAAKG,MAAM,IAS2DC,CAAWJ,MACjGK,KAAK,MCpBKC,GAlCa,WAC1B,MAAoD1X,oBAAS,GAA7D,mBAAO2X,EAAP,KAA2BC,EAA3B,KACMlJ,EAAexN,iBAAO,MACtB2W,EAAa3W,iBAAO,MAGpB4W,EAAqB,SAAAC,GAAO,OAAIF,EAAWtW,SAAWsW,EAAWtW,QAAQ8N,SAAS0I,IAElFC,EAAgB,SAAA/L,GACN,WAAVA,EAAEiE,KACJ0H,GAAsB,IAIpBK,EAAqB,SAAAhM,GATE,IAAA8L,IAUD9L,EAAEkE,OAVUzB,EAAanN,SAAWmN,EAAanN,QAAQ8N,SAAS0I,IAUpDD,EAAmB7L,EAAEkE,QAElD2H,EAAmB7L,EAAEkE,SAC9ByH,GAAuBD,GAFvBC,GAAsB,IAe1B,OATA7V,qBAAU,WAGR,OAFAwN,SAASC,iBAAiB,UAAWwI,GAAe,GACpDzI,SAASC,iBAAiB,QAASyI,GAAoB,GAChD,WACL1I,SAASE,oBAAoB,UAAWuI,GAAe,GACvDzI,SAASE,oBAAoB,QAASwI,GAAoB,OAIvD,CAAEvJ,eAAcmJ,aAAYF,qBAAoBC,0B,SClB1CM,GAZC,SAAA/H,GACd,MAAwBnQ,qBAAxB,mBAAOmY,EAAP,KAAaC,EAAb,KAQA,OANAC,2BAAgB,WACdD,EAAQjI,EAAO5O,QAAQ+W,2BACtB,CAACnI,IAEJoI,aAAkBpI,GAAQ,SAACqI,GAAD,OAAWJ,EAAQI,EAAMC,gBAE5CN,G,oBCmFMO,GAvFM,SAAC,GAA4D,IAA1DpF,EAAyD,EAAzDA,QAASqF,EAAgD,EAAhDA,cAAe5O,EAAiC,EAAjCA,UAAWzE,EAAsB,EAAtBA,MAAO6N,EAAe,EAAfA,SAC1DyF,EAAoB,SAAClC,GACzB,IACMtO,EADSmH,SAASsJ,cAAc,UACfC,WAAW,MAElC1Q,EAAQ2Q,KAAO,yBAEf,IAAMC,EAAOC,GAAgBN,EAIvBO,EAA8C,IAAlC9Q,EAAQ+Q,YAAYzC,GAAMtF,MAE5C,OAAOqC,KAAK2F,IAAIF,EAAWF,IAG7B,EAAoChZ,mBAASsF,GAA7C,mBAAOkJ,EAAP,KAAmBC,EAAnB,KACA,EAAwCzO,mBAAS,MAAjD,mBAAOiZ,EAAP,KAAqBI,EAArB,KACA,EAAoCrZ,mBAAS,GAAD,OAAI4Y,EAAkBtT,GAAtB,OAA5C,mBAAOgU,EAAP,KAAmBC,EAAnB,KAEMtY,EAAaC,kBAAO,GACpBqS,EAAWrS,iBAAO,MAClBsY,EAAYtY,iBAAO,MAEzB,EAAmFoH,IAE7EuG,EAAY,CAChB,iBAHF,EAAQ/D,mBAIN,eAJF,EAA4BO,iBAK1B,iBALF,EAA8CG,YAM5C,qBANF,EAA2DP,qBA+B3D,OAdAlJ,qBAAU,WAGR,OAFAwR,EAAShS,QAAQgP,QAEV,kBAAMtP,EAAWM,SAAU,KACjC,IAEHQ,qBAAU,WACR,GAAKd,EAAWM,QAEhB,OAAKiY,EAAUjY,aAEf8X,EAAgBV,EAAgBa,EAAUjY,QAAQkY,aAFnBJ,EAAgBV,KAG9C,CAACA,IAGF,uBAAM5O,UAAW2P,KAAW3P,EAAWC,KAAOC,MAAO0F,MAAOd,EAAWa,IAAK4D,EAASH,SAAUA,EAA/F,UACE,uBACEpJ,UAAWC,KAAO4F,MAClB5D,QAAS,SAAAC,GAAC,OAAIA,EAAE0N,mBAChB7J,SA3BmB,SAAC7D,GACxB,GAAKhL,EAAWM,QAAhB,CAEA,IAAMwV,EAAW9K,EAAE8D,cAAclO,MACjC4M,EAAcsI,GACdwC,EAAc,GAAD,OAAIX,EAAkB7B,GAAtB,SAuBT9W,KAAK,OACLxE,KAAK,QACL,aAAW,QACXiU,IAAK6D,EACL5D,MAAO,CAACyB,MAAOkI,GACfzX,MAAO2M,EACP6F,QAAQ,+BACR/O,MAAM,6FAER,wBAAQyE,UAAWC,KAAOkK,OAAQxE,IAAK8J,EAAW/d,KAAK,SAASwE,KAAK,SAArE,SACE,cAAC,KAAD,CAAiB8J,UAAWC,KAAOyG,GAAIpE,KAAMuN,a,oBCpE/CC,GAAe,SAAAC,GACnB,QAAeC,IAAXD,GAAmC,OAAXA,GAA8B,KAAXA,EAAe,MAAO,IAErE,IAAME,EAAYC,OAAOH,GAEzB,OAAOE,EAAY,IAAM,EAAIA,EAAUE,QAAQ,GAAKF,EAAUE,QAAQ,IAwEzDC,GArEW,SAAC,GAOrB,EANJC,QAMI,EALJ3V,OAKK,IAJLP,EAII,EAJJA,YACAmW,EAGI,EAHJA,SACAC,EAEI,EAFJA,MACAC,EACI,EADJA,WAEA,EAAsCva,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KACA,EAAkChV,oBAAS,GAA3C,mBAAO6V,EAAP,KAAkB2E,EAAlB,KAEA,EAOIlS,IANFyC,EADF,EACEA,gBACAI,EAFF,EAEEA,gBAYIoG,EAAY,CAChB,iBAAkBxG,EAClB,qBAhBF,EAGEO,mBAcA,iBAjBF,EAIEE,YAcA,0BAlBF,EAKEP,oBAcA,oBAnBF,EAMEM,kBAcA,gBAAiBJ,GAGnB,OACE,sBAAKpB,UAAW8D,KAAW7D,KAAOC,KAAR,gBAAiBD,KAAO6L,UAAYA,IAAclG,MAAO4B,EAAnF,UACE,sBAAKxH,UAAWC,KAAOyQ,OAAQzO,QAhBb,SAAAC,GACpB+I,EAAeI,KAAKC,KACpBmF,GAAc3E,IAcZ,UACE,sBAAM9L,UAAWC,KAAOvE,OAAxB,SACE,oBAAIsE,UAAWC,KAAO9F,YAAtB,SAAoCA,MAEtC,sBAAM6F,UAAWC,KAAOqQ,SAAxB,SACE,qBAAKtQ,UAAWC,KAAO0Q,gBAAvB,SAAyCL,SAG7C,cAAC,KAAD,CAAatF,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,sBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,UACE,oBAAI/L,UAAWC,KAAO8J,MAAtB,0BACA,mBAAG/J,UAAWC,KAAOnI,MAArB,SAA6BgY,GAAaU,KAE1C,oBAAIxQ,UAAWC,KAAO8J,MAAtB,oBACA,mBAAG/J,UAAWC,KAAOnI,MAArB,SAA6ByY,GAAS,mC,oBCsCnCK,GArGqB,SAAC,GAAgB,IAAdxd,EAAa,EAAbA,OACrC,EAAsC6C,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KACA,EAAkChV,oBAAS,GAA3C,mBAAO6V,EAAP,KAAkB2E,EAAlB,KACQna,EAAoB2C,IAApB3C,gBACAyH,EAAmCW,KAAnCX,+BACR,EAOIQ,IANFyC,EADF,EACEA,gBACAI,EAFF,EAEEA,gBACAF,EAHF,EAGEA,oBACAO,EAJF,EAIEA,YACAF,EALF,EAKEA,mBACAC,EANF,EAMEA,kBAGI+H,EAAUpS,iBAAO,MAEjB2N,EAAY,CAChB,eAAgB9D,EAChB,gBAAiBI,EACjB,eAAgBF,EAChB,iBAAkBO,EAClB,oBAAqBF,EACrB,yBAA0BC,GAGtB0K,EAAa,WACjBjB,EAAeI,KAAKC,KACpBmF,GAAc3E,IAGV7N,EAA0B,SAAAiE,GAC9BA,EAAEC,iBAEF7L,GAAgB,GAEhB,IAAM6D,EAAc+H,EAAEkE,OAAOwE,SAASzQ,YAAYrC,MAC5CwY,EAAWhX,SAAS4I,EAAEkE,OAAOwE,SAAS0F,SAASxY,OAC/C+Y,EAAcX,OAAOhO,EAAEkE,OAAOwE,SAAS4F,WAAW1Y,OAClDyY,EAAQrO,EAAEkE,OAAOwE,SAAS2F,MAAMzY,MAGhCgZ,EAA6B,WACjCvH,EAAQ/R,QAAQ4U,QAChBF,IACA5V,GAAgB,IAUlByH,EAA+B3K,EAfjB,CAAE+G,cAAamW,WAAUO,cAAaN,SAQlC,CAChBrV,UAAW4V,EACX3V,WAAY2V,EACZ1V,sBAAuB,kBAAM9E,GAAgB,IAC7CgF,sBAAuBwV,KAM3B,OACE,sBAAK9Q,UAAW8D,KAAW7D,KAAOC,KAAR,gBAAiBD,KAAO6L,UAAYA,IAAclG,MAAOd,EAAnF,UACE,qBAAK9E,UAAWC,KAAO8Q,iBAAvB,SACE,wBAAQ/Q,UAAWC,KAAO+Q,cAAe/O,QAASiK,EAAlD,mCAIF,cAAC,KAAD,CAAalB,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,qBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,SACE,uBAAM/L,UAAWC,KAAOsM,KAAM5G,IAAK4D,EAASH,SAAUnL,EAAtD,UACE,2BAAU+B,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,yBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,OAAOxE,KAAK,cAAcuU,YAAY,cAAcgL,UAAQ,OAGnG,2BAAUjR,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,sBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,SAASmU,UAAU,UAAUgF,IAAK,EAAG3d,KAAK,WAAWgZ,aAAc,EAAGuG,UAAQ,OAGrH,2BAAUjR,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,yBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,SAASmU,UAAU,UAAUgF,IAAK,EAAG6B,KAAM,GAAKxf,KAAK,aAAauU,YAAY,mBAGrH,2BAAUjG,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,mBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,OAAOxE,KAAK,QAAQuU,YAAY,aAGvE,wBAAQjG,UAAWC,KAAOkK,OAAQjU,KAAK,SAAvC,qC,oBCgHCib,GArLO,SAAC,GAAuC,IAAD,IAApCd,eAAoC,SAApBjd,EAAoB,EAApBA,OAAQmI,EAAY,EAAZA,MACzC6V,EAAmB,oDAAgD7V,EAAhD,mFAEzB,EAAgDtC,IAAxC7C,EAAR,EAAQA,mBAAoBE,EAA5B,EAA4BA,gBAC5B,EAIIoI,KAHFvB,EADF,EACEA,eACAS,EAFF,EAEEA,2BACAC,EAHF,EAGEA,4BAGF,EAAsC5H,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KACA,EAAwChV,mBAASsF,GAAjD,mBAAO8V,EAAP,KAAqBC,EAArB,KACA,EAAgDrb,mBAAS,MAAzD,mBAAOsb,EAAP,KAAyBC,EAAzB,KACA,EAAkCvb,mBAAS,IAA3C,mBAAOwb,EAAP,KAAkBC,EAAlB,KAEMxa,EAAaC,kBAAO,GACpBwa,EAAkBxa,iBAAO,MACzBya,EAAmBza,iBAAO,MAC1B+T,EAAW/T,iBAAO,MAElBiX,EAAOD,GAAQwD,GAErB,EAAgFhE,KAAxEhJ,EAAR,EAAQA,aAAcmJ,EAAtB,EAAsBA,WAAYF,EAAlC,EAAkCA,mBAAoBC,EAAtD,EAAsDA,sBAMhDgE,EAAwB,SAAA7D,GAAO,OAJL,SAAAA,GAAO,OAAI2D,EAAgBna,UAAYma,EAAgBna,UAAYwW,GAAW2D,EAAgBna,QAAQ8N,SAAS0I,IAIrG8D,CAAwB9D,KAHvC,SAAAA,GAAO,OAAIF,EAAWtW,UAAYsW,EAAWtW,UAAYwW,GAAWF,EAAWtW,QAAQ8N,SAAS0I,IAG5CD,CAAmBC,KADrE,SAAAA,GAAO,OAAIrJ,EAAanN,UAAYmN,EAAanN,UAAYwW,GAAWrJ,EAAanN,QAAQ8N,SAAS0I,IACpB+D,CAAqB/D,KAFnG,SAAAA,GAAO,OAAI4D,EAAiBpa,UAAYoa,EAAiBpa,UAAYwW,GAAW4D,EAAiBpa,QAAQ8N,SAAS0I,IAEFgE,CAAyBhE,IAM1K,EAQIzP,IAEEiJ,EAAY,CAChB,iBAXF,EACEzG,mBAWA,iBAZF,EAEEU,YAWA,uBAbF,EAGEH,iBAWA,yBAdF,EAIEC,mBAWA,gBAfF,EAKEJ,eAWA,yBAhBF,EAMEH,gBAWA,0BAjBF,EAOEE,qBAkFF,OAlBAlJ,qBAAU,WACR,GAAKmF,GAAmBjG,EAAWM,QAAnC,CAEA,IAAMya,EAAQ9U,EAAelD,MAAK,SAAAiY,GAAG,OAAIA,EAAI7e,KAAOD,KAAQ4G,WAE5D0X,EAAa,YAAIO,OAChB,CAAC9U,EAAgB/J,IAEpB4E,qBAAU,WACHoW,GAASlD,EAAS1T,SAAYN,EAAWM,SAE9Cga,EAAoBpD,EAAK/G,MAAQ6D,EAAS1T,QAAQkY,YAAc,MAC/D,CAACtB,IAEJpW,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,sBAAKwI,UAAWC,KAAOC,KAAM0F,MAAO4B,EAApC,UACE,qBAAKxH,UAAWC,KAAO+G,eAAvB,SACE,sBAAKhH,UAAWC,KAAOwG,QAASd,IAAKgM,EAAiB1P,QAhGpC,SAAAC,GAClB2P,EAAsB3P,EAAEkE,SAAS6E,EAAeI,KAAKC,MA+FrD,UACG+E,GACD,uBAAMrQ,UAAWC,KAAOsL,UAAW5F,IAAKuF,EAAxC,UACE,wBAAQlL,UAAWC,KAAOqC,KAAMqD,IAAKiM,EAAkB3P,QAhD9C,SAAAC,GACjB,IAAMiQ,EAAYle,OAAOuX,QAAQ4F,GAIjC,GAFA9a,GAAgB,GAEZ6b,EAAW,CACb,IAKMC,EAAU9b,GAAgB,GAEhCuH,EAA4BzK,EAAQ,CAAE8H,UAPpB,WAChB5E,GAAgB,GAChBY,EAAWM,SAAU,GAK0B2D,WAAYiX,EAAS9W,sBAAuB8W,SAE7Fhc,EAAmB,CACjBF,KAAM,OACN3E,QAAS,+BAGX+E,GAAgB,IA4BkE,cAAY,wBAAxF,SACE,cAAC,KAAD,CAAiB0J,UAAWC,KAAOyG,GAAIpE,KAAMmJ,SAE/C,wBAAQzL,UAAWC,KAAOqC,KAAMqD,IAAKmI,EAAY,cAAY,sBAA7D,SACE,cAAC,KAAD,CAAiB9N,UAAWC,KAAOyG,GAAIpE,KAAMuJ,YAGhDwE,GAAWzC,EACV,cAAC,GAAD,CACErE,QAAS5E,EACTiK,cAAe2C,EACfvR,UAAWC,KAAOsM,KAClBhR,MAAOA,EACP6N,SAxFc,SAAAlH,GACxBA,EAAEC,iBAEF7L,GAAgB,GAEhB,IAtEY+b,EAsENrX,EAAWkH,EAAEkE,OAAOwE,SAASrP,MAAMzD,QAEpCkD,IAxEOqX,EAwEarX,IAhElBqX,EAAIC,MAAM,wBAA0BD,EAAIC,MAAM,uBAAuB,KAAOD,GAA6B,cAAtBA,EAAIjY,gBAgE1DkX,EAAgBpE,GAAUlS,IAE9D,IAAMuX,EAAoC,WACpCrb,EAAWM,UACb8Z,EAAgB/V,GAChBjF,GAAgB,GAChBuX,GAAsB,KAW1BjQ,EAA2BxK,EAAQ4H,EAPjB,CAChBE,UAAW,kBAAMhE,EAAWM,SAAWqW,GAAsB,IAC7D1S,WAAYoX,EACZnX,sBAAuBmX,EACvBjX,sBAAuBiX,OAqEjB,oBAAIvS,UAAWC,KAAO1E,MAAtB,SAA8B8V,SAGpC,cAAC,KAAD,CAAarG,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,sBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,WACIsE,GAAgC,IAArBoB,EAAUpY,QAAgB,qBAAK2G,UAAWC,KAAOuS,UAAvB,oDACtCnC,GAAW,cAAC,GAAD,CAA6Bjd,OAAQA,IAChDqe,GAAaA,EAAUpY,OAAS,GAAKoY,EAAUhW,KAAI,YAAwD,IAArDpI,EAAoD,EAApDA,GAAI8G,EAAgD,EAAhDA,YAAamW,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,MAAOM,EAAkB,EAAlBA,YACjF4B,EAAO,UAAMlX,EAAMnB,cAAcyM,QAAQ,IAAK,KAAvC,YAA+CxT,GAE5D,OACE,cAAC,GAAD,CAEEqH,OAAQrH,EACRqf,UAAWnX,EACXpB,YAAaA,EACbmW,SAAUA,EACVC,MAAOA,EACPC,WAAYK,EACZR,QAASA,GAPJoC,gB,oBC1FRE,GAjFc,WAC3B,MAAgD1Z,IAAxCzC,EAAR,EAAQA,mBAAoBE,EAA5B,EAA4BA,gBAC5B,EAAoCwC,KAA5BlE,EAAR,EAAQA,MAAO6J,EAAf,EAAeA,iBACf,EAAsDH,KAA9CvB,EAAR,EAAQA,eAAgBE,EAAxB,EAAwBA,0BA4BjBuV,EAAyBzV,GAAkBE,IAA8BhI,GAAQ8H,EAAe9D,OAAS,EACzGwZ,EAAsB1V,GAAkBE,IAA8BhI,GAAkC,IAA1B8H,EAAe9D,OAOlG,GAAIwF,IAAqBxJ,GAASL,EAAMqE,OAMjC,IAAIuZ,EACT,OACE,mCACGzV,EAAe1B,KAAI,WAA2Bb,GAAW,IAAnCvH,EAAkC,EAAlCA,GAAIkI,EAA8B,EAA9BA,MAAOS,EAAuB,EAAvBA,UAG1BtD,EAAcoJ,GADMlH,EAAQkH,GAAazI,OAASuB,EAAQA,EAAQkH,GAAazI,QAE/EyZ,EAAUvX,EAAMnB,cAAcyM,QAAQ,IAAK,KAEjD,OACE,cAAC,EAAD,CAA6BnO,YAAaA,EAA1C,SACE,qBAAKsH,UAAWC,KAAO8S,cAAvB,SACE,cAAC,GAAD,CACE1C,SAAUrU,EACV5I,OAAQC,EACRkI,MAAOA,OALOuX,QAavB,GAAID,EACT,OAAO,mBAAG7S,UAAWC,KAAO+S,QAArB,+CACF,GAAI3V,IAA8B/E,EACvC,OAAO,cAAC,GAAD,CAAS0H,UAAWC,KAAO6H,QAASX,MAAOrG,GAAOC,mBAAoBqG,OAAO,MAAMC,MAAM,QAC3F,GAAIxI,IAAqBtG,GAAS8E,IAA8B9E,EAAO,CAE5E,IAAM7G,EAAOmN,IAAqBtG,EAAQ,QAAU,kBACpD,OAAO,cAAC,GAAD,CAAc2Q,UAAWxX,IAEhC,OAAO,KArCP,OACE,oBAAGsO,UAAWC,KAAO+S,QAArB,iEACsD,wBAAQhT,UAAWC,KAAOgT,KAAMhR,QA/BvE,SAAAC,GACnBA,EAAEC,iBAEF3L,EAAmB,CACjBqT,IAAKf,GAAUyB,IACfqB,MAAO,CACLrQ,MAAO,cACPrF,KAAM,YAIVQ,GAAgB,IAoB0C,2BADtD,uB,oBC5BOwc,GAhBO,WACpB,MAA0Cja,IAAlCxC,EAAR,EAAQA,aAAcF,EAAtB,EAAsBA,gBACd8G,EAA8BqB,KAA9BrB,0BAEF8V,EAAoB9V,IAA8B/E,GAAW+E,IAA8B9E,EAEjG,OACE,eAAC,GAAD,CAAiBgD,MAAM,iBAAiBwL,mBAAiB,EAAzD,UACGtQ,GAAgB,cAACF,EAAgBsT,IAAjB,eAAyBtT,EAAgBqV,QAC1D,cAAC,GAAD,IACA,qBAAK5L,UAAWC,KAAOmT,WAAvB,SAAmC,cAAC,GAAD,CAAyBtN,SAAUqN,MACtE,cAAC,GAAD,Q,oBCmDSE,GAhEgB,SAAC,GAAkB,IAAhBvN,EAAe,EAAfA,SACxBxP,EAAoB2C,IAApB3C,gBAEAqF,EAA8B6C,IAA9B7C,0BAER,EAAoC1F,mBAAS,IAA7C,mBAAOwO,EAAP,KAAmBC,EAAnB,KAEMI,EAAY,CAChB,iBAAkBnD,GAAKX,gBACvB,sBAAuBW,GAAKL,iBAC5B,wBAAyBK,GAAKF,YAC9B,uBAAwBE,GAAKP,iBA2B/B,OACE,qBAAKpB,UAAWC,KAAOC,KAAM0F,MAAOd,EAApC,SACE,sBAAM,cAAY,4BAA4BsE,SArBvB,SAAAlH,GACzBA,EAAEC,iBACF7L,GAAgB,GAChB,IAAMiF,EAAQ2G,EAAEkE,OAAOwE,SAASrP,MAAMzD,MAEhCiV,EAAyB,WAC7BrI,EAAc,IACdpO,GAAgB,IASlBqF,EAA0BJ,EANR,CAChBL,UAAW6R,EACX5R,WAAY4R,EACZ3R,sBAAuB,kBAAM9E,GAAgB,IAC7CgF,sBAAuByR,KAOvB,SACE,2BAAU/M,UAAW8D,KAAW7D,KAAOgK,SAAR,gBAAqBhK,KAAOuM,iBAAmB1G,IAAaA,SAAUA,EAArG,UACE,uBACE9F,UAAWC,KAAO4F,MAClB3P,KAAK,OACLxE,KAAK,QACLuU,YAAY,QACZ,aAAW,QACXnO,MAAO2M,EACPsB,SAnCU,SAAA7D,GAClB,IAAM8K,EAAW9K,EAAE8D,cAAclO,MACjC4M,EAAcsI,IAkCN1C,QAAQ,+BACR/O,MAAM,6FAER,wBAAQyE,UAAW8D,KAAW7D,KAAOO,OAAR,gBAAmBP,KAAOwM,eAAiB3G,IAAa5P,KAAK,SAA1F,4BCvDJkU,GAAa,CACjB,CACE1Y,KAAM,WACNoY,IAAK,QACLC,MAAO,WACP7T,KAAM,SACN+P,YAAa,WACboE,UAAW,UACXgF,IAAK,EACL4B,UAAU,GAEZ,CACEvf,KAAM,QACNoY,IAAK,WACLC,MAAO,QACP7T,KAAM,WACN+P,YAAa,yBACboE,UAAW,SAiEAiJ,GA7DkB,SAAC,GAAwC,IAAtChK,EAAqC,EAArCA,YAAakB,EAAwB,EAAxBA,kBAC/C,EAA6CvR,IAArC3C,EAAR,EAAQA,gBAAiBI,EAAzB,EAAyBA,gBACjB4F,EAAkCkC,IAAlClC,8BAEFpF,EAAaC,kBAAO,GAEpBkS,EAASe,GAAW3O,KAAI,SAAAgP,GAAK,oBAAOC,aAAcF,EAAkBC,EAAM/Y,OAAU+Y,MA6B1F,OAJAzS,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,cAAC,GAAD,CACE0R,UAAU,qBACVC,YAAY,cACZG,YAAaA,EACbF,SAhCe,SAAAlH,GACjBA,EAAEC,iBAEF,IAAMtK,EAAW,WACfvB,GAAgB,GAChBI,GAAgB,GAChBQ,EAAWM,SAAU,GAGjByD,EAAY,CAChBC,UAAWrD,EACXsD,WAAYtD,EACZuD,sBAAuBvD,EACvByD,sBAAuBzD,EACvBwD,eAAgB,kBAAMnE,EAAWM,SAAU,IAGvC8Y,EAAWpO,EAAEkE,OAAOwE,SAAS0F,SAASxY,MACtCyY,EAAQrO,EAAEkE,OAAOwE,SAAS2F,MAAMzY,MAEtCwE,EAA8BkO,EAAkBnX,GAAI,CAAEid,WAAUC,SAAStV,IAavEoO,OAAQA,K,mBCvDRyG,GAAe,SAAAC,GACnB,QAAeC,IAAXD,GAAmC,OAAXA,GAA8B,KAAXA,EAAe,MAAO,IAErE,IAAME,EAAYC,OAAOH,GAEzB,OAAOE,EAAY,IAAM,EAAIA,EAAUE,QAAQ,GAAKF,EAAUE,QAAQ,IA4OzDoD,GAzOU,SAAC,GAQnB,IAPL7Y,EAOI,EAPJA,OACAgY,EAMI,EANJA,UACArC,EAKI,EALJA,QACAlW,EAII,EAJJA,YACAmW,EAGI,EAHJA,SACAE,EAEI,EAFJA,WACAD,EACI,EADJA,MAEA,EAAsCta,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KACA,EAAkChV,oBAAS,GAA3C,mBAAO6V,EAAP,KAAkB2E,EAAlB,KAIA,EAA8Cxa,mBAASqa,GAAvD,mBAAOkD,EAAP,KAAwBC,EAAxB,KAEA,EAKIxa,IAJF7C,EADF,EACEA,mBACAE,EAFF,EAEEA,gBACAI,EAHF,EAGEA,gBACAF,EAJF,EAIEA,mBAGF,EAUI+H,IATFwC,EADF,EACEA,mBACAO,EAFF,EAEEA,iBACAH,EAHF,EAGEA,eACAH,EAJF,EAIEA,gBACAI,EALF,EAKEA,gBACAG,EANF,EAMEA,mBACAE,EAPF,EAOEA,YACAP,EARF,EAQEA,oBACAM,EATF,EASEA,kBAGF,EAGIhD,IAFFlC,EADF,EACEA,8BACAE,EAFF,EAEEA,+BAGItF,EAAaC,kBAAO,GACpB+T,EAAW/T,iBAAO,MAClBgU,EAAUhU,iBAAO,MACjBuc,EAAYvc,iBAAO,MACnBwc,EAASxc,iBAAO,MAChByc,EAASzc,iBAAO,MAEhB0c,EAAc,SAAClO,EAAK4C,GAAN,OAAa5C,EAAInO,UAAYmO,EAAInO,UAAY+Q,GAAM5C,EAAInO,QAAQ8N,SAASiD,KAKtFuL,EAAe,SAAAvL,GAAE,OAJC,SAAAA,GAAE,OAAIsL,EAAY1I,EAAS5C,GAIxBwL,CAAgBxL,IAHjB,SAAAA,GAAE,OAAIsL,EAAYH,EAAWnL,GAGLyL,CAAkBzL,IAF7C,SAAAA,GAAE,OAAIsL,EAAYF,EAAQpL,GAE0B0L,CAAe1L,IADnE,SAAAA,GAAE,OAAIsL,EAAYD,EAAQrL,GACgD2L,CAAe3L,IAS1G4L,EAAe,SAACje,EAAM3E,GAA4B,IAAnBmK,EAAkB,uDAAT,KACxCxE,EAAWM,UACbpB,EAAmB,CAAEF,OAAM3E,UAASmK,WACpCpF,GAAgB,KAIdkR,EAAY,CAChB,eAAgBxG,EAChB,qBAAsBO,EACtB,iBAAkBE,EAClB,0BAA2BP,EAC3B,oBAAqBM,EACrB,gBAAiBJ,GA2GnB,OARApJ,qBAAU,WACJd,EAAWM,SAASic,EAAmBnD,KAC1C,CAACA,IAEJtY,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,sBAAKwI,UAAW8D,KAAW7D,KAAOC,KAAR,gBAAiBD,KAAO6L,UAAYA,IAAclG,MAAO4B,EAAnF,UACE,sBAAKxH,UAAWC,KAAOyQ,OAAQzO,QAjIb,SAAAC,GACf4R,EAAa5R,EAAEkE,UAClB6E,EAAeI,KAAKC,KACpBmF,GAAc3E,KA8Hd,UACE,uBAAM9L,UAAW8D,KAAW7D,KAAOvE,OAAR,gBAAmBuE,KAAOmU,eAAiB/D,IAAtE,UACGA,GACC,uBAAMrQ,UAAWC,KAAOsL,UAAW5F,IAAKuF,EAAxC,UACE,wBAAQlL,UAAWC,KAAOqC,KAAMqD,IAAK+N,EAAWzR,QA7DxC,WACAhO,OAAOuX,QAAQ,wHAU/BhP,EAA+B9B,EAPb,CAChBQ,UAAW,kBAAMhE,EAAWM,SAAU,GACtC6D,eAAgB,kBAAMnE,EAAWM,SAAU,GAC3C2D,WAAY,kBAAM7E,GAAgB,IAClCgF,sBAAuB,kBAAMhF,GAAgB,MAK/C6d,EAAa,OAAQ,+BAgDyD,cAAY,eAAlF,SACE,cAAC,KAAD,CAAiBnU,UAAW8D,KAAW7D,KAAOyG,GAAIzG,KAAOoU,aAAc/R,KAAMmJ,SAE/E,wBAAQzL,UAAWC,KAAOqC,KAAMqD,IAAKwF,EAASlJ,QA/CrC,WACnB,GAAI/K,EAAWM,QAAS,CACtBlB,GAAgB,GAEhB,IAAMuT,EAAMf,GAAUwK,IAEtB9c,EAAmB,CACjBqT,MACA+B,MAAO,CACLrQ,MAAOpB,EACPiO,SAAS,YAAD,OAAcsK,EAAd,KACRpJ,YAAa,CACXvI,qBACAI,iBACAM,cACAH,oBAEFkJ,kBAAmB,CACjBnX,GAAIqH,EACJ4V,WACAC,QACApW,kBAKNzD,GAAgB,KAqB6D,cAAY,YAAjF,SACE,cAAC,KAAD,CAAiBsJ,UAAWC,KAAOyG,GAAIpE,KAAMuJ,YAGnD,oBAAI7L,UAAWC,KAAO9F,YAAtB,SAAoCA,OAEtC,uBAAM6F,UAAWC,KAAOqQ,SAAxB,UACGD,GAAW,wBAAQrQ,UAAWC,KAAOqC,KAAMqD,IAAKgO,EAAQ1R,QAxHvC,WACxB,IAAMqS,EAAcd,EACde,EAAcf,EAAkB,EAElCtc,EAAWM,SAASic,EAAmBc,GAa3CjY,EAA8B5B,EAAQ,CAAE4V,SAAUiE,GAXhC,CAChBpZ,WAAY,WACVsY,EAAmBa,GACnBhe,GAAgB,IAElBgF,sBAAuB,WACrBmY,EAAmBa,GACnBhe,GAAgB,OA2GuE,cAAY,cAArF,SACV,cAAC,KAAD,CAAiB0J,UAAWC,KAAOyG,GAAIpE,KAAMkS,SAE/C,qBAAKxU,UAAWC,KAAO0Q,gBAAvB,SACG6C,IAEFnD,GAAW,wBAAQrQ,UAAWC,KAAOqC,KAAMqD,IAAKiO,EAAQ3R,QA1GvC,WACxB,IAAMqS,EAAcd,EACde,EAAcf,EAAkB,EAEtC,GAAIe,EAAc,EAAG,CACnB,IAAMtZ,EAAY,CAChBE,WAAY,WACVsY,EAAmBa,GACnBhe,GAAgB,IAElBgF,sBAAuB,WACrBmY,EAAmBa,GACnBhe,GAAgB,KAIpBmd,EAAmBc,GACnBjY,EAA8B5B,EAAQ,CAAE4V,SAAUiE,GAAetZ,QAC5D,GAAoB,IAAhBsZ,EAAmB,CACVtgB,OAAOuX,QAAQ,qEAG/BhP,EAA+B9B,GAAQ,WAAQxD,EAAWM,SAAU,KAEpE2c,EAAa,OAAQ,gCAkFkE,cAAY,cAArF,SACV,cAAC,KAAD,CAAiBnU,UAAWC,KAAOyG,GAAIpE,KAAMqE,eAInD,cAAC,KAAD,CAAaqE,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,sBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,UACE,oBAAI/L,UAAWC,KAAO8J,MAAtB,0BACA,mBAAG/J,UAAWC,KAAOnI,MAArB,SAA6BgY,GAAaU,KAE1C,oBAAIxQ,UAAWC,KAAO8J,MAAtB,oBACA,mBAAG/J,UAAWC,KAAOnI,MAArB,SAA6ByY,GAAS,mC,oBC/HnCkE,GArGoB,SAAC,GAAgB,IAAdrhB,EAAa,EAAbA,OACpC,EAAsC6C,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KACA,EAAkChV,oBAAS,GAA3C,mBAAO6V,EAAP,KAAkB2E,EAAlB,KACQna,EAAoB2C,IAApB3C,gBACA2F,EAAkCuC,IAAlCvC,8BACR,EAOIsC,IANFyC,EADF,EACEA,gBACAI,EAFF,EAEEA,gBACAF,EAHF,EAGEA,oBACAO,EAJF,EAIEA,YACAF,EALF,EAKEA,mBACAC,EANF,EAMEA,kBAGI+H,EAAUpS,iBAAO,MAEjB2N,EAAY,CAChB,eAAgB9D,EAChB,gBAAiBI,EACjB,eAAgBF,EAChB,iBAAkBO,EAClB,oBAAqBF,EACrB,yBAA0BC,GAGtB0K,EAAa,WACjBjB,EAAeI,KAAKC,KACpBmF,GAAc3E,IAGVvY,EAAyB,SAAA2O,GAC7BA,EAAEC,iBAEF7L,GAAgB,GAEhB,IAAM6D,EAAc+H,EAAEkE,OAAOwE,SAASzQ,YAAYrC,MAC5CwY,EAAWhX,SAAS4I,EAAEkE,OAAOwE,SAAS0F,SAASxY,OAC/C+Y,EAAcX,OAAOhO,EAAEkE,OAAOwE,SAAS4F,WAAW1Y,OAClDyY,EAAQrO,EAAEkE,OAAOwE,SAAS2F,MAAMzY,MAGhCgZ,EAA6B,WACjCvH,EAAQ/R,QAAQ4U,QAChBF,IACA5V,GAAgB,IAUlB2F,EAA8B7I,EAfhB,CAAE+G,cAAamW,WAAUO,cAAaN,SAQlC,CAChBrV,UAAW4V,EACX3V,WAAY2V,EACZ1V,sBAAuB,kBAAM9E,GAAgB,IAC7CgF,sBAAuBwV,KAM3B,OACE,sBAAK9Q,UAAW8D,KAAW7D,KAAOC,KAAR,gBAAiBD,KAAO6L,UAAYA,IAAclG,MAAOd,EAAnF,UACE,qBAAK9E,UAAWC,KAAO8Q,iBAAvB,SACE,wBAAQ/Q,UAAWC,KAAO+Q,cAAe/O,QAASiK,EAAlD,mCAIF,cAAC,KAAD,CAAalB,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,qBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,SACE,uBAAM/L,UAAWC,KAAOsM,KAAM5G,IAAK4D,EAASH,SAAU7V,EAAtD,UACE,2BAAUyM,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,yBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,OAAOxE,KAAK,cAAcuU,YAAY,cAAcgL,UAAQ,OAGnG,2BAAUjR,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,sBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,SAASmU,UAAU,UAAUgF,IAAK,EAAG3d,KAAK,WAAWgZ,aAAc,EAAGuG,UAAQ,OAGrH,2BAAUjR,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,yBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,SAAQmU,UAAU,UAAU3Y,KAAK,aAAa2d,IAAK,EAAG6B,KAAM,GAAKjL,YAAY,mBAGpH,2BAAUjG,UAAWC,KAAOgK,SAA5B,UACE,uBAAOjK,UAAWC,KAAO8J,MAAzB,mBACA,uBAAO/J,UAAWC,KAAO4F,MAAO3P,KAAK,OAAOxE,KAAK,QAAQuU,YAAY,aAGvE,wBAAQjG,UAAWC,KAAOkK,OAAQjU,KAAK,SAAvC,qC,oBCiHCwe,GAtLM,SAAC,GAAuC,IAAD,IAApCrE,eAAoC,SAApBjd,EAAoB,EAApBA,OAAQmI,EAAY,EAAZA,MACxC6V,EAAmB,oDAAgD7V,EAAhD,mFAEzB,EAAsCtF,mBAAS,GAA/C,mBAAO+U,EAAP,KAAoBC,EAApB,KACA,EAAwChV,mBAASsF,GAAjD,mBAAO8V,EAAP,KAAqBC,EAArB,KACA,EAAgDrb,mBAAS,MAAzD,mBAAOsb,EAAP,KAAyBC,EAAzB,KACA,EAAkCvb,mBAAS,IAA3C,mBAAOwb,EAAP,KAAkBC,EAAlB,KAEMxa,EAAaC,kBAAO,GACpBwa,EAAkBxa,iBAAO,MACzBya,EAAmBza,iBAAO,MAC1B+T,EAAW/T,iBAAO,MAElBiX,EAAOD,GAAQwD,GAErB,EAAgFhE,KAAxEhJ,EAAR,EAAQA,aAAcmJ,EAAtB,EAAsBA,WAAYF,EAAlC,EAAkCA,mBAAoBC,EAAtD,EAAsDA,sBAEtD,EAAgD5U,IAAxC7C,EAAR,EAAQA,mBAAoBE,EAA5B,EAA4BA,gBAE5B,EAIIkI,IAHFvJ,EADF,EACEA,cACA8F,EAFF,EAEEA,0BACAe,EAHF,EAGEA,2BAOI+V,EAAwB,SAAA7D,GAAO,OAJL,SAAAA,GAAO,OAAI2D,EAAgBna,UAAYma,EAAgBna,UAAYwW,GAAW2D,EAAgBna,QAAQ8N,SAAS0I,IAIrG8D,CAAwB9D,KAHvC,SAAAA,GAAO,OAAIF,EAAWtW,UAAYsW,EAAWtW,UAAYwW,GAAWF,EAAWtW,QAAQ8N,SAAS0I,IAG5CD,CAAmBC,KADrE,SAAAA,GAAO,OAAIrJ,EAAanN,UAAYmN,EAAanN,UAAYwW,GAAWrJ,EAAanN,QAAQ8N,SAAS0I,IACnB+D,CAAqB/D,KAFpG,SAAAA,GAAO,OAAI4D,EAAiBpa,UAAYoa,EAAiBpa,UAAYwW,GAAW4D,EAAiBpa,QAAQ8N,SAAS0I,IAEDgE,CAAyBhE,IAQ3K,EAQIzP,IAEEiJ,EAAY,CAChB,iBAXF,EACEzG,mBAWA,iBAZF,EAEEU,YAWA,uBAbF,EAGEH,iBAWA,yBAdF,EAIEC,mBAWA,gBAfF,EAKEJ,eAWA,yBAhBF,EAMEH,gBAWA,0BAjBF,EAOEE,oBAWA,oBAAoB,GAApB,OAAwBqQ,EAAmB,GAA3C,OAqEF,OAlBAvZ,qBAAU,WACR,GAAK/C,GAAkBiC,EAAWM,QAAlC,CAEA,IAAMya,EAAQhd,EAAcgF,MAAK,SAAAiY,GAAG,OAAIA,EAAI7e,KAAOD,KAAQ4G,WAE3D0X,EAAa,YAAIO,OAChB,CAAChd,EAAe7B,IAEnB4E,qBAAU,WACHoW,GAASlD,EAAS1T,SAAYN,EAAWM,SAE9Cga,EAAoBpD,EAAK/G,MAAQ6D,EAAS1T,QAAQkY,YAAc,MAC/D,CAACtB,IAEJpW,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,sBAAKwI,UAAWC,KAAOC,KAAM0F,MAAO4B,EAApC,UACE,qBAAKxH,UAAWC,KAAO+G,eAAvB,SACE,sBAAKhH,UAAWC,KAAOwG,QAASd,IAAKgM,EAAiB1P,QAhGpC,SAAAC,GAClB2P,EAAsB3P,EAAEkE,SAC1B6E,EAAeI,KAAKC,MA8FlB,UACG+E,GACD,uBAAMrQ,UAAWC,KAAOsL,UAAW5F,IAAKuF,EAAxC,UACE,wBAAQlL,UAAWC,KAAOqC,KAAMqD,IAAKiM,EAAkB3P,QAhD9C,SAAAC,GACjB,IAAMiQ,EAAYle,OAAOuX,QAAQ4F,GAIjC,GAFA9a,GAAgB,GAEZ6b,EAAW,CACb,IAKMC,EAAU,kBAAM9b,GAAgB,IAEtCwF,EAA2B1I,EAAQ,CAAE8H,UAPnB,WAChB5E,GAAgB,GAChBY,EAAWM,SAAU,GAKyB2D,WAAYiX,EAAS9W,sBAAuB8W,SACnFlb,EAAWM,UACpBpB,EAAmB,CACjBF,KAAM,OACN3E,QAAS,+BAGX+E,GAAgB,KA4BkE,cAAY,uBAAxF,SACE,cAAC,KAAD,CAAiB0J,UAAWC,KAAOyG,GAAIpE,KAAMmJ,SAE/C,wBAAQzL,UAAWC,KAAOqC,KAAMqD,IAAKmI,EAAY,cAAY,qBAA7D,SACE,cAAC,KAAD,CAAiB9N,UAAWC,KAAOyG,GAAIpE,KAAMuJ,YAGhDwE,GAAWzC,EACV,cAAC,GAAD,CACErE,QAAS5E,EACTiK,cAAe2C,EACfvR,UAAWC,KAAOsM,KAClBhR,MAAOA,EACP6N,SArFc,SAAAlH,GACxBA,EAAEC,iBAEF7L,GAAgB,GAEhB,IA1EY+b,EA0ENrX,EAAWkH,EAAEyS,YAAYvO,OAAO3Q,SAAS,GAAGiV,eAE7C1P,IA5EOqX,EA4EarX,IApElBqX,EAAIC,MAAM,wBAA0BD,EAAIC,MAAM,uBAAuB,KAAOD,GAA6B,cAAtBA,EAAIjY,gBAoE1DkX,EAAgBpE,GAAUlS,IAE9D,IAAM4Z,EAA4B,WAChCtD,EAAgB/V,GAChBjF,GAAgB,IASlByE,EAA0B3H,EAAQ4H,EANhB,CAChBG,WAAYyZ,EACZxZ,sBAAuBwZ,EACvBtZ,sBAAuBsZ,IAIzB/G,GAAsB,MAkEd,oBAAI7N,UAAWC,KAAO1E,MAAtB,SAA8B8V,SAGpC,cAAC,KAAD,CAAarG,YAAaA,EAAac,WAAS,EAAhD,SACG,gBAAGC,EAAH,EAAGA,sBAAH,OACC,sBAAK/L,UAAWC,KAAO+L,YAAarG,IAAKoG,EAAzC,WACIsE,GAAgC,IAArBoB,EAAUpY,QAAgB,qBAAK2G,UAAWC,KAAOuS,UAAvB,mDACtCnC,GAAW,cAAC,GAAD,CAA4Bjd,OAAQA,IAC/Cqe,GAAaA,EAAUpY,OAAS,GAAKoY,EAAUhW,KAAI,YAAwD,IAArDpI,EAAoD,EAApDA,GAAI8G,EAAgD,EAAhDA,YAAamW,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,MAAOM,EAAkB,EAAlBA,YACjF4B,EAAO,UAAMlX,EAAMnB,cAAcyM,QAAQ,IAAK,KAAvC,YAA+CxT,GAE5D,OACE,cAAC,GAAD,CAEEqH,OAAQrH,EACRqf,UAAWnX,EACX8U,QAASA,EACTlW,YAAaA,EACbmW,SAAUA,EACVC,MAAOA,EACPC,WAAYK,GAPP4B,gB,oBC1FRoC,GAlFkB,WAC/B,MAAgD5b,IAAxCzC,EAAR,EAAQA,mBAAoBE,EAA5B,EAA4BA,gBAC5B,EAAoCwC,KAA5BlE,EAAR,EAAQA,MAAO6J,EAAf,EAAeA,iBACf,EAAoDL,IAA5CvJ,EAAR,EAAQA,cAAewE,EAAvB,EAAuBA,yBA4BjBmZ,EAAyB3d,GAAiBwE,IAA6BpE,GAAQJ,EAAcoE,OAAS,EACtGwZ,EAAsB5d,GAAiBwE,IAA6BpE,GAAiC,IAAzBJ,EAAcoE,OAOhG,GAAIwF,IAAqBxJ,GAASL,EAAMqE,OAMjC,IAAIuZ,EACT,OACE,mCACG3d,EAAcwG,KAAI,WAA2Bb,GAAW,IAAnCvH,EAAkC,EAAlCA,GAAIkI,EAA8B,EAA9BA,MAAOS,EAAuB,EAAvBA,UAIzBtD,EAAcoJ,GADMlH,EAAQkH,GAAazI,OAASuB,EAAQA,EAAQkH,GAAazI,QAE/EyZ,EAAUvX,EAAMnB,cAAcyM,QAAQ,IAAK,KAEjD,OACE,cAAC,EAAD,CAA6BnO,YAAaA,EAA1C,SACE,qBAAKsH,UAAWC,KAAO6U,aAAvB,SACE,cAAC,GAAD,CACEzE,SAAUrU,EACV5I,OAAQC,EACRkI,MAAOA,OALOuX,QAavB,GAAID,EACT,OAAO,mBAAG7S,UAAWC,KAAO+S,QAArB,8CACF,GAAIvZ,IAA6BnB,EACtC,OAAO,cAAC,GAAD,CAAS0H,UAAWC,KAAO6H,QAASX,MAAOrG,GAAOC,mBAAoBqG,OAAO,MAAMC,MAAM,QAC3F,GAAIxI,IAAqBtG,GAASkB,IAA6BlB,EAAO,CAE3E,IAAM7G,EAAOmN,IAAqBtG,EAAQ,QAAU,iBACpD,OAAO,cAAC,GAAD,CAAc2Q,UAAWxX,IAEhC,OAAO,KAtCP,OACE,oBAAGsO,UAAWC,KAAO+S,QAArB,gEACqD,wBAAQhT,UAAWC,KAAOgT,KAAMhR,QA/BpE,SAAAC,GACnBA,EAAEC,iBAEF3L,EAAmB,CACjBqT,IAAKf,GAAUyB,IACfqB,MAAO,CACLrQ,MAAO,cACPrF,KAAM,YAIVQ,GAAgB,IAoBuC,2BADrD,uB,oBCtBSqe,GAtBW,WACxB,MAA2C9b,IAAlCxC,EAAT,EAASA,aAAcF,EAAvB,EAAuBA,gBACfkD,EAA6B+E,IAA7B/E,yBAEF0Z,EAAoB1Z,IAA6BnB,GAAWmB,IAA6BlB,EAEzFrB,EAAaC,kBAAO,GAM1B,OAJAa,qBAAU,kBACR,kBAAMd,EAAWM,SAAU,KAC1B,IAGD,eAAC,GAAD,CAAiB+D,MAAM,sBAAsBwL,mBAAiB,EAA9D,UACGtQ,GAAgB,cAACF,EAAgBsT,IAAjB,eAAyBtT,EAAgBqV,QAC1D,cAAC,GAAD,IACA,qBAAK5L,UAAWC,KAAOmT,WAAvB,SAAmC,cAAC,GAAD,CAAwBtN,SAAUqN,MACrE,cAAC,GAAD,IAJF,Q,oBCHW6B,GAbM,WACnB,IAAQ9iB,EAAU+G,IAAV/G,MAER,OACE,qBAAK8N,UAAWC,KAAOC,KAAvB,SACE,sBAAKF,UAAWC,KAAOE,UAAvB,UACE,oBAAIH,UAAWC,KAAOvE,OAAtB,iCACA,cAAC,IAAD,CAAMsE,UAAWC,KAAOgT,KAAM5a,GAAInG,EAAQyC,EAAMG,UAAUC,KAAOJ,EAAMC,KAAvE,2BCGFqgB,GAAY,gCAEZC,GAAQ,CACZ,CACEC,OAAQ,OACR5Z,MAAM,GAAD,OAAK0Z,GAAL,SACL9a,YAAa,6DACbib,IAAK,cAAC,GAAD,IACL7d,KAAM5C,EAAMC,MAEd,CACEugB,OAAQ,QACR5Z,MAAM,GAAD,OAAK0Z,GAAL,UACL9a,YAAa,iEACbib,IAAK,cAAC,GAAD,IACL7d,KAAM5C,EAAME,OAEd,CACEsgB,OAAQ,YACR5Z,MAAM,GAAD,OAAK0Z,GAAL,cACL9a,YAAa,6CACbib,IAAK,cAAC,GAAD,IACL7d,KAAM5C,EAAMG,UAAUC,MAExB,CACEogB,OAAQ,QACR5Z,MAAM,GAAD,OAAK0Z,GAAL,eACL9a,YAAa,sBACbib,IAAK,cAAC,GAAD,UAAe,cAAC,GAAD,MACpB7d,KAAM5C,EAAMG,UAAUE,OAExB,CACEmgB,OAAQ,gBACR5Z,MAAM,GAAD,OAAK0Z,GAAL,0BACL9a,YAAa,+BACbib,IAAK,cAAC,GAAD,UAAe,cAAC,EAAD,UAAuB,cAAC,GAAD,QAC3C7d,KAAM5C,EAAMG,UAAUG,eAExB,CACEkgB,OAAQ,YACR5Z,MAAM,GAAD,OAAK0Z,GAAL,qBACL9a,YAAa,0BACbib,IAAK,cAAC,GAAD,UAAe,cAAC,EAAD,UAAwB,cAAC,GAAD,UAqCjCC,GAjCI,kBACjB,eAAC,IAAD,WACGH,GAAMzZ,KACL,YAAgD,IAA7C0Z,EAA4C,EAA5CA,OAAQ5Z,EAAoC,EAApCA,MAAOpB,EAA6B,EAA7BA,YAAaib,EAAgB,EAAhBA,IAAK7d,EAAW,EAAXA,KAClC,OACE,eAAC,IAAD,CAAO+d,OAAK,EAAC/d,KAAMA,EAAnB,UACE,eAAC,IAAD,WACE,sBAAMge,KAAK,OAEX,gCAAQha,IACR,sBAAM7J,KAAK,cAAcmX,QAAS1O,OAEpC,cAAC,EAAD,UACGib,MARyBD,MAcpC,eAAC,IAAD,WACE,eAAC,IAAD,WACE,sBAAMI,KAAK,OAEX,iFACA,sBAAM7jB,KAAK,cAAcmX,QAAQ,gFAEnC,cAAC,EAAD,UACE,cAAC,GAAD,QARO,gBCnEA2M,GATH,WACV,OACE,cAAC,IAAD,CAAQC,SAAUjhB,GAAlB,SACE,cAAC,IAAD,UACE,cAAC,GAAD,SCJRkhB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFpQ,SAASqQ,eAAe,W","file":"static/js/main.634caace.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItem_root__3NPoi\",\"collapsed\":\"shoppingListItem_collapsed__3iHS2\",\"toggle\":\"shoppingListItem_toggle__26aMd\",\"fa\":\"shoppingListItem_fa__2P4jA\",\"destroyIcon\":\"shoppingListItem_destroyIcon__2IBmH\",\"header\":\"shoppingListItem_header__1qqqT\",\"headerEditable\":\"shoppingListItem_headerEditable__2K0Ir\",\"editIcons\":\"shoppingListItem_editIcons__2RoL7\",\"quantity\":\"shoppingListItem_quantity__1ebyP\",\"quantityContent\":\"shoppingListItem_quantityContent__24Ts-\",\"icon\":\"shoppingListItem_icon__1pEqd\",\"description\":\"shoppingListItem_description__mnU6z\",\"collapsible\":\"shoppingListItem_collapsible__xa2wr\",\"label\":\"shoppingListItem_label__2Bc9T\",\"value\":\"shoppingListItem_value__9dWAL\",\"button\":\"shoppingListItem_button__2k4QA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"inventoryListItemCreateForm_root__bALut\",\"collapsed\":\"inventoryListItemCreateForm_collapsed__1YF1j\",\"triggerContainer\":\"inventoryListItemCreateForm_triggerContainer__3UFy6\",\"triggerButton\":\"inventoryListItemCreateForm_triggerButton__3wmNI\",\"form\":\"inventoryListItemCreateForm_form__cLaWB\",\"fieldset\":\"inventoryListItemCreateForm_fieldset__2LDeb\",\"input\":\"inventoryListItemCreateForm_input__1dmHW\",\"label\":\"inventoryListItemCreateForm_label__30J22\",\"submit\":\"inventoryListItemCreateForm_submit__3_S5j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItemCreateForm_root__3B7YP\",\"collapsed\":\"shoppingListItemCreateForm_collapsed__3j8GF\",\"triggerContainer\":\"shoppingListItemCreateForm_triggerContainer__3IkQf\",\"triggerButton\":\"shoppingListItemCreateForm_triggerButton__2HK_d\",\"form\":\"shoppingListItemCreateForm_form__OXRXv\",\"fieldset\":\"shoppingListItemCreateForm_fieldset__1ovw9\",\"input\":\"shoppingListItemCreateForm_input__2Jire\",\"label\":\"shoppingListItemCreateForm_label__qlamy\",\"submit\":\"shoppingListItemCreateForm_submit__22fVU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardHeader_root__3lzne\",\"bar\":\"dashboardHeader_bar__1XEWl\",\"headerContainer\":\"dashboardHeader_headerContainer__1ZVqS\",\"header\":\"dashboardHeader_header__cB1mg\",\"headerLinkLarge\":\"dashboardHeader_headerLinkLarge__ED8Xx\",\"headerLinkSmall\":\"dashboardHeader_headerLinkSmall__3TlC1\",\"profile\":\"dashboardHeader_profile__A3WxH\",\"profileText\":\"dashboardHeader_profileText__1HPKf\",\"textTop\":\"dashboardHeader_textTop__2UNgU\",\"textBottom\":\"dashboardHeader_textBottom__1vLtl\",\"avatar\":\"dashboardHeader_avatar__2BhRu\",\"logoutDropdown\":\"dashboardHeader_logoutDropdown__37Dm5\",\"hidden\":\"dashboardHeader_hidden__Fkjhq\",\"bp\":\"dashboardHeader_bp__2hS3f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"inventoryListItem_root__1ZVQ4\",\"collapsed\":\"inventoryListItem_collapsed__2SGFA\",\"toggle\":\"inventoryListItem_toggle__3ny5q\",\"fa\":\"inventoryListItem_fa__ruljD\",\"destroyIcon\":\"inventoryListItem_destroyIcon__1dms9\",\"header\":\"inventoryListItem_header__1vxa5\",\"quantity\":\"inventoryListItem_quantity__3cq4c\",\"quantityContent\":\"inventoryListItem_quantityContent__kNYhb\",\"description\":\"inventoryListItem_description__3wFIr\",\"collapsible\":\"inventoryListItem_collapsible__13hlu\",\"label\":\"inventoryListItem_label__qDoRr\",\"value\":\"inventoryListItem_value__c-oua\",\"button\":\"inventoryListItem_button__1weBz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"inventoryList_root__Vi_Ik\",\"trigger\":\"inventoryList_trigger__3UD-J\",\"form\":\"inventoryList_form__28w0J\",\"icon\":\"inventoryList_icon__2TyFK\",\"title\":\"inventoryList_title__31UtA\",\"editIcons\":\"inventoryList_editIcons__1FgOO\",\"fa\":\"inventoryList_fa__Ubi17\",\"collapsible\":\"inventoryList_collapsible__2w_LK\",\"emptyList\":\"inventoryList_emptyList__H9eyu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingList_root__2O9FT\",\"trigger\":\"shoppingList_trigger__WV4fR\",\"form\":\"shoppingList_form__1GdfA\",\"icon\":\"shoppingList_icon__3FP5H\",\"editIcons\":\"shoppingList_editIcons__gL8DA\",\"title\":\"shoppingList_title__3Gulc\",\"fa\":\"shoppingList_fa__hRtKq\",\"collapsible\":\"shoppingList_collapsible__2Zuq5\",\"emptyList\":\"shoppingList_emptyList__289Te\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gameCreateForm_root__1CiVs\",\"slideToggleTrigger\":\"gameCreateForm_slideToggleTrigger__47o12\",\"form\":\"gameCreateForm_form__2naYf\",\"fieldset\":\"gameCreateForm_fieldset__iwI0Y\",\"fieldsetDisabled\":\"gameCreateForm_fieldsetDisabled__255jN\",\"input\":\"gameCreateForm_input__3HuYv\",\"button\":\"gameCreateForm_button__1ePIs\",\"buttonDisabled\":\"gameCreateForm_buttonDisabled__1bleU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"game_root__Wpup7\",\"header\":\"game_header__2XbBS\",\"name\":\"game_name__GOPSp\",\"editIcons\":\"game_editIcons__1kxuu\",\"icon\":\"game_icon__WCvOa\",\"description\":\"game_description__KgWbf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdown_root__1EUlO\",\"header\":\"gamesDropdown_header__1Qiyc\",\"input\":\"gamesDropdown_input__z9Zui\",\"trigger\":\"gamesDropdown_trigger__3A35t\",\"hidden\":\"gamesDropdown_hidden__7-IH5\",\"dropdown\":\"gamesDropdown_dropdown__1kXtE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardLayout_root__2dfR_\",\"title\":\"dashboardLayout_title__1yGVn\",\"hr\":\"dashboardLayout_hr__29GgW\",\"container\":\"dashboardLayout_container__3AwFx\",\"headerContainer\":\"dashboardLayout_headerContainer__15_gZ\",\"titleContainer\":\"dashboardLayout_titleContainer__3J8Iz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"inventoryListCreateForm_root__YS9ZM\",\"button\":\"inventoryListCreateForm_button__1Gumt\",\"fieldset\":\"inventoryListCreateForm_fieldset__3fWUO\",\"fieldsetDisabled\":\"inventoryListCreateForm_fieldsetDisabled__2bNHj\",\"input\":\"inventoryListCreateForm_input__QLJRI\",\"buttonDisabled\":\"inventoryListCreateForm_buttonDisabled__2Obwi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListCreateForm_root__iSFdV\",\"button\":\"shoppingListCreateForm_button__2so-6\",\"fieldset\":\"shoppingListCreateForm_fieldset__1BLSp\",\"fieldsetDisabled\":\"shoppingListCreateForm_fieldsetDisabled__2V4n7\",\"input\":\"shoppingListCreateForm_input__3hAzq\",\"buttonDisabled\":\"shoppingListCreateForm_buttonDisabled__1USkv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"flashMessage_root__2sPxp\",\"hidden\":\"flashMessage_hidden__cxPrx\",\"content\":\"flashMessage_content__3iY0s\",\"header\":\"flashMessage_header__Vx_Jr\",\"messageList\":\"flashMessage_messageList__3V9SA\",\"msg\":\"flashMessage_msg__3Wquk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modalForm_root__1vkew\",\"fieldset\":\"modalForm_fieldset__3Y2iw\",\"input\":\"modalForm_input__2W8sl\",\"submit\":\"modalForm_submit__2K3FT\",\"label\":\"modalForm_label__1q219\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noLists\":\"inventoryPageContent_noLists__1QGJ6\",\"link\":\"inventoryPageContent_link__1PCIJ\",\"inventoryList\":\"inventoryPageContent_inventoryList__uCqhc\",\"loading\":\"inventoryPageContent_loading__10Uba\",\"error\":\"inventoryPageContent_error__1saJh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noLists\":\"shoppingListsPageContent_noLists__1yLrC\",\"link\":\"shoppingListsPageContent_link__1seef\",\"shoppingList\":\"shoppingListsPageContent_shoppingList__3X_TT\",\"loading\":\"shoppingListsPageContent_loading__1Rj5P\",\"error\":\"shoppingListsPageContent_error__3KtOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"homePage_root__15tty\",\"container\":\"homePage_container__3kQJo\",\"header\":\"homePage_header__3EV45\",\"login\":\"homePage_login__3ala0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loginPage_root__2Vf7z\",\"errorMessage\":\"loginPage_errorMessage__8uTVC\",\"container\":\"loginPage_container__2xdLK\",\"button\":\"loginPage_button__1pDsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__QSEqe\",\"content\":\"modal_content__1tQ-X\",\"title\":\"modal_title__1efUU\",\"subtitle\":\"modal_subtitle__4395I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesPage_root__oSBqG\",\"noGames\":\"gamesPage_noGames__1CUVF\",\"games\":\"gamesPage_games__2Q2dQ\",\"loading\":\"gamesPage_loading__1Q0HG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"listEditForm_root__-eP94\",\"input\":\"listEditForm_input__1fVQ3\",\"submit\":\"listEditForm_submit__167Mr\",\"fa\":\"listEditForm_fa__4K6Td\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"notFoundPage_root__131Oh\",\"container\":\"notFoundPage_container__38cw2\",\"header\":\"notFoundPage_header__BhS9L\",\"link\":\"notFoundPage_link__2cDdM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"logoutDropdown_button__3hRUK\",\"body\":\"logoutDropdown_body__NiLPw\",\"googleLogout\":\"logoutDropdown_googleLogout__J9YSG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationMosaic_root__2CDUx\",\"card\":\"navigationMosaic_card__3hEln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardPage_root__oVxx1\",\"loading\":\"dashboardPage_loading__2vZsl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loadingError_root__1A6gy\",\"text\":\"loadingError_text__3auLV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdownOption_root__1Itlx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationCard_root__1-FD3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"createForm\":\"inventoryPage_createForm__1YVpo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"createForm\":\"shoppingListsPage_createForm__35weW\"};","export const googleClientId = process.env.NODE_ENV === 'production' ?\n  '891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com' :\n  '891031345873-ir73kc1ru0ncv564iesac94kjaap5nf4.apps.googleusercontent.com'\n\nexport const backendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim-api.danascheider.com' : 'http://localhost:3000'\n\nexport const frontendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim.danascheider.com' : 'http://localhost:3001'\n\nexport const sessionCookieName = '_sim_google_session'\n","export function AuthorizationError(message = '401 Unauthorized') {\n  this.message = message\n  this.code = 401\n  this.name = 'AuthorizationError'\n  this.stack = (new Error()).stack\n}\n\nAuthorizationError.prototype = new Error()\n\nexport function NotFoundError(message = '404 Not Found') {\n  this.message = message\n  this.code = 404\n  this.name = 'NotFoundError'\n  this.stack = (new Error()).stack\n}\n\nNotFoundError.prototype = new Error()\n\nexport function MethodNotAllowedError(message = '405 Method Not Allowed') {\n  this.message = message\n  this.code = 405\n  this.name = 'MethodNotAllowedError'\n  this.stack = (new Error()).stack\n}\n\nMethodNotAllowedError.prototype = new Error()\n","/*\n *\n * This module is an abstraction layer for the SIM API that handles making requests\n * to the API. These functions handle three things: (1) formulating the requests based\n * on which function it is and the args being passed in (including assembling both\n * headers and request body) and (2) throwing an AuthorizationError if the request fails.\n * The AuthorizationError has name 'AuthorizationError', code 401, and either the\n * message passed to the constructor or, by default, '401 Unauthorized'.\n * \n * For more information on the SIM API, its endpoints, the requests it expects, or its\n * responses, please visit the backend API docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { backendBaseUri } from './config'\nimport {\n  AuthorizationError,\n  MethodNotAllowedError,\n  NotFoundError\n} from './customErrors'\n\nconst contentTypeHeader = { 'Content-Type': 'application/json' }\nconst authHeader = token => ({ 'Authorization': `Bearer ${token}`})\nconst combinedHeaders = token => ({ ...authHeader(token), ...contentTypeHeader })\n\n/*\n *\n * Google OAuth Token Verification Endpoint\n * \n */\n\nexport const authorize = token => {\n  const uri = `${backendBaseUri}/auth/verify_token`\n\n  return(\n    fetch(uri, {  headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n/*\n *\n * User Profile Endpoint\n * \n */\n\nexport const fetchUserProfile = token => {\n  const uri = `${backendBaseUri}/users/current`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n/*\n *\n * Game Endpoints (Scoped to Authenticated User)\n * \n */\n\n// GET /games\nexport const fetchGames = token => {\n  const uri = `${backendBaseUri}/games`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games\nexport const createGame = (token, attrs) => {\n  const uri = `${backendBaseUri}/games`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /games/:id\nexport const updateGame = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'PATCH',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// DELETE /games/:id\nexport const destroyGame = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n\n  return fetch(uri, {\n    method: 'DELETE',\n    headers: authHeader(token)\n  })\n  .then(resp => {\n    // I deviated from the usual pattern of throwing a NotFoundError here\n    // on 404 since the behaviour for 404s is the same as the behaviour for\n    // successful deletion of the game, and making it throw an error here\n    // would just mean duplicating all thatlogic in the handlers in the\n    // GamesProvider.\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp\n  })\n}\n\n/*\n *\n * Shopping List Endpoints (Scoped to Game)\n *\n */\n\n// GET /games/:id/shopping_lists\nexport const fetchShoppingLists = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games/:game_id/shopping_lists\nexport const createShoppingList = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n  const body = JSON.stringify({ shopping_list: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /shopping_lists/:id\nexport const updateShoppingList = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  const body = JSON.stringify({\n    id: listId,\n    shopping_list: attrs\n  })\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: body\n    })\n    .then(resp => {\n      // It might return a 422 error too, but in that case we'll need the response\n      // JSON to handle the error\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_lists/:id\nexport const destroyShoppingList = (token, listId) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token),\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      if (resp.status === 405) throw new MethodNotAllowedError('Aggregate lists are managed automatically and cannot be deleted manually.')\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n/*\n *\n * Shopping List Item Endpoints\n *\n */\n\n// POST /shopping_lists/:shopping_list_id/shopping_list_items\nexport const createShoppingListItem = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}/shopping_list_items`\n\n  return(\n    fetch(uri, {\n      method: 'POST',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.\")\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// PATCH /shopping_list_items/:id\nexport const updateShoppingListItem = (token, itemId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to update a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError('Items on aggregate shopping lists cannot be updated through the API')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_list_items/:id\nexport const destroyShoppingListItem = (token, itemId) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token)\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to delete a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError()\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n/*\n *\n * Inventory List Endpoints (Scoped to Game)\n * \n */\n\n// GET /games/:game_id/inventory_lists\nexport const fetchInventoryLists = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}/inventory_lists`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games/:game_id/inventory_lists\nexport const createInventoryList = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}/inventory_lists`\n  const body = JSON.stringify({ inventory_list: attrs })\n\n  return(\n    fetch(uri, { method: 'POST', headers: combinedHeaders(token), body })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// PATCH /inventory_lists/:id\nexport const updateInventoryList = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/inventory_lists/${listId}`\n  const body = JSON.stringify({ inventory_list: attrs })\n\n  return(\n    fetch(uri, { method: 'PATCH', headers: combinedHeaders(token), body })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// DELETE /inventory_lists/:id\nexport const destroyInventoryList = (token, listId) => {\n  const uri = `${backendBaseUri}/inventory_lists/${listId}`\n\n  return(\n    fetch(uri, { method: 'DELETE', headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n\n        if (resp.status === 204) {\n          return { status: resp.status, json: null }\n        } else {\n          return resp.json().then(json => ({ status: resp.status, json }))\n        }\n      })\n  )\n}\n\n/*\n *\n * Inventory List Item Endpoints\n *\n */\n\n// POST /inventory_lists/:list_id/inventory_list_items\nexport const createInventoryListItem = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/inventory_lists/${listId}/inventory_list_items`\n  const body = JSON.stringify({ inventory_list_item: attrs })\n\n  return(\n    fetch(uri, { method: 'POST', headers: combinedHeaders(token), body })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n","const defaultErrorCallback = err => {\n  console.error('Error signing out: ', err.message)\n}\n\nconst logOutWithGoogle = (success = () => {}, error = defaultErrorCallback) => {\n  if (window.gapi && window.gapi.auth2) {\n    const GoogleAuth = window.gapi.auth2.getAuthInstance()\n\n    if (GoogleAuth !== null) {\n      GoogleAuth\n        .then(() => GoogleAuth.disconnect())\n        .then(success, error)\n    } else {\n      success() // Google thinks they aren't logged in anyway\n    }\n  }\n\n  success()\n}\n\nexport default logOutWithGoogle\n","export const isTestEnv = process.env.STORYBOOK || process.env.NODE_ENV === 'test'\n\nexport const isJest = process.env.NODE_ENV === 'test'\n\nexport const isStorybook = !!process.env.STORYBOOK\n","const paths = {\n  home: '/',\n  login: '/login',\n  dashboard: {\n    main: '/dashboard',\n    games: '/dashboard/games',\n    shoppingLists: '/dashboard/shopping_lists',\n    inventory: '/dashboard/inventory'\n  }\n}\n\nexport const authenticatedPaths = [\n  paths.dashboard.main,\n  paths.dashboard.games,\n  paths.dashboard.shoppingLists,\n  paths.dashboard.inventory\n]\n\nexport const pathsScopedToGames = [\n  paths.dashboard.shoppingLists,\n  paths.dashboard.inventory\n]\n\nexport default paths\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { createContext, useEffect, useState, useRef, useCallback } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { Redirect, useLocation } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { sessionCookieName } from '../utils/config'\nimport { fetchUserProfile } from '../utils/simApi'\nimport logOutWithGoogle from '../utils/logOutWithGoogle'\nimport { isTestEnv } from '../utils/isTestEnv'\nimport paths, { authenticatedPaths } from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\n\nconst AppContext = createContext()\n\n// overrideValue allows us to set the context value in Storybook.\n// I hate having the testing apparatus baked into the app code but\n// none of the solutions I found worked and I don't understand\n// Storybook decorators and whatnot enough to figure out how to\n// set the value for the context in the story,\nconst AppProvider = ({ children, overrideValue = {} }) => {\n  const { pathname } = useLocation()\n  const [cookies, setCookie, removeCookie] = useCookies([sessionCookieName])\n\n  const [flashAttributes, setFlashAttributes] = useState({ type: 'info', message: '' })\n  const [flashVisible, setFlashVisible] = useState(false)\n\n  const [modalAttributes, setModalAttributes] = useState({})\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const [profileData, setProfileData] = useState(overrideValue.profileData)\n  const [redirectPath, setRedirectPath] = useState(overrideValue.shouldRedirectTo)\n  const [profileLoadState, setProfileLoadState] = useState(overrideValue.profileLoadState || LOADING)\n\n  const mountedRef = useRef(true)\n\n  const removeSessionCookie = useCallback(() => removeCookie(sessionCookieName), [removeCookie])\n  const setSessionCookie = token => setCookie(sessionCookieName, token)\n\n  const setShouldRedirectTo = useCallback(path => {\n    mountedRef.current && setRedirectPath(path)\n    mountedRef.current = false\n  }, [])\n\n  const onAuthenticatedPage = useCallback(() => (\n    authenticatedPaths.indexOf(pathname) > -1\n  ), [pathname])\n\n  const shouldFetchProfileData = useCallback(() => {\n    return !overrideValue.profileData && cookies[sessionCookieName] && onAuthenticatedPage()\n  }, [overrideValue.profileData, cookies, onAuthenticatedPage])\n\n  const logOutAndRedirect = useCallback((path = paths.login, callback = null) => {\n    logOutWithGoogle(() => {\n      removeSessionCookie()\n      callback && callback()\n      onAuthenticatedPage() && setShouldRedirectTo(path)\n    })\n  }, [removeSessionCookie, onAuthenticatedPage, setShouldRedirectTo])\n\n  const value = {\n    token: cookies[sessionCookieName],\n    profileData,\n    removeSessionCookie,\n    setSessionCookie,\n    profileLoadState,\n    setShouldRedirectTo,\n    logOutAndRedirect,\n    flashVisible,\n    flashAttributes,\n    setFlashVisible,\n    setFlashAttributes,\n    setModalVisible,\n    setModalAttributes,\n    modalVisible,\n    modalAttributes,\n    ...overrideValue // enables you to only change certain values\n  }\n\n  const fetchProfileData = () => {\n    if (shouldFetchProfileData()) {\n      fetchUserProfile(cookies[sessionCookieName])\n        .then(({ status, json }) => {\n          if (!mountedRef.current) return\n\n          if (status === 200) {\n            setProfileData(json)\n            if (!overrideValue.profileLoadState) setProfileLoadState(DONE)\n          } else {\n            throw new Error('Internal Server Error: ', json.errors[0])\n          }\n        })\n        .catch(error => {\n          if (process.env.NODE_ENV === 'development') console.error('Error returned while fetching profile data: ', error.message)\n\n          // I feel like this might not be the right behaviour if the error was a 500,\n          // but I also can't think of a case where an error like this would occur and\n          // not be a 401, given the user profile will be created during the authorization\n          // step if it doesn't exist already.\n          logOutAndRedirect()\n        })\n    } else if (isTestEnv && !overrideValue.profileLoadState) {\n      setProfileLoadState(DONE)\n    }\n  }\n\n  useEffect(() => {\n    if (onAuthenticatedPage() && !cookies[sessionCookieName] && mountedRef.current) logOutAndRedirect()\n  }, [onAuthenticatedPage, cookies, logOutAndRedirect])\n\n  useEffect(fetchProfileData, [\n                                onAuthenticatedPage,\n                                logOutAndRedirect,\n                                overrideValue.profileLoadState,\n                                shouldFetchProfileData,\n                                cookies\n                              ])\n\n  useEffect(() => (() => mountedRef.current = false), [])\n\n  return(\n    <AppContext.Provider value={value}>\n      {redirectPath ? <Redirect to={redirectPath} /> : children}\n    </AppContext.Provider>\n  )\n}\n\nAppProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    token: PropTypes.string,\n    profileData: PropTypes.shape({\n      id: PropTypes.number,\n      uid: PropTypes.string,\n      email: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      image_url: PropTypes.string\n    }),\n    setSessionCookie: PropTypes.func,\n    removeSessionCookie: PropTypes.func,\n    setProfileData: PropTypes.func,\n    flashVisible: PropTypes.bool,\n    flashAttributes: PropTypes.shape({\n      type: PropTypes.oneOf(['error', 'info', 'success']).isRequired,\n      message: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n      header: PropTypes.string\n    }),\n    setFlashVisible: PropTypes.func,\n    setFlashAttributes: PropTypes.func,\n    logOutAndRedirect: PropTypes.func,\n    setModalVisible: PropTypes.func,\n    setModalAttributes: PropTypes.func,\n    modalVisible: PropTypes.bool,\n    modalAttributes: PropTypes.shape({\n      Tag: PropTypes.elementType,\n      props: PropTypes.object\n    })\n  })\n}\n\nexport { AppContext, AppProvider }\n","export const LOADING = 'loading'\nexport const DONE = 'done'\nexport const ERROR = 'error'\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { createContext } from 'react'\nimport PropTypes from 'prop-types'\n\n\nconst ColorContext = createContext()\n\nconst ColorProvider = ({ colorScheme, children }) => {\n  return(\n    <ColorContext.Provider value={colorScheme}>\n      {children}\n    </ColorContext.Provider>\n  )\n}\n\nColorProvider.propTypes = {\n  colorScheme: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    schemeColorDark: PropTypes.string.isRequired,\n    schemeColorLight: PropTypes.string.isRequired,\n    schemeColorLightest: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    hoverColorLight: PropTypes.string.isRequired,\n    hoverColorLightest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    textColorSecondary: PropTypes.string,\n    textColorTertiary: PropTypes.string,\n    borderColor: PropTypes.string\n  }).isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport { ColorProvider, ColorContext }\n","import { useLocation } from 'react-router-dom'\n\nconst useQuery = () => new URLSearchParams(useLocation().search)\n\nexport default useQuery\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport {\n  createContext,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  createShoppingList,\n  fetchShoppingLists,\n  updateShoppingList,\n  destroyShoppingList,\n  createShoppingListItem,\n  updateShoppingListItem,\n  destroyShoppingListItem\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext, useGamesContext } from '../hooks/contexts'\nimport useQuery from '../hooks/useQuery'\nimport paths from '../routing/paths'\n\nconst ShoppingListsContext = createContext()\n\nconst ShoppingListsProvider = ({ children, overrideValue = {} }) => {\n  const queryString = useQuery()\n\n  const {\n    token,\n    logOutAndRedirect,\n    setFlashAttributes,\n    setFlashVisible\n  } = useAppContext()\n\n  const { games } = useGamesContext()\n\n  const activeGameId = useMemo(() => {\n    if (games && games.length) {\n      return parseInt(queryString.get('game_id') || games[0].id)\n    } else {\n      return null\n    }\n  }, [games, queryString])\n\n  const [shoppingLists, setShoppingLists] = useState(overrideValue.shoppingLists || [])\n  const [shoppingListLoadingState, setShoppingListLoadingState] = useState(LOADING)\n\n  const shoppingListsOverridden = useRef(false)\n  \n  if (overrideValue.shoppingLists) {\n    // Use this as the initial value only so that the shopping\n    // lists can be updated when we interact in Storybook or other\n    // tests\n    delete overrideValue.shoppingLists\n    shoppingListsOverridden.current = true\n  }\n\n  const mountedRef = useRef(true)\n\n  const addOrUpdateListItem = (list, item) => {\n    const originalItem = list.list_items.find(listItem => listItem.description.toLowerCase() === item.description.toLowerCase())\n    const newListItems = [...list.list_items]\n\n    if (originalItem) {\n      const originalItemPosition = list.list_items.indexOf(originalItem)\n      newListItems.splice(originalItemPosition, 1, item)\n    } else {\n      newListItems.unshift(item)\n    }\n\n    list.list_items = newListItems\n\n    return { ...list }\n  }\n\n  const listFromListItemId = itemId => shoppingLists.find(list => !!list.list_items.find(item => item.id === itemId))\n\n  const removeItemFromList = (list, itemId) => {\n    const newList = { ...list }\n    const newListItems = [...list.list_items]\n\n    const item = list.list_items.find(item => item.id === itemId)\n    const index = list.list_items.indexOf(item)\n\n    newListItems.splice(index, 1)\n    newList.list_items = newListItems\n    \n    return newList\n  }\n\n  const fetchLists = useCallback(() => {\n    if (token && !shoppingListsOverridden.current) {\n      fetchShoppingLists(token, activeGameId)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setShoppingLists(json)\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} while fetching shopping lists: ${json.errors}` : `Unknown error ${status} while fetching shopping lists`\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else if (err.code === 404 && mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"We couldn't find the game you're looking for.\"\n            })\n\n            setFlashVisible(true)\n\n            !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching shopping lists: ', err)\n\n            if (mountedRef.current) {\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n            }\n          }\n        })\n    } else {\n      mountedRef.current && !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n    }\n  }, [token, overrideValue.shoppingListLoadingState, setFlashAttributes, setFlashVisible, activeGameId, logOutAndRedirect])\n\n  const performShoppingListUpdate = (listId, newTitle, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingList(token, listId, { title: newTitle })\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const newShoppingLists = shoppingLists.map(list => { if (list.id === listId) { return json } else { return list } })\n          setShoppingLists(newShoppingLists)\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your changes from being saved:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} when updating shopping list: ${json.errors}` : `Unknown error ${status} when updating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! The shopping list you wanted to update could not be found. Try refreshing the page to fix this issue.\"\n          })\n          \n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Error updating shopping list ${listId}: `, err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      }) \n  }\n\n  const performShoppingListCreate = (title, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onUnprocessableEntity, onInternalServerError } = callbacks\n\n    createShoppingList(token, activeGameId, { title })\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (Array.isArray(json) && json.length === 2) {\n            // It is an array of shopping lists. It includes the shopping list that was\n            // created and an aggregate list that was created automatically. This case only\n            // arises if there were no existing shopping lists, so in this case, we want\n            // to set the shopping lists array to the lists returned.\n            setShoppingLists(json)\n          } else if (json && typeof json === 'object') {\n            // It is the single shopping list that was created. This will happen if there\n            // is already an existing aggregate list.\n            const newShoppingLists = [...shoppingLists]\n            newShoppingLists.splice(1, 0, json)\n            setShoppingLists(newShoppingLists)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your shopping list was created.',\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what\n          throw new Error(json.errors ? `Error ${status} while creating shopping list: ${json.errors}` : `Unknown error ${status} while creating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: 'The game you wanted to create a shopping list for could not be found. Try refreshing the page to fix this issue.'\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating shopping list: ', err)\n          \n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListDestroy = (listId, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onInternalServerError } = callbacks\n\n    destroyShoppingList(token, listId)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 204) {\n          // This means that the list was the game's last shopping list and both\n          // it and the aggregate list have been destroyed.\n          setShoppingLists([])\n          \n          setFlashAttributes({\n            type: 'success',\n            message: 'Since it was the last list for this game, the \"All Items\" list has been deleted as well.',\n            header: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 200) {\n          // This means that the aggregate list has been updated and returned,\n          // to adjust for any items that were deleted with the other list.\n          const newShoppingLists = shoppingLists.filter(list => list.id !== listId)\n                                                .map(list => (list.aggregate === true ? json : list))\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list: ${json.errors}` : `Unknown error ${status} when deleting shopping list ${listId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error deleting shopping list: ', err.message)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemCreate = (listId, attrs, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createShoppingListItem(token, listId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200 || status === 201) {\n          // Have to create an actual new object or the state change won't cause useEffect\n          // hooks to run.\n          const newLists = [...shoppingLists]\n\n          // The JSON object returned from this endpoint is the array of all items\n          // that have been updated while handling this request. Because changing the\n          // `unit_weight` of a shopping list item can cause items other than the\n          // list item edited and the aggregate list item to be updated, it's not\n          // possible to know for sure how many items the array will contain. It will\n          // be at least two though.\n          for (let i = 0; i < json.length; i++) {\n            const list = shoppingLists.find(list => list.id === json[i].list_id)\n            const listPosition = shoppingLists.indexOf(list)\n            const newList = addOrUpdateListItem(list, json[i])\n\n            newLists[listPosition] = newList\n          }\n\n          setShoppingLists(newLists)\n\n          if (status === 201) {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your shopping list item has been created.'\n            })\n          } else {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your new shopping list item has been combined with another item with the same description.'\n            })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} when creating shopping list item: ${json.errors}` : `Unknown error ${status} when creating shopping list item`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error when creating shopping list item: ', err.message)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemUpdate = (itemId, attrs, callbacks) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingListItem(token, itemId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          let newShoppingLists = [...shoppingLists]\n\n          for (let i = 0; i < json.length; i++) {\n            const list = shoppingLists.find(list => list.id === json[i].list_id)\n            const newList = addOrUpdateListItem(list, json[i])\n            const listPosition = shoppingLists.indexOf(list)\n            newShoppingLists[listPosition] = newList\n          }\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashAttributes({ type: 'success', message: 'Success! Your shopping list item was updated.' })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being updated:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} updating item ${itemId}: ${json.errors}` : `Unknown error ${status} updating item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list item you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Unexpected error editing list item ${itemId}: `, err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemDestroy = (itemId, callbacks) => {\n    const { onSuccess, onNotFound, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyShoppingListItem(token, itemId)\n      .then(({ status, json }) => {\n        if (status === 200 || status === 204) {\n          const regularListToRemoveItemFrom = listFromListItemId(itemId)\n          const regularListIndex = shoppingLists.indexOf(regularListToRemoveItemFrom)\n          const newLists = [...shoppingLists]\n          let newAggregateList\n\n          if (status === 200) {\n            // If there is an updated aggregate list item, it will be returned. If\n            // the aggregate list item has been destroyed, the status will be 204.\n            newAggregateList = addOrUpdateListItem(shoppingLists[0], json)\n          } else {\n            const deletedItem = regularListToRemoveItemFrom.list_items.find(item => item.id === itemId)\n            const aggregateListItem = shoppingLists[0].list_items.find(item => item.description.toLowerCase() === deletedItem.description.toLowerCase())\n\n            newAggregateList = removeItemFromList(shoppingLists[0], aggregateListItem.id)\n          }\n\n          const newRegularList = removeItemFromList(regularListToRemoveItemFrom, itemId)\n\n          newLists[0] = newAggregateList\n          newLists.splice(regularListIndex, 1, newRegularList)\n\n          setShoppingLists(newLists)\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list item ${itemId}: ${json.errors}` : `Unknown error ${status} when deleting shopping list item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error', \n            message: \"Oops! We couldn't find the shopping list item you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error destroying shopping list item: ', err)\n\n          setFlashAttributes({\n            type: 'error', \n            message: \"Something unexpected happened while trying to delete your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const value = {\n    shoppingLists,\n    shoppingListLoadingState,\n    performShoppingListUpdate,\n    performShoppingListCreate,\n    performShoppingListDestroy,\n    performShoppingListItemCreate,\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    if (activeGameId && mountedRef.current) fetchLists()\n  }, [fetchLists, activeGameId])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ShoppingListsContext.Provider value={value}>\n      {children}\n    </ShoppingListsContext.Provider>\n  )\n}\n\nShoppingListsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    shoppingLists: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      game_id: PropTypes.number,\n      title: PropTypes.string.isRequired,\n      aggregate: PropTypes.bool.isRequired,\n      list_items: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        list_id: PropTypes.number.isRequired,\n        description: PropTypes.string.isRequired,\n        quantity: PropTypes.number.isRequired,\n        notes: PropTypes.string,\n        unit_weight: PropTypes.number\n      })).isRequired\n    })),\n    shoppingListLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performShoppingListUpdate: PropTypes.func,\n    performShoppingListCreate: PropTypes.func,\n    performShoppingListDestroy: PropTypes.func,\n    performShoppingListItemCreate: PropTypes.func,\n    performShoppingListItemUpdate: PropTypes.func,\n    performShoppingListItemDelete: PropTypes.func\n  })\n}\n\nexport { ShoppingListsContext, ShoppingListsProvider }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport {\n  createContext,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  fetchInventoryLists,\n  createInventoryList,\n  updateInventoryList,\n  destroyInventoryList,\n  createInventoryListItem\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext, useGamesContext } from '../hooks/contexts'\nimport useQuery from '../hooks/useQuery'\nimport paths from '../routing/paths'\n\nconst InventoryListsContext = createContext()\n\nconst InventoryListsProvider = ({ children, overrideValue = {} }) => {\n  const queryString = useQuery()\n\n  const { token, logOutAndRedirect, setFlashAttributes, setFlashVisible } = useAppContext()\n  const { games } = useGamesContext()\n\n  const activeGameId = useMemo(() => {\n    if (games && games.length) {\n      return parseInt(queryString.get('game_id') || games[0].id)\n    } else {\n      return null\n    }\n  }, [games, queryString])\n\n  const [inventoryLists, setInventoryLists] = useState(overrideValue.inventoryLists || [])\n  const [inventoryListLoadingState, setInventoryListLoadingState] = useState(LOADING)\n\n  const inventoryListsOverridden = useRef(false)\n\n  if (overrideValue.inventoryLists) {\n    // Use this as the initial value only so that the inventory\n    // lists can be updated when we interact in Storybook or other\n    // tests\n    delete overrideValue.inventoryLists\n    inventoryListsOverridden.current = true\n  }\n\n  const mountedRef = useRef(true)\n\n  const addOrUpdateListItem = (list, item) => {\n    const originalItem = list.list_items.find(listItem => listItem.description.toLowerCase() === item.description.toLowerCase())\n    const newListItems = [...list.list_items]\n\n    if (originalItem) {\n      const originalItemPosition = list.list_items.indexOf(originalItem)\n      newListItems.splice(originalItemPosition, 1, item)\n    } else {\n      newListItems.unshift(item)\n    }\n\n    list.list_items = newListItems\n\n    return { ...list }\n  }\n\n  const fetchLists = useCallback(() => {\n    if (token && !inventoryListsOverridden.current) {\n      fetchInventoryLists(token, activeGameId)\n        .then(({ status, json }) => {\n          if (!mountedRef.current) return\n\n          if (status === 200) {\n            setInventoryLists(json)\n\n            !overrideValue.inventoryListLoadingState && setInventoryListLoadingState(DONE)\n          } else {\n            const message = json.errors ? `Error ${status} while fetching inventory lists: ${json.errors}` : `Unknown error ${status} while fetching inventory lists`\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n          } else if (err.code === 404 && mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"We couldn't find the game you're looking for.\"\n            })\n\n            setFlashVisible(true)\n\n            !overrideValue.inventoryListLoadingState && setInventoryListLoadingState(ERROR)\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching inventory lists: ', err)\n\n            if (mountedRef.current) {\n              !overrideValue.inventoryListLoadingState && setInventoryListLoadingState(ERROR)\n            }\n          }\n        })\n    }\n  }, [token, logOutAndRedirect, setFlashAttributes, setFlashVisible, overrideValue.inventoryListLoadingState, activeGameId])\n\n  const performInventoryListCreate = useCallback((title, callbacks) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createInventoryList(token, activeGameId, { title })\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (Array.isArray(json) && json.length === 2) {\n            // It is an array of inventory lists. It includes the inventory list that was\n            // created and an aggregate list that was created automatically. This case only\n            // arises if there were no existing inventory lists, so in this case, we want\n            // to set the inventory lists array to the lists returned.\n            setInventoryLists(json)\n          } else if (json && typeof json === 'object') {\n            // It is the single inventory list that was created. This will happen if there\n            // is already an existing aggregate list.\n            const newInventoryLists = [...inventoryLists]\n            newInventoryLists.splice(1, 0, json)\n            setInventoryLists(newInventoryLists)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your inventory list was created.',\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your inventory list from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} while creating inventory list: ${json.errors}` : `Unknown error ${status} while creating inventory list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: 'The game you wanted to create an inventory list for could not be found. Try refreshing the page to fix this issue.'\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating inventory list: ', err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, activeGameId, setFlashAttributes, inventoryLists, logOutAndRedirect])\n\n  const performInventoryListUpdate = useCallback((listId, title, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateInventoryList(token, listId, { title })\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const newInventoryLists = inventoryLists.map(list => list.id === listId ? json : list)\n          setInventoryLists(newInventoryLists)\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your changes from beings saved:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} when updating inventory list: ${json.errors}` : `Unknown error ${status} when updating inventory list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the inventory list you wanted to update. Try refreshing the page to fix this issue.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Error updating inventory list ${listId}: `, err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your inventory list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, inventoryLists, logOutAndRedirect, setFlashAttributes])\n\n  const performInventoryListDestroy = useCallback((listId, callbacks) => {\n    const { onSuccess, onNotFound, onInternalServerError, onUnauthorized } = callbacks\n\n    destroyInventoryList(token, listId)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 204) {\n          // This means that the list was the game's last inventory list and both\n          // it and the aggregate list have been destroyed.\n          setInventoryLists([])\n\n          setFlashAttributes({\n            type: 'success',\n            header: 'Success! Your inventory list has been deleted.',\n            message: 'Since it was your last list for this game, the \"All Items\" list has been deleted as well.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 200) {\n          // This means that the aggregate list has been updated and returned,\n          // to adjust for any items that were deleted with the other list.\n          const newInventoryLists = inventoryLists.filter(list => list.id !== listId)\n                                                  .map(list => list.aggregate === true ? json : list)\n          setInventoryLists(newInventoryLists)\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your inventory list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting inventory list ${listId}: ${json.errors}` : `Unknown error ${status} when deleting inventory list ${listId}`\n          throw new Error()\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the inventory list you wanted to delete. Sorry! Try refreshing the page to solve this issue.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Error destroying inventory list ${listId}: `, err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to delete your inventory list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, inventoryLists, logOutAndRedirect, setFlashAttributes])\n\n  const performInventoryListItemCreate = useCallback((listId, attrs, callbacks) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createInventoryListItem(token, listId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200 || status === 201) {\n          // Have to create an actual new object or the state change won't cause useEffect\n          // hooks to run.\n          const newLists = [...inventoryLists]\n\n          // The JSON object returned from this endpoint is the array of all items\n          // that have been updated while handling this request. Because changing the\n          // `unit_weight` of an inventory list item can cause items other than the\n          // list item edited and the aggregate list item to be updated, it's not\n          // possible to know for sure how many items the array will contain. It will\n          // be at least two though.\n          for (let i = 0; i < json.length; i++) {\n            const list = inventoryLists.find(list => list.id === json[i].list_id)\n            const listPosition = inventoryLists.indexOf(list)\n            const newList = addOrUpdateListItem(list, json[i])\n\n            newLists[listPosition] = newList\n          }\n\n          setInventoryLists(newLists)\n\n          if (status === 201) {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your inventory list item has been created.'\n            })\n          } else {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your new inventory list item has been combined with another item with the same description.'\n            })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            header: `${json.errors.length} error(s) prevented your list item from being created:`,\n            message: json.errors\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors && json.errors.length ? `Error ${status} creating list item for inventory list ${listId}: ${json.errors}` : `Unknown error ${status} creating list item for inventory list ${listId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the inventory list you wanted to add an item to. Sorry! Try refreshing the page to solve this issue.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating inventory list item: ', err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your inventory list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, inventoryLists, logOutAndRedirect, setFlashAttributes])\n\n  const value = {\n    inventoryLists,\n    inventoryListLoadingState,\n    performInventoryListCreate,\n    performInventoryListUpdate,\n    performInventoryListDestroy,\n    performInventoryListItemCreate,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    if (activeGameId && mountedRef.current) fetchLists()\n  }, [fetchLists, activeGameId])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <InventoryListsContext.Provider value={value}>\n      {children}\n    </InventoryListsContext.Provider>\n  )\n}\n\nInventoryListsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    inventoryLists: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      game_id: PropTypes.number,\n      title: PropTypes.string.isRequired,\n      aggregate: PropTypes.bool.isRequired,\n      list_items: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        list_id: PropTypes.number.isRequired,\n        description: PropTypes.string.isRequired,\n        quantity: PropTypes.number.isRequired,\n        notes: PropTypes.string,\n        unit_weight: PropTypes.number\n      })).isRequired\n    })),\n    inventoryListLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performInventoryListCreate: PropTypes.func,\n    performInventoryListUpdate: PropTypes.func,\n    performInventoryListDestroy: PropTypes.func,\n    performInventoryListItemCreate: PropTypes.func\n  })\n}\n\nexport { InventoryListsContext, InventoryListsProvider }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { useContext } from 'react'\nimport { ColorContext } from '../contexts/colorContext'\nimport { AppContext } from '../contexts/appContext'\nimport { GamesContext } from '../contexts/gamesContext'\nimport { ShoppingListsContext } from '../contexts/shoppingListsContext'\nimport { InventoryListsContext } from '../contexts/inventoryListsContext'\n\nconst useCustomContext = (cxt, msg) => {\n  const context = useContext(cxt)\n\n  if (!context) {\n    throw new Error(msg)\n  }\n\n  return context\n}\n\nexport const useColorScheme = () => (\n  useCustomContext(ColorContext, 'useColorScheme must be used within a ColorProvider')\n)\n\nexport const useAppContext = () => (\n  useCustomContext(AppContext, 'useAppContext must be used within a AppProvider')\n)\n\nexport const useShoppingListsContext = () => (\n  useCustomContext(ShoppingListsContext, 'useShoppingListsContext must be used within a ShoppingListsProvider')\n)\n\nexport const useGamesContext = () => (\n  useCustomContext(GamesContext, 'useGamesContext must be used within a GamesProvider')\n)\n\nexport const useInventoryListsContext = () => (\n  useCustomContext(InventoryListsContext, 'useInventoryListsContext must be used within an InventoryListsProvider')\n)\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport { createContext, useState, useEffect, useRef, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  fetchGames,\n  createGame,\n  updateGame,\n  destroyGame\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext } from '../hooks/contexts'\nimport paths from '../routing/paths'\n\nconst GamesContext = createContext()\n\nconst GamesProvider = ({ children, overrideValue = {} }) => {\n  const { token, logOutAndRedirect, setFlashAttributes } = useAppContext()\n\n  const [games, setGames] = useState(overrideValue.games || [])\n  const [gameLoadingState, setGameLoadingState] = useState(overrideValue.gameLoadingState || LOADING)\n\n  const mountedRef = useRef(true)\n  const gamesOverridden = useRef(false)\n\n  if (overrideValue.games) {\n    // Use this as the initial value only so that the games can be\n    // updated when we interact in Storybook or other tests\n    delete overrideValue.games\n    gamesOverridden.current = true\n  }\n\n  const fetchUserGames = useCallback(() => {\n    if (token && !gamesOverridden.current) {\n      fetchGames(token)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setGames(json)\n              !overrideValue.gameLoadingState && setGameLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} when fetching games: ${json.errors}` : 'No game data returned from SIM'\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching games: ', err)\n\n            if (mountedRef.current) setGameLoadingState(ERROR)\n          }\n        })\n    }\n  }, [token, overrideValue.gameLoadingState, logOutAndRedirect])\n\n  const performGameCreate = useCallback((attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createGame(token, attrs)\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (mountedRef.current) {\n            const newGames = [...games]\n            newGames.unshift(json)\n            setGames(newGames)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your game has been created.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            header: `${json.errors.length} error(s) prevented your game from being created:`,\n            message: json.errors\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what.\n          throw new Error(json.errors ? `Error ${status} when creating game: ${json.errors}` : `Unknown error ${status} when creating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating game: ', err)\n\n          mountedRef.current && setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while creating your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashAttributes, logOutAndRedirect])\n\n  const performGameUpdate = useCallback((gameId, attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onNotFound, onInternalServerError, onUnauthorized } = callbacks\n\n    updateGame(token, gameId, attrs)\n      .then(({ status, json }) => {\n        if (status === 200) {\n          if (mountedRef.current) {\n            const newGames = games.map(game => parseInt(game.id) === parseInt(gameId) ? json : game)\n            setGames(newGames)\n            setFlashAttributes({ type: 'success', message: 'Success! Your game has been updated.' })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          if (mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: json.errors,\n              header: `${json.errors.length} error(s) prevented your game from being updated:`\n            })\n          }\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} while updating game: ${json.errors}` : `Error ${status} while updating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the game you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error updating game: ', err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashAttributes, logOutAndRedirect])\n\n  const performGameDestroy = useCallback((gameId, callbacks) => {\n    const { onSuccess, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyGame(token, gameId)\n      .then(resp => {\n        // If the game isn't found we should treat it as if it's been destroyed\n        // and just remove it successfully\n        if ((resp.status === 204 || resp.status === 404) && mountedRef.current) {\n          const destroyedGame = games.find(game => parseInt(game.id) === parseInt(gameId))\n          const gameIndex = games.indexOf(destroyedGame)\n\n          const newGames = [...games]\n          newGames.splice(gameIndex, 1)\n\n          setGames(newGames)\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your game has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          throw new Error(`Error ${resp.status} while destroying game ${gameId}`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error destroying game: ', err)\n\n          if (mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"Something unexpected happened while trying to delete your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n            })\n          }\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, logOutAndRedirect, setFlashAttributes])\n\n  const value = {\n    games,\n    gameLoadingState,\n    performGameCreate,\n    performGameUpdate,\n    performGameDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    mountedRef.current && fetchUserGames()\n  }, [fetchUserGames])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <GamesContext.Provider value={value}>\n      {children}\n    </GamesContext.Provider>\n  )\n}\n\nGamesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    games: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n      user_id: PropTypes.number,\n      name: PropTypes.string.isRequired,\n      description: PropTypes.string\n    })),\n    gameLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performGameCreate: PropTypes.func,\n    performGameUpdate: PropTypes.func,\n    performGameDestroy: PropTypes.func\n  })\n}\n\nexport { GamesContext, GamesProvider }\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport { authorize } from '../../utils/simApi'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport logOutWithGoogle from '../../utils/logOutWithGoogle'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './homePage.module.css'\n\nconst HomePage = () => {\n  const { token, setShouldRedirectTo, removeSessionCookie } = useAppContext()\n\n  const mountedRef = useRef(true)\n\n  const verifyLogin = useCallback(() => {\n    if (token && !isStorybook) {\n      authorize(token)\n        .then(resp => resp.status === 500 ? resp.json() : null)\n        .then(data => {\n          if (data) {\n            throw new Error('Internal Server Error: ', data.errors[0])\n          } else {\n            setShouldRedirectTo(paths.dashboard.main)\n            mountedRef.current = false\n          }\n        })\n        .catch(err => {\n          if (process.env.NODE_ENV === 'development') console.error(err.message)\n\n          logOutWithGoogle(() => removeSessionCookie())\n        })\n    }\n  }, [token, removeSessionCookie, setShouldRedirectTo])\n\n  useEffect(() => {\n    verifyLogin()\n    return () => mountedRef.current = false\n  }, [token, verifyLogin])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>Skyrim Inventory Management</h1>\n        <Link className={styles.login} to={paths.login}>Log in with Google</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React, { useEffect, useState, useRef } from 'react'\nimport GoogleLogin from 'react-google-login'\nimport {\n  googleClientId,\n  frontendBaseUri\n} from '../../utils/config'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './loginPage.module.css'\n\nconst LoginPage = () => {\n  const {\n    token,\n    setSessionCookie,\n    removeSessionCookie,\n    setShouldRedirectTo\n  } = useAppContext()\n\n  const [loginErrorMessage, setLoginErrorMessage] = useState(null)\n  const mountedRef = useRef(true)\n\n  const successCallback = (resp) => {\n    const { tokenId } = resp\n\n    if (tokenId) {\n      setSessionCookie(tokenId)\n      setShouldRedirectTo(paths.dashboard.main)\n      mountedRef.current = false\n    }\n  }\n\n  const failureCallback = (resp) => {\n    if (process.env.NODE_ENV === 'development') console.error('Login failure: ', resp)\n    token && removeSessionCookie()\n    setLoginErrorMessage('Something went wrong! Please try logging in again.')\n  }\n\n  useEffect(() => (\n    () => (mountedRef.current = false)\n  ))\n\n  return(\n    <div className={styles.root}>\n      {loginErrorMessage ?\n      <p className={styles.errorMessage}>{loginErrorMessage}</p> :\n      null}\n      <div className={styles.container}>\n        <GoogleLogin\n          className={styles.button}\n          clientId={googleClientId}\n          buttonText='Log In With Google'\n          onSuccess={successCallback}\n          onFailure={failureCallback}\n          redirectUri={`${frontendBaseUri}${paths.dashboard.main}`}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPage\n","export const YELLOW = {\n  schemeColorDarkest: '#ffbf00',\n  schemeColorDark: '#ffcb32',\n  schemeColorLight: '#ffd866',\n  schemeColorLightest: '#fff2cc',\n  hoverColorDark: '#e5ab00',\n  hoverColorLight: '#ffc519',\n  hoverColorLightest: '#ffebb2',\n  textColorPrimary: '#4c3900',\n  textColorSecondary: '#4c3900',\n  textColorTertiary: '#7f5700',\n  borderColor: '#cc9800',\n}\n\nexport const PINK = {\n  schemeColorDarkest: '#e83f6f',\n  schemeColorDark: '#ec658b',\n  schemeColorLight: '#f18ba8',\n  schemeColorLightest: '#fad8e2',\n  hoverColorDark: '#d03863',\n  hoverColorLight: '#ea527d',\n  hoverColorLightest: '#f5b2c5',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#451221',\n  borderColor: '#b93258',\n}\n\nexport const BLUE = {\n  schemeColorDarkest: '#2274a5',\n  schemeColorDark: '#4e8fb7',\n  schemeColorLight: '#7aabc9',\n  schemeColorLightest: '#d2e3ed',\n  hoverColorDark: '#1e6894',\n  hoverColorLight: '#3881ae',\n  hoverColorLightest: '#bcd5e4',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#0d2e42',\n  borderColor: '#1b5c84'\n}\n\nexport const GREEN = {\n  schemeColorDarkest: '#00a323',\n  schemeColorDark: '#32b54e',\n  schemeColorLight: '#66c77b',\n  schemeColorLightest: '#ccecd3',\n  hoverColorDark: '#00921f',\n  hoverColorLight: '#19ac38',\n  hoverColorLightest: '#b2e3bd',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#00410e',\n  borderColor: '#00821c'\n}\n\nexport const AQUA = {\n  schemeColorDarkest: '#20e2e9',\n  schemeColorDark: '#62eaef',\n  schemeColorLight: '#8ff0f4',\n  schemeColorLightest: '#d2f9fa',\n  hoverColorDark: '#11cbd1',\n  hoverColorLight: '#4ce7ed',\n  hoverColorLightest: '#bcf6f8',\n  textColorPrimary: '#094345',\n  textColorSecondary: '#094345',\n  textColorTertiary: '#094345',\n  borderColor: '#19b4ba'\n}\n\nconst colorSchemes = [\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n]\n\nexport default colorSchemes\n","export default __webpack_public_path__ + \"static/media/googleIcon.9432a66b.svg\";","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport icon from './googleIcon.svg'\nimport styles from './logoutDropdown.module.css'\n\nconst LogoutDropdown = ({className, logOutFunction}) => {\n  const mountedRef = useRef(true)\n\n  const logOutAndUnmount = e => {\n    e.preventDefault()\n\n    logOutFunction(() => { mountedRef.current = false })\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ))\n\n  return(\n    <div className={className}>\n      <button className={styles.button} onClick={logOutAndUnmount}>\n        <div className={styles.body}>\n          <div className={styles.googleLogout}>\n            <img src={icon} alt='Google logo' />\n            Log Out With Google\n          </div>\n        </div>\n      </button>\n    </div>\n  )\n}\n\nLogoutDropdown.propTypes = {\n  className: PropTypes.string,\n  logOutFunction: PropTypes.func.isRequired\n}\n\nexport default LogoutDropdown\n","export default __webpack_public_path__ + \"static/media/anonymousAvatar.36d1acc1.jpg\";","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport LogoutDropdown from '../logoutDropdown/logoutDropdown'\nimport anonymousAvatar from './anonymousAvatar.jpg'\nimport styles from './dashboardHeader.module.css'\n\nconst DashboardHeader = () => {\n  const {\n    profileData,\n    logOutAndRedirect\n  } = useAppContext()\n\n  const [dropdownVisible, setDropdownVisible] = useState(false)\n  const mountedRef = useRef(true)\n\n  const logOutFunction = useCallback((callback = null) => {\n    setDropdownVisible(false);\n\n    logOutAndRedirect(paths.home, () => {\n      callback && callback()\n      mountedRef.current = false\n    })\n  }, [logOutAndRedirect])\n\n  useEffect(() => {\n    return () => (mountedRef.current = false)\n  }, [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.bar}>\n        <span className={styles.headerContainer}>\n          <h1 className={styles.header}>\n            <Link className={styles.headerLinkLarge} to={paths.dashboard.main}>Skyrim Inventory<br className={styles.bp} /> Management</Link>\n            <Link className={styles.headerLinkSmall} to={paths.dashboard.main}>S. I. M.</Link>\n          </h1>\n        </span>\n        {profileData ?\n        <button className={styles.profile} onClick={() => setDropdownVisible(!dropdownVisible)}>\n          <div className={styles.profileText}>\n            <p className={styles.textTop}>{profileData.name}</p>\n            <p className={styles.textBottom}>{profileData.email}</p>\n          </div>\n          <img className={styles.avatar} src={profileData.image_url || anonymousAvatar} alt='User avatar' referrerPolicy='no-referrer' />\n        </button> :\n        null\n        }\n        <LogoutDropdown\n          className={dropdownVisible ? styles.logoutDropdown : styles.hidden}\n          logOutFunction={logOutFunction}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default DashboardHeader\n","/*\n *\n * This component is intended for use within the GamesDropdown.\n * The GamesDropdown mimics a native `select` element. It is\n * critical that this component's role and ARIA attributes not\n * be changed except to make it more accessible or fix bugs in\n * accessibility. If you need a different role or aria attributes,\n * pass the values in as props or create another component.\n *\n */\n\nimport React from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport styles from './gamesDropdownOption.module.css'\n\nconst GamesDropdownOption = ({\n  name,\n  className,\n  onClick,\n  onKeyDown,\n  ariaSelected\n}) => {\n  return(\n    <li\n      className={classNames(styles.root, className)}\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      role='option'\n      tabIndex={0}\n      aria-selected={ariaSelected}\n    >\n      {name.length > 24 ? `${name.substring(0, 23)}...` : name}\n    </li>\n  )\n}\n\nGamesDropdownOption.propTypes = {\n  name: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  ariaSelected: PropTypes.bool.isRequired\n}\n\nexport default GamesDropdownOption\n","/*\n * It was important to have a styled options list, so a native HTML select\n * dropdown wouldn't do. This component has been made to be as accessible as\n * possible, adhering to the ARIA specification for comboboxes. More information\n * on comboboxes and their expected behaviour can be found in the ARIA docs:\n * https://www.w3.org/TR/wai-aria-practices-1.1/examples/combobox/aria1.1pattern/listbox-combo.html\n *\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react'\nimport classNames from 'classnames'\nimport { useHistory } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport useQuery from '../../hooks/useQuery'\nimport GamesDropdownOption from '../gamesDropdownOption/gamesDropdownOption'\nimport styles from './gamesDropdown.module.css'\n\nconst GamesDropdown = () => {\n  const history = useHistory()\n  const queryString = useQuery()\n\n  const { setFlashVisible } = useAppContext()\n  const { games, gameLoadingState, performGameCreate } = useGamesContext()\n\n  const [activeGame, setActiveGame] = useState(null)\n  const [dropdownExpanded, setDropdownExpanded] = useState(false)\n  const [inputValue, setInputValue] = useState('')\n\n  const componentRef = useRef(null)\n\n  const expandDropdown = () => setDropdownExpanded(true)\n  const collapseDropdown = useCallback(() => setDropdownExpanded(false), [setDropdownExpanded])\n  const toggleDropdown = () => setDropdownExpanded(!dropdownExpanded)\n\n  const colorVars = {\n    '--button-background-color': BLUE.schemeColorDarkest,\n    '--button-hover-color': BLUE.hoverColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor\n  }\n\n  const selectGame = useCallback(game => {\n    setActiveGame(game)\n    setInputValue(game.name)\n    \n    const params = new URLSearchParams(`game_id=${game.id}`)\n    history.push({ search: params.toString() })\n\n    collapseDropdown()\n  }, [history, collapseDropdown])\n\n  const isActiveGame = id => {\n    if (activeGame && !games.length) return false\n\n    return activeGame ? activeGame.id === id : id === games[0].id\n  }\n\n  const updateValue = e => setInputValue(e.currentTarget.value)\n\n  useEffect(() => {\n    const gameId = parseInt(queryString.get('game_id'))\n\n    if (games.length && gameId) {\n      if (activeGame && activeGame.id === gameId) return\n      const game = gameId ? games.find(game => game.id === gameId) : games[0]\n\n      selectGame(game || games[0])\n    } else if (games.length && !activeGame) {\n      selectGame(games[0])\n    }\n  }, [selectGame, activeGame, games, queryString])\n\n  useEffect(() => {\n    const collapseDropdownAndResetValue = e => {\n      if (componentRef.current !== e.relatedTarget && !componentRef.current.contains(e.relatedTarget)) {\n        // Hide the dropdown\n        collapseDropdown()\n\n        // Find out if there is a game whose title exactly matches the\n        // text typed into the input (without regard to case).\n        const game = games.find(g => g.name.toLowerCase() === inputValue.toLowerCase())\n\n        if (game) {\n          // If there is a matching game, it should be selected when the\n          // component is no longer focussed.\n          setActiveGame(game)\n          setInputValue(game.name)\n\n          const params = new URLSearchParams(`game_id=${game.id}`)\n          history.push({ search: params.toString() })\n        } else {\n          // If there is no matching game, the input value should be reset\n          // to the name of the active game.\n          activeGame && setInputValue(activeGame.name)\n        }\n      }\n    }\n\n    document.addEventListener('focusout', collapseDropdownAndResetValue)\n\n    return () => {\n      document.removeEventListener('focusout', collapseDropdownAndResetValue)\n    }\n  }, [games, setActiveGame, activeGame, setInputValue, inputValue, history, collapseDropdown])\n\n  return(\n    <div ref={componentRef} className={styles.root} style={colorVars} data-testid='games-dropdown'>\n      <div\n        className={styles.header}\n        role='combobox'\n        aria-haspopup='listbox'\n        aria-owns='gamesListbox'\n        aria-controls='gamesListbox'\n        aria-expanded={dropdownExpanded}\n      >\n        <input\n          className={classNames(styles.input, 'focusable')}\n          type='text'\n          disabled={gameLoadingState !== 'done' /* if 'loading' or 'error' it should be disabled*/}\n          value={inputValue}\n          onChange={updateValue}\n          placeholder='No games available'\n          aria-autocomplete='list'\n          aria-multiline={false}\n          aria-controls='gamesListbox'\n          onFocus={expandDropdown}\n          onClick={expandDropdown}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              const game = games.find(g => g.name.toLowerCase() === e.target.value.toLowerCase())\n\n              if (game) {\n                selectGame(game)\n              } else {\n                const callbacks = {\n                  // Although `games` has just been set in the API response handler,\n                  // there is no guarantee that it will be updated yet by the time the\n                  // callback runs. So instead of `selectGame`, here we just clear the\n                  // query string and set the active game to `null`. The `useEffect`\n                  // hook will run when the `games` array is updated and will set the\n                  // query string and the active game to the newly created game.\n                  onSuccess: () => {\n                    history.push({ search: '' })\n                    setActiveGame(null)\n                    e.target.blur()\n                  },\n                  onUnprocessableEntity: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  },\n                  onInternalServerError: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  }\n                }\n\n                performGameCreate({ name: inputValue }, callbacks)\n              }\n            } else if (e.key === 'ArrowUp') {\n              e.preventDefault()\n              const focusables = document.getElementsByClassName('focusable')\n              focusables[focusables.length - 1].focus()\n            } else if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            } else if (e.key === 'Escape') {\n              collapseDropdown()\n            }\n          }}\n        />\n        <button\n          className={styles.trigger}\n          onClick={toggleDropdown}\n          onKeyDown={e => {\n            if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            }\n          }}\n          disabled={gameLoadingState !== 'done'}\n          data-testid='games-dropdown-trigger'\n        >\n          <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n        </button>\n      </div>\n      <ul\n        id='gamesListbox'\n        className={classNames(styles.dropdown, { [styles.hidden]: !dropdownExpanded || !games.length })}\n        role='listbox'\n      >\n        {games.map(({ id, name }, index) => {\n          return(\n            <GamesDropdownOption\n              className='focusable'\n              onClick={() => selectGame({ id, name })}\n              onKeyDown={e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  selectGame({ id, name })\n                } else if (e.key === 'ArrowUp') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  focusables[index - 1].focus()\n                } else if (e.key === 'ArrowDown') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  const nextIndex = index < focusables.length - 1 ? index + 1 : 0\n                  focusables[nextIndex].focus()\n                }\n              }}\n              key={`${name.toLowerCase().replace(' ', '_')}-${id}`}\n              ariaSelected={isActiveGame(id)}\n              name={name}\n            />\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default GamesDropdown\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardHeader from '../components/dashboardHeader/dashboardHeader'\nimport GamesDropdown from '../components/gamesDropdown/gamesDropdown'\nimport styles from './dashboardLayout.module.css'\n\nconst DashboardLayout = ({ title, includeGameSelect = false, children }) => {\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        {title ?\n        <div className={styles.headerContainer}>\n          <div className={styles.titleContainer}>\n            <h2 className={styles.title}>{title}</h2>\n            {includeGameSelect && <GamesDropdown />}\n          </div>\n          <hr className={styles.hr} />\n        </div> :\n        null}\n        {children}\n      </div>\n      <DashboardHeader />\n    </div>\n  )\n}\n\nDashboardLayout.propTypes = {\n  title: PropTypes.string,\n  includeGameSelect: PropTypes.bool,\n  children: PropTypes.node.isRequired\n}\n\nexport default DashboardLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactLoading from 'react-loading'\n\nconst possibleTypes = [\n  'blank',\n  'balls',\n  'bars',\n  'bubbles',\n  'cubes',\n  'cylon',\n  'spin',\n  'spinningBubbles',\n  'spokes'\n]\n\nconst Loading = ({ className, type = 'bubbles', color, height, width }) => (\n  <ReactLoading className={className} type={type} color={color} height={height} width={width} />\n)\n\nLoading.propTypes = {\n  className: PropTypes.string,\n  type: PropTypes.oneOf(possibleTypes),\n  color: PropTypes.string.isRequired,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n}\n\nexport default Loading\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { useColorScheme } from '../../hooks/contexts'\nimport styles from './navigationCard.module.css'\n\nconst NavigationCard = ({ href, children }) => {\n  const { schemeColorDarkest, hoverColorDark, textColorPrimary} = useColorScheme()\n\n  const styleVars = {\n    '--background-color': schemeColorDarkest,\n    '--hover-color': hoverColorDark,\n    '--text-color': textColorPrimary\n  }\n\n  return(\n    <Link className={styles.root} to={href} style={styleVars}>\n      {children}\n    </Link>\n  )\n}\n\nNavigationCard.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport default NavigationCard\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport NavigationCard from '../navigationCard/navigationCard'\nimport styles from './navigationMosaic.module.css'\n\nconst NavigationMosaic = ({ cardArray }) => (\n  <div className={styles.root}>\n    {cardArray.map(({ colorScheme, href, children, key }) => (\n      <div key={key} className={styles.card}>\n        <ColorProvider colorScheme={colorScheme}>\n          <NavigationCard \n            href={href}\n            children={children}\n          />\n        </ColorProvider>\n      </div>\n    ))}\n  </div>\n)\n\nNavigationMosaic.propTypes = {\n  cardArray: PropTypes.arrayOf(\n    PropTypes.shape({\n      href: PropTypes.string.isRequired,\n      children: PropTypes.node.isRequired,\n      key: PropTypes.string.isRequired,\n      colorScheme: PropTypes.shape({\n        schemeColorDarkest: PropTypes.string.isRequired,\n        schemeColorDark: PropTypes.string.isRequired,\n        schemeColorLight: PropTypes.string.isRequired,\n        schemeColorLightest: PropTypes.string.isRequired,\n        hoverColorDark: PropTypes.string.isRequired,\n        hoverColorLight: PropTypes.string.isRequired,\n        hoverColorLightest: PropTypes.string.isRequired,\n        textColorPrimary: PropTypes.string.isRequired,\n        textColorSecondary: PropTypes.string,\n        textColorTertiary: PropTypes.string,\n        borderColor: PropTypes.string\n      }).isRequired\n    })\n  ).isRequired\n}\n\nexport default NavigationMosaic\n","import React, { useRef, useEffect } from 'react'\nimport {\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n} from '../../utils/colorSchemes'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport Loading from '../../components/loading/loading'\nimport NavigationMosaic from '../../components/navigationMosaic/navigationMosaic'\nimport styles from './dashboardPage.module.css'\n\nconst cards = [\n  {\n    colorScheme: YELLOW,\n    href: paths.dashboard.games,\n    children: 'Your Games',\n    key: 'your-games'\n  },\n  {\n    colorScheme: PINK,\n    href: paths.dashboard.shoppingLists,\n    children: 'Your Shopping Lists',\n    key: 'your-shopping-lists'\n  },\n  {\n    colorScheme: BLUE,\n    href: paths.dashboard.inventory,\n    children: 'Your Inventory',\n    key: 'your-inventory'\n  },\n  {\n    colorScheme: GREEN,\n    href: '#',\n    children: 'Nav Link 4',\n    key: 'nav-link-4'\n  },\n  {\n    colorScheme: AQUA,\n    href: '#',\n    children: 'Nav Link 5',\n    key: 'nav-link-5'\n  }\n]\n\nconst DashboardPage = () => {\n  const { token, profileLoadState, setShouldRedirectTo } = useAppContext()\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    if (!token && !isStorybook) {\n      setShouldRedirectTo(paths.login)\n      mountedRef.current = false\n    }\n\n    return () => mountedRef.current = false\n  }, [token, setShouldRedirectTo])\n  \n  return(\n    <DashboardLayout>\n      {profileLoadState === 'done' ? <div className={styles.root}>\n        <NavigationMosaic cardArray={cards} />\n      </div> :\n      <Loading className={styles.loading} type='bubbles' color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n    </DashboardLayout>\n  )\n}\n\nexport default DashboardPage\n","import React, { useEffect } from 'react'\nimport classNames from 'classnames'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './flashMessage.module.css'\n\nconst SUCCESS = 'success'\nconst INFO = 'info'\nconst ERROR = 'error'\nconst WARNING = 'warning'\n\nconst colors = {\n  [SUCCESS]: '#329932',\n  [INFO]: '#4e6d8e',\n  [ERROR]: '#cc0000',\n  [WARNING]: '#b0a723'\n}\n\nconst FlashMessage = () => {\n  const { flashVisible, setFlashVisible, flashAttributes } = useAppContext()\n\n  const { type, header, message } = flashAttributes\n\n  const colorVars = { '--text-color': colors[type] }\n\n  useEffect(() => {\n    if (flashVisible) {\n      setTimeout(() => {\n        setFlashVisible(false)\n      }, 4000)\n    }\n  }, [flashVisible, setFlashVisible])\n\n  return(\n    <div className={classNames(styles.root, { [styles.hidden]: !flashVisible })} style={colorVars}>\n      {header && <p className={styles.header}>{header}</p>}\n      {typeof message === 'string' ? message :\n      <ul className={styles.messageList}>\n        {message.map((msg, index) => <li key={`message-${index}`} className={styles.msg}>{msg}</li>)}\n      </ul>}\n    </div>\n  )\n}\n\nexport default FlashMessage\n","import React, { useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './modal.module.css'\n\nconst Modal = ({ children, title, subtitle }) => {\n  const { setModalVisible } = useAppContext()\n\n  const contentRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const contentRefContains = useCallback(el => (\n    contentRef.current && (contentRef.current === el || contentRef.current.contains(el))\n  ), [])\n\n  const hide = useCallback(e => {\n    if ((e.type === 'click' && !contentRefContains(e.target)) || (e.type === 'keydown' && e.key === 'Escape')) {\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n  }, [contentRefContains, setModalVisible])\n\n  useEffect(() => {\n    window.addEventListener('keydown', hide)\n\n    return () => window.removeEventListener('keydown', hide)\n  }, [hide])\n\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].classList.add('modal-open')\n\n    return () => {\n      document.getElementsByTagName('body')[0].classList.remove('modal-open')\n      mountedRef.current = false\n    }\n  }, [])\n\n  return(\n    <div role='dialog' className={styles.root} onClick={hide}>\n      <div ref={contentRef} className={styles.content}>\n        <h3 className={styles.title}>{title}</h3>\n        {subtitle && <p className={styles.subtitle}>{subtitle}</p>}\n        {children}\n      </div>\n    </div>\n  )\n}\n\nModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired,\n  subtitle: PropTypes.string\n}\n\nexport default Modal\n","import React from 'react'\nimport Modal from '../components/modal/modal'\n\nconst withModal = WrappedComponent => {\n  return ({ title, subtitle = null, ...childProps }) => (\n    <Modal title={title} subtitle={subtitle}>\n      <WrappedComponent {...childProps} />\n    </Modal>\n  )\n}\n\nexport default withModal\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport colorSchemes from '../../utils/colorSchemes'\nimport styles from './modalForm.module.css'\n\nconst ModalForm = ({\n  modelName,\n  buttonLabel,\n  onSubmit,\n  fields,\n  buttonColor = null,\n}) => {\n  const mountedRef = useRef(true)\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n\n  // If the button color isn't specified in the props, pick\n  // a random color\n  const colorRef = useRef(buttonColor || colorSchemes[Math.floor(Math.random() * colorSchemes.length)])\n\n  const colorVars = {\n    '--button-background-color': colorRef.current.schemeColorDarkest,\n    '--button-text-color': colorRef.current.textColorPrimary,\n    '--button-hover-color': colorRef.current.hoverColorDark,\n    '--button-border-color': colorRef.current.borderColor\n  }\n\n  useEffect(() => {\n    inputRef.current && inputRef.current.focus()\n\n    return () => mountedRef.current = false\n  }, [])\n\n  return(\n    <form\n      ref={formRef}\n      className={styles.root}\n      style={colorVars}\n      onSubmit={onSubmit}\n      data-testid={`${modelName}-form`}\n    >\n      {fields.map(({ tag: Tag, label, name, ...inputProps }, index) => {\n        if (index === 0) inputProps['ref'] = inputRef\n\n        return(\n          <fieldset key={`${modelName}-${name}`} className={styles.fieldset}>\n            <label className={styles.label} htmlFor={name}>{label}</label>\n            <Tag\n              className={styles.input}\n              name={name}\n              {...inputProps}\n            />\n          </fieldset>\n        )\n      })}\n      <button className={styles.submit} type='submit'>{buttonLabel}</button>\n    </form>\n  )\n}\n\nModalForm.propTypes = {\n  // Should be a lower-cased string without whitespace. Used to set\n  // the test ID of the form to something more specific.\n  modelName: PropTypes.string.isRequired,\n  // The text that should appear on the form's button\n  buttonLabel: PropTypes.string.isRequired,\n  // Submit handler for the form\n  onSubmit: PropTypes.func.isRequired,\n  // The color of the form's button, taken from /src/utils/colorSchemes.js.\n  // Those color schemes automatically include these keys.\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }),\n  // A description of the form fields\n  fields: PropTypes.arrayOf(PropTypes.shape({\n    // It is recommended that the name of the form field be the same as the\n    // name of the attribute it sets (all lower case)\n    name: PropTypes.string.isRequired,\n    // This form supports inputs and textareas. It's possible that in the\n    // future it could be modified to support other form controls as well.\n    tag: PropTypes.oneOf(['input', 'textarea']).isRequired,\n    // The text of the label. Generally the name, titlecased.\n    label: PropTypes.string.isRequired,\n    // The type of the form control.\n    type: PropTypes.oneOf(['text', 'number', 'textarea']).isRequired,\n    // The placeholder value is required in case a value is `null`\n    placeholder: PropTypes.string.isRequired,\n    // Optional inputMode determines what keypad mobile users see. More\n    // options could be added to this list but we didn't need them yet\n    // so I just put these ones.\n    inputMode: PropTypes.oneOf(['numeric', 'text']),\n    // The starting `value` of the field, generally the current value of\n    // the attribute, if there is one.\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  })).isRequired\n}\n\nexport default ModalForm\n","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport { pathsScopedToGames } from '../../routing/paths'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'name',\n    tag: 'input',\n    label: 'Name',\n    type: 'text',\n    placeholder: 'Name',\n    inputMode: 'text',\n    pattern: \"^\\\\s*[A-Za-z0-9 \\\\-',]*\\\\s*$\",\n    title: 'Name can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n  },\n  {\n    name: 'description',\n    tag: 'input',\n    label: 'Description',\n    type: 'text',\n    placeholder: 'Description',\n    inputMode: 'text'\n  }\n]\n\nconst ModalGameForm = ({ type, currentAttributes = {} }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performGameCreate, performGameUpdate } = useGamesContext()\n\n  const history = useHistory()\n\n  const mountedRef = useRef(true)\n\n  const onSubmit = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const unmountAndDisplayFlash = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onUnprocessableEntity: unmountAndDisplayFlash,\n      onInternalServerError: unmountAndDisplayFlash,\n      onNotFound: unmountAndDisplayFlash, // only valid for update but won't break anything\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    for (const attr in attrs) {\n      if (attrs[attr] === currentAttributes[attr]) delete attrs[attr]\n    }\n\n    if (type === 'create') {\n      const onSuccess = () => {\n        // If the user is on a page where there is a games dropdown,\n        // they should see a flash message when a game is created since\n        // they won't see the game added to a list.\n        if (pathsScopedToGames.indexOf(history.location.pathname) > -1) {\n          unmountAndDisplayFlash()\n        } else {\n          setModalVisible(false)\n          mountedRef.current = false\n        }\n      }\n\n      callbacks.onSuccess = onSuccess\n\n      performGameCreate(attrs, callbacks)\n    } else {\n      callbacks.onSuccess = unmountAndDisplayFlash\n\n      performGameUpdate(currentAttributes.id, attrs, callbacks)\n    }\n  }\n\n  const fields = formFields.map(field => (\n    currentAttributes[field.name] ? { defaultValue: currentAttributes[field.name], ...field } : field\n  ))\n  \n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='game'\n      buttonLabel={type === 'create' ? 'Create Game' : 'Update Game'}\n      onSubmit={onSubmit}\n      fields={fields}\n    />\n  )  \n}\n\nModalGameForm.propTypes = {\n  type: PropTypes.oneOf(['create', 'edit']).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    description: PropTypes.string\n  })\n}\n\nexport default ModalGameForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport SlideToggle from 'react-slide-toggle'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport withModal from '../../hocs/withModal'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './game.module.css'\n\nconst DEFAULT_DESCRIPTION = 'This game has no description.'\nconst DESTROY_CONFIRMATION = 'Are you sure you want to delete this game? This cannot be undone. You will lose all data associated with the game you delete.'\n\nconst Game = ({ gameId, name, description }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const {\n    setFlashAttributes,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n  const { performGameDestroy } = useGamesContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const destroyRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n\n  const toggleDescription = e => {\n    if (!e || !refContains(iconsRef, e.target)) setToggleEvent(Date.now)\n  }\n\n  const showEditForm = () => {\n    setFlashVisible(false)\n\n    const attributes = { id: gameId, name, description }\n\n    const ModalComponent = withModal(ModalGameForm)\n    setModalAttributes({\n      Tag: ModalComponent,\n      props: {\n        title: 'Edit Game',\n        type: 'edit',\n        currentAttributes: attributes\n      }\n    })\n    setModalVisible(true)\n  }\n\n  const destroyGame = e => {\n    setFlashVisible(false)\n\n    const confirmed = window.confirm(DESTROY_CONFIRMATION)\n\n    const displayFlashAndUnmount = () => {\n      setFlashVisible(true)\n      mountedRef.current = false\n    }\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: displayFlashAndUnmount,\n        onInternalServerError: () => mountedRef.current && setFlashVisible(true)\n      }\n\n      performGameDestroy(gameId, callbacks)\n    } else {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your game was not deleted.'\n      })\n      \n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.header} onClick={toggleDescription}>\n        <span ref={iconsRef} className={styles.editIcons}>\n          <button\n            ref={destroyRef}\n            className={styles.icon}\n            onClick={destroyGame}\n            data-testid={`game-destroy-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n          </button>\n          <button\n            ref={editRef}\n            className={styles.icon}\n            onClick={showEditForm}\n            data-testid={`game-edit-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n          </button>\n        </span>\n        <h3 className={styles.name}>{name}</h3>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.description}>{description || DEFAULT_DESCRIPTION}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGame.propTypes = {\n  gameId: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string\n}\n\nexport default Game\n","import React, { useEffect, useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport styles from './gameCreateForm.module.css'\n\nconst GameCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n  const { performGameCreate } = useGamesContext()\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const toggleForm = () => mountedRef.current && setToggleEvent(Date.now)\n\n  const createGame = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    const onSuccessOrFatalError = () => {\n      setFlashVisible(true)\n      formRef.current && formRef.current.reset()\n      toggleForm()\n    }\n\n    const callbacks = {\n      onSuccess: onSuccessOrFatalError,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: onSuccessOrFatalError,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    performGameCreate(attrs, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <h3 className={styles.slideToggleTrigger} onClick={toggleForm}>Create Game...</h3>\n      <SlideToggle toggleEvent={toggleEvent} onExpanded={() => inputRef.current.focus()} collapsed>\n        {({ setCollapsibleElement }) => (\n          /* Include this div so we can set the form ref to something else */\n          <div ref={setCollapsibleElement}>\n            {/* Unfortunately, setting data-testid seems the only way to test this since fireEvent.click on the button doesn't work */}\n            <form ref={formRef} className={styles.form} data-testid='game-create-form' onSubmit={createGame}>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  ref={inputRef}\n                  className={styles.input}\n                  type='text'\n                  name='name'\n                  placeholder='Name'\n                  aria-label='Name'\n                  pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n                  title=\"Name can contain only alphanumeric characters, spaces, commas, hyphens, and apostrophes\"\n                />\n              </fieldset>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  className={styles.input}\n                  type='text'\n                  name='description'\n                  placeholder='Description'\n                  aria-label='Description'\n                />\n              </fieldset>\n              <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit' disabled={disabled}>\n                Create\n              </button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGameCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default GameCreateForm\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './loadingError.module.css'\n\nconst LoadingError = ({ modelName }) => (\n  <div className={styles.root}>\n    <p className={styles.text}>\n      There was an error loading your {modelName}. It may have been on our end. We're sorry!\n    </p>\n  </div>\n)\n\nLoadingError.propTypes = {\n  modelName: PropTypes.oneOf(['games', 'shopping lists', 'inventory lists'])\n}\n\nexport default LoadingError\n","import React from 'react'\nimport { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport Game from '../../components/game/game'\nimport GameCreateForm from '../../components/gameCreateForm/gameCreateForm'\nimport Loading from '../../components/loading/loading'\nimport LoadingError from '../../components/loadingError/loadingError'\nimport styles from './gamesPage.module.css'\n\nconst GamesPage = () => {\n  const { modalVisible, modalAttributes } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n\n  return(\n    <DashboardLayout title='Your Games'>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <div className={styles.root}>\n        <FlashMessage />\n        {games && games.length === 0 && gameLoadingState === DONE && <p className={styles.noGames}>You have no games.</p>}\n        {gameLoadingState === DONE && <GameCreateForm disabled={gameLoadingState === LOADING || gameLoadingState === ERROR} />}\n        {games && games.length > 0 && gameLoadingState === DONE && <div className={styles.games}>\n          {games.map(({ id, name, description }) => <Game key={name} gameId={id} name={name} description={description} />)}\n        </div>}\n        {gameLoadingState === LOADING && <Loading type='bubbles' className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n        {gameLoadingState === ERROR && <LoadingError modelName='games' />}\n      </div>\n    </DashboardLayout>\n  )\n}\n\nexport default GamesPage\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useInventoryListsContext } from '../../hooks/contexts'\nimport styles from './inventoryListCreateForm.module.css'\n\nconst InventoryListCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n\n  const { performInventoryListCreate } = useInventoryListsContext()\n\n  const [inputValue, setInputValue] = useState('')\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const updateValue = e => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n  }\n\n  const createInventoryList = e => {\n    e.preventDefault()\n    setFlashVisible(false)\n    const title = e.target.elements.title.value\n\n    const showFlashAndClearInput = () => {\n      setInputValue('')\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: showFlashAndClearInput,\n      onNotFound: showFlashAndClearInput,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: showFlashAndClearInput\n    }\n    performInventoryListCreate(title, callbacks)\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <form data-testid='inventory-list-create-form' onSubmit={createInventoryList}>\n        <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n          <input\n            className={styles.input}\n            type='text'\n            name='title'\n            placeholder='Title'\n            aria-label='Title'\n            value={inputValue}\n            onChange={updateValue}\n            pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n            title='Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n          />\n          <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit'>Create</button>\n        </fieldset>\n      </form>\n    </div>\n  )\n}\n\nInventoryListCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default InventoryListCreateForm\n","/*\n *\n * This duplicates the logic in the back end's Titlecase lib module. This module\n * attempts to accurately title-case titles instead of just making every word\n * capitalised.\n *\n * There is a comment in the file where this module is defined on the backend\n * detailing the challenges of accurate title casing. Primarily, these challenges\n * arise from two factors: (1) inconsistency of style guides and (2) the fact that\n * most style guides consider part of speech in determining whether a word should\n * be capitalised. This can be problematic with words like \"like\", which  can be\n * a preposition, adjective, adverb, or conjunction, depending on usage. In general,\n * prepositions, conjunctions, and short (< 5-character) adverbs should be all\n * lower case.\n *\n * This code does not attempt to guess part of speech or do any other tricks to\n * determine which words should be capitalised. It capitalises the first and last\n * word of the string (standard in almost all style guides) and any words in the\n * middle, other than the designated LOWERCASE_WORDS, which are only capitalised\n * if they are the first or last word in the string.\n *\n */\n\nconst LOWERCASE_WORDS = [\n  'a',\n  'an',\n  'the',\n  'and',\n  'but',\n  'for',\n  'at',\n  'by',\n  'from',\n  'with',\n  'to',\n  'in',\n  'of',\n  'into',\n  'onto',\n  'on',\n  'without',\n  'within'\n]\n\nconst capitalize = word => {\n  const letter = word[0].toUpperCase()\n  return `${letter}${word.slice(1)}`\n}\n\nconst titlecase = text => {\n  if (!text) return ''\n\n  const words = text.toLowerCase().split(' ')\n\n  return words.map((word, index) => (\n    LOWERCASE_WORDS.indexOf(word) > -1 && [1, words.length].indexOf(index) === -1 ? word : capitalize(word)\n  )).join(' ')\n}\n\nexport default titlecase\n","import { useState, useRef, useEffect } from 'react'\n\nconst useComponentVisible = () => {\n  const [isComponentVisible, setIsComponentVisible] = useState(false)\n  const componentRef = useRef(null)\n  const triggerRef = useRef(null)\n\n  const componentRefContains = element => componentRef.current && componentRef.current.contains(element)\n  const triggerRefContains = element => triggerRef.current && triggerRef.current.contains(element)\n\n  const handleHideDiv = e => {\n    if (e.key === 'Escape') {\n      setIsComponentVisible(false)\n    }\n  }\n\n  const handleClickOutside = e => {\n    if (!componentRefContains(e.target) && !triggerRefContains(e.target)) {\n      setIsComponentVisible(false)\n    } else if (triggerRefContains(e.target)) {\n      setIsComponentVisible(!isComponentVisible)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleHideDiv, true)\n    document.addEventListener('click', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('keydown', handleHideDiv, true)\n      document.removeEventListener('click', handleClickOutside, true)\n    }\n  })\n\n  return { componentRef, triggerRef, isComponentVisible, setIsComponentVisible }\n}\n\nexport default useComponentVisible\n","import { useState, useLayoutEffect } from 'react'\nimport useResizeObserver from '@react-hook/resize-observer'\n\nconst useSize = target => {\n  const [size, setSize] = useState()\n\n  useLayoutEffect(() => {\n    setSize(target.current.getBoundingClientRect())\n  }, [target])\n\n  useResizeObserver(target, (entry) => setSize(entry.contentRect))\n\n  return size\n}\n\nexport default useSize\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { useColorScheme } from '../../hooks/contexts'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport styles from './listEditForm.module.css'\n\nconst ListEditForm = ({ formRef, maxTotalWidth, className, title, onSubmit }) => {\n  const getInputTextWidth = (text) => {\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n\n    context.font = '21px Quattrocento Sans'\n\n    const max = (maxTextWidth || maxTotalWidth)\n    \n    // The 1.1 proved necessary to prevent text from scrolling out of the\n    // view prematurely in Safari\n    const textWidth = context.measureText(text).width * 1.1\n\n    return Math.min(textWidth, max)\n  }\n\n  const [inputValue, setInputValue] = useState(title)\n  const [maxTextWidth, setMaxTextWidth] = useState(null)\n  const [inputWidth, setInputWidth] = useState(`${getInputTextWidth(title)}px`)\n\n  const mountedRef = useRef(true)\n  const inputRef = useRef(null)\n  const buttonRef = useRef(null)\n\n  const { schemeColorDarkest, textColorPrimary, borderColor, schemeColorLightest } = useColorScheme()\n\n  const colorVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--text-color': textColorPrimary,\n    '--border-color': borderColor,\n    '--icon-hover-color': schemeColorLightest\n  }\n\n  const updateInputWidth = (e) => {\n    if (!mountedRef.current) return\n\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n    setInputWidth(`${getInputTextWidth(newValue)}px`)\n  }\n\n  useEffect(() => {\n    inputRef.current.focus()\n\n    return () => mountedRef.current = false\n  }, [])\n\n  useEffect(() => {\n    if (!mountedRef.current) return\n\n    if (!buttonRef.current) return setMaxTextWidth(maxTotalWidth)\n\n    setMaxTextWidth(maxTotalWidth - buttonRef.current.offsetWidth)\n  }, [maxTotalWidth])\n\n  return(\n    <form className={classnames(className, styles.root)} style={colorVars} ref={formRef} onSubmit={onSubmit}>\n      <input\n        className={styles.input}\n        onClick={e => e.stopPropagation()}\n        onChange={updateInputWidth}\n        type='text'\n        name='title'\n        aria-label='Title'\n        ref={inputRef}\n        style={{width: inputWidth}}\n        value={inputValue}\n        pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n        title='Title can only contain alphanumeric characters, spaces, hyphens, commas, and apostrophes'\n      />\n      <button className={styles.submit} ref={buttonRef} name='submit' type='submit'>\n        <FontAwesomeIcon className={styles.fa} icon={faCheckSquare} />\n      </button>\n    </form>\n  )\n}\n\nListEditForm.propTypes = {\n  formRef: PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  }),\n  maxTotalWidth: PropTypes.number,\n  className: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired\n}\n\nexport default ListEditForm\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { useColorScheme } from '../../hooks/contexts'\nimport styles from './inventoryListItem.module.css'\n\n// If the unit weight has an integer value, we want\n// to display it as an integer. Only if it has a nonzero\n// value in the decimal place should it be displayed as\n// a decimal.\nconst formatWeight = weight => {\n  if (weight === undefined || weight === null || weight === '') return '-'\n\n  const weightNum = Number(weight)\n\n  return weightNum % 1 === 0 ? weightNum.toFixed(0) : weightNum.toFixed(1)\n}\n\nconst InventoryListItem = ({\n  canEdit = true,\n  itemId,\n  description,\n  quantity,\n  notes,\n  unitWeight\n}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    textColorSecondary,\n    borderColor,\n    schemeColorLightest,\n    textColorTertiary\n  } = useColorScheme()\n\n  const toggleDetails = e => {\n    setToggleEvent(Date.now)\n    setCollapsed(!collapsed)\n  }\n\n  const styleVars = {\n    '--scheme-color': schemeColorDark,\n    '--title-text-color': textColorSecondary,\n    '--border-color': borderColor,\n    '--body-background-color': schemeColorLightest,\n    '--body-text-color': textColorTertiary,\n    '--hover-color': hoverColorLight\n  }\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={styleVars}>\n      <div className={styles.toggle} onClick={toggleDetails}>\n        <span className={styles.header}>\n          <h3 className={styles.description}>{description}</h3>\n        </span>\n        <span className={styles.quantity}>\n          <div className={styles.quantityContent}>{quantity}</div>\n        </span>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <h4 className={styles.label}>Unit Weight:</h4>\n            <p className={styles.value}>{formatWeight(unitWeight)}</p>\n\n            <h4 className={styles.label}>Notes:</h4>\n            <p className={styles.value}>{notes || 'No details available'}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nInventoryListItem.propTypes = {\n  canEdit: PropTypes.bool,\n  itemId: PropTypes.number.isRequired,\n  description: PropTypes.string.isRequired,\n  listTitle: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  notes: PropTypes.string,\n  unitWeight: PropTypes.number\n}\n\nexport default InventoryListItem\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { useAppContext, useColorScheme, useInventoryListsContext } from '../../hooks/contexts'\nimport styles from './inventoryListItemCreateForm.module.css'\n\nconst InventoryListItemCreateForm = ({ listId }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n  const { setFlashVisible } = useAppContext()\n  const { performInventoryListItemCreate } = useInventoryListsContext()\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    schemeColorLightest,\n    borderColor,\n    textColorSecondary,\n    textColorTertiary\n  } = useColorScheme()\n\n  const formRef = useRef(null)\n\n  const colorVars = {\n    '--base-color': schemeColorDark,\n    '--hover-color': hoverColorLight,\n    '--body-color': schemeColorLightest,\n    '--border-color': borderColor,\n    '--text-color-main': textColorSecondary,\n    '--text-color-secondary': textColorTertiary\n  }\n\n  const toggleForm = () => {\n    setToggleEvent(Date.now)\n    setCollapsed(!collapsed)\n  }\n\n  const createInventoryListItem = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const description = e.target.elements.description.value\n    const quantity = parseInt(e.target.elements.quantity.value)\n    const unit_weight = Number(e.target.elements.unitWeight.value)\n    const notes = e.target.elements.notes.value\n    const attrs = { description, quantity, unit_weight, notes }\n\n    const resetToggleAndDisplayFlash = () => {\n      formRef.current.reset()\n      toggleForm()\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: resetToggleAndDisplayFlash,\n      onNotFound: resetToggleAndDisplayFlash,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: resetToggleAndDisplayFlash\n    }\n\n    performInventoryListItemCreate(listId, attrs, callbacks)\n  }\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={colorVars}>\n      <div className={styles.triggerContainer}>\n        <button className={styles.triggerButton} onClick={toggleForm}>\n          Add item to list...\n        </button>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <form className={styles.form} ref={formRef} onSubmit={createInventoryListItem}>\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Description</label>\n                <input className={styles.input} type='text' name='description' placeholder='Description' required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Quantity</label>\n                <input className={styles.input} type='number' inputMode='numeric' min={1} name='quantity' defaultValue={1} required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Unit Weight</label>\n                <input className={styles.input} type='number' inputMode='numeric' min={0} step={0.1} name='unitWeight' placeholder='Unit Weight' />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Notes</label>\n                <input className={styles.input} type='text' name='notes' placeholder='Notes' />\n              </fieldset>\n\n              <button className={styles.submit} type='submit'>Add to List</button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nInventoryListItemCreateForm.propTypes = {\n  listId: PropTypes.number.isRequired\n}\n\nexport default InventoryListItemCreateForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport SlideToggle from 'react-slide-toggle'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport titlecase from '../../utils/titlecase'\nimport { useColorScheme, useAppContext, useInventoryListsContext } from '../../hooks/contexts'\nimport useComponentVisible from '../../hooks/useComponentVisible'\nimport useSize from '../../hooks/useSize'\nimport ListEditForm from '../listEditForm/listEditForm'\nimport InventoryListItem from '../inventoryListItem/inventoryListItem'\nimport InventoryListItemCreateForm from '../inventoryListItemCreateForm/inventoryListItemCreateForm'\nimport styles from './inventoryList.module.css'\n\nconst isValid = str => (\n  // The title is valid if the entire string matches the regex. It can\n  // contain alphanumeric characters, spaces, and leading or trailing\n  // whitespace (which will be stripped before it is saved in the DB).\n  // Any other characters (including non-space whitespace characters\n  // that are not leading or trailing) will cause a validation error\n  // on the backend. The title of a regular list may also not be \"All\n  // Items\".\n  !!str && str.match(/^\\s*[a-z0-9 ]*\\s*$/i) && str.match(/^\\s*[a-z0-9 ]*\\s*$/i)[0] === str && str.toLowerCase() !== 'all items'\n)\n\nconst InventoryList = ({ canEdit = true, listId, title }) => {\n  const DELETE_CONFIRMATION = `Are you sure you want to delete the list \"${title}\"? You will also lose any list items on the list. This action cannot be undone.`\n\n  const { setFlashAttributes, setFlashVisible } = useAppContext()\n  const {\n    inventoryLists,\n    performInventoryListUpdate,\n    performInventoryListDestroy\n  } = useInventoryListsContext()\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [currentTitle, setCurrentTitle] = useState(title)\n  const [maxEditFormWidth, setMaxEditFormWidth] = useState(null)\n  const [listItems, setListItems] = useState([])\n\n  const mountedRef = useRef(true)\n  const slideTriggerRef = useRef(null)\n  const deleteTriggerRef = useRef(null)\n  const iconsRef = useRef(null)\n\n  const size = useSize(slideTriggerRef)\n\n  const { componentRef, triggerRef, isComponentVisible, setIsComponentVisible } = useComponentVisible()\n\n  const slideTriggerRefContains = element => slideTriggerRef.current && (slideTriggerRef.current === element || slideTriggerRef.current.contains(element))\n  const triggerRefContains = element => triggerRef.current && (triggerRef.current === element || triggerRef.current.contains(element))\n  const deleteTriggerRefContains = element => deleteTriggerRef.current && (deleteTriggerRef.current === element || deleteTriggerRef.current.contains(element))\n  const componentRefContains = element => componentRef.current && (componentRef.current === element || componentRef.current.contains(element))\n  const shouldToggleListItems = element => (slideTriggerRefContains(element) && !triggerRefContains(element) && !componentRefContains(element) && !deleteTriggerRefContains(element))\n\n  const toggleListItems = e => {\n    if (shouldToggleListItems(e.target)) setToggleEvent(Date.now)\n  }\n\n  const {\n    schemeColorDarkest,\n    borderColor,\n    textColorPrimary,\n    textColorSecondary,\n    hoverColorDark,\n    schemeColorDark,\n    schemeColorLightest\n  } = useColorScheme()\n\n  const styleVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--border-color': borderColor,\n    '--text-color-primary': textColorPrimary,\n    '--text-color-secondary': textColorSecondary,\n    '--hover-color': hoverColorDark,\n    '--scheme-color-lighter': schemeColorDark,\n    '--scheme-color-lightest': schemeColorLightest\n  }\n\n  const submitAndHideForm = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const newTitle = e.target.elements.title.value\n\n    if (!newTitle || isValid(newTitle)) setCurrentTitle(titlecase(newTitle))\n\n    const resetTitleDisplayErrorAndHideForm = () => {\n      if (mountedRef.current) {\n        setCurrentTitle(title)\n        setFlashVisible(true)\n        setIsComponentVisible(false)\n      }\n    }\n\n    const callbacks = {\n      onSuccess: () => mountedRef.current && setIsComponentVisible(false),\n      onNotFound: resetTitleDisplayErrorAndHideForm,\n      onUnprocessableEntity: resetTitleDisplayErrorAndHideForm,\n      onInternalServerError: resetTitleDisplayErrorAndHideForm\n    }\n\n    performInventoryListUpdate(listId, newTitle, callbacks)\n  }\n\n  const deleteList = e => {\n    const confirmed = window.confirm(DELETE_CONFIRMATION)\n\n    setFlashVisible(false)\n\n    if (confirmed) {\n      const onSuccess = () => {\n        setFlashVisible(true)\n        mountedRef.current = false\n      }\n\n      const onError = setFlashVisible(true)\n\n      performInventoryListDestroy(listId, { onSuccess, onNotFound: onError, onInternalServerError: onError })\n    } else {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your list was not deleted.'\n      })\n\n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (!inventoryLists || !mountedRef.current) return // it'll run again when they populate\n\n    const items = inventoryLists.find(obj => obj.id === listId).list_items\n\n    setListItems([...items])\n  }, [inventoryLists, listId])\n\n  useEffect(() => {\n    if (!size || !iconsRef.current || !mountedRef.current) return\n\n    setMaxEditFormWidth(size.width - iconsRef.current.offsetWidth - 16)\n  }, [size])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.titleContainer}>\n        <div className={styles.trigger} ref={slideTriggerRef} onClick={toggleListItems}>\n          {canEdit &&\n          <span className={styles.editIcons} ref={iconsRef}>\n            <button className={styles.icon} ref={deleteTriggerRef} onClick={deleteList} data-testid='delete-inventory-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n            </button>\n            <button className={styles.icon} ref={triggerRef} data-testid='edit-inventory-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n            </button>\n          </span>}\n          {canEdit && isComponentVisible ?\n            <ListEditForm\n              formRef={componentRef}\n              maxTotalWidth={maxEditFormWidth}\n              className={styles.form}\n              title={title}\n              onSubmit={submitAndHideForm}\n            /> :\n            <h3 className={styles.title}>{currentTitle}</h3>}\n        </div>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            {!canEdit && listItems.length === 0 && <div className={styles.emptyList}>This game has no inventory list items.</div>}\n            {canEdit && <InventoryListItemCreateForm listId={listId} />}\n            {listItems && listItems.length > 0 && listItems.map(({ id, description, quantity, notes, unit_weight }) => {\n              const itemKey = `${title.toLowerCase().replace(' ', '-')}-${id}`\n\n              return(\n                <InventoryListItem\n                  key={itemKey}\n                  itemId={id}\n                  listTitle={title}\n                  description={description}\n                  quantity={quantity}\n                  notes={notes}\n                  unitWeight={unit_weight}\n                  canEdit={canEdit}\n                />\n              )\n            })}\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nInventoryList.propTypes = {\n  canEdit: PropTypes.bool,\n  listId: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired\n}\n\nexport default InventoryList\n","import React from 'react'\nimport colorSchemes, { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext, useInventoryListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport Loading from '../loading/loading'\nimport LoadingError from '../loadingError/loadingError'\nimport InventoryList from '../inventoryList/inventoryList'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './inventoryPageContent.module.css'\n\nconst InventoryPageContent = () => {\n  const { setModalAttributes, setModalVisible } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n  const { inventoryLists, inventoryListLoadingState } = useInventoryListsContext()\n\n  /*\n   *\n   * Define click handler\n   *\n   */\n\n  const showGameForm = e => {\n    e.preventDefault()\n\n    setModalAttributes({\n      Tag: withModal(ModalGameForm),\n      props: {\n        title: 'Create Game',\n        type: 'create'\n      }\n    })\n\n    setModalVisible(true)\n  }\n\n  /*\n   *\n   * Define possible states that affect content\n   *\n   */\n\n   const listsLoadedAndNotEmpty = inventoryLists && inventoryListLoadingState === DONE && inventoryLists.length > 0\n   const listsLoadedAndEmpty = inventoryLists && inventoryListLoadingState === DONE && inventoryLists.length === 0\n\n   /*\n    *\n    * Return appropriate values for component state\n    *\n    */\n    if (gameLoadingState === DONE && !games.length) {\n      return(\n        <p className={styles.noLists}>\n          You need a game to use the inventory lists feature. <button className={styles.link} onClick={showGameForm}>Create a game</button> to get started.\n        </p>\n      )\n    } else if (listsLoadedAndNotEmpty) {\n      return(\n        <>\n          {inventoryLists.map(({ id, title, aggregate }, index) => {\n            // If there are more lists than colour schemes, cycle through the colour schemes\n            const colorSchemesIndex = index < colorSchemes.length ? index : index % colorSchemes.length\n            const colorScheme = colorSchemes[colorSchemesIndex]\n            const listKey = title.toLowerCase().replace(' ', '-')\n\n            return(\n              <ColorProvider key={listKey} colorScheme={colorScheme}>\n                <div className={styles.inventoryList}>\n                  <InventoryList\n                    canEdit={!aggregate}\n                    listId={id}\n                    title={title}\n                  />\n                </div>\n              </ColorProvider>\n            )\n          })}\n        </>\n      )\n    } else if (listsLoadedAndEmpty) {\n      return <p className={styles.noLists}>This game has no inventory lists.</p>\n    } else if (inventoryListLoadingState === LOADING) {\n      return <Loading className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />\n    } else if (gameLoadingState === ERROR || inventoryListLoadingState === ERROR) {\n      // It's possible both are errored but we'll worry about games first\n      const name = gameLoadingState === ERROR ? 'games' : 'inventory lists'\n      return <LoadingError modelName={name} />\n    } else {\n      return null\n    }\n}\n\nexport default InventoryPageContent\n","import React from 'react'\nimport { useAppContext, useInventoryListsContext } from '../../hooks/contexts'\nimport { LOADING, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport InventoryListCreateForm from '../../components/inventoryListCreateForm/inventoryListCreateForm'\nimport InventoryPageContent from '../../components/inventoryPageContent/inventoryPageContent'\nimport styles from './inventoryPage.module.css'\n\nconst InventoryPage = () => {\n  const { modalVisible, modalAttributes } = useAppContext()\n  const { inventoryListLoadingState } = useInventoryListsContext()\n\n  const shouldDisableForm = inventoryListLoadingState === LOADING || inventoryListLoadingState === ERROR\n\n  return(\n    <DashboardLayout title='Your Inventory' includeGameSelect>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <FlashMessage />\n      <div className={styles.createForm}><InventoryListCreateForm disabled={shouldDisableForm} /></div>\n      <InventoryPageContent />\n    </DashboardLayout>\n  )\n}\n\nexport default InventoryPage\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListCreateForm.module.css'\n\nconst ShoppingListCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n\n  const { performShoppingListCreate } = useShoppingListsContext()\n\n  const [inputValue, setInputValue] = useState('')\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const updateValue = e => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n  }\n\n  const createShoppingList = e => {\n    e.preventDefault()\n    setFlashVisible(false)\n    const title = e.target.elements.title.value\n\n    const showFlashAndClearInput = () => {\n      setInputValue('')\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: showFlashAndClearInput,\n      onNotFound: showFlashAndClearInput,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: showFlashAndClearInput\n    }\n    performShoppingListCreate(title, callbacks)\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <form data-testid='shopping-list-create-form' onSubmit={createShoppingList}>\n        <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n          <input\n            className={styles.input}\n            type='text'\n            name='title'\n            placeholder='Title'\n            aria-label='Title'\n            value={inputValue}\n            onChange={updateValue}\n            pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n            title='Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n          />\n          <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit'>Create</button>\n        </fieldset>\n      </form>\n    </div>\n  )\n}\n\nShoppingListCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default ShoppingListCreateForm\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'quantity',\n    tag: 'input',\n    label: 'Quantity',\n    type: 'number',\n    placeholder: 'Quantity',\n    inputMode: 'numeric',\n    min: 1,\n    required: true\n  },\n  {\n    name: 'notes',\n    tag: 'textarea',\n    label: 'Notes',\n    type: 'textarea',\n    placeholder: 'This item has no notes',\n    inputMode: 'text'\n  }\n]\n\nconst ShoppingListItemEditForm = ({ buttonColor, currentAttributes }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performShoppingListItemUpdate } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n\n  const fields = formFields.map(field => ({ defaultValue: currentAttributes[field.name], ...field }))\n\n  const updateItem = e => {\n    e.preventDefault()\n\n    const callback = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onSuccess: callback,\n      onNotFound: callback,\n      onUnprocessableEntity: callback,\n      onInternalServerError: callback,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const quantity = e.target.elements.quantity.value\n    const notes = e.target.elements.notes.value\n\n    performShoppingListItemUpdate(currentAttributes.id, { quantity, notes }, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='shopping-list-item'\n      buttonLabel='Update Item'\n      buttonColor={buttonColor}\n      onSubmit={updateItem}\n      fields={fields}\n    />\n  )\n}\n\nShoppingListItemEditForm.propTypes = {\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    description: PropTypes.string.isRequired,\n    quantity: PropTypes.number.isRequired,\n    notes: PropTypes.string\n  }).isRequired\n}\n\nexport default ShoppingListItemEditForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport SlideToggle from 'react-slide-toggle'\nimport { faAngleUp, faAngleDown, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport ShoppingListItemEditForm from '../shoppingListItemEditForm/shoppingListItemEditForm'\nimport styles from './shoppingListItem.module.css'\n\nconst formatWeight = weight => {\n  if (weight === undefined || weight === null || weight === '') return '-'\n\n  const weightNum = Number(weight)\n\n  return weightNum % 1 === 0 ? weightNum.toFixed(0) : weightNum.toFixed(1)\n}\n\nconst ShoppingListItem = ({\n  itemId,\n  listTitle,\n  canEdit,\n  description,\n  quantity,\n  unitWeight,\n  notes\n}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n\n  // This enables us to set the quantity to the new quantity during the time between when\n  // the user increments/decrements the quantity and the time the API responds.\n  const [currentQuantity, setCurrentQuantity] = useState(quantity)\n\n  const {\n    setFlashAttributes,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n\n  const {\n    schemeColorDarkest,\n    textColorPrimary,\n    hoverColorDark,\n    schemeColorDark,\n    hoverColorLight,\n    textColorSecondary,\n    borderColor,\n    schemeColorLightest,\n    textColorTertiary\n  } = useColorScheme()\n\n  const {\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy\n  } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const deleteRef = useRef(null)\n  const incRef = useRef(null)\n  const decRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n  const editRefContains = el => refContains(editRef, el)\n  const deleteRefContains = el => refContains(deleteRef, el)\n  const incRefContains = el => refContains(incRef, el)\n  const decRefContains = el => refContains(decRef, el)\n  const iconContains = el => editRefContains(el) || deleteRefContains(el) || incRefContains(el) || decRefContains(el)\n  \n  const toggleDetails = e => {\n    if (!iconContains(e.target)) {\n      setToggleEvent(Date.now)\n      setCollapsed(!collapsed)\n    }\n  }\n\n  const displayFlash = (type, message, header = null) => {\n    if (mountedRef.current) {\n      setFlashAttributes({ type, message, header })\n      setFlashVisible(true)\n    }\n  }\n\n  const styleVars = {\n    '--main-color': schemeColorDark,\n    '--title-text-color': textColorSecondary,\n    '--border-color': borderColor,\n    '--body-background-color': schemeColorLightest,\n    '--body-text-color': textColorTertiary,\n    '--hover-color': hoverColorLight\n  }\n\n  const incrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity + 1\n\n    if (mountedRef.current) setCurrentQuantity(newQuantity)\n\n    const callbacks = {\n      onNotFound: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      },\n      onInternalServerError: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      }\n    }\n\n    performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n  }\n\n  const decrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity - 1\n\n    if (newQuantity > 0) {\n      const callbacks = {\n        onNotFound: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        },\n        onInternalServerError: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        }\n      }\n\n      setCurrentQuantity(newQuantity)\n      performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n    } else if (newQuantity === 0) {\n      const confirmed = window.confirm(\"Item quantity must be greater than zero. Delete the item instead?\")\n\n      if (confirmed) {\n        performShoppingListItemDestroy(itemId, () => { mountedRef.current = false })\n      } else {\n        displayFlash('info', 'Your item was not deleted.')\n      }\n    }\n  }\n\n  const destroyItem = () => {\n    const confirmed = window.confirm(\"Destroy shopping list item? Your aggregate list will be updated to reflect the change. This action cannot be undone.\")\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: () => mountedRef.current = false,\n        onUnauthorized: () => mountedRef.current = false,\n        onNotFound: () => setFlashVisible(true),\n        onInternalServerError: () => setFlashVisible(true)\n      }\n\n      performShoppingListItemDestroy(itemId, callbacks)\n    } else {\n      displayFlash('info', 'Your item was not deleted.')\n    }\n  }\n\n  const showEditForm = () => {\n    if (mountedRef.current) {\n      setFlashVisible(false)\n\n      const Tag = withModal(ShoppingListItemEditForm)\n\n      setModalAttributes({\n        Tag,\n        props: {\n          title: description,\n          subtitle: `On list \"${listTitle}\"`,\n          buttonColor: {\n            schemeColorDarkest,\n            hoverColorDark,\n            borderColor,\n            textColorPrimary\n          },\n          currentAttributes: {\n            id: itemId,\n            quantity,\n            notes,\n            description\n          }\n        }\n      })\n\n      setModalVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (mountedRef.current) setCurrentQuantity(quantity)\n  }, [quantity])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={styleVars}>\n      <div className={styles.toggle} onClick={toggleDetails}>\n        <span className={classNames(styles.header, { [styles.headerEditable]: canEdit })}>\n          {canEdit &&\n            <span className={styles.editIcons} ref={iconsRef}>\n              <button className={styles.icon} ref={deleteRef} onClick={destroyItem} data-testid='destroy-item'>\n                <FontAwesomeIcon className={classNames(styles.fa, styles.destroyIcon)} icon={faTimes} />\n              </button>\n              <button className={styles.icon} ref={editRef} onClick={showEditForm} data-testid='edit-item'>\n                <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n              </button>\n            </span>}\n          <h3 className={styles.description}>{description}</h3>\n        </span>\n        <span className={styles.quantity}>\n          {canEdit && <button className={styles.icon} ref={incRef} onClick={incrementQuantity} data-testid='incrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleUp} />\n          </button>}\n          <div className={styles.quantityContent}>\n            {currentQuantity}\n          </div>\n          {canEdit && <button className={styles.icon} ref={decRef} onClick={decrementQuantity} data-testid='decrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n          </button>}\n        </span>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <h4 className={styles.label}>Unit Weight:</h4>\n            <p className={styles.value}>{formatWeight(unitWeight)}</p>\n\n            <h4 className={styles.label}>Notes:</h4>\n            <p className={styles.value}>{notes || 'No details available'}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItem.propTypes = {\n  itemId: PropTypes.number.isRequired,\n  listTitle: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  description: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  unitWeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  notes: PropTypes.string\n}\n\nexport default ShoppingListItem\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListItemCreateForm.module.css'\n\nconst ShoppingListItemCreateForm = ({ listId }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n  const { setFlashVisible } = useAppContext()\n  const { performShoppingListItemCreate } = useShoppingListsContext()\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    schemeColorLightest,\n    borderColor,\n    textColorSecondary,\n    textColorTertiary\n  } = useColorScheme()\n\n  const formRef = useRef(null)\n\n  const colorVars = {\n    '--base-color': schemeColorDark,\n    '--hover-color': hoverColorLight,\n    '--body-color': schemeColorLightest,\n    '--border-color': borderColor,\n    '--text-color-main': textColorSecondary,\n    '--text-color-secondary': textColorTertiary\n  }\n\n  const toggleForm = () => {\n    setToggleEvent(Date.now)\n    setCollapsed(!collapsed)\n  }\n\n  const createShoppingListItem = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const description = e.target.elements.description.value\n    const quantity = parseInt(e.target.elements.quantity.value)\n    const unit_weight = Number(e.target.elements.unitWeight.value)\n    const notes = e.target.elements.notes.value\n    const attrs = { description, quantity, unit_weight, notes }\n\n    const resetToggleAndDisplayFlash = () => {\n      formRef.current.reset()\n      toggleForm()\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: resetToggleAndDisplayFlash,\n      onNotFound: resetToggleAndDisplayFlash,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: resetToggleAndDisplayFlash\n    }\n\n    performShoppingListItemCreate(listId, attrs, callbacks)\n  }\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={colorVars}>\n      <div className={styles.triggerContainer}>\n        <button className={styles.triggerButton} onClick={toggleForm}>\n          Add item to list...\n        </button>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <form className={styles.form} ref={formRef} onSubmit={createShoppingListItem}>\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Description</label>\n                <input className={styles.input} type='text' name='description' placeholder='Description' required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Quantity</label>\n                <input className={styles.input} type='number' inputMode='numeric' min={1} name='quantity' defaultValue={1} required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Unit Weight</label>\n                <input className={styles.input} type='number'inputMode='numeric' name='unitWeight' min={0} step={0.1} placeholder='Unit Weight' />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Notes</label>\n                <input className={styles.input} type='text' name='notes' placeholder='Notes' />\n              </fieldset>\n\n              <button className={styles.submit} type='submit'>Add to List</button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItemCreateForm.propTypes = {\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingListItemCreateForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport SlideToggle from 'react-slide-toggle'\nimport titlecase from '../../utils/titlecase'\nimport useComponentVisible from '../../hooks/useComponentVisible'\nimport useSize from '../../hooks/useSize'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport ListEditForm from '../listEditForm/listEditForm'\nimport ShoppingListItem from '../shoppingListItem/shoppingListItem'\nimport ShoppingListItemCreateForm from '../shoppingListItemCreateForm/shoppingListItemCreateForm'\nimport styles from './shoppingList.module.css'\n\nconst isValid = str => (\n  // The title is valid if the entire string matches the regex. It can\n  // contain alphanumeric characters, spaces, and leading or trailing\n  // whitespace (which will be stripped before it is saved in the DB).\n  // Any other characters (including non-space whitespace characters\n  // that are not leading or trailing) will cause a validation error\n  // on the backend. The title of a regular list may also not be \"All\n  // Items\".\n  !!str && str.match(/^\\s*[a-z0-9 ]*\\s*$/i) && str.match(/^\\s*[a-z0-9 ]*\\s*$/i)[0] === str && str.toLowerCase() !== 'all items'\n)\n\nconst ShoppingList = ({ canEdit = true, listId, title }) => {\n  const DELETE_CONFIRMATION = `Are you sure you want to delete the list \"${title}\"? You will also lose any list items on the list. This action cannot be undone.`\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [currentTitle, setCurrentTitle] = useState(title)\n  const [maxEditFormWidth, setMaxEditFormWidth] = useState(null)\n  const [listItems, setListItems] = useState([])\n\n  const mountedRef = useRef(true)\n  const slideTriggerRef = useRef(null)\n  const deleteTriggerRef = useRef(null)\n  const iconsRef = useRef(null)\n\n  const size = useSize(slideTriggerRef)\n\n  const { componentRef, triggerRef, isComponentVisible, setIsComponentVisible } = useComponentVisible()\n\n  const { setFlashAttributes, setFlashVisible } = useAppContext()\n\n  const {\n    shoppingLists,\n    performShoppingListUpdate,\n    performShoppingListDestroy,\n  } = useShoppingListsContext()\n\n  const slideTriggerRefContains = element => slideTriggerRef.current && (slideTriggerRef.current === element || slideTriggerRef.current.contains(element))\n  const triggerRefContains = element => triggerRef.current && (triggerRef.current === element || triggerRef.current.contains(element))\n  const deleteTriggerRefContains = element => deleteTriggerRef.current && (deleteTriggerRef.current === element || deleteTriggerRef.current.contains(element))\n  const componentRefContains = element => componentRef.current && (componentRef.current === element || componentRef.current.contains(element))\n  const shouldToggleListItems = element => (slideTriggerRefContains(element) && !triggerRefContains(element)) && !componentRefContains(element) && !deleteTriggerRefContains(element)\n\n  const toggleListItems = e => {\n    if (shouldToggleListItems(e.target)) {\n      setToggleEvent(Date.now)\n    }\n  }\n\n  const {\n    schemeColorDarkest,\n    borderColor,\n    textColorPrimary,\n    textColorSecondary,\n    hoverColorDark,\n    schemeColorDark,\n    schemeColorLightest\n  } = useColorScheme()\n\n  const styleVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--border-color': borderColor,\n    '--text-color-primary': textColorPrimary,\n    '--text-color-secondary': textColorSecondary,\n    '--hover-color': hoverColorDark,\n    '--scheme-color-lighter': schemeColorDark,\n    '--scheme-color-lightest': schemeColorLightest,\n    '--max-title-width': `${maxEditFormWidth - 32}px`\n  }\n\n  const submitAndHideForm = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const newTitle = e.nativeEvent.target.children[0].defaultValue\n\n    if (!newTitle || isValid(newTitle)) setCurrentTitle(titlecase(newTitle))\n\n    const resetTitleAndDisplayError = () => {\n      setCurrentTitle(title)\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onNotFound: resetTitleAndDisplayError,\n      onUnprocessableEntity: resetTitleAndDisplayError,\n      onInternalServerError: resetTitleAndDisplayError\n    }\n\n    performShoppingListUpdate(listId, newTitle, callbacks)\n    setIsComponentVisible(false)\n  }\n\n  const deleteList = e => {\n    const confirmed = window.confirm(DELETE_CONFIRMATION)\n\n    setFlashVisible(false)\n\n    if (confirmed) {\n      const onSuccess = () => {\n        setFlashVisible(true)\n        mountedRef.current = false\n      }\n\n      const onError = () => setFlashVisible(true)\n\n      performShoppingListDestroy(listId, { onSuccess, onNotFound: onError, onInternalServerError: onError })\n    } else if (mountedRef.current) {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your list was not deleted.'\n      })\n\n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (!shoppingLists || !mountedRef.current) return // it'll run again when they populate\n\n    const items = shoppingLists.find(obj => obj.id === listId).list_items\n\n    setListItems([...items])\n  }, [shoppingLists, listId])\n\n  useEffect(() => {\n    if (!size || !iconsRef.current || !mountedRef.current) return\n\n    setMaxEditFormWidth(size.width - iconsRef.current.offsetWidth - 16)\n  }, [size])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.titleContainer}>\n        <div className={styles.trigger} ref={slideTriggerRef} onClick={toggleListItems}>\n          {canEdit &&\n          <span className={styles.editIcons} ref={iconsRef}>\n            <button className={styles.icon} ref={deleteTriggerRef} onClick={deleteList} data-testid='delete-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n            </button>\n            <button className={styles.icon} ref={triggerRef} data-testid='edit-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n            </button>\n          </span>}\n          {canEdit && isComponentVisible ?\n            <ListEditForm\n              formRef={componentRef}\n              maxTotalWidth={maxEditFormWidth}\n              className={styles.form}\n              title={title}\n              onSubmit={submitAndHideForm}\n            /> :\n            <h3 className={styles.title}>{currentTitle}</h3>}\n        </div>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            {!canEdit && listItems.length === 0 && <div className={styles.emptyList}>This game has no shopping list items.</div>}\n            {canEdit && <ShoppingListItemCreateForm listId={listId} />}\n            {listItems && listItems.length > 0 && listItems.map(({ id, description, quantity, notes, unit_weight }) => {\n              const itemKey = `${title.toLowerCase().replace(' ', '-')}-${id}`\n\n              return(\n                <ShoppingListItem\n                  key={itemKey}\n                  itemId={id}\n                  listTitle={title}\n                  canEdit={canEdit}\n                  description={description}\n                  quantity={quantity}\n                  notes={notes}\n                  unitWeight={unit_weight}\n                />\n              )\n            })}\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingList.propTypes = {\n  title: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool,\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingList\n","import React from 'react'\nimport colorSchemes, { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport Loading from '../loading/loading'\nimport LoadingError from '../loadingError/loadingError'\nimport ShoppingList from '../shoppingList/shoppingList'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './shoppingListsPageContent.module.css'\n\nconst ShoppingListsPageContent = () => {\n  const { setModalAttributes, setModalVisible } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n  const { shoppingLists, shoppingListLoadingState } = useShoppingListsContext()\n\n  /*\n   *\n   * Define click handler\n   *\n   */\n\n  const showGameForm = e => {\n    e.preventDefault()\n\n    setModalAttributes({\n      Tag: withModal(ModalGameForm),\n      props: {\n        title: 'Create Game',\n        type: 'create'\n      }\n    })\n\n    setModalVisible(true)\n  }\n\n  /*\n   *\n   * Define possible states that affect content\n   * \n   */\n\n  const listsLoadedAndNotEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length > 0\n  const listsLoadedAndEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length === 0\n\n  /*\n   *\n   * Return appropriate values for the state the component is in\n   * \n   */\n  if (gameLoadingState === DONE && !games.length) {\n    return(\n      <p className={styles.noLists}>\n        You need a game to use the shopping lists feature. <button className={styles.link} onClick={showGameForm}>Create a game</button> to get started.\n      </p>\n    )\n  } else if (listsLoadedAndNotEmpty) {\n    return(\n      <>\n        {shoppingLists.map(({ id, title, aggregate }, index) => {\n\n          // If there are more lists than colour schemes, cycle through the colour schemes\n          const colorSchemesIndex = index < colorSchemes.length ? index : index % colorSchemes.length\n          const colorScheme = colorSchemes[colorSchemesIndex]\n          const listKey = title.toLowerCase().replace(' ', '-')\n\n          return (\n            <ColorProvider key={listKey} colorScheme={colorScheme}>\n              <div className={styles.shoppingList}>\n                <ShoppingList\n                  canEdit={!aggregate}\n                  listId={id}\n                  title={title}\n                />\n              </div>\n            </ColorProvider>\n          )\n        })}\n      </>\n    )\n  } else if (listsLoadedAndEmpty) {\n    return <p className={styles.noLists}>This game has no shopping lists.</p>\n  } else if (shoppingListLoadingState === LOADING) {\n    return <Loading className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />\n  } else if (gameLoadingState === ERROR || shoppingListLoadingState === ERROR) {\n    // It's possible both are errored but we'll worry about games first\n    const name = gameLoadingState === ERROR ? 'games' : 'shopping lists'\n    return <LoadingError modelName={name} />\n  } else {\n    return null\n  }\n}\n\nexport default ShoppingListsPageContent\n","import React, { useEffect, useRef } from 'react'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport { LOADING, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport ShoppingListCreateForm from '../../components/shoppingListCreateForm/shoppingListCreateForm'\nimport ShoppingListsPageContent from '../../components/shoppingListsPageContent/shoppingListsPageContent'\nimport styles from './shoppingListsPage.module.css'\n\nconst ShoppingListsPage = () => {\n  const {  modalVisible, modalAttributes } = useAppContext()\n  const { shoppingListLoadingState } = useShoppingListsContext()\n\n  const shouldDisableForm = shoppingListLoadingState === LOADING || shoppingListLoadingState === ERROR\n\n  const mountedRef = useRef(true)\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <DashboardLayout title='Your Shopping Lists' includeGameSelect>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <FlashMessage />\n      <div className={styles.createForm}><ShoppingListCreateForm disabled={shouldDisableForm} /></div>\n      <ShoppingListsPageContent /> {/* This component implements its own loading & error handling behaviour */}\n    </DashboardLayout>\n  )\n}\n\nexport default ShoppingListsPage\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './notFoundPage.module.css'\n\nconst NotFoundPage = () => {\n  const { token } = useAppContext()\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>SIM: Page Not Found</h1>\n        <Link className={styles.link} to={token ? paths.dashboard.main : paths.home}>Go Back</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Helmet } from 'react-helmet-async'\nimport { AppProvider } from '../contexts/appContext'\nimport { GamesProvider } from '../contexts/gamesContext'\nimport { ShoppingListsProvider } from '../contexts/shoppingListsContext'\nimport { InventoryListsProvider } from '../contexts/inventoryListsContext'\nimport HomePage from '../pages/homePage/homePage'\nimport LoginPage from '../pages/loginPage/loginPage'\nimport DashboardPage from '../pages/dashboardPage/dashboardPage'\nimport GamesPage from '../pages/gamesPage/gamesPage'\nimport InventoryPage from '../pages/inventoryPage/inventoryPage'\nimport ShoppingListsPage from '../pages/shoppingListsPage/shoppingListsPage'\nimport NotFoundPage from '../pages/notFoundPage/notFoundPage'\nimport paths from './paths'\n\nconst siteTitle = 'Skyrim Inventory Management |'\n\nconst pages = [\n  {\n    pageId: 'home',\n    title: `${siteTitle} Home`,\n    description: 'Manage your inventory across multiple properties in Skyrim',\n    jsx: <HomePage />,\n    path: paths.home\n  },\n  {\n    pageId: 'login',\n    title: `${siteTitle} Login`,\n    description: 'Log into Skyrim Inventory Management using your Google account',\n    jsx: <LoginPage />,\n    path: paths.login\n  },\n  {\n    pageId: 'dashboard',\n    title: `${siteTitle} Dashboard`,\n    description: 'Skyrim Inventory Management User Dashboard',\n    jsx: <DashboardPage />,\n    path: paths.dashboard.main\n  },\n  {\n    pageId: 'games',\n    title: `${siteTitle} Your Games`,\n    description: 'Manage Skyrim Games',\n    jsx: <GamesProvider><GamesPage /></GamesProvider>,\n    path: paths.dashboard.games\n  },\n  {\n    pageId: 'shoppingLists',\n    title: `${siteTitle} Manage Shopping Lists`,\n    description: 'Manage Skyrim Shopping Lists',\n    jsx: <GamesProvider><ShoppingListsProvider><ShoppingListsPage /></ShoppingListsProvider></GamesProvider>,\n    path: paths.dashboard.shoppingLists\n  },\n  {\n    pageId: 'inventory',\n    title: `${siteTitle} Manage Inventory`,\n    description: 'Manage Skyrim Inventory',\n    jsx: <GamesProvider><InventoryListsProvider><InventoryPage /></InventoryListsProvider></GamesProvider>\n  }\n]\n\nconst PageRoutes = () => (\n  <Switch>\n    {pages.map(\n      ({ pageId, title, description, jsx, path }) => {\n        return(\n          <Route exact path={path} key={pageId}>\n            <Helmet>\n              <html lang='en' />\n\n              <title>{title}</title>\n              <meta name='description' content={description} />\n            </Helmet>\n            <AppProvider>\n              {jsx}\n            </AppProvider>\n          </Route>\n        )\n      }\n    )}\n    <Route key='notFound'>\n      <Helmet>\n        <html lang='en' />\n\n        <title>Skyrim Inventory Management | Page Not Found</title>\n        <meta name='description' content='Skyrim Inventory Management could not find the page you were looking for' />\n      </Helmet>\n      <AppProvider>\n        <NotFoundPage />\n      </AppProvider>\n    </Route>\n  </Switch>\n)\n\nexport default PageRoutes\n","import React from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\nimport PageRoutes from './routing/pageRoutes'\n\nconst App = () => {\n  return(\n    <Router basename={process.env.PUBLIC_URL}>\n      <HelmetProvider>\n        <PageRoutes />\n      </HelmetProvider>\n    </Router>\n  )\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}