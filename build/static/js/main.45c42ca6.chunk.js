(this.webpackJsonpskyrim_inventory_management_frontend=this.webpackJsonpskyrim_inventory_management_frontend||[]).push([[0],{12:function(e,t,o){e.exports={root:"shoppingList_root__2O9FT",trigger:"shoppingList_trigger__WV4fR",form:"shoppingList_form__1GdfA",title:"shoppingList_title__3Gulc",fa:"shoppingList_fa__hRtKq",icon:"shoppingList_icon__3FP5H",collapsible:"shoppingList_collapsible__2Zuq5",emptyList:"shoppingList_emptyList__289Te"}},16:function(e,t,o){e.exports={root:"shoppingListCreateForm_root__iSFdV",button:"shoppingListCreateForm_button__2so-6",fieldset:"shoppingListCreateForm_fieldset__1BLSp",fieldsetDisabled:"shoppingListCreateForm_fieldsetDisabled__2V4n7",input:"shoppingListCreateForm_input__3hAzq",buttonDisabled:"shoppingListCreateForm_buttonDisabled__1USkv"}},17:function(e,t,o){e.exports={root:"shoppingListItem_root__3NPoi",headerContainer:"shoppingListItem_headerContainer__hu6Ur",button:"shoppingListItem_button__2k4QA",quantity:"shoppingListItem_quantity__1ebyP",description:"shoppingListItem_description__mnU6z",collapsible:"shoppingListItem_collapsible__xa2wr",notes:"shoppingListItem_notes__8g2fK"}},25:function(e,t,o){e.exports={root:"dashboardLayout_root__2dfR_",title:"dashboardLayout_title__1yGVn",hr:"dashboardLayout_hr__29GgW",container:"dashboardLayout_container__3AwFx"}},26:function(e,t,o){e.exports={root:"flashMessage_root__2sPxp",content:"flashMessage_content__3iY0s",header:"flashMessage_header__Vx_Jr",messageList:"flashMessage_messageList__3V9SA",msg:"flashMessage_msg__3Wquk"}},28:function(e,t,o){e.exports={root:"shoppingListEditForm_root__rs5qL",input:"shoppingListEditForm_input__2FbCX",submit:"shoppingListEditForm_submit__1FqNJ",fa:"shoppingListEditForm_fa__Bb-dM"}},29:function(e,t,o){e.exports={root:"homePage_root__15tty",container:"homePage_container__3kQJo",header:"homePage_header__3EV45",login:"homePage_login__3ala0"}},30:function(e,t,o){e.exports={root:"loginPage_root__2Vf7z",errorMessage:"loginPage_errorMessage__8uTVC",container:"loginPage_container__2xdLK",button:"loginPage_button__1pDsX"}},36:function(e,t,o){e.exports={button:"logoutDropdown_button__3hRUK",body:"logoutDropdown_body__NiLPw",googleLogout:"logoutDropdown_googleLogout__J9YSG"}},42:function(e,t,o){e.exports={root:"navigationMosaic_root__2CDUx",card:"navigationMosaic_card__3hEln"}},43:function(e,t,o){e.exports={root:"dashboardPage_root__oVxx1",loading:"dashboardPage_loading__2vZsl"}},44:function(e,t,o){e.exports={noLists:"shoppingListPageContent_noLists__3xnMI",shoppingList:"shoppingListPageContent_shoppingList__S3gTj",loading:"shoppingListPageContent_loading__2EI8i",error:"shoppingListPageContent_error__1dyyw"}},45:function(e,t,o){e.exports={createForm:"shoppingListPage_createForm__c7_90",flash:"shoppingListPage_flash__1mBKN"}},52:function(e,t,o){e.exports={root:"navigationCard_root__1-FD3"}},6:function(e,t,o){e.exports={root:"shoppingListItemCreateForm_root__3B7YP",triggerContainer:"shoppingListItemCreateForm_triggerContainer__3IkQf",triggerButton:"shoppingListItemCreateForm_triggerButton__2HK_d",form:"shoppingListItemCreateForm_form__OXRXv",fieldset:"shoppingListItemCreateForm_fieldset__1ovw9",input:"shoppingListItemCreateForm_input__2Jire",label:"shoppingListItemCreateForm_label__qlamy",submit:"shoppingListItemCreateForm_submit__22fVU"}},65:function(e,t,o){},74:function(e,t,o){"use strict";o.r(t);var r=o(1),n=o.n(r),s=o(47),i=o.n(s),a=(o(65),o(13)),c=o(31),l=o(76),h=o(4),d=o(14),u=o(3),p=o(75),g="891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com",m="https://sim.danascheider.com",b="_sim_google_session";function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"401 Unauthorized";this.message=e,this.code=401,this.name="AuthorizationError",this.stack=(new Error).stack}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"404 Not Found";this.message=e,this.code=404,this.name="NotFoundError",this.stack=(new Error).stack}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"405 Method Not Allowed";this.message=e,this.code=405,this.name="MethodNotAllowedError",this.stack=(new Error).stack}f.prototype=new Error,j.prototype=new Error,_.prototype=new Error;var v,x="https://sim-api.danascheider.com",O={"Content-Type":"application/json"},y=function(e){return{Authorization:"Bearer ".concat(e)}},C=function(e){return Object(d.a)(Object(d.a)({},y(e)),O)},L=function(e){var t="".concat(x,"/auth/verify_token");return fetch(t,{headers:y(e)}).then((function(e){if(401===e.status)throw new f;return e}))},S=function(e,t){var o="".concat(x,"/shopping_lists"),r=JSON.stringify({shopping_list:t});return fetch(o,{method:"POST",headers:C(e),body:r}).then((function(e){if(401===e.status)throw new f;return e}))},w=function(e,t,o){var r="".concat(x,"/shopping_lists/").concat(t),n=JSON.stringify({id:t,shopping_list:o});return fetch(r,{method:"PATCH",headers:C(e),body:n}).then((function(e){if(401===e.status)throw new f;if(404===e.status)throw new j("Shopping list not found. Try refreshing the page to resolve this issue.");if(405===e.status)throw new _("Master lists are managed automatically and cannot be updated manually.");return e}))},N=function(e,t){var o="".concat(x,"/shopping_lists/").concat(t);return fetch(o,{method:"DELETE",headers:y(e)}).then((function(e){if(401===e.status)throw new f;if(404===e.status)throw new j("Shopping list not found. Try refreshing the page to resolve this issue.");if(405===e.status)throw new _("Master lists are managed automatically and cannot be deleted manually.");return e}))},F=function(e,t,o){var r="".concat(x,"/shopping_lists/").concat(t,"/shopping_list_items");return fetch(r,{method:"POST",headers:C(e),body:JSON.stringify({shopping_list_item:o})}).then((function(e){if(401===e.status)throw new f;if(404===e.status)throw new j("You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.");return e}))},E=function(e){console.error("Error signing out: ",e.message)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;if(window.gapi&&window.gapi.auth2){var o=window.gapi.auth2.getAuthInstance();null!==o?o.then((function(){return o.signOut()})).then(e,t):e()}e()},P=function(){return!!Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).STORYBOOK},T={home:"/",login:"/login",dashboard:{main:"/dashboard",shoppingLists:"/dashboard/shopping_lists"}},D=o(0),I="done",A=Object(r.createContext)(),R=function(e){var t=e.children,o=e.overrideValue,n=void 0===o?{}:o,s=Object(p.a)([b]),i=Object(u.a)(s,3),a=i[0],c=i[1],l=i[2],g=Object(r.useState)(n.profileData),m=Object(u.a)(g,2),j=m[0],_=m[1],v=Object(r.useState)(n.shouldRedirectTo),O=Object(u.a)(v,2),C=O[0],L=O[1],S=Object(r.useState)(n.profileLoadState||"loading"),w=Object(u.a)(S,2),N=w[0],F=w[1],E=Object(r.useRef)(!0),R=function(){return l(b)},V=function(e){L(e),E.current=!1},B=Object(d.a)({token:a[b],profileData:j,removeSessionCookie:R,setSessionCookie:function(e){return c(b,e)},profileLoadState:N,setShouldRedirectTo:V},n),M=window.location.pathname!==T.login&&window.location.pathname!==T.home,H=!n.profileData&&a[b]&&M;return Object(r.useEffect)((function(){H?function(e){var t="".concat(x,"/users/current");return fetch(t,{headers:y(e)}).then((function(e){if(401===e.status)throw new f;return e}))}(a[b]).then((function(e){return e.json()})).then((function(e){_(e),n.profileLoadState||F(I)})).catch((function(e){console.error("Error returned while fetching profile data: ",e.message),k((function(){a[b]&&R(),M&&(V(T.login),E.current=!1)}))})):a[b]||P()?P()&&!n.profileLoadState&&F(I):k((function(){M&&(V(T.login),E.current=!1)}))}),[M]),Object(r.useEffect)((function(){return function(){E.current=!1}})),Object(D.jsx)(A.Provider,{value:B,children:C?Object(D.jsx)(h.a,{to:C}):t})},V={schemeColor:"#FFBF00",hoverColor:"#E5AB00",borderColor:"#CC9800",textColorPrimary:"#000000",schemeColorLighter:"#FFCB32",hoverColorLighter:"#FFC519",textColorSecondary:"#000000",textColorTertiary:"#000000",schemeColorLightest:"#FFF2CC"},B={schemeColor:"#E83F6F",hoverColor:"#D03863",borderColor:"#B93258",textColorPrimary:"#FFFFFF",schemeColorLighter:"#EC658B",hoverColorLighter:"#EA527D",textColorSecondary:"#FFFFFF",textColorTertiary:"#000000",schemeColorLightest:"#FAD8E2"},M={schemeColor:"#2274A5",hoverColor:"#1E6894",borderColor:"#1B5C84",textColorPrimary:"#FFFFFF",schemeColorLighter:"#4E8FB7",hoverColorLighter:"#3881AE",textColorSecondary:"#FFFFFF",textColorTertiary:"#000000",schemeColorLightest:"#D2E3ED"},H={schemeColor:"#00A323",hoverColor:"#00921F",borderColor:"#00821C",textColorPrimary:"#FFFFFF",schemeColorLighter:"#32B54E",hoverColorLighter:"#19AC38",textColorSecondary:"#FFFFFF",textColorTertiary:"#000000",schemeColorLightest:"#CCECD3"},U={schemeColor:"#20E2E9",hoverColor:"#1CCBD1",borderColor:"#19B4BA",textColorPrimary:"#000000",schemeColorLighter:"#62EAEF",hoverColorLighter:"#4CE7ED",textColorSecondary:"#000000",textColorTertiary:"#000000",schemeColorLightest:"#D2F9FA"},q=[V,B,M,H,U],W=Object(r.createContext)(),Y=function(e){var t=e.colorScheme,o=e.children;return Object(D.jsx)(W.Provider,{value:t,children:o})},G=o(58),K="done",J="error",z=Object(r.createContext)(),Q=function(e){var t=e.children,o=e.overrideValue,n=void 0===o?{}:o,s=Object(r.useState)(n.shoppingLists||null),i=Object(u.a)(s,2),a=i[0],c=i[1],l=Object(r.useState)(!1),h=Object(u.a)(l,2),p=h[0],g=h[1],m=Object(r.useState)({}),b=Object(u.a)(m,2),j=b[0],_=b[1],v=Object(r.useState)("loading"),O=Object(u.a)(v,2),C=O[0],L=O[1],E=$(),P=E.token,I=E.setShouldRedirectTo,A=E.removeSessionCookie,R=Object(r.useRef)(!0),V=Object(d.a)({shoppingLists:a,shoppingListLoadingState:C,performShoppingListUpdate:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;w(P,e,{title:t}).then((function(e){switch(e.status){case 200:case 422:return e.json();default:throw Error("Something unexpected went wrong while updating your list.")}})).then((function(t){if(t&&!t.errors){var s=a.map((function(o){return o.id===e?t:o}));c(s),void 0===n.shoppingListLoadingState&&L(K),o&&o()}else t&&t.errors?(_({type:"error",header:"".concat(t.errors.length," error(s) prevented your changes from being saved:"),message:t.errors}),void 0===n.setFlashVisible&&g(!0),void 0===n.shoppingListLoadingState&&L(K),r&&r()):(_({type:"error",message:"We couldn't update your list and we're not sure what went wrong. We're sorry! Please refresh the page and try again."}),void 0===n.setFlashVisible&&g(!0),void 0===n.setShoppingListLoadingState&&L(K),r&&r())})).catch((function(t){if(console.error("Error updating shopping list ".concat(e,": "),t.message),401===t.code)return k((function(){P&&A(),I(T.login),R.current=!1}));404===t.code?(_({type:"error",message:"Oops! We couldn't find the shopping list you wanted to update. Try refreshing the page to fix this problem."}),void 0===n.setFlashVisible&&g(!0),void 0===n.shoppingListLoadingState&&L(K),r&&r()):(void 0===n.shoppingListLoadingState&&L(J),r&&r())}))},performShoppingListCreate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;S(P,{title:e}).then((function(e){return e.json()})).then((function(e){if(Array.isArray(e)&&2===e.length)c(e),_({type:"success",message:"Success! Your list was created, along with your new master shopping list."}),g(!0),t&&t();else if(e&&"object"===typeof e&&!e.errors){var o=a;o.splice(1,0,e),c(o),_({type:"success",message:"Success! Your list was created."}),g(!0),t&&t()}else{if(!e||"object"!==typeof e||!e.errors)throw new Error("There was an unexpected error creating your new list. Unfortunately, we don't know more than that yet. We're sorry!");_({type:"error",header:"".concat(e.errors.length," error(s) prevented your shopping list from being created:"),message:e.errors}),g(!0),t&&t()}})).catch((function(e){console.error("Error creating shopping list: ",e.message),401===e.code?k((function(){P&&A(),I(T.login),R.current=!1})):(console.error("Unexpected error creating shopping list: ",e.message),_({type:"error",message:"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!"}),g(!0),o&&o())}))},performShoppingListDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;N(P,e).then((function(e){return 204===e.status?null:e.json()})).then((function(o){if(o){var r=a.map((function(e){return!0===e.master?o:e})).filter((function(t){return t&&t.id!==e}));c(r),_({type:"success",message:"Your shopping list has been deleted."}),g(!0),t&&t()}else c([]),_({type:"success",header:"Your shopping list has been deleted.",message:"Since it was your last list, your master list has been deleted as well."}),g(!0),t&&t()})).catch((function(e){401===e.code?k((function(){P&&A(),I(T.login),R.current=!1})):404===e.code?(_({type:"error",message:"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem."}),g(!0),o&&o()):(console.error("Unexpected error deleting shopping list: ",e.message),_({type:"error",message:"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!"}))}))},performShoppingListItemCreate:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;F(P,e,t).then((function(e){return e.json()})).then((function(t){if(Array.isArray(t)){for(var s,i,l=Object(u.a)(t,2),h=l[0],p=l[1],m=Object(G.a)(a),b=Object(d.a)({},a[0]),f=b.list_items,j=Object(d.a)({},a.find((function(t){return t.id===e}))),v=a.indexOf(j),x=j.list_items,O=0;O<f.length;O++)if(f[O].id===h.id){s=O;break}null!==s&&void 0!==s&&f.splice(s,1),f.unshift(h),b.list_items=f,m[0]=b;for(var y=0;y<x.length;y++)if(x[y].id===p.id){i=y;break}null!==i&&void 0!==i&&x.splice(i,1),x.unshift(p),j.list_items=x,m[v]=j,c(m),o&&o()}else t&&"object"===typeof t&&t.errors&&(_({type:"error",header:"".concat(t.errors.length," error(s) prevented your shopping list item from being created:"),message:t.errors}),void 0===n.flashVisible&&g(!0),r&&r())})).catch((function(e){401===e.code?k((function(){P&&A(),I(T.login),R.current=!1})):404===e.code?(_({type:"error",message:"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem."}),void 0===n.flashVisible&&g(!0)):(console.error("Unexpected error when creating shopping list item: ",e.message),_({type:"error",message:"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!"}),void 0===n.flashVisible&&g(!0)),r&&r()}))},flashProps:j,flashVisible:p,setFlashProps:_,setFlashVisible:g},n);return Object(r.useEffect)((function(){P&&!n.shoppingLists&&function(e){var t="".concat(x,"/shopping_lists");return fetch(t,{headers:y(e)}).then((function(e){if(401===e.status)throw new f;return e}))}(P).then((function(e){return e.json()})).then((function(e){if(!e)throw new Error("No shopping list data returned from the SIM API");c(e),void 0===n.shoppingListLoadingState&&L(K)})).catch((function(e){401===e.code?k((function(){P&&A(),I(T.home),R.current=!1})):(!n.shoppingListLoadingState&&L(J),_({type:"error",message:"There was an error loading your lists. It may have been on our end. We're sorry!"}),g(!0))}))}),[n.shoppingListLoadingState,n.shoppingLists,I,A,P]),Object(r.useEffect)((function(){return function(){R.current=!1}})),Object(D.jsx)(z.Provider,{value:V,children:t})},X=function(e,t){var o=Object(r.useContext)(e);if(!o)throw new Error(t);return o},Z=function(){return X(W,"useColorScheme must be used within a ColorProvider")},$=function(){return X(A,"useAppContext must be used within a AppProvider")},ee=function(){return X(z,"useShoppingListContext must be used within a ShoppingListProvider")},te=o.p+"static/media/googleIcon.9432a66b.svg",oe=o(36),re=o.n(oe),ne=function(e){var t=e.className,o=e.logOutFunction,n=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){return n.current=!1}})),Object(D.jsx)("div",{className:t,children:Object(D.jsx)("button",{className:re.a.button,onClick:function(e){e.preventDefault(),o((function(){n.current=!1}))},children:Object(D.jsx)("div",{className:re.a.body,children:Object(D.jsxs)("div",{className:re.a.googleLogout,children:[Object(D.jsx)("img",{src:te,alt:"Google logo"}),"Log Out With Google"]})})})})},se=o.p+"static/media/anonymousAvatar.36d1acc1.jpg",ie=o(8),ae=o.n(ie),ce=function(){var e=$(),t=e.token,o=e.profileData,n=e.removeSessionCookie,s=e.setShouldRedirectTo,i=Object(r.useState)(!1),c=Object(u.a)(i,2),l=c[0],h=c[1],d=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){return d.current=!1}}),[]),Object(D.jsx)("div",{className:ae.a.root,children:Object(D.jsxs)("div",{className:ae.a.bar,children:[Object(D.jsx)("span",{className:ae.a.headerContainer,children:Object(D.jsx)("h1",{className:ae.a.header,children:Object(D.jsxs)(a.b,{className:ae.a.headerLink,to:T.dashboard.main,children:["Skyrim Inventory",Object(D.jsx)("br",{className:ae.a.bp})," Management"]})})}),o?Object(D.jsxs)("button",{className:ae.a.profile,onClick:function(){return h(!l)},children:[Object(D.jsxs)("div",{className:ae.a.profileText,children:[Object(D.jsx)("p",{className:ae.a.textTop,children:o.name}),Object(D.jsx)("p",{className:ae.a.textBottom,children:o.email})]}),Object(D.jsx)("img",{className:ae.a.avatar,src:o.image_url||se,alt:"User avatar",referrerPolicy:"no-referrer"})]}):null,Object(D.jsx)(ne,{className:l?ae.a.logoutDropdown:ae.a.hidden,logOutFunction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;h(!1),k((function(){t&&n(),e&&e(),s(T.home),d.current=!1}))}})]})})},le=o(25),he=o.n(le),de=function(e){var t=e.title,o=e.children;return Object(D.jsxs)("div",{className:he.a.root,children:[Object(D.jsxs)("div",{className:he.a.container,children:[t?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("h2",{className:he.a.title,children:t}),Object(D.jsx)("hr",{className:he.a.hr})]}):null,o]}),Object(D.jsx)(ce,{})]})},ue=o(51),pe=o.n(ue),ge=function(e){var t=e.className,o=e.type,r=void 0===o?"bubbles":o,n=e.color,s=e.height,i=e.width;return Object(D.jsx)(pe.a,{className:t,type:r,color:n,height:s,width:i})},me=o(52),be=o.n(me),fe=function(e){var t=e.href,o=e.children,r=Z(),n={"--background-color":r.schemeColor,"--hover-color":r.hoverColor,"--text-color":r.textColorPrimary};return Object(D.jsx)(a.b,{className:be.a.root,to:t,style:n,children:o})},je=o(42),_e=o.n(je),ve=function(e){var t=e.cardArray;return Object(D.jsx)("div",{className:_e.a.root,children:t.map((function(e){var t=e.colorScheme,o=e.href,r=e.children,n=e.key;return Object(D.jsx)("div",{className:_e.a.card,children:Object(D.jsx)(Y,{colorScheme:t,children:Object(D.jsx)(fe,{href:o,children:r})})},n)}))})},xe=o(43),Oe=o.n(xe),ye=[{colorScheme:V,href:"#",children:"Your Games",key:"your-games"},{colorScheme:B,href:T.dashboard.shoppingLists,children:"Your Shopping Lists",key:"your-shopping-lists"},{colorScheme:M,href:"#",children:"Nav Link 3",key:"nav-link-3"},{colorScheme:H,href:"#",children:"Nav Link 4",key:"nav-link-4"},{colorScheme:U,href:"#",children:"Nav Link 5",key:"nav-link-5"}],Ce=function(){var e=$(),t=e.token,o=e.profileLoadState;return t?Object(D.jsx)(de,{children:"done"===o?Object(D.jsx)("div",{className:Oe.a.root,children:Object(D.jsx)(ve,{cardArray:ye})}):Object(D.jsx)(ge,{className:Oe.a.loading,type:"bubbles",color:V.schemeColor,height:"15%",width:"15%"})}):Object(D.jsx)(h.a,{to:T.login})},Le=o(15),Se=o(26),we=o.n(Se),Ne="info",Fe=(v={},Object(Le.a)(v,"success",{body:"#e5f2e5",border:"#b2d8b2",text:"#329932"}),Object(Le.a)(v,Ne,{body:"#cce5ff",border:"#b3d8ff",text:"#4e6d8e"}),Object(Le.a)(v,"error",{body:"#ffcccc",border:"#ff9999",text:"#cc0000"}),Object(Le.a)(v,"warning",{body:"#fefde4",border:"#fdf797",text:"#b0a723"}),v),Ee=function(e){var t=e.type,o=void 0===t?Ne:t,r=e.header,n=e.message,s={"--body-color":Fe[o].body,"--border-color":Fe[o].border,"--text-color":Fe[o].text};return Object(D.jsxs)("div",{className:we.a.root,style:s,children:[r&&Object(D.jsx)("p",{className:we.a.header,children:r}),"string"===typeof n?n:Object(D.jsx)("ul",{className:we.a.messageList,children:n.map((function(e,t){return Object(D.jsx)("li",{className:we.a.msg,children:e},"message-".concat(t))}))})]})},ke=o(16),Pe=o.n(ke),Te=o(23),De=o.n(Te),Ie=function(e){var t=e.disabled,o=ee(),n=o.performShoppingListCreate,s=o.setFlashVisible,i=Object(r.useState)(""),a=Object(u.a)(i,2),c=a[0],l=a[1],h={"--button-color":M.schemeColorLighter,"--button-text-color":M.textColorPrimary,"--button-border-color":M.borderColor,"--button-hover-color":M.hoverColorLighter};return Object(D.jsx)("div",{className:Pe.a.root,style:h,children:Object(D.jsx)("form",{className:Pe.a.form,onSubmit:function(e){e.preventDefault(),s(!1);var t=e.target.elements.title.value;n(t,(function(){return l("")}))},children:Object(D.jsxs)("fieldset",{className:De()(Pe.a.fieldset,Object(Le.a)({},Pe.a.fieldsetDisabled,t)),disabled:t,children:[Object(D.jsx)("input",{className:Pe.a.input,type:"text",name:"title",placeholder:"Title",value:c,onChange:function(e){var t=e.currentTarget.value;l(t)}}),Object(D.jsx)("button",{className:De()(Pe.a.button,Object(Le.a)({},Pe.a.buttonDisabled,t)),type:"submit",children:"Create"})]})})})},Ae=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),o=t[0],n=t[1],s=Object(r.useRef)(null),i=Object(r.useRef)(null),a=function(e){return i.current&&i.current.contains(e)},c=function(e){"Escape"===e.key&&n(!1)},l=function(e){var t;t=e.target,s.current&&s.current.contains(t)||a(e.target)?a(e.target)&&n(!o):n(!1)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",c,!0),document.addEventListener("click",l,!0),function(){document.removeEventListener("keydown",c,!0),document.removeEventListener("click",l,!0)}})),{componentRef:s,triggerRef:i,isComponentVisible:o,setIsComponentVisible:n}},Re=o(24),Ve=o(33),Be=o(55),Me=o(19),He=o(28),Ue=o.n(He),qe=function(e){var t=e.formRef,o=e.className,n=e.title,s=e.onSubmit,i=function(e){var t=document.createElement("canvas").getContext("2d");return t.font="21px Quattrocento Sans",t.measureText(e).width},a=Object(r.useState)(n),c=Object(u.a)(a,2),l=c[0],h=c[1],d=Object(r.useState)("".concat(i(n),"px")),p=Object(u.a)(d,2),g=p[0],m=p[1],b=Object(r.useRef)(null),f=Z(),j={"--scheme-color":f.schemeColor,"--text-color":f.textColorPrimary,"--border-color":f.borderColor,"--icon-hover-color":f.schemeColorLightest};return Object(r.useEffect)((function(){b.current.focus()})),Object(D.jsxs)("form",{className:De()(o,Ue.a.root),style:j,ref:t,onSubmit:s,children:[Object(D.jsx)("input",{className:Ue.a.input,onClick:function(e){return e.stopPropagation()},onChange:function(e){var t=e.currentTarget.value;h(t),m("".concat(i(t),"px"))},type:"text",name:"title",ref:b,style:{width:g},value:l}),Object(D.jsx)("button",{className:Ue.a.submit,name:"submit",type:"submit",children:Object(D.jsx)(Re.a,{className:Ue.a.fa,icon:Ve.a})})]})},We=o(17),Ye=o.n(We),Ge=function(e){var t=e.description,o=e.quantity,n=e.notes,s=Object(r.useState)(0),i=Object(u.a)(s,2),a=i[0],c=i[1],l=Z(),h=l.schemeColorLighter,d=l.hoverColorLighter,p={"--main-color":h,"--title-text-color":l.textColorSecondary,"--border-color":l.borderColor,"--body-background-color":l.schemeColorLightest,"--body-text-color":l.textColorTertiary,"--hover-color":d};return Object(D.jsxs)("div",{className:Ye.a.root,style:p,children:[Object(D.jsxs)("div",{className:Ye.a.headerContainer,children:[Object(D.jsx)("button",{className:Ye.a.button,onClick:function(){c(Date.now)},children:Object(D.jsx)("h4",{className:Ye.a.description,children:t})}),Object(D.jsx)("span",{className:Ye.a.quantity,children:o})]}),Object(D.jsx)(Me.a,{toggleEvent:a,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(D.jsx)("div",{className:Ye.a.collapsible,ref:t,children:Object(D.jsx)("p",{className:Ye.a.notes,children:n||"No details available"})})}})]})},Ke=o(12),Je=o.n(Ke),ze=o(6),Qe=o.n(ze),Xe=function(e){var t=e.listId,o=Object(r.useState)(0),n=Object(u.a)(o,2),s=n[0],i=n[1],a=ee(),c=a.performShoppingListItemCreate,l=a.setFlashVisible,h=Z(),d=h.schemeColorLighter,p=h.hoverColorLighter,g=h.schemeColorLightest,m=h.borderColor,b=h.textColorSecondary,f=h.textColorTertiary,j=Object(r.useRef)(null),_={"--base-color":d,"--hover-color":p,"--body-color":g,"--border-color":m,"--text-color-main":b,"--text-color-secondary":f},v=function(){i(Date.now)},x=function(e){e.preventDefault(),l(!1);var o=e.target.elements.description.value,r=Number(e.target.elements.quantity.value),n=e.target.elements.notes.value;c(t,{description:o,quantity:r,notes:n},(function(){j.current.reset(),v()}))};return Object(D.jsxs)("div",{className:Qe.a.root,style:_,children:[Object(D.jsx)("div",{className:Qe.a.triggerContainer,children:Object(D.jsx)("button",{className:Qe.a.triggerButton,onClick:v,children:"Add item to list..."})}),Object(D.jsx)(Me.a,{toggleEvent:s,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(D.jsx)("div",{className:Qe.a.collapsible,ref:t,children:Object(D.jsxs)("form",{className:Qe.a.form,ref:j,onSubmit:x,children:[Object(D.jsxs)("fieldset",{className:Qe.a.fieldset,children:[Object(D.jsx)("label",{className:Qe.a.label,htmlFor:"description",children:"Description"}),Object(D.jsx)("input",{className:Qe.a.input,type:"text",name:"description",placeholder:"Description"})]}),Object(D.jsxs)("fieldset",{className:Qe.a.fieldset,children:[Object(D.jsx)("label",{className:Qe.a.label,htmlFor:"quantity",children:"Quantity"}),Object(D.jsx)("input",{className:Qe.a.input,type:"text",name:"quantity",placeholder:"Quantity"})]}),Object(D.jsxs)("fieldset",{className:Qe.a.fieldset,children:[Object(D.jsx)("label",{className:Qe.a.label,htmlFor:"notes",children:"Notes"}),Object(D.jsx)("input",{className:Qe.a.input,type:"text",name:"notes",placeholder:"Notes"})]}),Object(D.jsx)("button",{className:Qe.a.submit,type:"submit",children:"Add to List"})]})})}})]})},Ze=function(e){var t=e.canEdit,o=void 0===t||t,n=e.listId,s=e.title,i=Object(r.useState)(0),a=Object(u.a)(i,2),c=a[0],l=a[1],h=Object(r.useState)(s),d=Object(u.a)(h,2),p=d[0],g=d[1],m=Object(r.useState)(null),b=Object(u.a)(m,2),f=b[0],j=b[1],_=Object(r.useRef)(null),v=Object(r.useRef)(null),x=Ae(),O=x.componentRef,y=x.triggerRef,C=x.isComponentVisible,L=x.setIsComponentVisible,S=ee(),w=S.shoppingLists,N=S.performShoppingListUpdate,F=S.performShoppingListDelete,E=S.setFlashProps,k=S.setFlashVisible,P=s,T=function(e){return function(e){return _.current&&(_.current===e||_.current.contains(e))}(e)&&!function(e){return y.current&&(y.current===e||y.current.contains(e))}(e)&&!function(e){return O.current&&(O.current===e||O.current.contains(e))}(e)&&!function(e){return v.current&&(v.current===e||v.current.contains(e))}(e)},I=Z(),A={"--scheme-color":I.schemeColor,"--border-color":I.borderColor,"--text-color-primary":I.textColorPrimary,"--text-color-secondary":I.textColorSecondary,"--hover-color":I.hoverColor,"--scheme-color-lighter":I.schemeColorLighter,"--scheme-color-lightest":I.schemeColorLightest};return Object(r.useEffect)((function(){if(void 0!==w){var e=w.find((function(e){return e.id===n})).list_items;j(e)}}),[w,n]),Object(D.jsxs)("div",{className:Je.a.root,style:A,children:[Object(D.jsx)("div",{className:Je.a.titleContainer,children:Object(D.jsxs)("div",{className:Je.a.trigger,ref:_,onClick:function(e){T(e.target)&&l(Date.now)},children:[o&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:Je.a.icon,ref:v,onClick:function(e){e.preventDefault();var t=window.confirm('Are you sure you want to delete the list "'.concat(s,'"? You will also lose any list items on the list. This action cannot be undone.'));k(!1),t?F(n):(E({type:"info",message:"Your list was not deleted."}),k(!0))},children:Object(D.jsx)(Re.a,{className:Je.a.fa,icon:Be.a})}),Object(D.jsx)("div",{className:Je.a.icon,ref:y,children:Object(D.jsx)(Re.a,{className:Je.a.fa,icon:Ve.b})})]}),o&&C?Object(D.jsx)(qe,{formRef:O,className:Je.a.form,title:s,onSubmit:function(e){e.preventDefault(),k(!1);var t,o=e.nativeEvent.target.children[0].defaultValue;o&&(!(t=o)||t.match(/^\s*[a-z0-9 ]*\s*$/i)[0]!==t||"Master"===t)||g(o),N(n,o,null,(function(){g(P)})),L(!1)}}):Object(D.jsx)("h3",{className:Je.a.title,children:p})]})}),Object(D.jsx)(Me.a,{toggleEvent:c,collapsed:!0,children:function(e){var t=e.setCollapsibleElement;return Object(D.jsxs)("div",{className:Je.a.collapsible,ref:t,children:[!o&&(!f||0===f.length)&&Object(D.jsx)("div",{className:Je.a.emptyList,children:"You have no shopping list items."}),o&&Object(D.jsx)(Xe,{listId:n}),f&&f.length>0&&f.map((function(e){var t=e.id,o=e.description,r=e.quantity,n=e.notes,i="".concat(s.toLowerCase().replace(" ","-"),"-").concat(t);return Object(D.jsx)(Ge,{description:o,quantity:r,notes:n},i)}))]})}})]})},$e=o(44),et=o.n($e),tt=function(){var e=ee(),t=e.shoppingLists,o=e.shoppingListLoadingState;return t&&"done"===o&&t.length>0?Object(D.jsx)(D.Fragment,{children:t.map((function(e,t){var o=e.id,r=e.title,n=e.master,s=q[t<q.length?t:t%q.length],i=r.toLowerCase().replace(" ","-");return Object(D.jsx)(Y,{colorScheme:s,children:Object(D.jsx)("div",{className:et.a.shoppingList,children:Object(D.jsx)(Ze,{canEdit:!n,listId:o,title:r})})},i)}))}):"loading"===o?Object(D.jsx)(ge,{className:et.a.loading,color:V.schemeColor,height:"15%",width:"15%"}):null},ot=o(45),rt=o.n(ot),nt=function(){var e=ee(),t=e.flashProps,o=e.flashVisible,r=e.shoppingListLoadingState,n="loading"===r||"error"===r;return Object(D.jsxs)(de,{title:"Your Shopping Lists",children:[o&&Object(D.jsx)("div",{className:rt.a.flash,children:Object(D.jsx)(Ee,Object(d.a)({},t))}),Object(D.jsx)("div",{className:rt.a.createForm,children:Object(D.jsx)(Ie,{disabled:n})}),Object(D.jsx)(tt,{})," "]})},st=o(29),it=o.n(st),at=function(){var e=$(),t=e.token,o=e.setShouldRedirectTo,n=e.removeSessionCookie;return Object(r.useEffect)((function(){t&&!P()&&L(t).then((function(e){o(T.dashboard.main)})).catch((function(e){k((function(){n()}))}))}),[]),Object(D.jsx)("div",{className:it.a.root,children:Object(D.jsxs)("div",{className:it.a.container,children:[Object(D.jsx)("h1",{className:it.a.header,children:"Skyrim Inventory Management"}),Object(D.jsx)(a.b,{className:it.a.login,to:T.login,children:"Log in with Google"})]})})},ct=o(56),lt=o.n(ct),ht=o(30),dt=o.n(ht),ut=function(){var e=$(),t=e.token,o=e.setSessionCookie,n=e.removeSessionCookie,s=e.setShouldRedirectTo,i=Object(r.useState)(null),a=Object(u.a)(i,2),c=a[0],l=a[1],h=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){return h.current=!1}})),Object(D.jsxs)("div",{className:dt.a.root,children:[c?Object(D.jsx)("p",{className:dt.a.errorMessage,children:c}):null,Object(D.jsx)("div",{className:dt.a.container,children:Object(D.jsx)(lt.a,{className:dt.a.button,clientId:g,buttonText:"Log In With Google",onSuccess:function(e){var r=e.tokenId;t!==r&&L(r).then((function(e){204===e.status&&(o(r),P()||(s(T.dashboard.main),h.current=!1))})).catch((function(e){console.error("Error from /auth/verify_token: ",e.message),k((function(){t&&n()}))}))},onFailure:function(e){console.error("Login failure: ",e),t&&n(),l("Something went wrong! Please try logging in again.")},isSignedIn:!0,redirectUri:"".concat(m).concat(T.dashboard.main)})})]})},pt="Skyrim Inventory Management |",gt=[{pageId:"home",title:"".concat(pt," Home"),description:"Manage your inventory across multiple properties in Skyrim",jsx:Object(D.jsx)(at,{}),path:T.home},{pageId:"login",title:"".concat(pt," Login"),description:"Log into Skyrim Inventory Management using your Google account",jsx:Object(D.jsx)(ut,{}),path:T.login},{pageId:"dashboard",title:"".concat(pt," Dashboard"),description:"Skyrim Inventory Management User Dashboard",jsx:Object(D.jsx)(Ce,{}),path:T.dashboard.main},{pageId:"shoppingLists",title:"".concat(pt," Manage Shopping Lists"),description:"Manage Skyrim Shopping Lists",jsx:Object(D.jsx)(Q,{children:Object(D.jsx)(nt,{})}),path:T.dashboard.shoppingLists}],mt=function(){return Object(D.jsx)(h.d,{children:gt.map((function(e){var t=e.pageId,o=e.title,r=e.description,n=e.jsx,s=e.path;return Object(D.jsxs)(h.b,{exact:!0,path:s,children:[Object(D.jsxs)(c.a,{children:[Object(D.jsx)("html",{lang:"en"}),Object(D.jsx)("title",{children:o}),Object(D.jsx)("meta",{name:"description",content:r})]}),Object(D.jsx)(R,{children:n})]},t)}))})},bt=function(){return Object(D.jsx)(a.a,{basename:"",children:Object(D.jsx)(c.b,{children:Object(D.jsx)(l.a,{children:Object(D.jsx)(mt,{})})})})};i.a.render(Object(D.jsx)(n.a.StrictMode,{children:Object(D.jsx)(bt,{})}),document.getElementById("root"))},8:function(e,t,o){e.exports={root:"dashboardHeader_root__3lzne",bar:"dashboardHeader_bar__1XEWl",headerContainer:"dashboardHeader_headerContainer__1ZVqS",header:"dashboardHeader_header__cB1mg",headerLink:"dashboardHeader_headerLink__dHHDn",profile:"dashboardHeader_profile__A3WxH",profileText:"dashboardHeader_profileText__1HPKf",textTop:"dashboardHeader_textTop__2UNgU",textBottom:"dashboardHeader_textBottom__1vLtl",avatar:"dashboardHeader_avatar__2BhRu",logoutDropdown:"dashboardHeader_logoutDropdown__37Dm5",hidden:"dashboardHeader_hidden__Fkjhq",bp:"dashboardHeader_bp__2hS3f"}}},[[74,1,2]]]);
//# sourceMappingURL=main.45c42ca6.chunk.js.map