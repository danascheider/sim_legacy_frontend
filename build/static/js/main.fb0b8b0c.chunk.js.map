{"version":3,"sources":["components/shoppingListItem/shoppingListItem.module.css","components/shoppingListItemCreateForm/shoppingListItemCreateForm.module.css","components/dashboardHeader/dashboardHeader.module.css","components/shoppingList/shoppingList.module.css","components/gameCreateForm/gameCreateForm.module.css","components/game/game.module.css","components/gamesDropdown/gamesDropdown.module.css","layouts/dashboardLayout.module.css","components/shoppingListCreateForm/shoppingListCreateForm.module.css","components/flashMessage/flashMessage.module.css","components/modalForm/modalForm.module.css","components/shoppingListsPageContent/shoppingListsPageContent.module.css","pages/homePage/homePage.module.css","pages/loginPage/loginPage.module.css","components/modal/modal.module.css","pages/gamesPage/gamesPage.module.css","components/shoppingListEditForm/shoppingListEditForm.module.css","pages/notFoundPage/notFoundPage.module.css","components/logoutDropdown/logoutDropdown.module.css","components/navigationMosaic/navigationMosaic.module.css","pages/dashboardPage/dashboardPage.module.css","components/loadingError/loadingError.module.css","components/gamesDropdownOption/gamesDropdownOption.module.css","components/navigationCard/navigationCard.module.css","pages/shoppingListsPage/shoppingListsPage.module.css","utils/config.js","utils/customErrors.js","utils/simApi.js","utils/logOutWithGoogle.js","utils/isTestEnv.js","routing/paths.js","contexts/appContext.js","utils/loadingStates.js","contexts/colorContext.js","hooks/useQuery.js","contexts/shoppingListsContext.js","hooks/contexts.js","contexts/gamesContext.js","pages/homePage/homePage.js","pages/loginPage/loginPage.js","utils/colorSchemes.js","components/logoutDropdown/googleIcon.svg","components/logoutDropdown/logoutDropdown.js","components/dashboardHeader/anonymousAvatar.jpg","components/dashboardHeader/dashboardHeader.js","components/gamesDropdownOption/gamesDropdownOption.js","components/gamesDropdown/gamesDropdown.js","layouts/dashboardLayout.js","components/loading/loading.js","components/navigationCard/navigationCard.js","components/navigationMosaic/navigationMosaic.js","pages/dashboardPage/dashboardPage.js","components/flashMessage/flashMessage.js","components/modal/modal.js","hocs/withModal.js","components/modalForm/modalForm.js","components/modalGameForm/modalGameForm.js","components/game/game.js","components/gameCreateForm/gameCreateForm.js","components/loadingError/loadingError.js","pages/gamesPage/gamesPage.js","pages/inventoryPage/inventoryPage.js","components/shoppingListCreateForm/shoppingListCreateForm.js","utils/titlecase.js","hooks/useComponentVisible.js","hooks/useSize.js","components/shoppingListEditForm/shoppingListEditForm.js","components/shoppingListItemEditForm/shoppingListItemEditForm.js","components/shoppingListItem/shoppingListItem.js","components/shoppingListItemCreateForm/shoppingListItemCreateForm.js","components/shoppingList/shoppingList.js","components/shoppingListsPageContent/shoppingListsPageContent.js","pages/shoppingListsPage/shoppingListsPage.js","pages/notFoundPage/notFoundPage.js","routing/pageRoutes.js","App.js","index.js"],"names":["module","exports","backendBaseUri","sessionCookieName","AuthorizationError","message","this","code","name","stack","Error","NotFoundError","MethodNotAllowedError","prototype","contentTypeHeader","authHeader","token","combinedHeaders","createShoppingList","gameId","attrs","uri","body","JSON","stringify","shopping_list","fetch","method","headers","then","resp","status","json","updateShoppingList","listId","id","destroyShoppingList","createShoppingListItem","shopping_list_item","defaultErrorCallback","err","console","error","logOutWithGoogle","success","window","gapi","auth2","GoogleAuth","getAuthInstance","disconnect","isTestEnv","process","STORYBOOK","isStorybook","paths","home","login","dashboard","main","games","shoppingLists","inventory","allPaths","pathsScopedToGames","DONE","AppContext","createContext","AppProvider","children","overrideValue","pathname","useLocation","useCookies","cookies","setCookie","removeCookie","useState","type","flashAttributes","setFlashAttributes","flashVisible","setFlashVisible","modalAttributes","setModalAttributes","modalVisible","setModalVisible","profileData","setProfileData","shouldRedirectTo","redirectPath","setRedirectPath","profileLoadState","setProfileLoadState","mountedRef","useRef","removeSessionCookie","useCallback","setShouldRedirectTo","path","current","onAuthenticatedPage","indexOf","shouldFetchProfileData","logOutAndRedirect","callback","value","setSessionCookie","useEffect","fetchUserProfile","errors","catch","Provider","to","LOADING","ERROR","ColorContext","ColorProvider","colorScheme","useQuery","URLSearchParams","search","ShoppingListsContext","ShoppingListsProvider","queryString","useAppContext","useGamesContext","activeGameId","useMemo","length","parseInt","get","setShoppingLists","shoppingListLoadingState","setShoppingListLoadingState","shoppingListsOverridden","addOrUpdateListItem","list","item","originalItem","list_items","find","listItem","description","toLowerCase","newListItems","originalItemPosition","splice","unshift","removeItemFromList","itemId","newList","index","fetchLists","fetchShoppingLists","performShoppingListUpdate","newTitle","callbacks","onSuccess","onNotFound","onUnprocessableEntity","onUnauthorized","onInternalServerError","title","newShoppingLists","map","header","performShoppingListCreate","Array","isArray","performShoppingListDestroy","filter","aggregate","performShoppingListItemCreate","newLists","i","list_id","listPosition","performShoppingListItemUpdate","updateShoppingListItem","performShoppingListItemDestroy","destroyShoppingListItem","newAggregateList","regularListToRemoveItemFrom","listFromListItemId","regularListIndex","deletedItem","aggregateListItem","newRegularList","useCustomContext","cxt","msg","context","useContext","useColorScheme","useShoppingListsContext","GamesContext","GamesProvider","setGames","gameLoadingState","setGameLoadingState","gamesOverridden","fetchUserGames","fetchGames","performGameCreate","game","createGame","newGames","performGameUpdate","updateGame","performGameDestroy","destroyGame","destroyedGame","gameIndex","HomePage","verifyLogin","authorize","data","className","styles","root","container","LoginPage","loginErrorMessage","setLoginErrorMessage","errorMessage","button","clientId","buttonText","tokenId","onFailure","redirectUri","YELLOW","schemeColorDarkest","schemeColorDark","schemeColorLight","schemeColorLightest","hoverColorDark","hoverColorLight","hoverColorLightest","textColorPrimary","textColorSecondary","textColorTertiary","borderColor","PINK","BLUE","GREEN","AQUA","colorSchemes","LogoutDropdown","logOutFunction","onClick","e","preventDefault","googleLogout","src","icon","alt","DashboardHeader","dropdownVisible","setDropdownVisible","bar","headerContainer","headerLinkLarge","bp","headerLinkSmall","profile","profileText","textTop","textBottom","email","avatar","image_url","anonymousAvatar","referrerPolicy","logoutDropdown","hidden","GamesDropdownOption","onKeyDown","ariaSelected","classNames","role","tabIndex","substring","GamesDropdown","history","useHistory","activeGame","setActiveGame","dropdownExpanded","setDropdownExpanded","inputValue","setInputValue","componentRef","expandDropdown","collapseDropdown","colorVars","selectGame","params","push","toString","isActiveGame","collapseDropdownAndResetValue","relatedTarget","contains","g","document","addEventListener","removeEventListener","ref","style","input","disabled","onChange","currentTarget","placeholder","onFocus","key","target","blur","focusables","getElementsByClassName","focus","trigger","fa","faAngleDown","dropdown","replace","DashboardLayout","includeGameSelect","titleContainer","hr","Loading","color","height","width","NavigationCard","href","styleVars","NavigationMosaic","cardArray","card","cards","DashboardPage","loading","colors","FlashMessage","setTimeout","messageList","Modal","subtitle","contentRef","contentRefContains","el","hide","getElementsByTagName","classList","add","remove","content","withModal","WrappedComponent","childProps","ModalForm","modelName","buttonLabel","onSubmit","fields","buttonColor","formRef","inputRef","colorRef","Math","floor","random","Tag","tag","label","inputProps","fieldset","htmlFor","submit","formFields","inputMode","pattern","ModalGameForm","currentAttributes","field","defaultValue","unmountAndDisplayFlash","elements","attr","location","Game","toggleEvent","setToggleEvent","iconsRef","editRef","destroyRef","Date","now","editIcons","confirm","faTimes","attributes","ModalComponent","props","faEdit","collapsed","setCollapsibleElement","collapsible","GameCreateForm","toggleForm","onSuccessOrFatalError","reset","slideToggleTrigger","onExpanded","form","fieldsetDisabled","buttonDisabled","LoadingError","text","GamesPage","noGames","InventoryPage","ShoppingListCreateForm","showFlashAndClearInput","newValue","LOWERCASE_WORDS","titlecase","words","split","word","letter","toUpperCase","slice","capitalize","join","useComponentVisible","isComponentVisible","setIsComponentVisible","triggerRef","triggerRefContains","element","handleHideDiv","handleClickOutside","useSize","size","setSize","useLayoutEffect","getBoundingClientRect","useResizeObserver","entry","contentRect","ShoppingListEditForm","maxTotalWidth","getInputTextWidth","createElement","getContext","font","max","maxTextWidth","textWidth","measureText","min","setMaxTextWidth","inputWidth","setInputWidth","buttonRef","offsetWidth","classnames","stopPropagation","faCheckSquare","required","ShoppingListItemEditForm","quantity","notes","ShoppingListItem","listTitle","canEdit","setCollapsed","currentQuantity","setCurrentQuantity","deleteRef","incRef","decRef","refContains","iconContains","editRefContains","deleteRefContains","incRefContains","decRefContains","displayFlash","toggle","headerEditable","destroyIcon","oldQuantity","newQuantity","faAngleUp","quantityContent","ShoppingListItemCreateForm","resetToggleAndDisplayFlash","triggerContainer","triggerButton","ShoppingList","DELETE_CONFIRMATION","currentTitle","setCurrentTitle","maxEditFormWidth","setMaxEditFormWidth","listItems","setListItems","slideTriggerRef","deleteTriggerRef","originalTitle","shouldToggleListItems","slideTriggerRefContains","componentRefContains","deleteTriggerRefContains","items","obj","confirmed","onError","str","nativeEvent","match","resetTitleAndDisplayError","emptyList","itemKey","ShoppingListsPageContent","listsLoadedAndNotEmpty","listsLoadedAndEmpty","listKey","shoppingList","noLists","link","ShoppingListsPage","shouldDisableForm","createForm","NotFoundPage","siteTitle","pages","pageId","jsx","PageRoutes","exact","lang","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fb0b8b0c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItem_root__3NPoi\",\"collapsed\":\"shoppingListItem_collapsed__3iHS2\",\"toggle\":\"shoppingListItem_toggle__26aMd\",\"fa\":\"shoppingListItem_fa__2P4jA\",\"destroyIcon\":\"shoppingListItem_destroyIcon__2IBmH\",\"header\":\"shoppingListItem_header__1qqqT\",\"headerEditable\":\"shoppingListItem_headerEditable__2K0Ir\",\"description\":\"shoppingListItem_description__mnU6z\",\"editIcons\":\"shoppingListItem_editIcons__2RoL7\",\"quantity\":\"shoppingListItem_quantity__1ebyP\",\"quantityContent\":\"shoppingListItem_quantityContent__24Ts-\",\"icon\":\"shoppingListItem_icon__1pEqd\",\"collapsible\":\"shoppingListItem_collapsible__xa2wr\",\"notes\":\"shoppingListItem_notes__8g2fK\",\"button\":\"shoppingListItem_button__2k4QA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListItemCreateForm_root__3B7YP\",\"collapsed\":\"shoppingListItemCreateForm_collapsed__3j8GF\",\"triggerContainer\":\"shoppingListItemCreateForm_triggerContainer__3IkQf\",\"triggerButton\":\"shoppingListItemCreateForm_triggerButton__2HK_d\",\"form\":\"shoppingListItemCreateForm_form__OXRXv\",\"fieldset\":\"shoppingListItemCreateForm_fieldset__1ovw9\",\"input\":\"shoppingListItemCreateForm_input__2Jire\",\"label\":\"shoppingListItemCreateForm_label__qlamy\",\"submit\":\"shoppingListItemCreateForm_submit__22fVU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardHeader_root__3lzne\",\"bar\":\"dashboardHeader_bar__1XEWl\",\"headerContainer\":\"dashboardHeader_headerContainer__1ZVqS\",\"header\":\"dashboardHeader_header__cB1mg\",\"headerLinkLarge\":\"dashboardHeader_headerLinkLarge__ED8Xx\",\"headerLinkSmall\":\"dashboardHeader_headerLinkSmall__3TlC1\",\"profile\":\"dashboardHeader_profile__A3WxH\",\"profileText\":\"dashboardHeader_profileText__1HPKf\",\"textTop\":\"dashboardHeader_textTop__2UNgU\",\"textBottom\":\"dashboardHeader_textBottom__1vLtl\",\"avatar\":\"dashboardHeader_avatar__2BhRu\",\"logoutDropdown\":\"dashboardHeader_logoutDropdown__37Dm5\",\"hidden\":\"dashboardHeader_hidden__Fkjhq\",\"bp\":\"dashboardHeader_bp__2hS3f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingList_root__2O9FT\",\"trigger\":\"shoppingList_trigger__WV4fR\",\"form\":\"shoppingList_form__1GdfA\",\"icon\":\"shoppingList_icon__3FP5H\",\"editIcons\":\"shoppingList_editIcons__gL8DA\",\"title\":\"shoppingList_title__3Gulc\",\"fa\":\"shoppingList_fa__hRtKq\",\"collapsible\":\"shoppingList_collapsible__2Zuq5\",\"emptyList\":\"shoppingList_emptyList__289Te\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gameCreateForm_root__1CiVs\",\"slideToggleTrigger\":\"gameCreateForm_slideToggleTrigger__47o12\",\"form\":\"gameCreateForm_form__2naYf\",\"fieldset\":\"gameCreateForm_fieldset__iwI0Y\",\"fieldsetDisabled\":\"gameCreateForm_fieldsetDisabled__255jN\",\"input\":\"gameCreateForm_input__3HuYv\",\"button\":\"gameCreateForm_button__1ePIs\",\"buttonDisabled\":\"gameCreateForm_buttonDisabled__1bleU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"game_root__Wpup7\",\"header\":\"game_header__2XbBS\",\"name\":\"game_name__GOPSp\",\"editIcons\":\"game_editIcons__1kxuu\",\"icon\":\"game_icon__WCvOa\",\"description\":\"game_description__KgWbf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdown_root__1EUlO\",\"header\":\"gamesDropdown_header__1Qiyc\",\"input\":\"gamesDropdown_input__z9Zui\",\"trigger\":\"gamesDropdown_trigger__3A35t\",\"hidden\":\"gamesDropdown_hidden__7-IH5\",\"dropdown\":\"gamesDropdown_dropdown__1kXtE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardLayout_root__2dfR_\",\"title\":\"dashboardLayout_title__1yGVn\",\"hr\":\"dashboardLayout_hr__29GgW\",\"container\":\"dashboardLayout_container__3AwFx\",\"headerContainer\":\"dashboardLayout_headerContainer__15_gZ\",\"titleContainer\":\"dashboardLayout_titleContainer__3J8Iz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListCreateForm_root__iSFdV\",\"button\":\"shoppingListCreateForm_button__2so-6\",\"fieldset\":\"shoppingListCreateForm_fieldset__1BLSp\",\"fieldsetDisabled\":\"shoppingListCreateForm_fieldsetDisabled__2V4n7\",\"input\":\"shoppingListCreateForm_input__3hAzq\",\"buttonDisabled\":\"shoppingListCreateForm_buttonDisabled__1USkv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"flashMessage_root__2sPxp\",\"hidden\":\"flashMessage_hidden__cxPrx\",\"content\":\"flashMessage_content__3iY0s\",\"header\":\"flashMessage_header__Vx_Jr\",\"messageList\":\"flashMessage_messageList__3V9SA\",\"msg\":\"flashMessage_msg__3Wquk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modalForm_root__1vkew\",\"fieldset\":\"modalForm_fieldset__3Y2iw\",\"input\":\"modalForm_input__2W8sl\",\"submit\":\"modalForm_submit__2K3FT\",\"label\":\"modalForm_label__1q219\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noLists\":\"shoppingListsPageContent_noLists__1yLrC\",\"link\":\"shoppingListsPageContent_link__1seef\",\"shoppingList\":\"shoppingListsPageContent_shoppingList__3X_TT\",\"loading\":\"shoppingListsPageContent_loading__1Rj5P\",\"error\":\"shoppingListsPageContent_error__3KtOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"homePage_root__15tty\",\"container\":\"homePage_container__3kQJo\",\"header\":\"homePage_header__3EV45\",\"login\":\"homePage_login__3ala0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loginPage_root__2Vf7z\",\"errorMessage\":\"loginPage_errorMessage__8uTVC\",\"container\":\"loginPage_container__2xdLK\",\"button\":\"loginPage_button__1pDsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__QSEqe\",\"content\":\"modal_content__1tQ-X\",\"title\":\"modal_title__1efUU\",\"subtitle\":\"modal_subtitle__4395I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesPage_root__oSBqG\",\"noGames\":\"gamesPage_noGames__1CUVF\",\"games\":\"gamesPage_games__2Q2dQ\",\"loading\":\"gamesPage_loading__1Q0HG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shoppingListEditForm_root__rs5qL\",\"input\":\"shoppingListEditForm_input__2FbCX\",\"submit\":\"shoppingListEditForm_submit__1FqNJ\",\"fa\":\"shoppingListEditForm_fa__Bb-dM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"notFoundPage_root__131Oh\",\"container\":\"notFoundPage_container__38cw2\",\"header\":\"notFoundPage_header__BhS9L\",\"link\":\"notFoundPage_link__2cDdM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"logoutDropdown_button__3hRUK\",\"body\":\"logoutDropdown_body__NiLPw\",\"googleLogout\":\"logoutDropdown_googleLogout__J9YSG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationMosaic_root__2CDUx\",\"card\":\"navigationMosaic_card__3hEln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"dashboardPage_root__oVxx1\",\"loading\":\"dashboardPage_loading__2vZsl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loadingError_root__1A6gy\",\"text\":\"loadingError_text__3auLV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"gamesDropdownOption_root__1Itlx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"navigationCard_root__1-FD3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"shoppingListsPage_overlay__3Mlf4\",\"createForm\":\"shoppingListsPage_createForm__35weW\",\"flash\":\"shoppingListsPage_flash__vlZ2Z\"};","export const googleClientId = process.env.NODE_ENV === 'production' ?\n  '891031345873-gf3loovttd7bfvrq4ilqdduvvibb0tub.apps.googleusercontent.com' :\n  '891031345873-ir73kc1ru0ncv564iesac94kjaap5nf4.apps.googleusercontent.com'\n\nexport const backendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim-api.danascheider.com' : 'http://localhost:3000'\n\nexport const frontendBaseUri = process.env.NODE_ENV === 'production' ? 'https://sim.danascheider.com' : 'http://localhost:3001'\n\nexport const sessionCookieName = '_sim_google_session'\n","export function AuthorizationError(message = '401 Unauthorized') {\n  this.message = message\n  this.code = 401\n  this.name = 'AuthorizationError'\n  this.stack = (new Error()).stack\n}\n\nAuthorizationError.prototype = new Error()\n\nexport function NotFoundError(message = '404 Not Found') {\n  this.message = message\n  this.code = 404\n  this.name = 'NotFoundError'\n  this.stack = (new Error()).stack\n}\n\nNotFoundError.prototype = new Error()\n\nexport function MethodNotAllowedError(message = '405 Method Not Allowed') {\n  this.message = message\n  this.code = 405\n  this.name = 'MethodNotAllowedError'\n  this.stack = (new Error()).stack\n}\n\nMethodNotAllowedError.prototype = new Error()\n","/*\n *\n * This module is an abstraction layer for the SIM API that handles making requests\n * to the API. These functions handle three things: (1) formulating the requests based\n * on which function it is and the args being passed in (including assembling both\n * headers and request body) and (2) throwing an AuthorizationError if the request fails.\n * The AuthorizationError has name 'AuthorizationError', code 401, and either the\n * message passed to the constructor or, by default, '401 Unauthorized'.\n * \n * For more information on the SIM API, its endpoints, the requests it expects, or its\n * responses, please visit the backend API docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { backendBaseUri } from './config'\nimport {\n  AuthorizationError,\n  MethodNotAllowedError,\n  NotFoundError\n} from './customErrors'\n\nconst contentTypeHeader = { 'Content-Type': 'application/json' }\nconst authHeader = token => ({ 'Authorization': `Bearer ${token}`})\nconst combinedHeaders = token => ({ ...authHeader(token), ...contentTypeHeader })\n\n/*\n *\n * Google OAuth Token Verification Endpoint\n * \n */\n\nexport const authorize = token => {\n  const uri = `${backendBaseUri}/auth/verify_token`\n\n  return(\n    fetch(uri, {  headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp\n      })\n  )\n}\n\n/*\n *\n * User Profile Endpoint\n * \n */\n\nexport const fetchUserProfile = token => {\n  const uri = `${backendBaseUri}/users/current`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n/*\n *\n * Game Endpoints (Scoped to Authenticated User)\n * \n */\n\n// GET /games\nexport const fetchGames = token => {\n  const uri = `${backendBaseUri}/games`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games\nexport const createGame = (token, attrs) => {\n  const uri = `${backendBaseUri}/games`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /games/:id\nexport const updateGame = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n  const body = JSON.stringify({ game: attrs })\n\n  return fetch(uri, {\n    method: 'PATCH',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// DELETE /games/:id\nexport const destroyGame = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}`\n\n  return fetch(uri, {\n    method: 'DELETE',\n    headers: authHeader(token)\n  })\n  .then(resp => {\n    // I deviated from the usual pattern of throwing a NotFoundError here\n    // on 404 since the behaviour for 404s is the same as the behaviour for\n    // successful deletion of the game, and making it throw an error here\n    // would just mean duplicating all thatlogic in the handlers in the\n    // GamesProvider.\n    if (resp.status === 401) throw new AuthorizationError()\n    return resp\n  })\n}\n\n/*\n *\n * Shopping List Endpoints (Scoped to Game)\n *\n */\n\n// GET /games/:id/shopping_lists\nexport const fetchShoppingLists = (token, gameId) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n\n  return(\n    fetch(uri, { headers: authHeader(token) })\n      .then(resp => {\n        if (resp.status === 401) throw new AuthorizationError()\n        if (resp.status === 404) throw new NotFoundError()\n        return resp.json().then(json => ({ status: resp.status, json }))\n      })\n  )\n}\n\n// POST /games/:game_id/shopping_lists\nexport const createShoppingList = (token, gameId, attrs) => {\n  const uri = `${backendBaseUri}/games/${gameId}/shopping_lists`\n  const body = JSON.stringify({ shopping_list: attrs })\n\n  return fetch(uri, {\n    method: 'POST',\n    headers: combinedHeaders(token),\n    body: body\n  })\n  .then(resp => {\n    if (resp.status === 401) throw new AuthorizationError()\n    if (resp.status === 404) throw new NotFoundError()\n    return resp.json().then(json => ({ status: resp.status, json }))\n  })\n}\n\n// PATCH /shopping_lists/:id\nexport const updateShoppingList = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  const body = JSON.stringify({\n    id: listId,\n    shopping_list: attrs\n  })\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: body\n    })\n    .then(resp => {\n      // It might return a 422 error too, but in that case we'll need the response\n      // JSON to handle the error\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_lists/:id\nexport const destroyShoppingList = (token, listId) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token),\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError('Shopping list not found. Try refreshing the page to resolve this issue.')\n      if (resp.status === 405) throw new MethodNotAllowedError('Aggregate lists are managed automatically and cannot be deleted manually.')\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n/*\n *\n * Shopping List Item Endpoints\n *\n */\n\n// POST /shopping_lists/:shopping_list_id/shopping_list_items\nexport const createShoppingListItem = (token, listId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_lists/${listId}/shopping_list_items`\n\n  return(\n    fetch(uri, {\n      method: 'POST',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to create an item on a list that doesn't exist. Try refreshing to resolve this issue.\")\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// PATCH /shopping_list_items/:id\nexport const updateShoppingListItem = (token, itemId, attrs) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'PATCH',\n      headers: combinedHeaders(token),\n      body: JSON.stringify({ shopping_list_item: attrs })\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to update a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError('Items on aggregate shopping lists cannot be updated through the API')\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n\n// DELETE /shopping_list_items/:id\nexport const destroyShoppingListItem = (token, itemId) => {\n  const uri = `${backendBaseUri}/shopping_list_items/${itemId}`\n\n  return(\n    fetch(uri, {\n      method: 'DELETE',\n      headers: authHeader(token)\n    })\n    .then(resp => {\n      if (resp.status === 401) throw new AuthorizationError()\n      if (resp.status === 404) throw new NotFoundError(\"You tried to delete a list item that doesn't exist. Try refreshing to fix this issue.\")\n      if (resp.status === 405) throw new MethodNotAllowedError()\n      if (resp.status === 204) return { status: resp.status, json: null }\n      return resp.json().then(json => ({ status: resp.status, json }))\n    })\n  )\n}\n","const defaultErrorCallback = err => {\n  console.error('Error signing out: ', err.message)\n}\n\nconst logOutWithGoogle = (success = () => {}, error = defaultErrorCallback) => {\n  if (window.gapi && window.gapi.auth2) {\n    const GoogleAuth = window.gapi.auth2.getAuthInstance()\n\n    if (GoogleAuth !== null) {\n      GoogleAuth\n        .then(() => GoogleAuth.disconnect())\n        .then(success, error)\n    } else {\n      success() // Google thinks they aren't logged in anyway\n    }\n  }\n\n  success()\n}\n\nexport default logOutWithGoogle\n","export const isTestEnv = process.env.STORYBOOK || process.env.NODE_ENV === 'test'\n\nexport const isJest = process.env.NODE_ENV === 'test'\n\nexport const isStorybook = !!process.env.STORYBOOK\n","const paths = {\n  home: '/',\n  login: '/login',\n  dashboard: {\n    main: '/dashboard',\n    games: '/dashboard/games',\n    shoppingLists: '/dashboard/shopping_lists',\n    inventory: '/dashboard/inventory'\n  }\n}\n\nexport const allPaths = [\n  paths.home,\n  paths.login,\n  paths.dashboard.main,\n  paths.dashboard.games,\n  paths.dashboard.shoppingLists,\n  paths.dashboard.inventory\n]\n\nexport const pathsScopedToGames = [\n  paths.dashboard.shoppingLists,\n  paths.dashboard.inventory\n]\n\nexport default paths\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n * \n */\n\nimport { createContext, useEffect, useState, useRef, useCallback } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { Redirect, useLocation } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { sessionCookieName } from '../utils/config'\nimport { fetchUserProfile } from '../utils/simApi'\nimport logOutWithGoogle from '../utils/logOutWithGoogle'\nimport { isTestEnv } from '../utils/isTestEnv'\nimport paths, { allPaths } from '../routing/paths'\n\nconst LOADING = 'loading'\nconst DONE = 'done'\n\nconst AppContext = createContext()\n\n// overrideValue allows us to set the context value in Storybook.\n// I hate having the testing apparatus baked into the app code but\n// none of the solutions I found worked and I don't understand\n// Storybook decorators and whatnot enough to figure out how to\n// set the value for the context in the story,\nconst AppProvider = ({ children, overrideValue = {} }) => {\n  const { pathname } = useLocation()\n  const [cookies, setCookie, removeCookie] = useCookies([sessionCookieName])\n\n  const [flashAttributes, setFlashAttributes] = useState({ type: 'info', message: '' })\n  const [flashVisible, setFlashVisible] = useState(false)\n\n  const [modalAttributes, setModalAttributes] = useState({})\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const [profileData, setProfileData] = useState(overrideValue.profileData)\n  const [redirectPath, setRedirectPath] = useState(overrideValue.shouldRedirectTo)\n  const [profileLoadState, setProfileLoadState] = useState(overrideValue.profileLoadState || LOADING)\n\n  const mountedRef = useRef(true)\n\n  const removeSessionCookie = useCallback(() => removeCookie(sessionCookieName), [removeCookie])\n  const setSessionCookie = token => setCookie(sessionCookieName, token)\n\n  const setShouldRedirectTo = useCallback(path => {\n    mountedRef.current && setRedirectPath(path)\n    mountedRef.current = false\n  }, [])\n\n  const onAuthenticatedPage = useCallback(() => {\n    return pathname !== paths.login && pathname !== paths.home && allPaths.indexOf(pathname) !== -1\n  }, [pathname])\n\n  const shouldFetchProfileData = useCallback(() => {\n    return !overrideValue.profileData && cookies[sessionCookieName] && onAuthenticatedPage()\n  }, [overrideValue.profileData, cookies, onAuthenticatedPage])\n\n  const logOutAndRedirect = useCallback((path = paths.login, callback = null) => {\n    logOutWithGoogle(() => {\n      removeSessionCookie()\n      callback && callback()\n      onAuthenticatedPage() && setShouldRedirectTo(path)\n    })\n  }, [removeSessionCookie, onAuthenticatedPage, setShouldRedirectTo])\n\n  const value = {\n    token: cookies[sessionCookieName],\n    profileData,\n    removeSessionCookie,\n    setSessionCookie,\n    profileLoadState,\n    setShouldRedirectTo,\n    logOutAndRedirect,\n    flashVisible,\n    flashAttributes,\n    setFlashVisible,\n    setFlashAttributes,\n    setModalVisible,\n    setModalAttributes,\n    modalVisible,\n    modalAttributes,\n    ...overrideValue // enables you to only change certain values\n  }\n\n  const fetchProfileData = () => {\n    if (shouldFetchProfileData()) {\n      fetchUserProfile(cookies[sessionCookieName])\n        .then(({ status, json }) => {\n          if (!mountedRef.current) return\n\n          if (status === 200) {\n            setProfileData(json)\n            if (!overrideValue.profileLoadState) setProfileLoadState(DONE)\n          } else {\n            throw new Error('Internal Server Error: ', json.errors[0])\n          }\n        })\n        .catch(error => {\n          if (process.env.NODE_ENV === 'development') console.error('Error returned while fetching profile data: ', error.message)\n\n          // I feel like this might not be the right behaviour if the error was a 500,\n          // but I also can't think of a case where an error like this would occur and\n          // not be a 401, given the user profile will be created during the authorization\n          // step if it doesn't exist already.\n          logOutAndRedirect()\n        })\n    } else if (isTestEnv && !overrideValue.profileLoadState) {\n      setProfileLoadState(DONE)\n    }\n  }\n\n  useEffect(() => {\n    if (onAuthenticatedPage() && !cookies[sessionCookieName] && mountedRef.current) logOutAndRedirect()\n  }, [onAuthenticatedPage, cookies, logOutAndRedirect])\n\n  useEffect(fetchProfileData, [\n                                onAuthenticatedPage,\n                                logOutAndRedirect,\n                                overrideValue.profileLoadState,\n                                shouldFetchProfileData,\n                                cookies\n                              ])\n\n  useEffect(() => (() => mountedRef.current = false), [])\n\n  return(\n    <AppContext.Provider value={value}>\n      {redirectPath ? <Redirect to={redirectPath} /> : children}\n    </AppContext.Provider>\n  )\n}\n\nAppProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    token: PropTypes.string,\n    profileData: PropTypes.shape({\n      id: PropTypes.number,\n      uid: PropTypes.string,\n      email: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      image_url: PropTypes.string\n    }),\n    setSessionCookie: PropTypes.func,\n    removeSessionCookie: PropTypes.func,\n    setProfileData: PropTypes.func,\n    flashVisible: PropTypes.bool,\n    flashAttributes: PropTypes.shape({\n      type: PropTypes.oneOf(['error', 'info', 'success']).isRequired,\n      message: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n      header: PropTypes.string\n    }),\n    setFlashVisible: PropTypes.func,\n    setFlashAttributes: PropTypes.func,\n    logOutAndRedirect: PropTypes.func,\n    setModalVisible: PropTypes.func,\n    setModalAttributes: PropTypes.func,\n    modalVisible: PropTypes.bool,\n    modalAttributes: PropTypes.shape({\n      Tag: PropTypes.elementType,\n      props: PropTypes.object\n    })\n  })\n}\n\nexport { AppContext, AppProvider }\n","export const LOADING = 'loading'\nexport const DONE = 'done'\nexport const ERROR = 'error'\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { createContext } from 'react'\nimport PropTypes from 'prop-types'\n\n\nconst ColorContext = createContext()\n\nconst ColorProvider = ({ colorScheme, children }) => {\n  return(\n    <ColorContext.Provider value={colorScheme}>\n      {children}\n    </ColorContext.Provider>\n  )\n}\n\nColorProvider.propTypes = {\n  colorScheme: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    schemeColorDark: PropTypes.string.isRequired,\n    schemeColorLight: PropTypes.string.isRequired,\n    schemeColorLightest: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    hoverColorLight: PropTypes.string.isRequired,\n    hoverColorLightest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    textColorSecondary: PropTypes.string,\n    textColorTertiary: PropTypes.string,\n    borderColor: PropTypes.string\n  }).isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport { ColorProvider, ColorContext }\n","import { useLocation } from 'react-router-dom'\n\nconst useQuery = () => new URLSearchParams(useLocation().search)\n\nexport default useQuery\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport {\n  createContext,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  createShoppingList,\n  fetchShoppingLists,\n  updateShoppingList,\n  destroyShoppingList,\n  createShoppingListItem,\n  updateShoppingListItem,\n  destroyShoppingListItem\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext, useGamesContext } from '../hooks/contexts'\nimport useQuery from '../hooks/useQuery'\nimport paths from '../routing/paths'\n\nconst ShoppingListsContext = createContext()\n\nconst ShoppingListsProvider = ({ children, overrideValue = {} }) => {\n  const queryString = useQuery()\n\n  const {\n    token,\n    logOutAndRedirect,\n    setFlashAttributes,\n    setFlashVisible\n  } = useAppContext()\n\n  const { games } = useGamesContext()\n\n  const activeGameId = useMemo(() => {\n    if (games && games.length) {\n      return parseInt(queryString.get('game_id') || games[0].id)\n    } else {\n      return null\n    }\n  }, [games, queryString])\n\n  const [shoppingLists, setShoppingLists] = useState(overrideValue.shoppingLists || [])\n  const [shoppingListLoadingState, setShoppingListLoadingState] = useState(LOADING)\n\n  const shoppingListsOverridden = useRef(false)\n  \n  if (overrideValue.shoppingLists) {\n    // Use this as the initial value only so that the shopping\n    // lists can be updated when we interact in Storybook or other\n    // tests\n    delete overrideValue.shoppingLists\n    shoppingListsOverridden.current = true\n  }\n\n  const mountedRef = useRef(true)\n\n  const addOrUpdateListItem = (list, item) => {\n    const originalItem = list.list_items.find(listItem => listItem.description.toLowerCase() === item.description.toLowerCase())\n    const newListItems = [...list.list_items]\n\n    if (originalItem) {\n      const originalItemPosition = list.list_items.indexOf(originalItem)\n      newListItems.splice(originalItemPosition, 1, item)\n    } else {\n      newListItems.unshift(item)\n    }\n\n    list.list_items = newListItems\n\n    return { ...list }\n  }\n\n  const listFromListItemId = itemId => shoppingLists.find(list => !!list.list_items.find(item => item.id === itemId))\n\n  const removeItemFromList = (list, itemId) => {\n    const newList = { ...list }\n    const newListItems = [...list.list_items]\n\n    const item = list.list_items.find(item => item.id === itemId)\n    const index = list.list_items.indexOf(item)\n\n    newListItems.splice(index, 1)\n    newList.list_items = newListItems\n    \n    return newList\n  }\n\n  const fetchLists = useCallback(() => {\n    if (token && !shoppingListsOverridden.current) {\n      fetchShoppingLists(token, activeGameId)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setShoppingLists(json)\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} while fetching shopping lists: ${json.errors}` : `Unknown error ${status} while fetching shopping lists`\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else if (err.code === 404 && mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"We couldn't find the game you're looking for.\"\n            })\n\n            setFlashVisible(true)\n\n            !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching shopping lists: ', err)\n\n            if (mountedRef.current) {\n              !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(ERROR)\n            }\n          }\n        })\n    } else {\n      mountedRef.current && !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n    }\n  }, [token, overrideValue.shoppingListLoadingState, setFlashAttributes, setFlashVisible, activeGameId, logOutAndRedirect])\n\n  const performShoppingListUpdate = (listId, newTitle, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingList(token, listId, { title: newTitle })\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          const newShoppingLists = shoppingLists.map(list => { if (list.id === listId) { return json } else { return list } })\n          setShoppingLists(newShoppingLists)\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your changes from being saved:`\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} when updating shopping list: ${json.errors}` : `Unknown error ${status} when updating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (process.env.NODE_ENV === 'development') console.error(`Error updating shopping list ${listId}: `, err)\n\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! The shopping list you wanted to update could not be found. Try refreshing the page to fix this issue.\"\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n          \n          onNotFound && onNotFound()\n        } else {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          !overrideValue.shoppingListLoadingState && setShoppingListLoadingState(DONE)\n\n          onInternalServerError && onInternalServerError()\n        }\n      }) \n  }\n\n  const performShoppingListCreate = (title, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onUnprocessableEntity, onInternalServerError } = callbacks\n\n    createShoppingList(token, activeGameId, { title })\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (Array.isArray(json) && json.length === 2) {\n            // It is an array of shopping lists. It includes the shopping list that was\n            // created and an aggregate list that was created automatically. This case only\n            // arises if there were no existing shopping lists, so in this case, we want\n            // to set the shopping lists array to the lists returned.\n            setShoppingLists(json)\n          } else if (json && typeof json === 'object') {\n            // It is the single shopping list that was created. This will happen if there\n            // is already an existing aggregate list.\n            const newShoppingLists = [...shoppingLists]\n            newShoppingLists.splice(1, 0, json)\n            setShoppingLists(newShoppingLists)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your shopping list was created.',\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what\n          throw new Error(json.errors ? `Error ${status} while creating shopping list: ${json.errors}` : `Unknown error ${status} while creating shopping list`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: 'The game you wanted to create a shopping list for could not be found. Try refreshing the page to fix this issue.'\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating shopping list: ', err)\n          \n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListDestroy = (listId, callbacks = {}) => {\n    const { onSuccess, onUnauthorized, onNotFound, onInternalServerError } = callbacks\n\n    destroyShoppingList(token, listId)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 204) {\n          // This means that the list was the game's last shopping list and both\n          // it and the aggregate list have been destroyed.\n          setShoppingLists([])\n          \n          setFlashAttributes({\n            type: 'success',\n            message: 'Since it was the last list for this game, the \"All Items\" list has been deleted as well.',\n            header: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 200) {\n          // This means that the aggregate list has been updated and returned,\n          // to adjust for any items that were deleted with the other list.\n          const newShoppingLists = shoppingLists.filter(list => list.id !== listId)\n                                                .map(list => (list.aggregate === true ? json : list))\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your shopping list has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list: ${json.errors}` : `Unknown error ${status} when deleting shopping list`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error deleting shopping list: ', err.message)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to delete your shopping list. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemCreate = (listId, attrs, callbacks = {}) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createShoppingListItem(token, listId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200 || status === 201) {\n          // Have to create an actual new object or the state change won't cause useEffect\n          // hooks to run.\n          const newLists = [...shoppingLists]\n\n          // The JSON object returned from this endpoint is the array of all items\n          // that have been updated while handling this request. Because changing the\n          // `unit_weight` of a shopping list item can cause items other than the\n          // list item edited and the aggregate list item to be updated, it's not\n          // possible to know for sure how many items the array will contain. It will\n          // be at least two though.\n          for (let i = 0; i < json.length; i++) {\n            const list = shoppingLists.find(list => list.id === json[i].list_id)\n            const listPosition = shoppingLists.indexOf(list)\n            const newList = addOrUpdateListItem(list, json[i])\n\n            newLists[listPosition] = newList\n          }\n\n          setShoppingLists(newLists)\n\n          if (status === 201) {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your shopping list item has been created.'\n            })\n          } else {\n            setFlashAttributes({\n              type: 'success',\n              message: 'Success! Your new shopping list item has been combined with another item with the same description.'\n            })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being created:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} when creating shopping list item: ${json.errors}` : `Unknown error ${status} when creating shopping list item`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list you wanted to add an item to. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error when creating shopping list item: ', err.message)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to create your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemUpdate = (itemId, attrs, callbacks) => {\n    const { onSuccess, onNotFound, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    updateShoppingListItem(token, itemId, attrs)\n      .then(({ status, json }) => {\n        if (!mountedRef.current) return\n\n        if (status === 200) {\n          let newShoppingLists = [...shoppingLists]\n\n          for (let i = 0; i < json.length; i++) {\n            const list = shoppingLists.find(list => list.id === json[i].list_id)\n            const newList = addOrUpdateListItem(list, json[i])\n            const listPosition = shoppingLists.indexOf(list)\n            newShoppingLists[listPosition] = newList\n          }\n\n          setShoppingLists(newShoppingLists)\n\n          setFlashAttributes({ type: 'success', message: 'Success! Your shopping list item was updated.' })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            message: json.errors,\n            header: `${json.errors.length} error(s) prevented your shopping list item from being updated:`\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          const message = json.errors ? `Error ${status} updating item ${itemId}: ${json.errors}` : `Unknown error ${status} updating item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the shopping list item you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error(`Unexpected error editing list item ${itemId}: `, err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const performShoppingListItemDestroy = (itemId, callbacks) => {\n    const { onSuccess, onNotFound, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyShoppingListItem(token, itemId)\n      .then(({ status, json }) => {\n        if (status === 200 || status === 204) {\n          const regularListToRemoveItemFrom = listFromListItemId(itemId)\n          const regularListIndex = shoppingLists.indexOf(regularListToRemoveItemFrom)\n          const newLists = [...shoppingLists]\n          let newAggregateList\n\n          if (status === 200) {\n            // If there is an updated aggregate list item, it will be returned. If\n            // the aggregate list item has been destroyed, the status will be 204.\n            newAggregateList = addOrUpdateListItem(shoppingLists[0], json)\n          } else {\n            const deletedItem = regularListToRemoveItemFrom.list_items.find(item => item.id === itemId)\n            const aggregateListItem = shoppingLists[0].list_items.find(item => item.description.toLowerCase() === deletedItem.description.toLowerCase())\n\n            newAggregateList = removeItemFromList(shoppingLists[0], aggregateListItem.id)\n          }\n\n          const newRegularList = removeItemFromList(regularListToRemoveItemFrom, itemId)\n\n          newLists[0] = newAggregateList\n          newLists.splice(regularListIndex, 1, newRegularList)\n\n          setShoppingLists(newLists)\n\n          onSuccess && onSuccess()\n        } else {\n          const message = json.errors ? `Error ${status} when deleting shopping list item ${itemId}: ${json.errors}` : `Unknown error ${status} when deleting shopping list item ${itemId}`\n          throw new Error(message)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error', \n            message: \"Oops! We couldn't find the shopping list item you wanted to delete. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Unexpected error destroying shopping list item: ', err)\n\n          setFlashAttributes({\n            type: 'error', \n            message: \"Something unexpected happened while trying to delete your shopping list item. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }\n\n  const value = {\n    shoppingLists,\n    shoppingListLoadingState,\n    performShoppingListUpdate,\n    performShoppingListCreate,\n    performShoppingListDestroy,\n    performShoppingListItemCreate,\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    if (activeGameId && mountedRef.current) fetchLists()\n  }, [fetchLists, activeGameId])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ShoppingListsContext.Provider value={value}>\n      {children}\n    </ShoppingListsContext.Provider>\n  )\n}\n\nShoppingListsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    shoppingLists: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      user_id: PropTypes.number,\n      title: PropTypes.string.isRequired,\n      aggregate: PropTypes.bool.isRequired,\n      list_items: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number,\n        list_id: PropTypes.number,\n        description: PropTypes.string.isRequired,\n        quantity: PropTypes.number.isRequired,\n        notes: PropTypes.string\n      })).isRequired\n    })),\n    shoppingListLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performShoppingListUpdate: PropTypes.func,\n    performShoppingListCreate: PropTypes.func,\n    performShoppingListDestroy: PropTypes.func,\n    performShoppingListItemCreate: PropTypes.func,\n    performShoppingListItemUpdate: PropTypes.func,\n    performShoppingListItemDelete: PropTypes.func\n  })\n}\n\nexport { ShoppingListsContext, ShoppingListsProvider }\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n *\n */\n\nimport { useContext } from 'react'\nimport { ColorContext } from '../contexts/colorContext'\nimport { AppContext } from '../contexts/appContext'\nimport { GamesContext } from '../contexts/gamesContext'\nimport { ShoppingListsContext } from '../contexts/shoppingListsContext'\n\nconst useCustomContext = (cxt, msg) => {\n  const context = useContext(cxt)\n\n  if (!context) {\n    throw new Error(msg)\n  }\n\n  return context\n}\n\nexport const useColorScheme = () => (\n  useCustomContext(ColorContext, 'useColorScheme must be used within a ColorProvider')\n)\n\nexport const useAppContext = () => (\n  useCustomContext(AppContext, 'useAppContext must be used within a AppProvider')\n)\n\nexport const useShoppingListsContext = () => (\n  useCustomContext(ShoppingListsContext, 'useShoppingListsContext must be used within a ShoppingListProvider')\n)\n\nexport const useGamesContext = () => (\n  useCustomContext(GamesContext, 'useGamesContext must be used within a GamesProvider')\n)\n","/*\n *\n * For more information about contexts and how they are used in SIM,\n * visit the docs on SIM contexts (/docs/contexts.md)\n * \n * This context makes heavy use of the SIM API. The requests it makes are\n * mediated through the simApi module (/src/utils/simApi.js). To get information\n * about the API, its requirements, and its responses, visit the docs:\n * https://github.com/danascheider/skyrim_inventory_management/tree/main/docs/api\n *\n */\n\nimport { createContext, useState, useEffect, useRef, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  fetchGames,\n  createGame,\n  updateGame,\n  destroyGame\n} from '../utils/simApi'\nimport { LOADING, DONE, ERROR } from '../utils/loadingStates'\nimport { useAppContext } from '../hooks/contexts'\nimport paths from '../routing/paths'\n\nconst GamesContext = createContext()\n\nconst GamesProvider = ({ children, overrideValue = {} }) => {\n  const { token, logOutAndRedirect, setFlashAttributes } = useAppContext()\n\n  const [games, setGames] = useState(overrideValue.games || [])\n  const [gameLoadingState, setGameLoadingState] = useState(overrideValue.gameLoadingState || LOADING)\n\n  const mountedRef = useRef(true)\n  const gamesOverridden = useRef(false)\n\n  if (overrideValue.games) {\n    // Use this as the initial value only so that the games can be\n    // updated when we interact in Storybook or other tests\n    delete overrideValue.games\n    gamesOverridden.current = true\n  }\n\n  const fetchUserGames = useCallback(() => {\n    if (token && !gamesOverridden.current) {\n      fetchGames(token)\n        .then(({ status, json }) => {\n          if (status === 200) {\n            if (mountedRef.current) {\n              setGames(json)\n              !overrideValue.gameLoadingState && setGameLoadingState(DONE)\n            }\n          } else {\n            const message = json.errors ? `Error ${status} when fetching games: ${json.errors}` : 'No game data returned from SIM'\n            throw new Error(message)\n          }\n        })\n        .catch(err => {\n          if (err.code === 401) {\n            logOutAndRedirect(paths.login, () => mountedRef.current = false)\n            // Don't set the loading state because it's redirecting anyway\n          } else {\n            if (process.env.NODE_ENV === 'development') console.error('Unexpected error fetching games: ', err)\n\n            if (mountedRef.current) setGameLoadingState(ERROR)\n          }\n        })\n    }\n  }, [token, overrideValue.gameLoadingState, logOutAndRedirect])\n\n  const performGameCreate = useCallback((attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onUnauthorized, onInternalServerError } = callbacks\n\n    createGame(token, attrs)\n      .then(({ status, json }) => {\n        if (status === 201) {\n          if (mountedRef.current) {\n            const newGames = [...games]\n            newGames.unshift(json)\n            setGames(newGames)\n          }\n\n          setFlashAttributes({\n            type: 'success',\n            message: 'Success! Your game has been created.'\n          })\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          setFlashAttributes({\n            type: 'error',\n            header: `${json.errors.length} error(s) prevented your game from being created:`,\n            message: json.errors\n          })\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          // Something unexpected happened and we don't know what.\n          throw new Error(json.errors ? `Error ${status} when creating game: ${json.errors}` : `Unknown error ${status} when creating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error creating game: ', err)\n\n          mountedRef.current && setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while creating your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashAttributes, logOutAndRedirect])\n\n  const performGameUpdate = useCallback((gameId, attrs, callbacks) => {\n    const { onSuccess, onUnprocessableEntity, onNotFound, onInternalServerError, onUnauthorized } = callbacks\n\n    updateGame(token, gameId, attrs)\n      .then(({ status, json }) => {\n        if (status === 200) {\n          if (mountedRef.current) {\n            const newGames = games.map(game => parseInt(game.id) === parseInt(gameId) ? json : game)\n            setGames(newGames)\n            setFlashAttributes({ type: 'success', message: 'Success! Your game has been updated.' })\n          }\n\n          onSuccess && onSuccess()\n        } else if (status === 422) {\n          if (mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: json.errors,\n              header: `${json.errors.length} error(s) prevented your game from being updated:`\n            })\n          }\n\n          onUnprocessableEntity && onUnprocessableEntity()\n        } else {\n          throw new Error(json.errors ? `Error ${status} while updating game: ${json.errors}` : `Error ${status} while updating game`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else if (err.code === 404) {\n          setFlashAttributes({\n            type: 'error',\n            message: \"Oops! We couldn't find the game you wanted to update. Sorry! Try refreshing the page to solve this problem.\"\n          })\n\n          onNotFound && onNotFound()\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error updating game: ', err)\n\n          setFlashAttributes({\n            type: 'error',\n            message: \"Something unexpected happened while trying to update your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n          })\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, setFlashAttributes, logOutAndRedirect])\n\n  const performGameDestroy = useCallback((gameId, callbacks) => {\n    const { onSuccess, onUnauthorized, onInternalServerError } = callbacks\n\n    destroyGame(token, gameId)\n      .then(resp => {\n        // If the game isn't found we should treat it as if it's been destroyed\n        // and just remove it successfully\n        if ((resp.status === 204 || resp.status === 404) && mountedRef.current) {\n          const destroyedGame = games.find(game => parseInt(game.id) === parseInt(gameId))\n          const gameIndex = games.indexOf(destroyedGame)\n\n          const newGames = [...games]\n          newGames.splice(gameIndex, 1)\n\n          setGames(newGames)\n          setFlashAttributes({\n            type: 'success',\n            message: 'Your game has been deleted.'\n          })\n\n          onSuccess && onSuccess()\n        } else {\n          throw new Error(`Error ${resp.status} while destroying game ${gameId}`)\n        }\n      })\n      .catch(err => {\n        if (err.code === 401) {\n          logOutAndRedirect(paths.login, () => {\n            mountedRef.current = false\n            onUnauthorized && onUnauthorized()\n          })\n        } else {\n          if (process.env.NODE_ENV === 'development') console.error('Error destroying game: ', err)\n\n          if (mountedRef.current) {\n            setFlashAttributes({\n              type: 'error',\n              message: \"Something unexpected happened while trying to delete your game. Unfortunately, we don't know more than that yet. We're working on it!\"\n            })\n          }\n\n          onInternalServerError && onInternalServerError()\n        }\n      })\n  }, [token, games, logOutAndRedirect, setFlashAttributes])\n\n  const value = {\n    games,\n    gameLoadingState,\n    performGameCreate,\n    performGameUpdate,\n    performGameDestroy,\n    ...overrideValue\n  }\n\n  useEffect(() => {\n    mountedRef.current && fetchUserGames()\n  }, [fetchUserGames])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <GamesContext.Provider value={value}>\n      {children}\n    </GamesContext.Provider>\n  )\n}\n\nGamesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  overrideValue: PropTypes.shape({\n    games: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n      user_id: PropTypes.number,\n      name: PropTypes.string.isRequired,\n      description: PropTypes.string\n    })),\n    gameLoadingState: PropTypes.oneOf([LOADING, DONE, ERROR]),\n    performGameCreate: PropTypes.func,\n    performGameUpdate: PropTypes.func,\n    performGameDestroy: PropTypes.func\n  })\n}\n\nexport { GamesContext, GamesProvider }\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport { authorize } from '../../utils/simApi'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport logOutWithGoogle from '../../utils/logOutWithGoogle'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './homePage.module.css'\n\nconst HomePage = () => {\n  const { token, setShouldRedirectTo, removeSessionCookie } = useAppContext()\n\n  const mountedRef = useRef(true)\n\n  const verifyLogin = useCallback(() => {\n    if (token && !isStorybook) {\n      authorize(token)\n        .then(resp => resp.status === 500 ? resp.json() : null)\n        .then(data => {\n          if (data) {\n            throw new Error('Internal Server Error: ', data.errors[0])\n          } else {\n            setShouldRedirectTo(paths.dashboard.main)\n            mountedRef.current = false\n          }\n        })\n        .catch(err => {\n          if (process.env.NODE_ENV === 'development') console.error(err.message)\n\n          logOutWithGoogle(() => removeSessionCookie())\n        })\n    }\n  }, [token, removeSessionCookie, setShouldRedirectTo])\n\n  useEffect(() => {\n    verifyLogin()\n    return () => mountedRef.current = false\n  }, [token, verifyLogin])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>Skyrim Inventory Management</h1>\n        <Link className={styles.login} to={paths.login}>Log in with Google</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React, { useEffect, useState, useRef } from 'react'\nimport GoogleLogin from 'react-google-login'\nimport {\n  googleClientId,\n  frontendBaseUri\n} from '../../utils/config'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './loginPage.module.css'\n\nconst LoginPage = () => {\n  const {\n    token,\n    setSessionCookie,\n    removeSessionCookie,\n    setShouldRedirectTo\n  } = useAppContext()\n\n  const [loginErrorMessage, setLoginErrorMessage] = useState(null)\n  const mountedRef = useRef(true)\n\n  const successCallback = (resp) => {\n    const { tokenId } = resp\n\n    if (tokenId) {\n      setSessionCookie(tokenId)\n      setShouldRedirectTo(paths.dashboard.main)\n      mountedRef.current = false\n    }\n  }\n\n  const failureCallback = (resp) => {\n    if (process.env.NODE_ENV === 'development') console.error('Login failure: ', resp)\n    token && removeSessionCookie()\n    setLoginErrorMessage('Something went wrong! Please try logging in again.')\n  }\n\n  useEffect(() => (\n    () => (mountedRef.current = false)\n  ))\n\n  return(\n    <div className={styles.root}>\n      {loginErrorMessage ?\n      <p className={styles.errorMessage}>{loginErrorMessage}</p> :\n      null}\n      <div className={styles.container}>\n        <GoogleLogin\n          className={styles.button}\n          clientId={googleClientId}\n          buttonText='Log In With Google'\n          onSuccess={successCallback}\n          onFailure={failureCallback}\n          redirectUri={`${frontendBaseUri}${paths.dashboard.main}`}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPage\n","export const YELLOW = {\n  schemeColorDarkest: '#ffbf00',\n  schemeColorDark: '#ffcb32',\n  schemeColorLight: '#ffd866',\n  schemeColorLightest: '#fff2cc',\n  hoverColorDark: '#e5ab00',\n  hoverColorLight: '#ffc519',\n  hoverColorLightest: '#ffebb2',\n  textColorPrimary: '#4c3900',\n  textColorSecondary: '#4c3900',\n  textColorTertiary: '#7f5700',\n  borderColor: '#cc9800',\n}\n\nexport const PINK = {\n  schemeColorDarkest: '#e83f6f',\n  schemeColorDark: '#ec658b',\n  schemeColorLight: '#f18ba8',\n  schemeColorLightest: '#fad8e2',\n  hoverColorDark: '#d03863',\n  hoverColorLight: '#ea527d',\n  hoverColorLightest: '#f5b2c5',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#451221',\n  borderColor: '#b93258',\n}\n\nexport const BLUE = {\n  schemeColorDarkest: '#2274a5',\n  schemeColorDark: '#4e8fb7',\n  schemeColorLight: '#7aabc9',\n  schemeColorLightest: '#d2e3ed',\n  hoverColorDark: '#1e6894',\n  hoverColorLight: '#3881ae',\n  hoverColorLightest: '#bcd5e4',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#0d2e42',\n  borderColor: '#1b5c84'\n}\n\nexport const GREEN = {\n  schemeColorDarkest: '#00a323',\n  schemeColorDark: '#32b54e',\n  schemeColorLight: '#66c77b',\n  schemeColorLightest: '#ccecd3',\n  hoverColorDark: '#00921f',\n  hoverColorLight: '#19ac38',\n  hoverColorLightest: '#b2e3bd',\n  textColorPrimary: '#fff',\n  textColorSecondary: '#fff',\n  textColorTertiary: '#00410e',\n  borderColor: '#00821c'\n}\n\nexport const AQUA = {\n  schemeColorDarkest: '#20e2e9',\n  schemeColorDark: '#62eaef',\n  schemeColorLight: '#8ff0f4',\n  schemeColorLightest: '#d2f9fa',\n  hoverColorDark: '#11cbd1',\n  hoverColorLight: '#4ce7ed',\n  hoverColorLightest: '#bcf6f8',\n  textColorPrimary: '#094345',\n  textColorSecondary: '#094345',\n  textColorTertiary: '#094345',\n  borderColor: '#19b4ba'\n}\n\nconst colorSchemes = [\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n]\n\nexport default colorSchemes\n","export default __webpack_public_path__ + \"static/media/googleIcon.9432a66b.svg\";","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport icon from './googleIcon.svg'\nimport styles from './logoutDropdown.module.css'\n\nconst LogoutDropdown = ({className, logOutFunction}) => {\n  const mountedRef = useRef(true)\n\n  const logOutAndUnmount = e => {\n    e.preventDefault()\n\n    logOutFunction(() => { mountedRef.current = false })\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ))\n\n  return(\n    <div className={className}>\n      <button className={styles.button} onClick={logOutAndUnmount}>\n        <div className={styles.body}>\n          <div className={styles.googleLogout}>\n            <img src={icon} alt='Google logo' />\n            Log Out With Google\n          </div>\n        </div>\n      </button>\n    </div>\n  )\n}\n\nLogoutDropdown.propTypes = {\n  className: PropTypes.string,\n  logOutFunction: PropTypes.func.isRequired\n}\n\nexport default LogoutDropdown\n","export default __webpack_public_path__ + \"static/media/anonymousAvatar.36d1acc1.jpg\";","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport LogoutDropdown from '../logoutDropdown/logoutDropdown'\nimport anonymousAvatar from './anonymousAvatar.jpg'\nimport styles from './dashboardHeader.module.css'\n\nconst DashboardHeader = () => {\n  const {\n    profileData,\n    logOutAndRedirect\n  } = useAppContext()\n\n  const [dropdownVisible, setDropdownVisible] = useState(false)\n  const mountedRef = useRef(true)\n\n  const logOutFunction = useCallback((callback = null) => {\n    setDropdownVisible(false);\n\n    logOutAndRedirect(paths.home, () => {\n      callback && callback()\n      mountedRef.current = false\n    })\n  }, [logOutAndRedirect])\n\n  useEffect(() => {\n    return () => (mountedRef.current = false)\n  }, [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.bar}>\n        <span className={styles.headerContainer}>\n          <h1 className={styles.header}>\n            <Link className={styles.headerLinkLarge} to={paths.dashboard.main}>Skyrim Inventory<br className={styles.bp} /> Management</Link>\n            <Link className={styles.headerLinkSmall} to={paths.dashboard.main}>S. I. M.</Link>\n          </h1>\n        </span>\n        {profileData ?\n        <button className={styles.profile} onClick={() => setDropdownVisible(!dropdownVisible)}>\n          <div className={styles.profileText}>\n            <p className={styles.textTop}>{profileData.name}</p>\n            <p className={styles.textBottom}>{profileData.email}</p>\n          </div>\n          <img className={styles.avatar} src={profileData.image_url || anonymousAvatar} alt='User avatar' referrerPolicy='no-referrer' />\n        </button> :\n        null\n        }\n        <LogoutDropdown\n          className={dropdownVisible ? styles.logoutDropdown : styles.hidden}\n          logOutFunction={logOutFunction}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default DashboardHeader\n","/*\n *\n * This component is intended for use within the GamesDropdown.\n * The GamesDropdown mimics a native `select` element. It is\n * critical that this component's role and ARIA attributes not\n * be changed except to make it more accessible or fix bugs in\n * accessibility. If you need a different role or aria attributes,\n * pass the values in as props or create another component.\n *\n */\n\nimport React from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport styles from './gamesDropdownOption.module.css'\n\nconst GamesDropdownOption = ({\n  name,\n  className,\n  onClick,\n  onKeyDown,\n  ariaSelected\n}) => {\n  return(\n    <li\n      className={classNames(styles.root, className)}\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      role='option'\n      tabIndex={0}\n      aria-selected={ariaSelected}\n    >\n      {name.length > 24 ? `${name.substring(0, 23)}...` : name}\n    </li>\n  )\n}\n\nGamesDropdownOption.propTypes = {\n  name: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  ariaSelected: PropTypes.bool.isRequired\n}\n\nexport default GamesDropdownOption\n","/*\n * It was important to have a styled options list, so a native HTML select\n * dropdown wouldn't do. This component has been made to be as accessible as\n * possible, adhering to the ARIA specification for comboboxes. More information\n * on comboboxes and their expected behaviour can be found in the ARIA docs:\n * https://www.w3.org/TR/wai-aria-practices-1.1/examples/combobox/aria1.1pattern/listbox-combo.html\n *\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react'\nimport classNames from 'classnames'\nimport { useHistory } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport useQuery from '../../hooks/useQuery'\nimport GamesDropdownOption from '../gamesDropdownOption/gamesDropdownOption'\nimport styles from './gamesDropdown.module.css'\n\nconst GamesDropdown = () => {\n  const history = useHistory()\n  const queryString = useQuery()\n\n  const { setFlashVisible } = useAppContext()\n  const { games, gameLoadingState, performGameCreate } = useGamesContext()\n\n  const [activeGame, setActiveGame] = useState(null)\n  const [dropdownExpanded, setDropdownExpanded] = useState(false)\n  const [inputValue, setInputValue] = useState('')\n\n  const componentRef = useRef(null)\n\n  const expandDropdown = () => setDropdownExpanded(true)\n  const collapseDropdown = useCallback(() => setDropdownExpanded(false), [setDropdownExpanded])\n  const toggleDropdown = () => setDropdownExpanded(!dropdownExpanded)\n\n  const colorVars = {\n    '--button-background-color': BLUE.schemeColorDarkest,\n    '--button-hover-color': BLUE.hoverColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor\n  }\n\n  const selectGame = useCallback(game => {\n    setActiveGame(game)\n    setInputValue(game.name)\n    \n    const params = new URLSearchParams(`game_id=${game.id}`)\n    history.push({ search: params.toString() })\n\n    collapseDropdown()\n  }, [history, collapseDropdown])\n\n  const isActiveGame = id => {\n    if (activeGame && !games.length) return false\n\n    return activeGame ? activeGame.id === id : id === games[0].id\n  }\n\n  const updateValue = e => setInputValue(e.currentTarget.value)\n\n  useEffect(() => {\n    const gameId = parseInt(queryString.get('game_id'))\n\n    if (games.length && gameId) {\n      if (activeGame && activeGame.id === gameId) return\n      const game = gameId ? games.find(game => game.id === gameId) : games[0]\n\n      selectGame(game || games[0])\n    } else if (games.length && !activeGame) {\n      selectGame(games[0])\n    }\n  }, [selectGame, activeGame, games, queryString])\n\n  useEffect(() => {\n    const collapseDropdownAndResetValue = e => {\n      if (componentRef.current !== e.relatedTarget && !componentRef.current.contains(e.relatedTarget)) {\n        // Hide the dropdown\n        collapseDropdown()\n\n        // Find out if there is a game whose title exactly matches the\n        // text typed into the input (without regard to case).\n        const game = games.find(g => g.name.toLowerCase() === inputValue.toLowerCase())\n\n        if (game) {\n          // If there is a matching game, it should be selected when the\n          // component is no longer focussed.\n          setActiveGame(game)\n          setInputValue(game.name)\n\n          const params = new URLSearchParams(`game_id=${game.id}`)\n          history.push({ search: params.toString() })\n        } else {\n          // If there is no matching game, the input value should be reset\n          // to the name of the active game.\n          activeGame && setInputValue(activeGame.name)\n        }\n      }\n    }\n\n    document.addEventListener('focusout', collapseDropdownAndResetValue)\n\n    return () => {\n      document.removeEventListener('focusout', collapseDropdownAndResetValue)\n    }\n  }, [games, setActiveGame, activeGame, setInputValue, inputValue, history, collapseDropdown])\n\n  return(\n    <div ref={componentRef} className={styles.root} style={colorVars} data-testid='games-dropdown'>\n      <div\n        className={styles.header}\n        role='combobox'\n        aria-haspopup='listbox'\n        aria-owns='gamesListbox'\n        aria-controls='gamesListbox'\n        aria-expanded={dropdownExpanded}\n      >\n        <input\n          className={classNames(styles.input, 'focusable')}\n          type='text'\n          disabled={gameLoadingState !== 'done' /* if 'loading' or 'error' it should be disabled*/}\n          value={inputValue}\n          onChange={updateValue}\n          placeholder='No games available'\n          aria-autocomplete='list'\n          aria-multiline={false}\n          aria-controls='gamesListbox'\n          onFocus={expandDropdown}\n          onClick={expandDropdown}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              const game = games.find(g => g.name.toLowerCase() === e.target.value.toLowerCase())\n\n              if (game) {\n                selectGame(game)\n              } else {\n                const callbacks = {\n                  // Although `games` has just been set in the API response handler,\n                  // there is no guarantee that it will be updated yet by the time the\n                  // callback runs. So instead of `selectGame`, here we just clear the\n                  // query string and set the active game to `null`. The `useEffect`\n                  // hook will run when the `games` array is updated and will set the\n                  // query string and the active game to the newly created game.\n                  onSuccess: () => {\n                    history.push({ search: '' })\n                    setActiveGame(null)\n                    e.target.blur()\n                  },\n                  onUnprocessableEntity: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  },\n                  onInternalServerError: () => {\n                    setFlashVisible(true)\n                    e.target.blur()\n                  }\n                }\n\n                performGameCreate({ name: inputValue }, callbacks)\n              }\n            } else if (e.key === 'ArrowUp') {\n              e.preventDefault()\n              const focusables = document.getElementsByClassName('focusable')\n              focusables[focusables.length - 1].focus()\n            } else if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            } else if (e.key === 'Escape') {\n              collapseDropdown()\n            }\n          }}\n        />\n        <button\n          className={styles.trigger}\n          onClick={toggleDropdown}\n          onKeyDown={e => {\n            if (e.key === 'ArrowDown') {\n              e.preventDefault()\n              document.getElementsByClassName('focusable')[1].focus()\n            }\n          }}\n          disabled={gameLoadingState !== 'done'}\n          data-testid='games-dropdown-trigger'\n        >\n          <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n        </button>\n      </div>\n      <ul\n        id='gamesListbox'\n        className={classNames(styles.dropdown, { [styles.hidden]: !dropdownExpanded || !games.length })}\n        role='listbox'\n      >\n        {games.map(({ id, name }, index) => {\n          return(\n            <GamesDropdownOption\n              className='focusable'\n              onClick={() => selectGame({ id, name })}\n              onKeyDown={e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  selectGame({ id, name })\n                } else if (e.key === 'ArrowUp') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  focusables[index - 1].focus()\n                } else if (e.key === 'ArrowDown') {\n                  e.preventDefault()\n                  const focusables = [...document.getElementsByClassName('focusable')]\n                  const index = focusables.indexOf(e.target)\n                  const nextIndex = index < focusables.length - 1 ? index + 1 : 0\n                  focusables[nextIndex].focus()\n                }\n              }}\n              key={`${name.toLowerCase().replace(' ', '_')}-${id}`}\n              ariaSelected={isActiveGame(id)}\n              name={name}\n            />\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default GamesDropdown\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardHeader from '../components/dashboardHeader/dashboardHeader'\nimport GamesDropdown from '../components/gamesDropdown/gamesDropdown'\nimport styles from './dashboardLayout.module.css'\n\nconst DashboardLayout = ({ title, includeGameSelect = false, children }) => {\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        {title ?\n        <div className={styles.headerContainer}>\n          <div className={styles.titleContainer}>\n            <h2 className={styles.title}>{title}</h2>\n            {includeGameSelect && <GamesDropdown />}\n          </div>\n          <hr className={styles.hr} />\n        </div> :\n        null}\n        {children}\n      </div>\n      <DashboardHeader />\n    </div>\n  )\n}\n\nDashboardLayout.propTypes = {\n  title: PropTypes.string,\n  includeGameSelect: PropTypes.bool,\n  children: PropTypes.node.isRequired\n}\n\nexport default DashboardLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactLoading from 'react-loading'\n\nconst possibleTypes = [\n  'blank',\n  'balls',\n  'bars',\n  'bubbles',\n  'cubes',\n  'cylon',\n  'spin',\n  'spinningBubbles',\n  'spokes'\n]\n\nconst Loading = ({ className, type = 'bubbles', color, height, width }) => (\n  <ReactLoading className={className} type={type} color={color} height={height} width={width} />\n)\n\nLoading.propTypes = {\n  className: PropTypes.string,\n  type: PropTypes.oneOf(possibleTypes),\n  color: PropTypes.string.isRequired,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n}\n\nexport default Loading\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { useColorScheme } from '../../hooks/contexts'\nimport styles from './navigationCard.module.css'\n\nconst NavigationCard = ({ href, children }) => {\n  const { schemeColorDarkest, hoverColorDark, textColorPrimary} = useColorScheme()\n\n  const styleVars = {\n    '--background-color': schemeColorDarkest,\n    '--hover-color': hoverColorDark,\n    '--text-color': textColorPrimary\n  }\n\n  return(\n    <Link className={styles.root} to={href} style={styleVars}>\n      {children}\n    </Link>\n  )\n}\n\nNavigationCard.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport default NavigationCard\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport NavigationCard from '../navigationCard/navigationCard'\nimport styles from './navigationMosaic.module.css'\n\nconst NavigationMosaic = ({ cardArray }) => (\n  <div className={styles.root}>\n    {cardArray.map(({ colorScheme, href, children, key }) => (\n      <div key={key} className={styles.card}>\n        <ColorProvider colorScheme={colorScheme}>\n          <NavigationCard \n            href={href}\n            children={children}\n          />\n        </ColorProvider>\n      </div>\n    ))}\n  </div>\n)\n\nNavigationMosaic.propTypes = {\n  cardArray: PropTypes.arrayOf(\n    PropTypes.shape({\n      href: PropTypes.string.isRequired,\n      children: PropTypes.node.isRequired,\n      key: PropTypes.string.isRequired,\n      colorScheme: PropTypes.shape({\n        schemeColorDarkest: PropTypes.string.isRequired,\n        schemeColorDark: PropTypes.string.isRequired,\n        schemeColorLight: PropTypes.string.isRequired,\n        schemeColorLightest: PropTypes.string.isRequired,\n        hoverColorDark: PropTypes.string.isRequired,\n        hoverColorLight: PropTypes.string.isRequired,\n        hoverColorLightest: PropTypes.string.isRequired,\n        textColorPrimary: PropTypes.string.isRequired,\n        textColorSecondary: PropTypes.string,\n        textColorTertiary: PropTypes.string,\n        borderColor: PropTypes.string\n      }).isRequired\n    })\n  ).isRequired\n}\n\nexport default NavigationMosaic\n","import React, { useRef, useEffect } from 'react'\nimport {\n  YELLOW,\n  PINK,\n  BLUE,\n  GREEN,\n  AQUA\n} from '../../utils/colorSchemes'\nimport { isStorybook } from '../../utils/isTestEnv'\nimport paths from '../../routing/paths'\nimport { useAppContext } from '../../hooks/contexts'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport Loading from '../../components/loading/loading'\nimport NavigationMosaic from '../../components/navigationMosaic/navigationMosaic'\nimport styles from './dashboardPage.module.css'\n\nconst cards = [\n  {\n    colorScheme: YELLOW,\n    href: paths.dashboard.games,\n    children: 'Your Games',\n    key: 'your-games'\n  },\n  {\n    colorScheme: PINK,\n    href: paths.dashboard.shoppingLists,\n    children: 'Your Shopping Lists',\n    key: 'your-shopping-lists'\n  },\n  {\n    colorScheme: BLUE,\n    href: paths.dashboard.inventory,\n    children: 'Your Inventory',\n    key: 'your-inventory'\n  },\n  {\n    colorScheme: GREEN,\n    href: '#',\n    children: 'Nav Link 4',\n    key: 'nav-link-4'\n  },\n  {\n    colorScheme: AQUA,\n    href: '#',\n    children: 'Nav Link 5',\n    key: 'nav-link-5'\n  }\n]\n\nconst DashboardPage = () => {\n  const { token, profileLoadState, setShouldRedirectTo } = useAppContext()\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    if (!token && !isStorybook) {\n      setShouldRedirectTo(paths.login)\n      mountedRef.current = false\n    }\n\n    return () => mountedRef.current = false\n  }, [token, setShouldRedirectTo])\n  \n  return(\n    <DashboardLayout>\n      {profileLoadState === 'done' ? <div className={styles.root}>\n        <NavigationMosaic cardArray={cards} />\n      </div> :\n      <Loading className={styles.loading} type='bubbles' color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n    </DashboardLayout>\n  )\n}\n\nexport default DashboardPage\n","import React, { useEffect } from 'react'\nimport classNames from 'classnames'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './flashMessage.module.css'\n\nconst SUCCESS = 'success'\nconst INFO = 'info'\nconst ERROR = 'error'\nconst WARNING = 'warning'\n\nconst colors = {\n  [SUCCESS]: '#329932',\n  [INFO]: '#4e6d8e',\n  [ERROR]: '#cc0000',\n  [WARNING]: '#b0a723'\n}\n\nconst FlashMessage = () => {\n  const { flashVisible, setFlashVisible, flashAttributes } = useAppContext()\n\n  const { type, header, message } = flashAttributes\n\n  const colorVars = { '--text-color': colors[type] }\n\n  useEffect(() => {\n    if (flashVisible) {\n      setTimeout(() => {\n        setFlashVisible(false)\n      }, 4000)\n    }\n  }, [flashVisible, setFlashVisible])\n\n  return(\n    <div className={classNames(styles.root, { [styles.hidden]: !flashVisible })} style={colorVars}>\n      {header && <p className={styles.header}>{header}</p>}\n      {typeof message === 'string' ? message :\n      <ul className={styles.messageList}>\n        {message.map((msg, index) => <li key={`message-${index}`} className={styles.msg}>{msg}</li>)}\n      </ul>}\n    </div>\n  )\n}\n\nexport default FlashMessage\n","import React, { useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext } from '../../hooks/contexts'\nimport styles from './modal.module.css'\n\nconst Modal = ({ children, title, subtitle }) => {\n  const { setModalVisible } = useAppContext()\n\n  const contentRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const contentRefContains = useCallback(el => (\n    contentRef.current && (contentRef.current === el || contentRef.current.contains(el))\n  ), [])\n\n  const hide = useCallback(e => {\n    if ((e.type === 'click' && !contentRefContains(e.target)) || (e.type === 'keydown' && e.key === 'Escape')) {\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n  }, [contentRefContains, setModalVisible])\n\n  useEffect(() => {\n    window.addEventListener('keydown', hide)\n\n    return () => window.removeEventListener('keydown', hide)\n  }, [hide])\n\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].classList.add('modal-open')\n\n    return () => {\n      document.getElementsByTagName('body')[0].classList.remove('modal-open')\n      mountedRef.current = false\n    }\n  }, [])\n\n  return(\n    <div role='dialog' className={styles.root} onClick={hide}>\n      <div ref={contentRef} className={styles.content}>\n        <h3 className={styles.title}>{title}</h3>\n        {subtitle && <p className={styles.subtitle}>{subtitle}</p>}\n        {children}\n      </div>\n    </div>\n  )\n}\n\nModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired,\n  subtitle: PropTypes.string\n}\n\nexport default Modal\n","import React from 'react'\nimport Modal from '../components/modal/modal'\n\nconst withModal = WrappedComponent => {\n  return ({ title, subtitle = null, ...childProps }) => (\n    <Modal title={title} subtitle={subtitle}>\n      <WrappedComponent {...childProps} />\n    </Modal>\n  )\n}\n\nexport default withModal\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport colorSchemes from '../../utils/colorSchemes'\nimport styles from './modalForm.module.css'\n\nconst ModalForm = ({\n  modelName,\n  buttonLabel,\n  onSubmit,\n  fields,\n  buttonColor = null,\n}) => {\n  const mountedRef = useRef(true)\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n\n  // If the button color isn't specified in the props, pick\n  // a random color\n  const colorRef = useRef(buttonColor || colorSchemes[Math.floor(Math.random() * colorSchemes.length)])\n\n  const colorVars = {\n    '--button-background-color': colorRef.current.schemeColorDarkest,\n    '--button-text-color': colorRef.current.textColorPrimary,\n    '--button-hover-color': colorRef.current.hoverColorDark,\n    '--button-border-color': colorRef.current.borderColor\n  }\n\n  useEffect(() => {\n    inputRef.current && inputRef.current.focus()\n\n    return () => mountedRef.current = false\n  }, [])\n\n  return(\n    <form\n      ref={formRef}\n      className={styles.root}\n      style={colorVars}\n      onSubmit={onSubmit}\n      data-testid={`${modelName}-form`}\n    >\n      {fields.map(({ tag: Tag, label, name, ...inputProps }, index) => {\n        if (index === 0) inputProps['ref'] = inputRef\n\n        return(\n          <fieldset key={`${modelName}-${name}`} className={styles.fieldset}>\n            <label className={styles.label} htmlFor={name}>{label}</label>\n            <Tag\n              className={styles.input}\n              name={name}\n              {...inputProps}\n            />\n          </fieldset>\n        )\n      })}\n      <button className={styles.submit} type='submit'>{buttonLabel}</button>\n    </form>\n  )\n}\n\nModalForm.propTypes = {\n  // Should be a lower-cased string without whitespace. Used to set\n  // the test ID of the form to something more specific.\n  modelName: PropTypes.string.isRequired,\n  // The text that should appear on the form's button\n  buttonLabel: PropTypes.string.isRequired,\n  // Submit handler for the form\n  onSubmit: PropTypes.func.isRequired,\n  // The color of the form's button, taken from /src/utils/colorSchemes.js.\n  // Those color schemes automatically include these keys.\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }),\n  // A description of the form fields\n  fields: PropTypes.arrayOf(PropTypes.shape({\n    // It is recommended that the name of the form field be the same as the\n    // name of the attribute it sets (all lower case)\n    name: PropTypes.string.isRequired,\n    // This form supports inputs and textareas. It's possible that in the\n    // future it could be modified to support other form controls as well.\n    tag: PropTypes.oneOf(['input', 'textarea']).isRequired,\n    // The text of the label. Generally the name, titlecased.\n    label: PropTypes.string.isRequired,\n    // The type of the form control.\n    type: PropTypes.oneOf(['text', 'number', 'textarea']).isRequired,\n    // The placeholder value is required in case a value is `null`\n    placeholder: PropTypes.string.isRequired,\n    // Optional inputMode determines what keypad mobile users see. More\n    // options could be added to this list but we didn't need them yet\n    // so I just put these ones.\n    inputMode: PropTypes.oneOf(['numeric', 'text']),\n    // The starting `value` of the field, generally the current value of\n    // the attribute, if there is one.\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  })).isRequired\n}\n\nexport default ModalForm\n","import React, { useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport { pathsScopedToGames } from '../../routing/paths'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'name',\n    tag: 'input',\n    label: 'Name',\n    type: 'text',\n    placeholder: 'Name',\n    inputMode: 'text',\n    pattern: \"^\\\\s*[A-Za-z0-9 \\\\-',]*\\\\s*$\",\n    title: 'Name can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n  },\n  {\n    name: 'description',\n    tag: 'input',\n    label: 'Description',\n    type: 'text',\n    placeholder: 'Description',\n    inputMode: 'text'\n  }\n]\n\nconst ModalGameForm = ({ type, currentAttributes = {} }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performGameCreate, performGameUpdate } = useGamesContext()\n\n  const history = useHistory()\n\n  const mountedRef = useRef(true)\n\n  const onSubmit = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const unmountAndDisplayFlash = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onUnprocessableEntity: unmountAndDisplayFlash,\n      onInternalServerError: unmountAndDisplayFlash,\n      onNotFound: unmountAndDisplayFlash, // only valid for update but won't break anything\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    for (const attr in attrs) {\n      if (attrs[attr] === currentAttributes[attr]) delete attrs[attr]\n    }\n\n    if (type === 'create') {\n      const onSuccess = () => {\n        // If the user is on a page where there is a games dropdown,\n        // they should see a flash message when a game is created since\n        // they won't see the game added to a list.\n        if (pathsScopedToGames.indexOf(history.location.pathname) > -1) {\n          unmountAndDisplayFlash()\n        } else {\n          setModalVisible(false)\n          mountedRef.current = false\n        }\n      }\n\n      callbacks.onSuccess = onSuccess\n\n      performGameCreate(attrs, callbacks)\n    } else {\n      callbacks.onSuccess = unmountAndDisplayFlash\n\n      performGameUpdate(currentAttributes.id, attrs, callbacks)\n    }\n  }\n\n  const fields = formFields.map(field => (\n    currentAttributes[field.name] ? { defaultValue: currentAttributes[field.name], ...field } : field\n  ))\n  \n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='game'\n      buttonLabel={type === 'create' ? 'Create Game' : 'Update Game'}\n      onSubmit={onSubmit}\n      fields={fields}\n    />\n  )  \n}\n\nModalGameForm.propTypes = {\n  type: PropTypes.oneOf(['create', 'edit']).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    description: PropTypes.string\n  })\n}\n\nexport default ModalGameForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport SlideToggle from 'react-slide-toggle'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport withModal from '../../hocs/withModal'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './game.module.css'\n\nconst DEFAULT_DESCRIPTION = 'This game has no description.'\nconst DESTROY_CONFIRMATION = 'Are you sure you want to delete this game? This cannot be undone. You will lose all data associated with the game you delete.'\n\nconst Game = ({ gameId, name, description }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const {\n    setFlashAttributes,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n  const { performGameDestroy } = useGamesContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const destroyRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n\n  const toggleDescription = e => {\n    if (!e || !refContains(iconsRef, e.target)) setToggleEvent(Date.now)\n  }\n\n  const showEditForm = () => {\n    setFlashVisible(false)\n\n    const attributes = { id: gameId, name, description }\n\n    const ModalComponent = withModal(ModalGameForm)\n    setModalAttributes({\n      Tag: ModalComponent,\n      props: {\n        title: 'Edit Game',\n        type: 'edit',\n        currentAttributes: attributes\n      }\n    })\n    setModalVisible(true)\n  }\n\n  const destroyGame = e => {\n    setFlashVisible(false)\n\n    const confirmed = window.confirm(DESTROY_CONFIRMATION)\n\n    const displayFlashAndUnmount = () => {\n      setFlashVisible(true)\n      mountedRef.current = false\n    }\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: displayFlashAndUnmount,\n        onInternalServerError: () => mountedRef.current && setFlashVisible(true)\n      }\n\n      performGameDestroy(gameId, callbacks)\n    } else {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your game was not deleted.'\n      })\n      \n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.header} onClick={toggleDescription}>\n        <span ref={iconsRef} className={styles.editIcons}>\n          <button\n            ref={destroyRef}\n            className={styles.icon}\n            onClick={destroyGame}\n            data-testid={`game-destroy-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n          </button>\n          <button\n            ref={editRef}\n            className={styles.icon}\n            onClick={showEditForm}\n            data-testid={`game-edit-icon`}\n          >\n            <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n          </button>\n        </span>\n        <h3 className={styles.name}>{name}</h3>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.description}>{description || DEFAULT_DESCRIPTION}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGame.propTypes = {\n  gameId: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string\n}\n\nexport default Game\n","import React, { useEffect, useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport styles from './gameCreateForm.module.css'\n\nconst GameCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n  const { performGameCreate } = useGamesContext()\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n\n  const formRef = useRef(null)\n  const inputRef = useRef(null)\n  const mountedRef = useRef(true)\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const toggleForm = () => mountedRef.current && setToggleEvent(Date.now)\n\n  const createGame = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const attrs = {\n      name: e.target.elements.name.value,\n      description: e.target.elements.description.value\n    }\n\n    const onSuccessOrFatalError = () => {\n      setFlashVisible(true)\n      formRef.current && formRef.current.reset()\n      toggleForm()\n    }\n\n    const callbacks = {\n      onSuccess: onSuccessOrFatalError,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: onSuccessOrFatalError,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    performGameCreate(attrs, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <h3 className={styles.slideToggleTrigger} onClick={toggleForm}>Create Game...</h3>\n      <SlideToggle toggleEvent={toggleEvent} onExpanded={() => inputRef.current.focus()} collapsed>\n        {({ setCollapsibleElement }) => (\n          /* Include this div so we can set the form ref to something else */\n          <div ref={setCollapsibleElement}>\n            {/* Unfortunately, setting data-testid seems the only way to test this since fireEvent.click on the button doesn't work */}\n            <form ref={formRef} className={styles.form} data-testid='game-create-form' onSubmit={createGame}>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  ref={inputRef}\n                  className={styles.input}\n                  type='text'\n                  name='name'\n                  placeholder='Name'\n                  aria-label='Name'\n                  pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n                  title=\"Name can contain only alphanumeric characters, spaces, commas, hyphens, and apostrophes\"\n                />\n              </fieldset>\n              <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n                <input\n                  className={styles.input}\n                  type='text'\n                  name='description'\n                  placeholder='Description'\n                  aria-label='Description'\n                />\n              </fieldset>\n              <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit' disabled={disabled}>\n                Create\n              </button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nGameCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default GameCreateForm\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './loadingError.module.css'\n\nconst LoadingError = ({ modelName }) => (\n  <div className={styles.root}>\n    <p className={styles.text}>\n      There was an error loading your {modelName}. It may have been on our end. We're sorry!\n    </p>\n  </div>\n)\n\nLoadingError.propTypes = {\n  modelName: PropTypes.oneOf(['games', 'shopping lists'])\n}\n\nexport default LoadingError\n","import React from 'react'\nimport { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext } from '../../hooks/contexts'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport Game from '../../components/game/game'\nimport GameCreateForm from '../../components/gameCreateForm/gameCreateForm'\nimport Loading from '../../components/loading/loading'\nimport LoadingError from '../../components/loadingError/loadingError'\nimport styles from './gamesPage.module.css'\n\nconst GamesPage = () => {\n  const { modalVisible, modalAttributes } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n\n  return(\n    <DashboardLayout title='Your Games'>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <div className={styles.root}>\n        <FlashMessage />\n        {games && games.length === 0 && gameLoadingState === DONE && <p className={styles.noGames}>You have no games.</p>}\n        {gameLoadingState === DONE && <GameCreateForm disabled={gameLoadingState === LOADING || gameLoadingState === ERROR} />}\n        {games && games.length > 0 && gameLoadingState === DONE && <div className={styles.games}>\n          {games.map(({ id, name, description }) => <Game key={name} gameId={id} name={name} description={description} />)}\n        </div>}\n        {gameLoadingState === LOADING && <Loading type='bubbles' className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />}\n        {gameLoadingState === ERROR && <LoadingError modelName='games' />}\n      </div>\n    </DashboardLayout>\n  )\n}\n\nexport default GamesPage\n","import React from 'react'\nimport DashboardLayout from '../../layouts/dashboardLayout'\n\nconst InventoryPage = () => (\n  <DashboardLayout title='Your Inventory'>\n    <p>No content yet</p>\n  </DashboardLayout>\n)\n\nexport default InventoryPage\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { BLUE } from '../../utils/colorSchemes'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListCreateForm.module.css'\n\nconst ShoppingListCreateForm = ({ disabled }) => {\n  const { setFlashVisible } = useAppContext()\n\n  const { performShoppingListCreate } = useShoppingListsContext()\n\n  const [inputValue, setInputValue] = useState('')\n\n  const colorVars = {\n    '--button-color': BLUE.schemeColorDark,\n    '--button-text-color': BLUE.textColorPrimary,\n    '--button-border-color': BLUE.borderColor,\n    '--button-hover-color': BLUE.hoverColorLight,\n  }\n\n  const updateValue = e => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n  }\n\n  const createShoppingList = e => {\n    e.preventDefault()\n    setFlashVisible(false)\n    const title = e.target.elements.title.value\n\n    const showFlashAndClearInput = () => {\n      setInputValue('')\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: showFlashAndClearInput,\n      onNotFound: showFlashAndClearInput,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: showFlashAndClearInput\n    }\n    performShoppingListCreate(title, callbacks)\n  }\n\n  return(\n    <div className={styles.root} style={colorVars}>\n      <form data-testid='shopping-list-create-form' onSubmit={createShoppingList}>\n        <fieldset className={classNames(styles.fieldset, { [styles.fieldsetDisabled]: disabled })} disabled={disabled}>\n          <input\n            className={styles.input}\n            type='text'\n            name='title'\n            placeholder='Title'\n            aria-label='Title'\n            value={inputValue}\n            onChange={updateValue}\n            pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n            title='Title can only contain alphanumeric characters, spaces, commas, hyphens, and apostrophes'\n          />\n          <button className={classNames(styles.button, { [styles.buttonDisabled]: disabled })} type='submit'>Create</button>\n        </fieldset>\n      </form>\n    </div>\n  )\n}\n\nShoppingListCreateForm.propTypes = {\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default ShoppingListCreateForm\n","/*\n *\n * This duplicates the logic in the back end's Titlecase lib module. This module\n * attempts to accurately title-case titles instead of just making every word\n * capitalised.\n *\n * There is a comment in the file where this module is defined on the backend\n * detailing the challenges of accurate title casing. Primarily, these challenges\n * arise from two factors: (1) inconsistency of style guides and (2) the fact that\n * most style guides consider part of speech in determining whether a word should\n * be capitalised. This can be problematic with words like \"like\", which  can be\n * a preposition, adjective, adverb, or conjunction, depending on usage. In general,\n * prepositions, conjunctions, and short (< 5-character) adverbs should be all\n * lower case.\n *\n * This code does not attempt to guess part of speech or do any other tricks to\n * determine which words should be capitalised. It capitalises the first and last\n * word of the string (standard in almost all style guides) and any words in the\n * middle, other than the designated LOWERCASE_WORDS, which are only capitalised\n * if they are the first or last word in the string.\n *\n */\n\nconst LOWERCASE_WORDS = [\n  'a',\n  'an',\n  'the',\n  'and',\n  'but',\n  'for',\n  'at',\n  'by',\n  'from',\n  'with',\n  'to',\n  'in',\n  'of',\n  'into',\n  'onto',\n  'on',\n  'without',\n  'within'\n]\n\nconst capitalize = word => {\n  const letter = word[0].toUpperCase()\n  return `${letter}${word.slice(1)}`\n}\n\nconst titlecase = text => {\n  const words = text.toLowerCase().split(' ')\n\n  return words.map((word, index) => (\n    LOWERCASE_WORDS.indexOf(word) > -1 && [1, words.length].indexOf(index) === -1 ? word : capitalize(word)\n  )).join(' ')\n}\n\nexport default titlecase\n","import { useState, useRef, useEffect } from 'react'\n\nconst useComponentVisible = () => {\n  const [isComponentVisible, setIsComponentVisible] = useState(false)\n  const componentRef = useRef(null)\n  const triggerRef = useRef(null)\n\n  const componentRefContains = element => componentRef.current && componentRef.current.contains(element)\n  const triggerRefContains = element => triggerRef.current && triggerRef.current.contains(element)\n\n  const handleHideDiv = e => {\n    if (e.key === 'Escape') {\n      setIsComponentVisible(false)\n    }\n  }\n\n  const handleClickOutside = e => {\n    if (!componentRefContains(e.target) && !triggerRefContains(e.target)) {\n      setIsComponentVisible(false)\n    } else if (triggerRefContains(e.target)) {\n      setIsComponentVisible(!isComponentVisible)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleHideDiv, true)\n    document.addEventListener('click', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('keydown', handleHideDiv, true)\n      document.removeEventListener('click', handleClickOutside, true)\n    }\n  })\n\n  return { componentRef, triggerRef, isComponentVisible, setIsComponentVisible }\n}\n\nexport default useComponentVisible\n","import { useState, useLayoutEffect } from 'react'\nimport useResizeObserver from '@react-hook/resize-observer'\n\nconst useSize = target => {\n  const [size, setSize] = useState()\n\n  useLayoutEffect(() => {\n    setSize(target.current.getBoundingClientRect())\n  }, [target])\n\n  useResizeObserver(target, (entry) => setSize(entry.contentRect))\n\n  return size\n}\n\nexport default useSize\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { useColorScheme } from '../../hooks/contexts'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons'\nimport styles from './shoppingListEditForm.module.css'\n\nconst ShoppingListEditForm = ({ formRef, maxTotalWidth, className, title, onSubmit }) => {\n  const getInputTextWidth = (text) => {\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n\n    context.font = '21px Quattrocento Sans'\n\n    const max = (maxTextWidth || maxTotalWidth)\n    \n    // The 1.1 proved necessary to prevent text from scrolling out of the\n    // view prematurely in Safari\n    const textWidth = context.measureText(text).width * 1.1\n\n    return Math.min(textWidth, max)\n  }\n\n  const [inputValue, setInputValue] = useState(title)\n  const [maxTextWidth, setMaxTextWidth] = useState(null)\n  const [inputWidth, setInputWidth] = useState(`${getInputTextWidth(title)}px`)\n\n  const inputRef = useRef(null)\n  const buttonRef = useRef(null)\n\n  const { schemeColorDarkest, textColorPrimary, borderColor, schemeColorLightest } = useColorScheme()\n\n  const colorVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--text-color': textColorPrimary,\n    '--border-color': borderColor,\n    '--icon-hover-color': schemeColorLightest\n  }\n\n  const updateInputWidth = (e) => {\n    const newValue = e.currentTarget.value\n    setInputValue(newValue)\n    setInputWidth(`${getInputTextWidth(newValue)}px`)\n  }\n\n  useEffect(() => {\n    inputRef.current.focus()\n  })\n\n  useEffect(() => {\n    if (!buttonRef.current) return setMaxTextWidth(maxTotalWidth)\n\n    setMaxTextWidth(maxTotalWidth - buttonRef.current.offsetWidth)\n  }, [maxTotalWidth])\n\n  return(\n    <form className={classnames(className, styles.root)} style={colorVars} ref={formRef} onSubmit={onSubmit}>\n      <input\n        className={styles.input}\n        onClick={e => e.stopPropagation()}\n        onChange={updateInputWidth}\n        type='text'\n        name='title'\n        aria-label='Title'\n        ref={inputRef}\n        style={{width: inputWidth}}\n        value={inputValue}\n        pattern=\"^\\s*[A-Za-z0-9 \\-',]*\\s*$\"\n        title='Title can only contain alphanumeric characters, spaces, hyphens, commas, and apostrophes'\n      />\n      <button className={styles.submit} ref={buttonRef} name='submit' type='submit'>\n        <FontAwesomeIcon className={styles.fa} icon={faCheckSquare} />\n      </button>\n    </form>\n  )\n}\n\nShoppingListEditForm.propTypes = {\n  formRef: PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  }),\n  maxTotalWidth: PropTypes.number,\n  className: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired\n}\n\nexport default ShoppingListEditForm\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport ModalForm from '../modalForm/modalForm'\n\nconst formFields = [\n  {\n    name: 'quantity',\n    tag: 'input',\n    label: 'Quantity',\n    type: 'number',\n    placeholder: 'Quantity',\n    inputMode: 'numeric',\n    min: 1,\n    required: true\n  },\n  {\n    name: 'notes',\n    tag: 'textarea',\n    label: 'Notes',\n    type: 'textarea',\n    placeholder: 'This item has no notes',\n    inputMode: 'text'\n  }\n]\n\nconst ShoppingListItemEditForm = ({ buttonColor, currentAttributes }) => {\n  const { setFlashVisible, setModalVisible } = useAppContext()\n  const { performShoppingListItemUpdate } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n\n  const fields = formFields.map(field => ({ defaultValue: currentAttributes[field.name], ...field }))\n\n  const updateItem = e => {\n    e.preventDefault()\n\n    const callback = () => {\n      setFlashVisible(true)\n      setModalVisible(false)\n      mountedRef.current = false\n    }\n\n    const callbacks = {\n      onSuccess: callback,\n      onNotFound: callback,\n      onUnprocessableEntity: callback,\n      onInternalServerError: callback,\n      onUnauthorized: () => mountedRef.current = false\n    }\n\n    const quantity = e.target.elements.quantity.value\n    const notes = e.target.elements.notes.value\n\n    performShoppingListItemUpdate(currentAttributes.id, { quantity, notes }, callbacks)\n  }\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <ModalForm\n      modelName='shopping-list-item'\n      buttonLabel='Update Item'\n      buttonColor={buttonColor}\n      onSubmit={updateItem}\n      fields={fields}\n    />\n  )\n}\n\nShoppingListItemEditForm.propTypes = {\n  buttonColor: PropTypes.shape({\n    schemeColorDarkest: PropTypes.string.isRequired,\n    textColorPrimary: PropTypes.string.isRequired,\n    hoverColorDark: PropTypes.string.isRequired,\n    borderColor: PropTypes.string.isRequired\n  }).isRequired,\n  currentAttributes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    description: PropTypes.string.isRequired,\n    quantity: PropTypes.number.isRequired,\n    notes: PropTypes.string\n  }).isRequired\n}\n\nexport default ShoppingListItemEditForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faAngleUp, faAngleDown, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport ShoppingListItemEditForm from '../shoppingListItemEditForm/shoppingListItemEditForm'\nimport SlideToggle from 'react-slide-toggle'\nimport styles from './shoppingListItem.module.css'\n\nconst ShoppingListItem = ({\n  itemId,\n  listTitle,\n  canEdit,\n  description,\n  quantity,\n  notes\n}) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n\n  // This enables us to set the quantity to the new quantity during the time between when\n  // the user increments/decrements the quantity and the time the API responds.\n  const [currentQuantity, setCurrentQuantity] = useState(quantity)\n\n  const {\n    setFlashAttributes,\n    setFlashVisible,\n    setModalVisible,\n    setModalAttributes\n  } = useAppContext()\n\n  const {\n    schemeColorDarkest,\n    textColorPrimary,\n    hoverColorDark,\n    schemeColorDark,\n    hoverColorLight,\n    textColorSecondary,\n    borderColor,\n    schemeColorLightest,\n    textColorTertiary\n  } = useColorScheme()\n\n  const {\n    performShoppingListItemUpdate,\n    performShoppingListItemDestroy\n  } = useShoppingListsContext()\n\n  const mountedRef = useRef(true)\n  const iconsRef = useRef(null)\n  const editRef = useRef(null)\n  const deleteRef = useRef(null)\n  const incRef = useRef(null)\n  const decRef = useRef(null)\n\n  const refContains = (ref, el) => ref.current && (ref.current === el || ref.current.contains(el))\n  const editRefContains = el => refContains(editRef, el)\n  const deleteRefContains = el => refContains(deleteRef, el)\n  const incRefContains = el => refContains(incRef, el)\n  const decRefContains = el => refContains(decRef, el)\n  const iconContains = el => editRefContains(el) || deleteRefContains(el) || incRefContains(el) || decRefContains(el)\n  \n  const toggleDetails = e => {\n    if (!iconContains(e.target)) {\n      setToggleEvent(Date.now)\n      setCollapsed(!collapsed)\n    }\n  }\n\n  const displayFlash = (type, message, header = null) => {\n    if (mountedRef.current) {\n      setFlashAttributes({ type, message, header })\n      setFlashVisible(true)\n    }\n  }\n\n  const styleVars = {\n    '--main-color': schemeColorDark,\n    '--title-text-color': textColorSecondary,\n    '--border-color': borderColor,\n    '--body-background-color': schemeColorLightest,\n    '--body-text-color': textColorTertiary,\n    '--hover-color': hoverColorLight\n  }\n\n  const incrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity + 1\n\n    if (mountedRef.current) setCurrentQuantity(newQuantity)\n\n    const callbacks = {\n      onNotFound: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      },\n      onInternalServerError: () => {\n        setCurrentQuantity(oldQuantity)\n        setFlashVisible(true)\n      }\n    }\n\n    performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n  }\n\n  const decrementQuantity = () => {\n    const oldQuantity = currentQuantity\n    const newQuantity = currentQuantity - 1\n\n    if (newQuantity > 0) {\n      const callbacks = {\n        onNotFound: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        },\n        onInternalServerError: () => {\n          setCurrentQuantity(oldQuantity)\n          setFlashVisible(true)\n        }\n      }\n\n      setCurrentQuantity(newQuantity)\n      performShoppingListItemUpdate(itemId, { quantity: newQuantity }, callbacks)\n    } else if (newQuantity === 0) {\n      const confirmed = window.confirm(\"Item quantity must be greater than zero. Delete the item instead?\")\n\n      if (confirmed) {\n        performShoppingListItemDestroy(itemId, () => { mountedRef.current = false })\n      } else {\n        displayFlash('info', 'Your item was not deleted.')\n      }\n    }\n  }\n\n  const destroyItem = () => {\n    const confirmed = window.confirm(\"Destroy shopping list item? Your aggregate list will be updated to reflect the change. This action cannot be undone.\")\n\n    if (confirmed) {\n      const callbacks = {\n        onSuccess: () => mountedRef.current = false,\n        onUnauthorized: () => mountedRef.current = false,\n        onNotFound: () => setFlashVisible(true),\n        onInternalServerError: () => setFlashVisible(true)\n      }\n\n      performShoppingListItemDestroy(itemId, callbacks)\n    } else {\n      displayFlash('info', 'Your item was not deleted.')\n    }\n  }\n\n  const showEditForm = () => {\n    if (mountedRef.current) {\n      setFlashVisible(false)\n\n      const Tag = withModal(ShoppingListItemEditForm)\n\n      setModalAttributes({\n        Tag,\n        props: {\n          title: description,\n          subtitle: `On list \"${listTitle}\"`,\n          buttonColor: {\n            schemeColorDarkest,\n            hoverColorDark,\n            borderColor,\n            textColorPrimary\n          },\n          currentAttributes: {\n            id: itemId,\n            quantity,\n            notes,\n            description\n          }\n        }\n      })\n\n      setModalVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (mountedRef.current) setCurrentQuantity(quantity)\n  }, [quantity])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={styleVars}>\n      <div className={styles.toggle} onClick={toggleDetails}>\n        <span className={classNames(styles.header, { [styles.headerEditable]: canEdit })}>\n          {canEdit &&\n            <span className={styles.editIcons} ref={iconsRef}>\n              <button className={styles.icon} ref={deleteRef} onClick={destroyItem} data-testid='destroy-item'>\n                <FontAwesomeIcon className={classNames(styles.fa, styles.destroyIcon)} icon={faTimes} />\n              </button>\n              <button className={styles.icon} ref={editRef} onClick={showEditForm} data-testid='edit-item'>\n                <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n              </button>\n            </span>}\n          <h4 className={styles.description}>{description}</h4>\n        </span>\n        <span className={styles.quantity}>\n          {canEdit && <button className={styles.icon} ref={incRef} onClick={incrementQuantity} data-testid='incrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleUp} />\n          </button>}\n          <div className={styles.quantityContent}>\n            {currentQuantity}\n          </div>\n          {canEdit && <button className={styles.icon} ref={decRef} onClick={decrementQuantity} data-testid='decrementer'>\n            <FontAwesomeIcon className={styles.fa} icon={faAngleDown} />\n          </button>}\n        </span>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <p className={styles.notes}>{notes || 'No details available'}</p>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItem.propTypes = {\n  itemId: PropTypes.number.isRequired,\n  listTitle: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  description: PropTypes.string.isRequired,\n  quantity: PropTypes.number.isRequired,\n  notes: PropTypes.string\n}\n\nexport default ShoppingListItem\n","import React, { useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport SlideToggle from 'react-slide-toggle'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport styles from './shoppingListItemCreateForm.module.css'\n\nconst ShoppingListItemCreateForm = ({ listId }) => {\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [collapsed, setCollapsed] = useState(true)\n  const { setFlashVisible } = useAppContext()\n  const { performShoppingListItemCreate } = useShoppingListsContext()\n  const {\n    schemeColorDark,\n    hoverColorLight,\n    schemeColorLightest,\n    borderColor,\n    textColorSecondary,\n    textColorTertiary\n  } = useColorScheme()\n\n  const formRef = useRef(null)\n\n  const colorVars = {\n    '--base-color': schemeColorDark,\n    '--hover-color': hoverColorLight,\n    '--body-color': schemeColorLightest,\n    '--border-color': borderColor,\n    '--text-color-main': textColorSecondary,\n    '--text-color-secondary': textColorTertiary\n  }\n\n  const toggleForm = () => {\n    setToggleEvent(Date.now)\n    setCollapsed(!collapsed)\n  }\n\n  const createShoppingListItem = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const description = e.target.elements.description.value\n    const quantity = parseInt(e.target.elements.quantity.value)\n    const notes = e.target.elements.notes.value\n    const attrs = { description, quantity, notes }\n\n    const resetToggleAndDisplayFlash = () => {\n      formRef.current.reset()\n      toggleForm()\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onSuccess: resetToggleAndDisplayFlash,\n      onNotFound: resetToggleAndDisplayFlash,\n      onUnprocessableEntity: () => setFlashVisible(true),\n      onInternalServerError: resetToggleAndDisplayFlash\n    }\n\n    performShoppingListItemCreate(listId, attrs, callbacks)\n  }\n\n  return(\n    <div className={classNames(styles.root, { [styles.collapsed]: collapsed })} style={colorVars}>\n      <div className={styles.triggerContainer}>\n        <button className={styles.triggerButton} onClick={toggleForm}>\n          Add item to list...\n        </button>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            <form className={styles.form} ref={formRef} onSubmit={createShoppingListItem}>\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Description</label>\n                <input className={styles.input} type='text' name='description' placeholder='Description' required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Quantity</label>\n                <input className={styles.input} type='number' inputMode='numeric' min={1} name='quantity' defaultValue={1} required />\n              </fieldset>\n\n              <fieldset className={styles.fieldset}>\n                <label className={styles.label}>Notes</label>\n                <input className={styles.input} type='text' name='notes' placeholder='Notes' />\n              </fieldset>\n\n              <button className={styles.submit} type='submit'>Add to List</button>\n            </form>\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingListItemCreateForm.propTypes = {\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingListItemCreateForm\n","import React, { useState, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit } from '@fortawesome/free-regular-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport SlideToggle from 'react-slide-toggle'\nimport titlecase from '../../utils/titlecase'\nimport useComponentVisible from '../../hooks/useComponentVisible'\nimport useSize from '../../hooks/useSize'\nimport { useAppContext, useColorScheme, useShoppingListsContext } from '../../hooks/contexts'\nimport ShoppingListEditForm from '../shoppingListEditForm/shoppingListEditForm'\nimport ShoppingListItem from '../shoppingListItem/shoppingListItem'\nimport styles from './shoppingList.module.css'\nimport ShoppingListItemCreateForm from '../shoppingListItemCreateForm/shoppingListItemCreateForm'\n\nconst isValid = str => (\n  // The title is valid if the entire string matches the regex. It can\n  // contain alphanumeric characters, spaces, and leading or trailing\n  // whitespace (which will be stripped before it is saved in the DB).\n  // Any other characters (including non-space whitespace characters\n  // that are not leading or trailing) will cause a validation error\n  // on the backend. The title of a regular list may also not be \"All\n  // Items\".\n  !!str && str.match(/^\\s*[a-z0-9 ]*\\s*$/i) && str.match(/^\\s*[a-z0-9 ]*\\s*$/i)[0] === str && str.toLowerCase() !== 'all items'\n)\n\nconst ShoppingList = ({ canEdit = true, listId, title}) => {\n  const DELETE_CONFIRMATION = `Are you sure you want to delete the list \"${title}\"? You will also lose any list items on the list. This action cannot be undone.`\n\n  const [toggleEvent, setToggleEvent] = useState(0)\n  const [currentTitle, setCurrentTitle] = useState(title)\n  const [maxEditFormWidth, setMaxEditFormWidth] = useState(null)\n  const [listItems, setListItems] = useState([])\n\n  const mountedRef = useRef(true)\n  const slideTriggerRef = useRef(null)\n  const deleteTriggerRef = useRef(null)\n  const iconsRef = useRef(null)\n\n  const size = useSize(slideTriggerRef)\n\n  const { componentRef, triggerRef, isComponentVisible, setIsComponentVisible } = useComponentVisible()\n\n  const { setFlashAttributes, setFlashVisible } = useAppContext()\n\n  const {\n    shoppingLists,\n    performShoppingListUpdate,\n    performShoppingListDestroy,\n  } = useShoppingListsContext()\n\n  const originalTitle = title // to switch back in case of API error on update\n\n  const slideTriggerRefContains = element => slideTriggerRef.current && (slideTriggerRef.current === element || slideTriggerRef.current.contains(element))\n  const triggerRefContains = element => triggerRef.current && (triggerRef.current === element || triggerRef.current.contains(element))\n  const deleteTriggerRefContains = element => deleteTriggerRef.current && (deleteTriggerRef.current === element || deleteTriggerRef.current.contains(element))\n  const componentRefContains = element => componentRef.current && (componentRef.current === element || componentRef.current.contains(element))\n  const shouldToggleListItems = element => (slideTriggerRefContains(element) && !triggerRefContains(element)) && !componentRefContains(element) && !deleteTriggerRefContains(element)\n\n  const toggleListItems = e => {\n    if (shouldToggleListItems(e.target)) {\n      setToggleEvent(Date.now)\n    }\n  }\n\n  const {\n    schemeColorDarkest,\n    borderColor,\n    textColorPrimary,\n    textColorSecondary,\n    hoverColorDark,\n    schemeColorDark,\n    schemeColorLightest\n  } = useColorScheme()\n\n  const styleVars = {\n    '--scheme-color': schemeColorDarkest,\n    '--border-color': borderColor,\n    '--text-color-primary': textColorPrimary,\n    '--text-color-secondary': textColorSecondary,\n    '--hover-color': hoverColorDark,\n    '--scheme-color-lighter': schemeColorDark,\n    '--scheme-color-lightest': schemeColorLightest,\n    '--max-title-width': `${maxEditFormWidth - 32}px`\n  }\n\n  const submitAndHideForm = e => {\n    e.preventDefault()\n\n    setFlashVisible(false)\n\n    const newTitle = e.nativeEvent.target.children[0].defaultValue\n\n    if (!newTitle || isValid(newTitle)) setCurrentTitle(titlecase(newTitle))\n\n    const resetTitleAndDisplayError = () => {\n      setCurrentTitle(originalTitle)\n      setFlashVisible(true)\n    }\n\n    const callbacks = {\n      onNotFound: resetTitleAndDisplayError,\n      onUnprocessableEntity: resetTitleAndDisplayError,\n      onInternalServerError: resetTitleAndDisplayError\n    }\n\n    performShoppingListUpdate(listId, newTitle, callbacks)\n    setIsComponentVisible(false)\n  }\n\n  const deleteList = e => {\n    const confirmed = window.confirm(DELETE_CONFIRMATION)\n\n    setFlashVisible(false)\n\n    if (confirmed) {\n      const onSuccess = () => {\n        setFlashVisible(true)\n        mountedRef.current = false\n      }\n\n      const onError = () => setFlashVisible(true)\n\n      performShoppingListDestroy(listId, { onSuccess, onNotFound: onError, onInternalServerError: onError })\n    } else if (mountedRef.current) {\n      setFlashAttributes({\n        type: 'info',\n        message: 'Your list was not deleted.'\n      })\n\n      setFlashVisible(true)\n    }\n  }\n\n  useEffect(() => {\n    if (!shoppingLists || !mountedRef.current) return // it'll run again when they populate\n\n    const items = shoppingLists.find(obj => obj.id === listId).list_items\n\n    setListItems([...items])\n  }, [shoppingLists, listId])\n\n  useEffect(() => {\n    if (!size || !iconsRef.current || !mountedRef.current) return\n\n    setMaxEditFormWidth(size.width - iconsRef.current.offsetWidth - 16)\n  }, [size])\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <div className={styles.root} style={styleVars}>\n      <div className={styles.titleContainer}>\n        <div className={styles.trigger} ref={slideTriggerRef} onClick={toggleListItems}>\n          {canEdit &&\n          <span className={styles.editIcons} ref={iconsRef}>\n            <div className={styles.icon} ref={deleteTriggerRef} onClick={deleteList} data-testid='delete-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faTimes} />\n            </div>\n            <div className={styles.icon} ref={triggerRef} data-testid='edit-shopping-list'>\n              <FontAwesomeIcon className={styles.fa} icon={faEdit} />\n            </div>\n          </span>}\n          {canEdit && isComponentVisible ?\n            <ShoppingListEditForm\n              formRef={componentRef}\n              maxTotalWidth={maxEditFormWidth}\n              className={styles.form}\n              title={title}\n              onSubmit={submitAndHideForm}\n            /> :\n            <h3 className={styles.title}>{currentTitle}</h3>}\n        </div>\n      </div>\n      <SlideToggle toggleEvent={toggleEvent} collapsed>\n        {({ setCollapsibleElement }) => (\n          <div className={styles.collapsible} ref={setCollapsibleElement}>\n            {!canEdit && listItems.length === 0 && <div className={styles.emptyList}>You have no shopping list items.</div>}\n            {canEdit && <ShoppingListItemCreateForm listId={listId} />}\n            {listItems && listItems.length > 0 && listItems.map(({ id, description, quantity, notes }) => {\n              const itemKey = `${title.toLowerCase().replace(' ', '-')}-${id}`\n\n              return(\n                <ShoppingListItem\n                  key={itemKey}\n                  itemId={id}\n                  listTitle={title}\n                  canEdit={canEdit}\n                  description={description}\n                  quantity={quantity}\n                  notes={notes}\n                />\n              )\n            })}\n          </div>\n        )}\n      </SlideToggle>\n    </div>\n  )\n}\n\nShoppingList.propTypes = {\n  title: PropTypes.string.isRequired,\n  canEdit: PropTypes.bool,\n  listId: PropTypes.number.isRequired\n}\n\nexport default ShoppingList\n","import React from 'react'\nimport colorSchemes, { YELLOW } from '../../utils/colorSchemes'\nimport { useAppContext, useGamesContext, useShoppingListsContext } from '../../hooks/contexts'\nimport withModal from '../../hocs/withModal'\nimport { ColorProvider } from '../../contexts/colorContext'\nimport { LOADING, DONE, ERROR } from '../../utils/loadingStates'\nimport Loading from '../loading/loading'\nimport LoadingError from '../loadingError/loadingError'\nimport ShoppingList from '../shoppingList/shoppingList'\nimport ModalGameForm from '../modalGameForm/modalGameForm'\nimport styles from './shoppingListsPageContent.module.css'\n\nconst ShoppingListsPageContent = () => {\n  const { setModalAttributes, setModalVisible } = useAppContext()\n  const { games, gameLoadingState } = useGamesContext()\n  const { shoppingLists, shoppingListLoadingState } = useShoppingListsContext()\n\n  /*\n   *\n   * Define click handler\n   *\n   */\n\n  const showGameForm = e => {\n    e.preventDefault()\n\n    setModalAttributes({\n      Tag: withModal(ModalGameForm),\n      props: {\n        title: 'Create Game',\n        type: 'create'\n      }\n    })\n\n    setModalVisible(true)\n  }\n\n  /*\n   *\n   * Define possible states that affect content\n   * \n   */\n\n  const listsLoadedAndNotEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length > 0\n  const listsLoadedAndEmpty = shoppingLists && shoppingListLoadingState === DONE && shoppingLists.length === 0\n\n  /*\n   *\n   * Return appropriate values for the state the component is in\n   * \n   */\n  if (gameLoadingState === DONE && !games.length) {\n    return(\n      <p className={styles.noLists}>\n        You need a game to use the shopping lists feature. <button className={styles.link} onClick={showGameForm}>Create a game</button> to get started.\n      </p>\n    )\n  } else if (listsLoadedAndNotEmpty) {\n    return(\n      <>\n        {shoppingLists.map(({ id, title, aggregate }, index) => {\n\n          // If there are more lists than colour schemes, cycle through the colour schemes\n          const colorSchemesIndex = index < colorSchemes.length ? index : index % colorSchemes.length\n          const colorScheme = colorSchemes[colorSchemesIndex]\n          const listKey = title.toLowerCase().replace(' ', '-')\n\n          return (\n            <ColorProvider key={listKey} colorScheme={colorScheme}>\n              <div className={styles.shoppingList}>\n                <ShoppingList\n                  canEdit={!aggregate}\n                  listId={id}\n                  title={title}\n                />\n              </div>\n            </ColorProvider>\n          )\n        })}\n      </>\n    )\n  } else if (listsLoadedAndEmpty) {\n    return <p className={styles.noLists}>This game has no shopping lists.</p>\n  } else if (shoppingListLoadingState === LOADING) {\n    return <Loading className={styles.loading} color={YELLOW.schemeColorDarkest} height='15%' width='15%' />\n  } else if (gameLoadingState === ERROR || shoppingListLoadingState === ERROR) {\n    // It's possible both are errored but we'll worry about games first\n    const name = gameLoadingState === ERROR ? 'games' : 'shopping lists'\n    return <LoadingError modelName={name} />\n  } else {\n    return null\n  }\n}\n\nexport default ShoppingListsPageContent\n","import React, { useEffect, useRef } from 'react'\nimport { useAppContext, useShoppingListsContext } from '../../hooks/contexts'\nimport { LOADING, ERROR } from '../../utils/loadingStates'\nimport DashboardLayout from '../../layouts/dashboardLayout'\nimport FlashMessage from '../../components/flashMessage/flashMessage'\nimport ShoppingListCreateForm from '../../components/shoppingListCreateForm/shoppingListCreateForm'\nimport ShoppingListsPageContent from '../../components/shoppingListsPageContent/shoppingListsPageContent'\nimport styles from './shoppingListsPage.module.css'\n\nconst ShoppingListsPage = () => {\n  const {  modalVisible, modalAttributes } = useAppContext()\n  const { shoppingListLoadingState } = useShoppingListsContext()\n\n  const shouldDisableForm = shoppingListLoadingState === LOADING || shoppingListLoadingState === ERROR\n\n  const mountedRef = useRef(true)\n\n  useEffect(() => (\n    () => mountedRef.current = false\n  ), [])\n\n  return(\n    <DashboardLayout title='Your Shopping Lists' includeGameSelect>\n      {modalVisible && <modalAttributes.Tag {...modalAttributes.props} />}\n      <FlashMessage />\n      <div className={styles.createForm}><ShoppingListCreateForm disabled={shouldDisableForm} /></div>\n      <ShoppingListsPageContent /> {/* This component implements its own loading & error handling behaviour */}\n    </DashboardLayout>\n  )\n}\n\nexport default ShoppingListsPage\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useAppContext } from '../../hooks/contexts'\nimport paths from '../../routing/paths'\nimport styles from './notFoundPage.module.css'\n\nconst NotFoundPage = () => {\n  const { token } = useAppContext()\n\n  return(\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <h1 className={styles.header}>SIM: Page Not Found</h1>\n        <Link className={styles.link} to={token ? paths.dashboard.main : paths.home}>Go Back</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Helmet } from 'react-helmet-async'\nimport { AppProvider } from '../contexts/appContext'\nimport { GamesProvider } from '../contexts/gamesContext'\nimport { ShoppingListsProvider } from '../contexts/shoppingListsContext'\nimport HomePage from '../pages/homePage/homePage'\nimport LoginPage from '../pages/loginPage/loginPage'\nimport DashboardPage from '../pages/dashboardPage/dashboardPage'\nimport GamesPage from '../pages/gamesPage/gamesPage'\nimport InventoryPage from '../pages/inventoryPage/inventoryPage'\nimport ShoppingListsPage from '../pages/shoppingListsPage/shoppingListsPage'\nimport NotFoundPage from '../pages/notFoundPage/notFoundPage'\nimport paths from './paths'\n\nconst siteTitle = 'Skyrim Inventory Management |'\n\nconst pages = [\n  {\n    pageId: 'home',\n    title: `${siteTitle} Home`,\n    description: 'Manage your inventory across multiple properties in Skyrim',\n    jsx: <HomePage />,\n    path: paths.home\n  },\n  {\n    pageId: 'login',\n    title: `${siteTitle} Login`,\n    description: 'Log into Skyrim Inventory Management using your Google account',\n    jsx: <LoginPage />,\n    path: paths.login\n  },\n  {\n    pageId: 'dashboard',\n    title: `${siteTitle} Dashboard`,\n    description: 'Skyrim Inventory Management User Dashboard',\n    jsx: <DashboardPage />,\n    path: paths.dashboard.main\n  },\n  {\n    pageId: 'games',\n    title: `${siteTitle} Your Games`,\n    description: 'Manage Skyrim Games',\n    jsx: <GamesProvider><GamesPage /></GamesProvider>,\n    path: paths.dashboard.games\n  },\n  {\n    pageId: 'shoppingLists',\n    title: `${siteTitle} Manage Shopping Lists`,\n    description: 'Manage Skyrim Shopping Lists',\n    jsx: <GamesProvider><ShoppingListsProvider><ShoppingListsPage /></ShoppingListsProvider></GamesProvider>,\n    path: paths.dashboard.shoppingLists\n  },\n  {\n    pageId: 'inventory',\n    title: `${siteTitle} Manage Inventory`,\n    description: 'Manage Skyrim Inventory',\n    jsx: <InventoryPage />\n  }\n]\n\nconst PageRoutes = () => (\n  <Switch>\n    {pages.map(\n      ({ pageId, title, description, jsx, path }) => {\n        return(\n          <Route exact path={path} key={pageId}>\n            <Helmet>\n              <html lang='en' />\n\n              <title>{title}</title>\n              <meta name='description' content={description} />\n            </Helmet>\n            <AppProvider>\n              {jsx}\n            </AppProvider>\n          </Route>\n        )\n      }\n    )}\n    <Route key='notFound'>\n      <Helmet>\n        <html lang='en' />\n\n        <title>Skyrim Inventory Management | Page Not Found</title>\n        <meta name='description' content='Skyrim Inventory Management could not find the page you were looking for' />\n      </Helmet>\n      <AppProvider>\n        <NotFoundPage />\n      </AppProvider>\n    </Route>\n  </Switch>\n)\n\nexport default PageRoutes\n","import React from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\nimport PageRoutes from './routing/pageRoutes'\n\nconst App = () => {\n  return(\n    <Router basename={process.env.PUBLIC_URL}>\n      <HelmetProvider>\n        <PageRoutes />\n      </HelmetProvider>\n    </Router>\n  )\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}